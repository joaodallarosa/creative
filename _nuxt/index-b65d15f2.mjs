var Yi=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function cc(S){return S&&S.__esModule&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S}function Zi(S){throw new Error('Could not dynamically require "'+S+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ou={exports:{}};/*! p5.js v1.4.1 February 02, 2022 */(function(S,e){(function(s){S.exports=s()})(function(){var s;return function t(g,m,p){function r(d,c){if(!m[d]){if(!g[d]){var i=typeof Zi=="function"&&Zi;if(!c&&i)return i(d,!0);if(h)return h(d,!0);var n=new Error("Cannot find module '"+d+"'");throw n.code="MODULE_NOT_FOUND",n}var o=m[d]={exports:{}};g[d][0].call(o.exports,function(l){return r(g[d][1][l]||l)},o,o.exports,t,g,m,p)}return m[d].exports}for(var h=typeof Zi=="function"&&Zi,u=0;u<p.length;u++)r(p[u]);return r}({1:[function(t,g,m){m.byteLength=function(o){var l=i(o),a=l[0],f=l[1];return 3*(a+f)/4-f},m.toByteArray=function(o){var l,a,f=i(o),v=f[0],b=f[1],_=new h(function(C,A){return 3*(C+A)/4-A}(v,b)),w=0,E=0<b?v-4:v;for(a=0;a<E;a+=4)l=r[o.charCodeAt(a)]<<18|r[o.charCodeAt(a+1)]<<12|r[o.charCodeAt(a+2)]<<6|r[o.charCodeAt(a+3)],_[w++]=l>>16&255,_[w++]=l>>8&255,_[w++]=255&l;return b===2&&(l=r[o.charCodeAt(a)]<<2|r[o.charCodeAt(a+1)]>>4,_[w++]=255&l),b===1&&(l=r[o.charCodeAt(a)]<<10|r[o.charCodeAt(a+1)]<<4|r[o.charCodeAt(a+2)]>>2,_[w++]=l>>8&255,_[w++]=255&l),_},m.fromByteArray=function(o){for(var l,a=o.length,f=a%3,v=[],b=0,_=a-f;b<_;b+=16383)v.push(n(o,b,_<b+16383?_:b+16383));return f==1?(l=o[a-1],v.push(p[l>>2]+p[l<<4&63]+"==")):f==2&&(l=(o[a-2]<<8)+o[a-1],v.push(p[l>>10]+p[l>>4&63]+p[l<<2&63]+"=")),v.join("")};for(var p=[],r=[],h=typeof Uint8Array!="undefined"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,c=u.length;d<c;++d)p[d]=u[d],r[u.charCodeAt(d)]=d;function i(o){var l=o.length;if(0<l%4)throw new Error("Invalid string. Length must be a multiple of 4");var a=o.indexOf("=");return a===-1&&(a=l),[a,a===l?0:4-a%4]}function n(o,l,a){for(var f,v,b=[],_=l;_<a;_+=3)f=(o[_]<<16&16711680)+(o[_+1]<<8&65280)+(255&o[_+2]),b.push(p[(v=f)>>18&63]+p[v>>12&63]+p[v>>6&63]+p[63&v]);return b.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],2:[function(t,g,m){},{}],3:[function(t,g,m){arguments[4][2][0].apply(m,arguments)},{dup:2}],4:[function(t,g,m){(function(i){var r=t("base64-js"),h=t("ieee754"),u=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;m.Buffer=i,m.SlowBuffer=function(j){return+j!=j&&(j=0),i.alloc(+j)},m.INSPECT_MAX_BYTES=50;var d=2147483647;function c(j){if(d<j)throw new RangeError('The value "'+j+'" is invalid for option "size"');var B=new Uint8Array(j);return Object.setPrototypeOf(B,i.prototype),B}function i(j,B,G){if(typeof j!="number")return n(j,B,G);if(typeof B=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return l(j)}function n(j,B,G){if(typeof j=="string")return function(J,fe){if(typeof fe=="string"&&fe!==""||(fe="utf8"),!i.isEncoding(fe))throw new TypeError("Unknown encoding: "+fe);var oe=0|v(J,fe),X=c(oe),W=X.write(J,fe);return W!==oe&&(X=X.slice(0,W)),X}(j,B);if(ArrayBuffer.isView(j))return a(j);if(j==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(de(j,ArrayBuffer)||j&&de(j.buffer,ArrayBuffer))return function(J,fe,oe){if(fe<0||J.byteLength<fe)throw new RangeError('"offset" is outside of buffer bounds');if(J.byteLength<fe+(oe||0))throw new RangeError('"length" is outside of buffer bounds');var X;return X=fe===void 0&&oe===void 0?new Uint8Array(J):oe===void 0?new Uint8Array(J,fe):new Uint8Array(J,fe,oe),Object.setPrototypeOf(X,i.prototype),X}(j,B,G);if(typeof j=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ne=j.valueOf&&j.valueOf();if(ne!=null&&ne!==j)return i.from(ne,B,G);var Y=function(J){if(i.isBuffer(J)){var fe=0|f(J.length),oe=c(fe);return oe.length===0||J.copy(oe,0,0,fe),oe}if(J.length!==void 0)return typeof J.length!="number"||re(J.length)?c(0):a(J);if(J.type==="Buffer"&&Array.isArray(J.data))return a(J.data)}(j);if(Y)return Y;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof j[Symbol.toPrimitive]=="function")return i.from(j[Symbol.toPrimitive]("string"),B,G);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}function o(j){if(typeof j!="number")throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function l(j){return o(j),c(j<0?0:0|f(j))}function a(j){for(var B=j.length<0?0:0|f(j.length),G=c(B),ne=0;ne<B;ne+=1)G[ne]=255&j[ne];return G}function f(j){if(d<=j)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return 0|j}function v(j,B){if(i.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||de(j,ArrayBuffer))return j.byteLength;if(typeof j!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);var G=j.length,ne=2<arguments.length&&arguments[2]===!0;if(!ne&&G===0)return 0;for(var Y=!1;;)switch(B){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":return $(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*G;case"hex":return G>>>1;case"base64":return se(j).length;default:if(Y)return ne?-1:$(j).length;B=(""+B).toLowerCase(),Y=!0}}function b(j,B,G){var ne=j[B];j[B]=j[G],j[G]=ne}function _(j,B,G,ne,Y){if(j.length===0)return-1;if(typeof G=="string"?(ne=G,G=0):2147483647<G?G=2147483647:G<-2147483648&&(G=-2147483648),re(G=+G)&&(G=Y?0:j.length-1),G<0&&(G=j.length+G),G>=j.length){if(Y)return-1;G=j.length-1}else if(G<0){if(!Y)return-1;G=0}if(typeof B=="string"&&(B=i.from(B,ne)),i.isBuffer(B))return B.length===0?-1:w(j,B,G,ne,Y);if(typeof B=="number")return B&=255,typeof Uint8Array.prototype.indexOf=="function"?Y?Uint8Array.prototype.indexOf.call(j,B,G):Uint8Array.prototype.lastIndexOf.call(j,B,G):w(j,[B],G,ne,Y);throw new TypeError("val must be string, number or Buffer")}function w(j,B,G,ne,Y){var J,fe=1,oe=j.length,X=B.length;if(ne!==void 0&&((ne=String(ne).toLowerCase())==="ucs2"||ne==="ucs-2"||ne==="utf16le"||ne==="utf-16le")){if(j.length<2||B.length<2)return-1;oe/=fe=2,X/=2,G/=2}function W(Le,ce){return fe===1?Le[ce]:Le.readUInt16BE(ce*fe)}if(Y){var pe=-1;for(J=G;J<oe;J++)if(W(j,J)===W(B,pe===-1?0:J-pe)){if(pe===-1&&(pe=J),J-pe+1===X)return pe*fe}else pe!==-1&&(J-=J-pe),pe=-1}else for(oe<G+X&&(G=oe-X),J=G;0<=J;J--){for(var Se=!0,Re=0;Re<X;Re++)if(W(j,J+Re)!==W(B,Re)){Se=!1;break}if(Se)return J}return-1}function E(j,B,G,ne){G=Number(G)||0;var Y=j.length-G;ne?Y<(ne=Number(ne))&&(ne=Y):ne=Y;var J=B.length;J/2<ne&&(ne=J/2);for(var fe=0;fe<ne;++fe){var oe=parseInt(B.substr(2*fe,2),16);if(re(oe))return fe;j[G+fe]=oe}return fe}function C(j,B,G,ne){return z(function(Y){for(var J=[],fe=0;fe<Y.length;++fe)J.push(255&Y.charCodeAt(fe));return J}(B),j,G,ne)}function A(j,B,G,ne){return z(function(Y,J){for(var fe,oe,X,W=[],pe=0;pe<Y.length&&!((J-=2)<0);++pe)fe=Y.charCodeAt(pe),oe=fe>>8,X=fe%256,W.push(X),W.push(oe);return W}(B,j.length-G),j,G,ne)}function L(j,B,G){return B===0&&G===j.length?r.fromByteArray(j):r.fromByteArray(j.slice(B,G))}function P(j,B,G){G=Math.min(j.length,G);for(var ne=[],Y=B;Y<G;){var J,fe,oe,X,W=j[Y],pe=null,Se=239<W?4:223<W?3:191<W?2:1;if(Y+Se<=G)switch(Se){case 1:W<128&&(pe=W);break;case 2:(192&(J=j[Y+1]))==128&&127<(X=(31&W)<<6|63&J)&&(pe=X);break;case 3:J=j[Y+1],fe=j[Y+2],(192&J)==128&&(192&fe)==128&&2047<(X=(15&W)<<12|(63&J)<<6|63&fe)&&(X<55296||57343<X)&&(pe=X);break;case 4:J=j[Y+1],fe=j[Y+2],oe=j[Y+3],(192&J)==128&&(192&fe)==128&&(192&oe)==128&&65535<(X=(15&W)<<18|(63&J)<<12|(63&fe)<<6|63&oe)&&X<1114112&&(pe=X)}pe===null?(pe=65533,Se=1):65535<pe&&(pe-=65536,ne.push(pe>>>10&1023|55296),pe=56320|1023&pe),ne.push(pe),Y+=Se}return function(Re){var Le=Re.length;if(Le<=R)return String.fromCharCode.apply(String,Re);for(var ce="",ue=0;ue<Le;)ce+=String.fromCharCode.apply(String,Re.slice(ue,ue+=R));return ce}(ne)}m.kMaxLength=d,(i.TYPED_ARRAY_SUPPORT=function(){try{var j=new Uint8Array(1),B={foo:function(){return 42}};return Object.setPrototypeOf(B,Uint8Array.prototype),Object.setPrototypeOf(j,B),j.foo()===42}catch{return!1}}())||typeof console=="undefined"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),typeof Symbol!="undefined"&&Symbol.species!=null&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(j,B,G){return n(j,B,G)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(j,B,G){return Y=B,J=G,o(ne=j),ne<=0?c(ne):Y!==void 0?typeof J=="string"?c(ne).fill(Y,J):c(ne).fill(Y):c(ne);var ne,Y,J},i.allocUnsafe=function(j){return l(j)},i.allocUnsafeSlow=function(j){return l(j)},i.isBuffer=function(j){return j!=null&&j._isBuffer===!0&&j!==i.prototype},i.compare=function(j,B){if(de(j,Uint8Array)&&(j=i.from(j,j.offset,j.byteLength)),de(B,Uint8Array)&&(B=i.from(B,B.offset,B.byteLength)),!i.isBuffer(j)||!i.isBuffer(B))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===B)return 0;for(var G=j.length,ne=B.length,Y=0,J=Math.min(G,ne);Y<J;++Y)if(j[Y]!==B[Y]){G=j[Y],ne=B[Y];break}return G<ne?-1:ne<G?1:0},i.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(j,B){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(j.length===0)return i.alloc(0);var G;if(B===void 0)for(G=B=0;G<j.length;++G)B+=j[G].length;var ne=i.allocUnsafe(B),Y=0;for(G=0;G<j.length;++G){var J=j[G];if(de(J,Uint8Array)&&(J=i.from(J)),!i.isBuffer(J))throw new TypeError('"list" argument must be an Array of Buffers');J.copy(ne,Y),Y+=J.length}return ne},i.byteLength=v,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var j=this.length;if(j%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var B=0;B<j;B+=2)b(this,B,B+1);return this},i.prototype.swap32=function(){var j=this.length;if(j%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var B=0;B<j;B+=4)b(this,B,B+3),b(this,B+1,B+2);return this},i.prototype.swap64=function(){var j=this.length;if(j%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var B=0;B<j;B+=8)b(this,B,B+7),b(this,B+1,B+6),b(this,B+2,B+5),b(this,B+3,B+4);return this},i.prototype.toLocaleString=i.prototype.toString=function(){var j=this.length;return j===0?"":arguments.length===0?P(this,0,j):function(B,G,ne){var Y=!1;if((G===void 0||G<0)&&(G=0),G>this.length||((ne===void 0||ne>this.length)&&(ne=this.length),ne<=0)||(ne>>>=0)<=(G>>>=0))return"";for(B=B||"utf8";;)switch(B){case"hex":return O(this,G,ne);case"utf8":case"utf-8":return P(this,G,ne);case"ascii":return N(this,G,ne);case"latin1":case"binary":return I(this,G,ne);case"base64":return L(this,G,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,G,ne);default:if(Y)throw new TypeError("Unknown encoding: "+B);B=(B+"").toLowerCase(),Y=!0}}.apply(this,arguments)},i.prototype.equals=function(j){if(!i.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j||i.compare(this,j)===0},i.prototype.inspect=function(){var j="",B=m.INSPECT_MAX_BYTES;return j=this.toString("hex",0,B).replace(/(.{2})/g,"$1 ").trim(),this.length>B&&(j+=" ... "),"<Buffer "+j+">"},u&&(i.prototype[u]=i.prototype.inspect),i.prototype.compare=function(j,B,G,ne,Y){if(de(j,Uint8Array)&&(j=i.from(j,j.offset,j.byteLength)),!i.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(B===void 0&&(B=0),G===void 0&&(G=j?j.length:0),ne===void 0&&(ne=0),Y===void 0&&(Y=this.length),B<0||G>j.length||ne<0||Y>this.length)throw new RangeError("out of range index");if(Y<=ne&&G<=B)return 0;if(Y<=ne)return-1;if(G<=B)return 1;if(this===j)return 0;for(var J=(Y>>>=0)-(ne>>>=0),fe=(G>>>=0)-(B>>>=0),oe=Math.min(J,fe),X=this.slice(ne,Y),W=j.slice(B,G),pe=0;pe<oe;++pe)if(X[pe]!==W[pe]){J=X[pe],fe=W[pe];break}return J<fe?-1:fe<J?1:0},i.prototype.includes=function(j,B,G){return this.indexOf(j,B,G)!==-1},i.prototype.indexOf=function(j,B,G){return _(this,j,B,G,!0)},i.prototype.lastIndexOf=function(j,B,G){return _(this,j,B,G,!1)},i.prototype.write=function(j,B,G,ne){if(B===void 0)ne="utf8",G=this.length,B=0;else if(G===void 0&&typeof B=="string")ne=B,G=this.length,B=0;else{if(!isFinite(B))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");B>>>=0,isFinite(G)?(G>>>=0,ne===void 0&&(ne="utf8")):(ne=G,G=void 0)}var Y=this.length-B;if((G===void 0||Y<G)&&(G=Y),0<j.length&&(G<0||B<0)||B>this.length)throw new RangeError("Attempt to write outside buffer bounds");ne=ne||"utf8";for(var J,fe,oe,X,W,pe,Se=!1;;)switch(ne){case"hex":return E(this,j,B,G);case"utf8":case"utf-8":return W=B,pe=G,z($(j,(X=this).length-W),X,W,pe);case"ascii":return C(this,j,B,G);case"latin1":case"binary":return C(this,j,B,G);case"base64":return J=this,fe=B,oe=G,z(se(j),J,fe,oe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,j,B,G);default:if(Se)throw new TypeError("Unknown encoding: "+ne);ne=(""+ne).toLowerCase(),Se=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function N(j,B,G){var ne="";G=Math.min(j.length,G);for(var Y=B;Y<G;++Y)ne+=String.fromCharCode(127&j[Y]);return ne}function I(j,B,G){var ne="";G=Math.min(j.length,G);for(var Y=B;Y<G;++Y)ne+=String.fromCharCode(j[Y]);return ne}function O(j,B,G){var ne=j.length;(!B||B<0)&&(B=0),(!G||G<0||ne<G)&&(G=ne);for(var Y="",J=B;J<G;++J)Y+=ie[j[J]];return Y}function U(j,B,G){for(var ne=j.slice(B,G),Y="",J=0;J<ne.length;J+=2)Y+=String.fromCharCode(ne[J]+256*ne[J+1]);return Y}function K(j,B,G){if(j%1!=0||j<0)throw new RangeError("offset is not uint");if(G<j+B)throw new RangeError("Trying to access beyond buffer length")}function ee(j,B,G,ne,Y,J){if(!i.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(Y<B||B<J)throw new RangeError('"value" argument is out of bounds');if(G+ne>j.length)throw new RangeError("Index out of range")}function H(j,B,G,ne){if(G+ne>j.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function te(j,B,G,ne,Y){return B=+B,G>>>=0,Y||H(j,0,G,4),h.write(j,B,G,ne,23,4),G+4}function Z(j,B,G,ne,Y){return B=+B,G>>>=0,Y||H(j,0,G,8),h.write(j,B,G,ne,52,8),G+8}i.prototype.slice=function(j,B){var G=this.length;(j=~~j)<0?(j+=G)<0&&(j=0):G<j&&(j=G),(B=B===void 0?G:~~B)<0?(B+=G)<0&&(B=0):G<B&&(B=G),B<j&&(B=j);var ne=this.subarray(j,B);return Object.setPrototypeOf(ne,i.prototype),ne},i.prototype.readUIntLE=function(j,B,G){j>>>=0,B>>>=0,G||K(j,B,this.length);for(var ne=this[j],Y=1,J=0;++J<B&&(Y*=256);)ne+=this[j+J]*Y;return ne},i.prototype.readUIntBE=function(j,B,G){j>>>=0,B>>>=0,G||K(j,B,this.length);for(var ne=this[j+--B],Y=1;0<B&&(Y*=256);)ne+=this[j+--B]*Y;return ne},i.prototype.readUInt8=function(j,B){return j>>>=0,B||K(j,1,this.length),this[j]},i.prototype.readUInt16LE=function(j,B){return j>>>=0,B||K(j,2,this.length),this[j]|this[j+1]<<8},i.prototype.readUInt16BE=function(j,B){return j>>>=0,B||K(j,2,this.length),this[j]<<8|this[j+1]},i.prototype.readUInt32LE=function(j,B){return j>>>=0,B||K(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+16777216*this[j+3]},i.prototype.readUInt32BE=function(j,B){return j>>>=0,B||K(j,4,this.length),16777216*this[j]+(this[j+1]<<16|this[j+2]<<8|this[j+3])},i.prototype.readIntLE=function(j,B,G){j>>>=0,B>>>=0,G||K(j,B,this.length);for(var ne=this[j],Y=1,J=0;++J<B&&(Y*=256);)ne+=this[j+J]*Y;return(Y*=128)<=ne&&(ne-=Math.pow(2,8*B)),ne},i.prototype.readIntBE=function(j,B,G){j>>>=0,B>>>=0,G||K(j,B,this.length);for(var ne=B,Y=1,J=this[j+--ne];0<ne&&(Y*=256);)J+=this[j+--ne]*Y;return(Y*=128)<=J&&(J-=Math.pow(2,8*B)),J},i.prototype.readInt8=function(j,B){return j>>>=0,B||K(j,1,this.length),128&this[j]?-1*(255-this[j]+1):this[j]},i.prototype.readInt16LE=function(j,B){j>>>=0,B||K(j,2,this.length);var G=this[j]|this[j+1]<<8;return 32768&G?4294901760|G:G},i.prototype.readInt16BE=function(j,B){j>>>=0,B||K(j,2,this.length);var G=this[j+1]|this[j]<<8;return 32768&G?4294901760|G:G},i.prototype.readInt32LE=function(j,B){return j>>>=0,B||K(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},i.prototype.readInt32BE=function(j,B){return j>>>=0,B||K(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},i.prototype.readFloatLE=function(j,B){return j>>>=0,B||K(j,4,this.length),h.read(this,j,!0,23,4)},i.prototype.readFloatBE=function(j,B){return j>>>=0,B||K(j,4,this.length),h.read(this,j,!1,23,4)},i.prototype.readDoubleLE=function(j,B){return j>>>=0,B||K(j,8,this.length),h.read(this,j,!0,52,8)},i.prototype.readDoubleBE=function(j,B){return j>>>=0,B||K(j,8,this.length),h.read(this,j,!1,52,8)},i.prototype.writeUIntLE=function(j,B,G,ne){j=+j,B>>>=0,G>>>=0,ne||ee(this,j,B,G,Math.pow(2,8*G)-1,0);var Y=1,J=0;for(this[B]=255&j;++J<G&&(Y*=256);)this[B+J]=j/Y&255;return B+G},i.prototype.writeUIntBE=function(j,B,G,ne){j=+j,B>>>=0,G>>>=0,ne||ee(this,j,B,G,Math.pow(2,8*G)-1,0);var Y=G-1,J=1;for(this[B+Y]=255&j;0<=--Y&&(J*=256);)this[B+Y]=j/J&255;return B+G},i.prototype.writeUInt8=function(j,B,G){return j=+j,B>>>=0,G||ee(this,j,B,1,255,0),this[B]=255&j,B+1},i.prototype.writeUInt16LE=function(j,B,G){return j=+j,B>>>=0,G||ee(this,j,B,2,65535,0),this[B]=255&j,this[B+1]=j>>>8,B+2},i.prototype.writeUInt16BE=function(j,B,G){return j=+j,B>>>=0,G||ee(this,j,B,2,65535,0),this[B]=j>>>8,this[B+1]=255&j,B+2},i.prototype.writeUInt32LE=function(j,B,G){return j=+j,B>>>=0,G||ee(this,j,B,4,4294967295,0),this[B+3]=j>>>24,this[B+2]=j>>>16,this[B+1]=j>>>8,this[B]=255&j,B+4},i.prototype.writeUInt32BE=function(j,B,G){return j=+j,B>>>=0,G||ee(this,j,B,4,4294967295,0),this[B]=j>>>24,this[B+1]=j>>>16,this[B+2]=j>>>8,this[B+3]=255&j,B+4},i.prototype.writeIntLE=function(j,B,G,ne){if(j=+j,B>>>=0,!ne){var Y=Math.pow(2,8*G-1);ee(this,j,B,G,Y-1,-Y)}var J=0,fe=1,oe=0;for(this[B]=255&j;++J<G&&(fe*=256);)j<0&&oe===0&&this[B+J-1]!==0&&(oe=1),this[B+J]=(j/fe>>0)-oe&255;return B+G},i.prototype.writeIntBE=function(j,B,G,ne){if(j=+j,B>>>=0,!ne){var Y=Math.pow(2,8*G-1);ee(this,j,B,G,Y-1,-Y)}var J=G-1,fe=1,oe=0;for(this[B+J]=255&j;0<=--J&&(fe*=256);)j<0&&oe===0&&this[B+J+1]!==0&&(oe=1),this[B+J]=(j/fe>>0)-oe&255;return B+G},i.prototype.writeInt8=function(j,B,G){return j=+j,B>>>=0,G||ee(this,j,B,1,127,-128),j<0&&(j=255+j+1),this[B]=255&j,B+1},i.prototype.writeInt16LE=function(j,B,G){return j=+j,B>>>=0,G||ee(this,j,B,2,32767,-32768),this[B]=255&j,this[B+1]=j>>>8,B+2},i.prototype.writeInt16BE=function(j,B,G){return j=+j,B>>>=0,G||ee(this,j,B,2,32767,-32768),this[B]=j>>>8,this[B+1]=255&j,B+2},i.prototype.writeInt32LE=function(j,B,G){return j=+j,B>>>=0,G||ee(this,j,B,4,2147483647,-2147483648),this[B]=255&j,this[B+1]=j>>>8,this[B+2]=j>>>16,this[B+3]=j>>>24,B+4},i.prototype.writeInt32BE=function(j,B,G){return j=+j,B>>>=0,G||ee(this,j,B,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[B]=j>>>24,this[B+1]=j>>>16,this[B+2]=j>>>8,this[B+3]=255&j,B+4},i.prototype.writeFloatLE=function(j,B,G){return te(this,j,B,!0,G)},i.prototype.writeFloatBE=function(j,B,G){return te(this,j,B,!1,G)},i.prototype.writeDoubleLE=function(j,B,G){return Z(this,j,B,!0,G)},i.prototype.writeDoubleBE=function(j,B,G){return Z(this,j,B,!1,G)},i.prototype.copy=function(j,B,G,ne){if(!i.isBuffer(j))throw new TypeError("argument should be a Buffer");if(G=G||0,ne||ne===0||(ne=this.length),B>=j.length&&(B=j.length),B=B||0,0<ne&&ne<G&&(ne=G),ne===G||j.length===0||this.length===0)return 0;if(B<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("sourceEnd out of bounds");ne>this.length&&(ne=this.length),j.length-B<ne-G&&(ne=j.length-B+G);var Y=ne-G;if(this===j&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(B,G,ne);else if(this===j&&G<B&&B<ne)for(var J=Y-1;0<=J;--J)j[J+B]=this[J+G];else Uint8Array.prototype.set.call(j,this.subarray(G,ne),B);return Y},i.prototype.fill=function(j,B,G,ne){if(typeof j=="string"){if(typeof B=="string"?(ne=B,B=0,G=this.length):typeof G=="string"&&(ne=G,G=this.length),ne!==void 0&&typeof ne!="string")throw new TypeError("encoding must be a string");if(typeof ne=="string"&&!i.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);if(j.length===1){var Y=j.charCodeAt(0);(ne==="utf8"&&Y<128||ne==="latin1")&&(j=Y)}}else typeof j=="number"?j&=255:typeof j=="boolean"&&(j=Number(j));if(B<0||this.length<B||this.length<G)throw new RangeError("Out of range index");if(G<=B)return this;var J;if(B>>>=0,G=G===void 0?this.length:G>>>0,typeof(j=j||0)=="number")for(J=B;J<G;++J)this[J]=j;else{var fe=i.isBuffer(j)?j:i.from(j,ne),oe=fe.length;if(oe===0)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(J=0;J<G-B;++J)this[J+B]=fe[J%oe]}return this};var ge=/[^+/0-9A-Za-z-_]/g;function $(j,B){var G;B=B||1/0;for(var ne=j.length,Y=null,J=[],fe=0;fe<ne;++fe){if(55295<(G=j.charCodeAt(fe))&&G<57344){if(!Y){if(56319<G){-1<(B-=3)&&J.push(239,191,189);continue}if(fe+1===ne){-1<(B-=3)&&J.push(239,191,189);continue}Y=G;continue}if(G<56320){-1<(B-=3)&&J.push(239,191,189),Y=G;continue}G=65536+(Y-55296<<10|G-56320)}else Y&&-1<(B-=3)&&J.push(239,191,189);if(Y=null,G<128){if(--B<0)break;J.push(G)}else if(G<2048){if((B-=2)<0)break;J.push(G>>6|192,63&G|128)}else if(G<65536){if((B-=3)<0)break;J.push(G>>12|224,G>>6&63|128,63&G|128)}else{if(!(G<1114112))throw new Error("Invalid code point");if((B-=4)<0)break;J.push(G>>18|240,G>>12&63|128,G>>6&63|128,63&G|128)}}return J}function se(j){return r.toByteArray(function(B){if((B=(B=B.split("=")[0]).trim().replace(ge,"")).length<2)return"";for(;B.length%4!=0;)B+="=";return B}(j))}function z(j,B,G,ne){for(var Y=0;Y<ne&&!(Y+G>=B.length||Y>=j.length);++Y)B[Y+G]=j[Y];return Y}function de(j,B){return j instanceof B||j!=null&&j.constructor!=null&&j.constructor.name!=null&&j.constructor.name===B.name}function re(j){return j!=j}var ie=function(){for(var j="0123456789abcdef",B=new Array(256),G=0;G<16;++G)for(var ne=16*G,Y=0;Y<16;++Y)B[ne+Y]=j[G]+j[Y];return B}()}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:236}],5:[function(t,g,m){g.exports=function(p){if(typeof p!="function")throw TypeError(String(p)+" is not a function");return p}},{}],6:[function(t,g,m){var p=t("../internals/is-object");g.exports=function(r){if(!p(r)&&r!==null)throw TypeError("Can't set "+String(r)+" as a prototype");return r}},{"../internals/is-object":74}],7:[function(t,g,m){var p=t("../internals/well-known-symbol"),r=t("../internals/object-create"),h=t("../internals/object-define-property"),u=p("unscopables"),d=Array.prototype;d[u]==null&&h.f(d,u,{configurable:!0,value:r(null)}),g.exports=function(c){d[u][c]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],8:[function(t,g,m){var p=t("../internals/string-multibyte").charAt;g.exports=function(r,h,u){return h+(u?p(r,h).length:1)}},{"../internals/string-multibyte":123}],9:[function(t,g,m){g.exports=function(p,r,h){if(!(p instanceof r))throw TypeError("Incorrect "+(h?h+" ":"")+"invocation");return p}},{}],10:[function(t,g,m){var p=t("../internals/is-object");g.exports=function(r){if(!p(r))throw TypeError(String(r)+" is not an object");return r}},{"../internals/is-object":74}],11:[function(t,g,m){g.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"},{}],12:[function(t,g,m){function p(H){return c(H)&&i(ee,n(H))}var r,h=t("../internals/array-buffer-native"),u=t("../internals/descriptors"),d=t("../internals/global"),c=t("../internals/is-object"),i=t("../internals/has"),n=t("../internals/classof"),o=t("../internals/create-non-enumerable-property"),l=t("../internals/redefine"),a=t("../internals/object-define-property").f,f=t("../internals/object-get-prototype-of"),v=t("../internals/object-set-prototype-of"),b=t("../internals/well-known-symbol"),_=t("../internals/uid"),w=d.Int8Array,E=w&&w.prototype,C=d.Uint8ClampedArray,A=C&&C.prototype,L=w&&f(w),P=E&&f(E),R=Object.prototype,N=R.isPrototypeOf,I=b("toStringTag"),O=_("TYPED_ARRAY_TAG"),U=h&&!!v&&n(d.opera)!=="Opera",K=!1,ee={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(r in ee)d[r]||(U=!1);if((!U||typeof L!="function"||L===Function.prototype)&&(L=function(){throw TypeError("Incorrect invocation")},U))for(r in ee)d[r]&&v(d[r],L);if((!U||!P||P===R)&&(P=L.prototype,U))for(r in ee)d[r]&&v(d[r].prototype,P);if(U&&f(A)!==P&&v(A,P),u&&!i(P,I))for(r in K=!0,a(P,I,{get:function(){return c(this)?this[O]:void 0}}),ee)d[r]&&o(d[r],O,r);g.exports={NATIVE_ARRAY_BUFFER_VIEWS:U,TYPED_ARRAY_TAG:K&&O,aTypedArray:function(H){if(p(H))return H;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(H){if(v){if(N.call(L,H))return H}else for(var te in ee)if(i(ee,r)){var Z=d[te];if(Z&&(H===Z||N.call(Z,H)))return H}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(H,te,Z){if(u){if(Z)for(var ge in ee){var $=d[ge];$&&i($.prototype,H)&&delete $.prototype[H]}P[H]&&!Z||l(P,H,Z?te:U&&E[H]||te)}},exportTypedArrayStaticMethod:function(H,te,Z){var ge,$;if(u){if(v){if(Z)for(ge in ee)($=d[ge])&&i($,H)&&delete $[H];if(L[H]&&!Z)return;try{return l(L,H,Z?te:U&&w[H]||te)}catch{}}for(ge in ee)!($=d[ge])||$[H]&&!Z||l($,H,te)}},isView:function(H){var te=n(H);return te==="DataView"||i(ee,te)},isTypedArray:p,TypedArray:L,TypedArrayPrototype:P}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":37,"../internals/descriptors":42,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":143,"../internals/well-known-symbol":146}],13:[function(t,g,m){function p(W){return[255&W]}function r(W){return[255&W,W>>8&255]}function h(W){return[255&W,W>>8&255,W>>16&255,W>>24&255]}function u(W){return W[3]<<24|W[2]<<16|W[1]<<8|W[0]}function d(W){return B(W,23,4)}function c(W){return B(W,52,8)}function i(W,pe){I(W[ge],pe,{get:function(){return ee(this)[pe]}})}function n(W,pe,Se,Re){var Le=A(Se),ce=ee(W);if(Le+pe>ce.byteLength)throw j($);var ue=ee(ce.buffer).bytes,Ce=Le+ce.byteOffset,Ie=ue.slice(Ce,Ce+pe);return Re?Ie:Ie.reverse()}function o(W,pe,Se,Re,Le,ce){var ue=A(Se),Ce=ee(W);if(ue+pe>Ce.byteLength)throw j($);for(var Ie=ee(Ce.buffer).bytes,Ve=ue+Ce.byteOffset,Pe=Re(+Le),Oe=0;Oe<pe;Oe++)Ie[Ve+Oe]=Pe[ce?Oe:pe-Oe-1]}var l=t("../internals/global"),a=t("../internals/descriptors"),f=t("../internals/array-buffer-native"),v=t("../internals/create-non-enumerable-property"),b=t("../internals/redefine-all"),_=t("../internals/fails"),w=t("../internals/an-instance"),E=t("../internals/to-integer"),C=t("../internals/to-length"),A=t("../internals/to-index"),L=t("../internals/ieee754"),P=t("../internals/object-get-prototype-of"),R=t("../internals/object-set-prototype-of"),N=t("../internals/object-get-own-property-names").f,I=t("../internals/object-define-property").f,O=t("../internals/array-fill"),U=t("../internals/set-to-string-tag"),K=t("../internals/internal-state"),ee=K.get,H=K.set,te="ArrayBuffer",Z="DataView",ge="prototype",$="Wrong index",se=l[te],z=se,de=l[Z],re=de&&de[ge],ie=Object.prototype,j=l.RangeError,B=L.pack,G=L.unpack;if(f){if(!_(function(){se(1)})||!_(function(){new se(-1)})||_(function(){return new se,new se(1.5),new se(NaN),se.name!=te})){for(var ne,Y=(z=function(W){return w(this,z),new se(A(W))})[ge]=se[ge],J=N(se),fe=0;J.length>fe;)(ne=J[fe++])in z||v(z,ne,se[ne]);Y.constructor=z}R&&P(re)!==ie&&R(re,ie);var oe=new de(new z(2)),X=re.setInt8;oe.setInt8(0,2147483648),oe.setInt8(1,2147483649),!oe.getInt8(0)&&oe.getInt8(1)||b(re,{setInt8:function(W,pe){X.call(this,W,pe<<24>>24)},setUint8:function(W,pe){X.call(this,W,pe<<24>>24)}},{unsafe:!0})}else z=function(W){w(this,z,te);var pe=A(W);H(this,{bytes:O.call(new Array(pe),0),byteLength:pe}),a||(this.byteLength=pe)},de=function(W,pe,Se){w(this,de,Z),w(W,z,Z);var Re=ee(W).byteLength,Le=E(pe);if(Le<0||Re<Le)throw j("Wrong offset");if(Re<Le+(Se=Se===void 0?Re-Le:C(Se)))throw j("Wrong length");H(this,{buffer:W,byteLength:Se,byteOffset:Le}),a||(this.buffer=W,this.byteLength=Se,this.byteOffset=Le)},a&&(i(z,"byteLength"),i(de,"buffer"),i(de,"byteLength"),i(de,"byteOffset")),b(de[ge],{getInt8:function(W){return n(this,1,W)[0]<<24>>24},getUint8:function(W){return n(this,1,W)[0]},getInt16:function(W,pe){var Se=n(this,2,W,1<arguments.length?pe:void 0);return(Se[1]<<8|Se[0])<<16>>16},getUint16:function(W,pe){var Se=n(this,2,W,1<arguments.length?pe:void 0);return Se[1]<<8|Se[0]},getInt32:function(W,pe){return u(n(this,4,W,1<arguments.length?pe:void 0))},getUint32:function(W,pe){return u(n(this,4,W,1<arguments.length?pe:void 0))>>>0},getFloat32:function(W,pe){return G(n(this,4,W,1<arguments.length?pe:void 0),23)},getFloat64:function(W,pe){return G(n(this,8,W,1<arguments.length?pe:void 0),52)},setInt8:function(W,pe){o(this,1,W,p,pe)},setUint8:function(W,pe){o(this,1,W,p,pe)},setInt16:function(W,pe,Se){o(this,2,W,r,pe,2<arguments.length?Se:void 0)},setUint16:function(W,pe,Se){o(this,2,W,r,pe,2<arguments.length?Se:void 0)},setInt32:function(W,pe,Se){o(this,4,W,h,pe,2<arguments.length?Se:void 0)},setUint32:function(W,pe,Se){o(this,4,W,h,pe,2<arguments.length?Se:void 0)},setFloat32:function(W,pe,Se){o(this,4,W,d,pe,2<arguments.length?Se:void 0)},setFloat64:function(W,pe,Se){o(this,8,W,c,pe,2<arguments.length?Se:void 0)}});U(z,te),U(de,Z),g.exports={ArrayBuffer:z,DataView:de}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":37,"../internals/descriptors":42,"../internals/fails":50,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":131,"../internals/to-integer":133,"../internals/to-length":134}],14:[function(t,g,m){var p=t("../internals/to-object"),r=t("../internals/to-absolute-index"),h=t("../internals/to-length"),u=Math.min;g.exports=[].copyWithin||function(d,c,i){var n=p(this),o=h(n.length),l=r(d,o),a=r(c,o),f=2<arguments.length?i:void 0,v=u((f===void 0?o:r(f,o))-a,o-l),b=1;for(a<l&&l<a+v&&(b=-1,a+=v-1,l+=v-1);0<v--;)a in n?n[l]=n[a]:delete n[l],l+=b,a+=b;return n}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],15:[function(t,g,m){var p=t("../internals/to-object"),r=t("../internals/to-absolute-index"),h=t("../internals/to-length");g.exports=function(u,d,c){for(var i=p(this),n=h(i.length),o=arguments.length,l=r(1<o?d:void 0,n),a=2<o?c:void 0,f=a===void 0?n:r(a,n);l<f;)i[l++]=u;return i}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],16:[function(t,g,m){var p=t("../internals/array-iteration").forEach,r=t("../internals/array-method-is-strict"),h=t("../internals/array-method-uses-to-length"),u=r("forEach"),d=h("forEach");g.exports=u&&d?[].forEach:function(c,i){return p(this,c,1<arguments.length?i:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(t,g,m){var p=t("../internals/function-bind-context"),r=t("../internals/to-object"),h=t("../internals/call-with-safe-iteration-closing"),u=t("../internals/is-array-iterator-method"),d=t("../internals/to-length"),c=t("../internals/create-property"),i=t("../internals/get-iterator-method");g.exports=function(n,o,l){var a,f,v,b,_,w,E=r(n),C=typeof this=="function"?this:Array,A=arguments.length,L=1<A?o:void 0,P=L!==void 0,R=i(E),N=0;if(P&&(L=p(L,2<A?l:void 0,2)),R==null||C==Array&&u(R))for(f=new C(a=d(E.length));N<a;N++)w=P?L(E[N],N):E[N],c(f,N,w);else for(_=(b=R.call(E)).next,f=new C;!(v=_.call(b)).done;N++)w=P?h(b,L,[v.value,N],!0):v.value,c(f,N,w);return f.length=N,f}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":39,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],18:[function(t,g,m){function p(d){return function(c,i,n){var o,l=r(c),a=h(l.length),f=u(n,a);if(d&&i!=i){for(;f<a;)if((o=l[f++])!=o)return!0}else for(;f<a;f++)if((d||f in l)&&l[f]===i)return d||f||0;return!d&&-1}}var r=t("../internals/to-indexed-object"),h=t("../internals/to-length"),u=t("../internals/to-absolute-index");g.exports={includes:p(!0),indexOf:p(!1)}},{"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134}],19:[function(t,g,m){function p(n){var o=n==1,l=n==2,a=n==3,f=n==4,v=n==6,b=n==5||v;return function(_,w,E,C){for(var A,L,P=u(_),R=h(P),N=r(w,E,3),I=d(R.length),O=0,U=C||c,K=o?U(_,I):l?U(_,0):void 0;O<I;O++)if((b||O in R)&&(L=N(A=R[O],O,P),n)){if(o)K[O]=L;else if(L)switch(n){case 3:return!0;case 5:return A;case 6:return O;case 2:i.call(K,A)}else if(f)return!1}return v?-1:a||f?f:K}}var r=t("../internals/function-bind-context"),h=t("../internals/indexed-object"),u=t("../internals/to-object"),d=t("../internals/to-length"),c=t("../internals/array-species-create"),i=[].push;g.exports={forEach:p(0),map:p(1),filter:p(2),some:p(3),every:p(4),find:p(5),findIndex:p(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],20:[function(t,g,m){var p=t("../internals/to-indexed-object"),r=t("../internals/to-integer"),h=t("../internals/to-length"),u=t("../internals/array-method-is-strict"),d=t("../internals/array-method-uses-to-length"),c=Math.min,i=[].lastIndexOf,n=!!i&&1/[1].lastIndexOf(1,-0)<0,o=u("lastIndexOf"),l=d("indexOf",{ACCESSORS:!0,1:0}),a=n||!o||!l;g.exports=a?function(f,v){if(n)return i.apply(this,arguments)||0;var b=p(this),_=h(b.length),w=_-1;for(1<arguments.length&&(w=c(w,r(v))),w<0&&(w=_+w);0<=w;w--)if(w in b&&b[w]===f)return w||0;return-1}:i},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":132,"../internals/to-integer":133,"../internals/to-length":134}],21:[function(t,g,m){var p=t("../internals/fails"),r=t("../internals/well-known-symbol"),h=t("../internals/engine-v8-version"),u=r("species");g.exports=function(d){return 51<=h||!p(function(){var c=[];return(c.constructor={})[u]=function(){return{foo:1}},c[d](Boolean).foo!==1})}},{"../internals/engine-v8-version":47,"../internals/fails":50,"../internals/well-known-symbol":146}],22:[function(t,g,m){var p=t("../internals/fails");g.exports=function(r,h){var u=[][r];return!!u&&p(function(){u.call(null,h||function(){throw 1},1)})}},{"../internals/fails":50}],23:[function(t,g,m){function p(i){throw i}var r=t("../internals/descriptors"),h=t("../internals/fails"),u=t("../internals/has"),d=Object.defineProperty,c={};g.exports=function(i,n){if(u(c,i))return c[i];var o=[][i],l=!!u(n=n||{},"ACCESSORS")&&n.ACCESSORS,a=u(n,0)?n[0]:p,f=u(n,1)?n[1]:void 0;return c[i]=!!o&&!h(function(){if(l&&!r)return!0;var v={length:-1};l?d(v,1,{enumerable:!0,get:p}):v[1]=1,o.call(v,a,f)})}},{"../internals/descriptors":42,"../internals/fails":50,"../internals/has":60}],24:[function(t,g,m){function p(c){return function(i,n,o,l){r(n);var a=h(i),f=u(a),v=d(a.length),b=c?v-1:0,_=c?-1:1;if(o<2)for(;;){if(b in f){l=f[b],b+=_;break}if(b+=_,c?b<0:v<=b)throw TypeError("Reduce of empty array with no initial value")}for(;c?0<=b:b<v;b+=_)b in f&&(l=n(l,f[b],b,a));return l}}var r=t("../internals/a-function"),h=t("../internals/to-object"),u=t("../internals/indexed-object"),d=t("../internals/to-length");g.exports={left:p(!1),right:p(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],25:[function(t,g,m){var p=t("../internals/is-object"),r=t("../internals/is-array"),h=t("../internals/well-known-symbol")("species");g.exports=function(u,d){var c;return r(u)&&(typeof(c=u.constructor)!="function"||c!==Array&&!r(c.prototype)?p(c)&&(c=c[h])===null&&(c=void 0):c=void 0),new(c===void 0?Array:c)(d===0?0:d)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":146}],26:[function(t,g,m){var p=t("../internals/an-object");g.exports=function(r,h,u,d){try{return d?h(p(u)[0],u[1]):h(u)}catch(i){var c=r.return;throw c!==void 0&&p(c.call(r)),i}}},{"../internals/an-object":10}],27:[function(t,g,m){var p=t("../internals/well-known-symbol")("iterator"),r=!1;try{var h=0,u={next:function(){return{done:!!h++}},return:function(){r=!0}};u[p]=function(){return this},Array.from(u,function(){throw 2})}catch{}g.exports=function(d,c){if(!c&&!r)return!1;var i=!1;try{var n={};n[p]=function(){return{next:function(){return{done:i=!0}}}},d(n)}catch{}return i}},{"../internals/well-known-symbol":146}],28:[function(t,g,m){var p={}.toString;g.exports=function(r){return p.call(r).slice(8,-1)}},{}],29:[function(t,g,m){var p=t("../internals/to-string-tag-support"),r=t("../internals/classof-raw"),h=t("../internals/well-known-symbol")("toStringTag"),u=r(function(){return arguments}())=="Arguments";g.exports=p?r:function(d){var c,i,n;return d===void 0?"Undefined":d===null?"Null":typeof(i=function(o,l){try{return o[l]}catch{}}(c=Object(d),h))=="string"?i:u?r(c):(n=r(c))=="Object"&&typeof c.callee=="function"?"Arguments":n}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":139,"../internals/well-known-symbol":146}],30:[function(t,g,m){var p=t("../internals/object-define-property").f,r=t("../internals/object-create"),h=t("../internals/redefine-all"),u=t("../internals/function-bind-context"),d=t("../internals/an-instance"),c=t("../internals/iterate"),i=t("../internals/define-iterator"),n=t("../internals/set-species"),o=t("../internals/descriptors"),l=t("../internals/internal-metadata").fastKey,a=t("../internals/internal-state"),f=a.set,v=a.getterFor;g.exports={getConstructor:function(b,_,w,E){function C(R,N,I){var O,U,K=L(R),ee=P(R,N);return ee?ee.value=I:(K.last=ee={index:U=l(N,!0),key:N,value:I,previous:O=K.last,next:void 0,removed:!1},K.first||(K.first=ee),O&&(O.next=ee),o?K.size++:R.size++,U!=="F"&&(K.index[U]=ee)),R}var A=b(function(R,N){d(R,A,_),f(R,{type:_,index:r(null),first:void 0,last:void 0,size:0}),o||(R.size=0),N!=null&&c(N,R[E],R,w)}),L=v(_),P=function(R,N){var I,O=L(R),U=l(N);if(U!=="F")return O.index[U];for(I=O.first;I;I=I.next)if(I.key==N)return I};return h(A.prototype,{clear:function(){for(var R=L(this),N=R.index,I=R.first;I;)I.removed=!0,I.previous&&(I.previous=I.previous.next=void 0),delete N[I.index],I=I.next;R.first=R.last=void 0,o?R.size=0:this.size=0},delete:function(R){var N=L(this),I=P(this,R);if(I){var O=I.next,U=I.previous;delete N.index[I.index],I.removed=!0,U&&(U.next=O),O&&(O.previous=U),N.first==I&&(N.first=O),N.last==I&&(N.last=U),o?N.size--:this.size--}return!!I},forEach:function(R,N){for(var I,O=L(this),U=u(R,1<arguments.length?N:void 0,3);I=I?I.next:O.first;)for(U(I.value,I.key,this);I&&I.removed;)I=I.previous},has:function(R){return!!P(this,R)}}),h(A.prototype,w?{get:function(R){var N=P(this,R);return N&&N.value},set:function(R,N){return C(this,R===0?0:R,N)}}:{add:function(R){return C(this,R=R===0?0:R,R)}}),o&&p(A.prototype,"size",{get:function(){return L(this).size}}),A},setStrong:function(b,_,w){var E=_+" Iterator",C=v(_),A=v(E);i(b,_,function(L,P){f(this,{type:E,target:L,state:C(L),kind:P,last:void 0})},function(){for(var L=A(this),P=L.kind,R=L.last;R&&R.removed;)R=R.previous;return L.target&&(L.last=R=R?R.next:L.state.first)?P=="keys"?{value:R.key,done:!1}:P=="values"?{value:R.value,done:!1}:{value:[R.key,R.value],done:!1}:{value:L.target=void 0,done:!0}},w?"entries":"values",!w,!0),n(_)}}},{"../internals/an-instance":9,"../internals/define-iterator":40,"../internals/descriptors":42,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/global"),h=t("../internals/is-forced"),u=t("../internals/redefine"),d=t("../internals/internal-metadata"),c=t("../internals/iterate"),i=t("../internals/an-instance"),n=t("../internals/is-object"),o=t("../internals/fails"),l=t("../internals/check-correctness-of-iteration"),a=t("../internals/set-to-string-tag"),f=t("../internals/inherit-if-required");g.exports=function(v,b,_){function w(H){var te=P[H];u(P,H,H=="add"?function(Z){return te.call(this,Z===0?0:Z),this}:H=="delete"?function(Z){return!(C&&!n(Z))&&te.call(this,Z===0?0:Z)}:H=="get"?function(Z){return C&&!n(Z)?void 0:te.call(this,Z===0?0:Z)}:H=="has"?function(Z){return!(C&&!n(Z))&&te.call(this,Z===0?0:Z)}:function(Z,ge){return te.call(this,Z===0?0:Z,ge),this})}var E=v.indexOf("Map")!==-1,C=v.indexOf("Weak")!==-1,A=E?"set":"add",L=r[v],P=L&&L.prototype,R=L,N={};if(h(v,typeof L!="function"||!(C||P.forEach&&!o(function(){new L().entries().next()}))))R=_.getConstructor(b,v,E,A),d.REQUIRED=!0;else if(h(v,!0)){var I=new R,O=I[A](C?{}:-0,1)!=I,U=o(function(){I.has(1)}),K=l(function(H){new L(H)}),ee=!C&&o(function(){for(var H=new L,te=5;te--;)H[A](te,te);return!H.has(-0)});K||(((R=b(function(H,te){i(H,R,v);var Z=f(new L,H,R);return te!=null&&c(te,Z[A],Z,E),Z})).prototype=P).constructor=R),(U||ee)&&(w("delete"),w("has"),E&&w("get")),(ee||O)&&w(A),C&&P.clear&&delete P.clear}return N[v]=R,p({global:!0,forced:R!=L},N),a(R,v),C||_.setStrong(R,v,E),R}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":49,"../internals/fails":50,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],32:[function(t,g,m){var p=t("../internals/has"),r=t("../internals/own-keys"),h=t("../internals/object-get-own-property-descriptor"),u=t("../internals/object-define-property");g.exports=function(d,c){for(var i=r(c),n=u.f,o=h.f,l=0;l<i.length;l++){var a=i[l];p(d,a)||n(d,a,o(c,a))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],33:[function(t,g,m){var p=t("../internals/well-known-symbol")("match");g.exports=function(r){var h=/./;try{"/./"[r](h)}catch{try{return h[p]=!1,"/./"[r](h)}catch{}}return!1}},{"../internals/well-known-symbol":146}],34:[function(t,g,m){var p=t("../internals/fails");g.exports=!p(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype})},{"../internals/fails":50}],35:[function(t,g,m){var p=t("../internals/require-object-coercible"),r=/"/g;g.exports=function(h,u,d,c){var i=String(p(h)),n="<"+u;return d!==""&&(n+=" "+d+'="'+String(c).replace(r,"&quot;")+'"'),n+">"+i+"</"+u+">"}},{"../internals/require-object-coercible":113}],36:[function(t,g,m){function p(){return this}var r=t("../internals/iterators-core").IteratorPrototype,h=t("../internals/object-create"),u=t("../internals/create-property-descriptor"),d=t("../internals/set-to-string-tag"),c=t("../internals/iterators");g.exports=function(i,n,o){var l=n+" Iterator";return i.prototype=h(r,{next:u(1,o)}),d(i,l,!1,!0),c[l]=p,i}},{"../internals/create-property-descriptor":38,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],37:[function(t,g,m){var p=t("../internals/descriptors"),r=t("../internals/object-define-property"),h=t("../internals/create-property-descriptor");g.exports=p?function(u,d,c){return r.f(u,d,h(1,c))}:function(u,d,c){return u[d]=c,u}},{"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/object-define-property":92}],38:[function(t,g,m){g.exports=function(p,r){return{enumerable:!(1&p),configurable:!(2&p),writable:!(4&p),value:r}}},{}],39:[function(t,g,m){var p=t("../internals/to-primitive"),r=t("../internals/object-define-property"),h=t("../internals/create-property-descriptor");g.exports=function(u,d,c){var i=p(d);i in u?r.f(u,i,h(0,c)):u[i]=c}},{"../internals/create-property-descriptor":38,"../internals/object-define-property":92,"../internals/to-primitive":138}],40:[function(t,g,m){function p(){return this}var r=t("../internals/export"),h=t("../internals/create-iterator-constructor"),u=t("../internals/object-get-prototype-of"),d=t("../internals/object-set-prototype-of"),c=t("../internals/set-to-string-tag"),i=t("../internals/create-non-enumerable-property"),n=t("../internals/redefine"),o=t("../internals/well-known-symbol"),l=t("../internals/is-pure"),a=t("../internals/iterators"),f=t("../internals/iterators-core"),v=f.IteratorPrototype,b=f.BUGGY_SAFARI_ITERATORS,_=o("iterator"),w="values",E="entries";g.exports=function(C,A,L,P,R,N,I){h(L,A,P);function O(z){if(z===R&&$)return $;if(!b&&z in Z)return Z[z];switch(z){case"keys":case w:case E:return function(){return new L(this,z)}}return function(){return new L(this)}}var U,K,ee,H=A+" Iterator",te=!1,Z=C.prototype,ge=Z[_]||Z["@@iterator"]||R&&Z[R],$=!b&&ge||O(R),se=A=="Array"&&Z.entries||ge;if(se&&(U=u(se.call(new C)),v!==Object.prototype&&U.next&&(l||u(U)===v||(d?d(U,v):typeof U[_]!="function"&&i(U,_,p)),c(U,H,!0,!0),l&&(a[H]=p))),R==w&&ge&&ge.name!==w&&(te=!0,$=function(){return ge.call(this)}),l&&!I||Z[_]===$||i(Z,_,$),a[A]=$,R)if(K={values:O(w),keys:N?$:O("keys"),entries:O(E)},I)for(ee in K)!b&&!te&&ee in Z||n(Z,ee,K[ee]);else r({target:A,proto:!0,forced:b||te},K);return K}},{"../internals/create-iterator-constructor":36,"../internals/create-non-enumerable-property":37,"../internals/export":49,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146}],41:[function(t,g,m){var p=t("../internals/path"),r=t("../internals/has"),h=t("../internals/well-known-symbol-wrapped"),u=t("../internals/object-define-property").f;g.exports=function(d){var c=p.Symbol||(p.Symbol={});r(c,d)||u(c,d,{value:h.f(d)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":145}],42:[function(t,g,m){var p=t("../internals/fails");g.exports=!p(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":50}],43:[function(t,g,m){var p=t("../internals/global"),r=t("../internals/is-object"),h=p.document,u=r(h)&&r(h.createElement);g.exports=function(d){return u?h.createElement(d):{}}},{"../internals/global":59,"../internals/is-object":74}],44:[function(t,g,m){g.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],45:[function(t,g,m){var p=t("../internals/engine-user-agent");g.exports=/(iphone|ipod|ipad).*applewebkit/i.test(p)},{"../internals/engine-user-agent":46}],46:[function(t,g,m){var p=t("../internals/get-built-in");g.exports=p("navigator","userAgent")||""},{"../internals/get-built-in":56}],47:[function(t,g,m){var p,r,h=t("../internals/global"),u=t("../internals/engine-user-agent"),d=h.process,c=d&&d.versions,i=c&&c.v8;i?r=(p=i.split("."))[0]+p[1]:u&&(!(p=u.match(/Edge\/(\d+)/))||74<=p[1])&&(p=u.match(/Chrome\/(\d+)/))&&(r=p[1]),g.exports=r&&+r},{"../internals/engine-user-agent":46,"../internals/global":59}],48:[function(t,g,m){g.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],49:[function(t,g,m){var p=t("../internals/global"),r=t("../internals/object-get-own-property-descriptor").f,h=t("../internals/create-non-enumerable-property"),u=t("../internals/redefine"),d=t("../internals/set-global"),c=t("../internals/copy-constructor-properties"),i=t("../internals/is-forced");g.exports=function(n,o){var l,a,f,v,b,_=n.target,w=n.global,E=n.stat;if(l=w?p:E?p[_]||d(_,{}):(p[_]||{}).prototype)for(a in o){if(v=o[a],f=n.noTargetGet?(b=r(l,a))&&b.value:l[a],!i(w?a:_+(E?".":"#")+a,n.forced)&&f!==void 0){if(typeof v==typeof f)continue;c(v,f)}(n.sham||f&&f.sham)&&h(v,"sham",!0),u(l,a,v,n)}}},{"../internals/copy-constructor-properties":32,"../internals/create-non-enumerable-property":37,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],50:[function(t,g,m){g.exports=function(p){try{return!!p()}catch{return!0}}},{}],51:[function(t,g,m){t("../modules/es.regexp.exec");var p=t("../internals/redefine"),r=t("../internals/fails"),h=t("../internals/well-known-symbol"),u=t("../internals/regexp-exec"),d=t("../internals/create-non-enumerable-property"),c=h("species"),i=!r(function(){var f=/./;return f.exec=function(){var v=[];return v.groups={a:"7"},v},"".replace(f,"$<a>")!=="7"}),n="a".replace(/./,"$0")==="$0",o=h("replace"),l=!!/./[o]&&/./[o]("a","$0")==="",a=!r(function(){var f=/(?:)/,v=f.exec;f.exec=function(){return v.apply(this,arguments)};var b="ab".split(f);return b.length!==2||b[0]!=="a"||b[1]!=="b"});g.exports=function(f,v,b,_){var w=h(f),E=!r(function(){var N={};return N[w]=function(){return 7},""[f](N)!=7}),C=E&&!r(function(){var N=!1,I=/a/;return f==="split"&&((I={constructor:{}}).constructor[c]=function(){return I},I.flags="",I[w]=/./[w]),I.exec=function(){return N=!0,null},I[w](""),!N});if(!E||!C||f==="replace"&&(!i||!n||l)||f==="split"&&!a){var A=/./[w],L=b(w,""[f],function(N,I,O,U,K){return I.exec===u?E&&!K?{done:!0,value:A.call(I,O,U)}:{done:!0,value:N.call(O,I,U)}:{done:!1}},{REPLACE_KEEPS_$0:n,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:l}),P=L[0],R=L[1];p(String.prototype,f,P),p(RegExp.prototype,w,v==2?function(N,I){return R.call(N,this,I)}:function(N){return R.call(N,this)})}_&&d(RegExp.prototype[w],"sham",!0)}},{"../internals/create-non-enumerable-property":37,"../internals/fails":50,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":146,"../modules/es.regexp.exec":181}],52:[function(t,g,m){var p=t("../internals/is-array"),r=t("../internals/to-length"),h=t("../internals/function-bind-context"),u=function(d,c,i,n,o,l,a,f){for(var v,b=o,_=0,w=!!a&&h(a,f,3);_<n;){if(_ in i){if(v=w?w(i[_],_,c):i[_],0<l&&p(v))b=u(d,c,v,r(v.length),b,l-1)-1;else{if(9007199254740991<=b)throw TypeError("Exceed the acceptable array length");d[b]=v}b++}_++}return b};g.exports=u},{"../internals/function-bind-context":54,"../internals/is-array":72,"../internals/to-length":134}],53:[function(t,g,m){var p=t("../internals/fails");g.exports=!p(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":50}],54:[function(t,g,m){var p=t("../internals/a-function");g.exports=function(r,h,u){if(p(r),h===void 0)return r;switch(u){case 0:return function(){return r.call(h)};case 1:return function(d){return r.call(h,d)};case 2:return function(d,c){return r.call(h,d,c)};case 3:return function(d,c,i){return r.call(h,d,c,i)}}return function(){return r.apply(h,arguments)}}},{"../internals/a-function":5}],55:[function(t,g,m){var p=t("../internals/a-function"),r=t("../internals/is-object"),h=[].slice,u={};g.exports=Function.bind||function(d){var c=p(this),i=h.call(arguments,1),n=function(){var o=i.concat(h.call(arguments));return this instanceof n?function(l,a,f){if(!(a in u)){for(var v=[],b=0;b<a;b++)v[b]="a["+b+"]";u[a]=Function("C,a","return new C("+v.join(",")+")")}return u[a](l,f)}(c,o.length,o):c.apply(d,o)};return r(c.prototype)&&(n.prototype=c.prototype),n}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(t,g,m){function p(u){return typeof u=="function"?u:void 0}var r=t("../internals/path"),h=t("../internals/global");g.exports=function(u,d){return arguments.length<2?p(r[u])||p(h[u]):r[u]&&r[u][d]||h[u]&&h[u][d]}},{"../internals/global":59,"../internals/path":104}],57:[function(t,g,m){var p=t("../internals/classof"),r=t("../internals/iterators"),h=t("../internals/well-known-symbol")("iterator");g.exports=function(u){if(u!=null)return u[h]||u["@@iterator"]||r[p(u)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":146}],58:[function(t,g,m){var p=t("../internals/an-object"),r=t("../internals/get-iterator-method");g.exports=function(h){var u=r(h);if(typeof u!="function")throw TypeError(String(h)+" is not iterable");return p(u.call(h))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(t,g,m){(function(p){function r(h){return h&&h.Math==Math&&h}g.exports=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof p=="object"&&p)||Function("return this")()}).call(this,typeof Yi!="undefined"?Yi:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],60:[function(t,g,m){var p={}.hasOwnProperty;g.exports=function(r,h){return p.call(r,h)}},{}],61:[function(t,g,m){g.exports={}},{}],62:[function(t,g,m){var p=t("../internals/global");g.exports=function(r,h){var u=p.console;u&&u.error&&(arguments.length===1?u.error(r):u.error(r,h))}},{"../internals/global":59}],63:[function(t,g,m){var p=t("../internals/get-built-in");g.exports=p("document","documentElement")},{"../internals/get-built-in":56}],64:[function(t,g,m){var p=t("../internals/descriptors"),r=t("../internals/fails"),h=t("../internals/document-create-element");g.exports=!p&&!r(function(){return Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":42,"../internals/document-create-element":43,"../internals/fails":50}],65:[function(t,g,m){var p=Math.abs,r=Math.pow,h=Math.floor,u=Math.log,d=Math.LN2;g.exports={pack:function(c,i,n){var o,l,a,f=new Array(n),v=8*n-i-1,b=(1<<v)-1,_=b>>1,w=i===23?r(2,-24)-r(2,-77):0,E=c<0||c===0&&1/c<0?1:0,C=0;for((c=p(c))!=c||c===1/0?(l=c!=c?1:0,o=b):(o=h(u(c)/d),c*(a=r(2,-o))<1&&(o--,a*=2),2<=(c+=1<=o+_?w/a:w*r(2,1-_))*a&&(o++,a/=2),b<=o+_?(l=0,o=b):1<=o+_?(l=(c*a-1)*r(2,i),o+=_):(l=c*r(2,_-1)*r(2,i),o=0));8<=i;f[C++]=255&l,l/=256,i-=8);for(o=o<<i|l,v+=i;0<v;f[C++]=255&o,o/=256,v-=8);return f[--C]|=128*E,f},unpack:function(c,i){var n,o=c.length,l=8*o-i-1,a=(1<<l)-1,f=a>>1,v=l-7,b=o-1,_=c[b--],w=127&_;for(_>>=7;0<v;w=256*w+c[b],b--,v-=8);for(n=w&(1<<-v)-1,w>>=-v,v+=i;0<v;n=256*n+c[b],b--,v-=8);if(w===0)w=1-f;else{if(w===a)return n?NaN:_?-1/0:1/0;n+=r(2,i),w-=f}return(_?-1:1)*n*r(2,w-i)}}},{}],66:[function(t,g,m){var p=t("../internals/fails"),r=t("../internals/classof-raw"),h="".split;g.exports=p(function(){return!Object("z").propertyIsEnumerable(0)})?function(u){return r(u)=="String"?h.call(u,""):Object(u)}:Object},{"../internals/classof-raw":28,"../internals/fails":50}],67:[function(t,g,m){var p=t("../internals/is-object"),r=t("../internals/object-set-prototype-of");g.exports=function(h,u,d){var c,i;return r&&typeof(c=u.constructor)=="function"&&c!==d&&p(i=c.prototype)&&i!==d.prototype&&r(h,i),h}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(t,g,m){var p=t("../internals/shared-store"),r=Function.toString;typeof p.inspectSource!="function"&&(p.inspectSource=function(h){return r.call(h)}),g.exports=p.inspectSource},{"../internals/shared-store":119}],69:[function(t,g,m){function p(f){d(f,n,{value:{objectID:"O"+ ++o,weakData:{}}})}var r=t("../internals/hidden-keys"),h=t("../internals/is-object"),u=t("../internals/has"),d=t("../internals/object-define-property").f,c=t("../internals/uid"),i=t("../internals/freezing"),n=c("meta"),o=0,l=Object.isExtensible||function(){return!0},a=g.exports={REQUIRED:!1,fastKey:function(f,v){if(!h(f))return typeof f=="symbol"?f:(typeof f=="string"?"S":"P")+f;if(!u(f,n)){if(!l(f))return"F";if(!v)return"E";p(f)}return f[n].objectID},getWeakData:function(f,v){if(!u(f,n)){if(!l(f))return!0;if(!v)return!1;p(f)}return f[n].weakData},onFreeze:function(f){return i&&a.REQUIRED&&l(f)&&!u(f,n)&&p(f),f}};r[n]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":143}],70:[function(t,g,m){var p,r,h,u=t("../internals/native-weak-map"),d=t("../internals/global"),c=t("../internals/is-object"),i=t("../internals/create-non-enumerable-property"),n=t("../internals/has"),o=t("../internals/shared-key"),l=t("../internals/hidden-keys"),a=d.WeakMap;if(u){var f=new a,v=f.get,b=f.has,_=f.set;p=function(E,C){return _.call(f,E,C),C},r=function(E){return v.call(f,E)||{}},h=function(E){return b.call(f,E)}}else{var w=o("state");l[w]=!0,p=function(E,C){return i(E,w,C),C},r=function(E){return n(E,w)?E[w]:{}},h=function(E){return n(E,w)}}g.exports={set:p,get:r,has:h,enforce:function(E){return h(E)?r(E):p(E,{})},getterFor:function(E){return function(C){var A;if(!c(C)||(A=r(C)).type!==E)throw TypeError("Incompatible receiver, "+E+" required");return A}}}},{"../internals/create-non-enumerable-property":37,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(t,g,m){var p=t("../internals/well-known-symbol"),r=t("../internals/iterators"),h=p("iterator"),u=Array.prototype;g.exports=function(d){return d!==void 0&&(r.Array===d||u[h]===d)}},{"../internals/iterators":79,"../internals/well-known-symbol":146}],72:[function(t,g,m){var p=t("../internals/classof-raw");g.exports=Array.isArray||function(r){return p(r)=="Array"}},{"../internals/classof-raw":28}],73:[function(t,g,m){function p(n,o){var l=d[u(n)];return l==i||l!=c&&(typeof o=="function"?r(o):!!o)}var r=t("../internals/fails"),h=/#|\.prototype\./,u=p.normalize=function(n){return String(n).replace(h,".").toLowerCase()},d=p.data={},c=p.NATIVE="N",i=p.POLYFILL="P";g.exports=p},{"../internals/fails":50}],74:[function(t,g,m){g.exports=function(p){return typeof p=="object"?p!==null:typeof p=="function"}},{}],75:[function(t,g,m){g.exports=!1},{}],76:[function(t,g,m){var p=t("../internals/is-object"),r=t("../internals/classof-raw"),h=t("../internals/well-known-symbol")("match");g.exports=function(u){var d;return p(u)&&((d=u[h])!==void 0?!!d:r(u)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":146}],77:[function(t,g,m){function p(n,o){this.stopped=n,this.result=o}var r=t("../internals/an-object"),h=t("../internals/is-array-iterator-method"),u=t("../internals/to-length"),d=t("../internals/function-bind-context"),c=t("../internals/get-iterator-method"),i=t("../internals/call-with-safe-iteration-closing");(g.exports=function(n,o,l,a,f){var v,b,_,w,E,C,A,L=d(o,l,a?2:1);if(f)v=n;else{if(typeof(b=c(n))!="function")throw TypeError("Target is not iterable");if(h(b)){for(_=0,w=u(n.length);_<w;_++)if((E=a?L(r(A=n[_])[0],A[1]):L(n[_]))&&E instanceof p)return E;return new p(!1)}v=b.call(n)}for(C=v.next;!(A=C.call(v)).done;)if(typeof(E=i(v,L,A.value,a))=="object"&&E&&E instanceof p)return E;return new p(!1)}).stop=function(n){return new p(!0,n)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134}],78:[function(t,g,m){var p,r,h,u=t("../internals/object-get-prototype-of"),d=t("../internals/create-non-enumerable-property"),c=t("../internals/has"),i=t("../internals/well-known-symbol"),n=t("../internals/is-pure"),o=i("iterator"),l=!1;[].keys&&("next"in(h=[].keys())?(r=u(u(h)))!==Object.prototype&&(p=r):l=!0),p==null&&(p={}),n||c(p,o)||d(p,o,function(){return this}),g.exports={IteratorPrototype:p,BUGGY_SAFARI_ITERATORS:l}},{"../internals/create-non-enumerable-property":37,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":146}],79:[function(t,g,m){arguments[4][61][0].apply(m,arguments)},{dup:61}],80:[function(t,g,m){g.exports=Math.sign||function(p){return(p=+p)==0||p!=p?p:p<0?-1:1}},{}],81:[function(t,g,m){var p,r,h,u,d,c,i,n,o=t("../internals/global"),l=t("../internals/object-get-own-property-descriptor").f,a=t("../internals/classof-raw"),f=t("../internals/task").set,v=t("../internals/engine-is-ios"),b=o.MutationObserver||o.WebKitMutationObserver,_=o.process,w=o.Promise,E=a(_)=="process",C=l(o,"queueMicrotask"),A=C&&C.value;A||(p=function(){var L,P;for(E&&(L=_.domain)&&L.exit();r;){P=r.fn,r=r.next;try{P()}catch(R){throw r?u():h=void 0,R}}h=void 0,L&&L.enter()},u=E?function(){_.nextTick(p)}:b&&!v?(d=!0,c=document.createTextNode(""),new b(p).observe(c,{characterData:!0}),function(){c.data=d=!d}):w&&w.resolve?(i=w.resolve(void 0),n=i.then,function(){n.call(i,p)}):function(){f.call(o,p)}),g.exports=A||function(L){var P={fn:L,next:void 0};h&&(h.next=P),r||(r=P,u()),h=P}},{"../internals/classof-raw":28,"../internals/engine-is-ios":45,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":128}],82:[function(t,g,m){var p=t("../internals/global");g.exports=p.Promise},{"../internals/global":59}],83:[function(t,g,m){var p=t("../internals/fails");g.exports=!!Object.getOwnPropertySymbols&&!p(function(){return!String(Symbol())})},{"../internals/fails":50}],84:[function(t,g,m){var p=t("../internals/fails"),r=t("../internals/well-known-symbol"),h=t("../internals/is-pure"),u=r("iterator");g.exports=!p(function(){var d=new URL("b?a=1&b=2&c=3","http://a"),c=d.searchParams,i="";return d.pathname="c%20d",c.forEach(function(n,o){c.delete("b"),i+=o+n}),h&&!d.toJSON||!c.sort||d.href!=="http://a/c%20d?a=1&c=3"||c.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!c[u]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||i!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":50,"../internals/is-pure":75,"../internals/well-known-symbol":146}],85:[function(t,g,m){var p=t("../internals/global"),r=t("../internals/inspect-source"),h=p.WeakMap;g.exports=typeof h=="function"&&/native code/.test(r(h))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(t,g,m){function p(h){var u,d;this.promise=new h(function(c,i){if(u!==void 0||d!==void 0)throw TypeError("Bad Promise constructor");u=c,d=i}),this.resolve=r(u),this.reject=r(d)}var r=t("../internals/a-function");g.exports.f=function(h){return new p(h)}},{"../internals/a-function":5}],87:[function(t,g,m){var p=t("../internals/is-regexp");g.exports=function(r){if(p(r))throw TypeError("The method doesn't accept regular expressions");return r}},{"../internals/is-regexp":76}],88:[function(t,g,m){var p=t("../internals/global").isFinite;g.exports=Number.isFinite||function(r){return typeof r=="number"&&p(r)}},{"../internals/global":59}],89:[function(t,g,m){var p=t("../internals/descriptors"),r=t("../internals/fails"),h=t("../internals/object-keys"),u=t("../internals/object-get-own-property-symbols"),d=t("../internals/object-property-is-enumerable"),c=t("../internals/to-object"),i=t("../internals/indexed-object"),n=Object.assign,o=Object.defineProperty;g.exports=!n||r(function(){if(p&&n({b:1},n(o({},"a",{enumerable:!0,get:function(){o(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var l={},a={},f=Symbol(),v="abcdefghijklmnopqrst";return l[f]=7,v.split("").forEach(function(b){a[b]=b}),n({},l)[f]!=7||h(n({},a)).join("")!=v})?function(l,a){for(var f=c(l),v=arguments.length,b=1,_=u.f,w=d.f;b<v;)for(var E,C=i(arguments[b++]),A=_?h(C).concat(_(C)):h(C),L=A.length,P=0;P<L;)E=A[P++],p&&!w.call(C,E)||(f[E]=C[E]);return f}:n},{"../internals/descriptors":42,"../internals/fails":50,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":135}],90:[function(t,g,m){function p(){}function r(_){return"<script>"+_+"</"+f+">"}var h,u=t("../internals/an-object"),d=t("../internals/object-define-properties"),c=t("../internals/enum-bug-keys"),i=t("../internals/hidden-keys"),n=t("../internals/html"),o=t("../internals/document-create-element"),l=t("../internals/shared-key"),a="prototype",f="script",v=l("IE_PROTO"),b=function(){try{h=document.domain&&new ActiveXObject("htmlfile")}catch{}var _,w;b=h?function(C){C.write(r("")),C.close();var A=C.parentWindow.Object;return C=null,A}(h):((w=o("iframe")).style.display="none",n.appendChild(w),w.src=String("javascript:"),(_=w.contentWindow.document).open(),_.write(r("document.F=Object")),_.close(),_.F);for(var E=c.length;E--;)delete b[a][c[E]];return b()};i[v]=!0,g.exports=Object.create||function(_,w){var E;return _!==null?(p[a]=u(_),E=new p,p[a]=null,E[v]=_):E=b(),w===void 0?E:d(E,w)}},{"../internals/an-object":10,"../internals/document-create-element":43,"../internals/enum-bug-keys":48,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(t,g,m){var p=t("../internals/descriptors"),r=t("../internals/object-define-property"),h=t("../internals/an-object"),u=t("../internals/object-keys");g.exports=p?Object.defineProperties:function(d,c){h(d);for(var i,n=u(c),o=n.length,l=0;l<o;)r.f(d,i=n[l++],c[i]);return d}},{"../internals/an-object":10,"../internals/descriptors":42,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(t,g,m){var p=t("../internals/descriptors"),r=t("../internals/ie8-dom-define"),h=t("../internals/an-object"),u=t("../internals/to-primitive"),d=Object.defineProperty;m.f=p?d:function(c,i,n){if(h(c),i=u(i,!0),h(n),r)try{return d(c,i,n)}catch{}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(c[i]=n.value),c}},{"../internals/an-object":10,"../internals/descriptors":42,"../internals/ie8-dom-define":64,"../internals/to-primitive":138}],93:[function(t,g,m){var p=t("../internals/descriptors"),r=t("../internals/object-property-is-enumerable"),h=t("../internals/create-property-descriptor"),u=t("../internals/to-indexed-object"),d=t("../internals/to-primitive"),c=t("../internals/has"),i=t("../internals/ie8-dom-define"),n=Object.getOwnPropertyDescriptor;m.f=p?n:function(o,l){if(o=u(o),l=d(l,!0),i)try{return n(o,l)}catch{}if(c(o,l))return h(!r.f.call(o,l),o[l])}},{"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":132,"../internals/to-primitive":138}],94:[function(t,g,m){var p=t("../internals/to-indexed-object"),r=t("../internals/object-get-own-property-names").f,h={}.toString,u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];g.exports.f=function(d){return u&&h.call(d)=="[object Window]"?function(c){try{return r(c)}catch{return u.slice()}}(d):r(p(d))}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":132}],95:[function(t,g,m){var p=t("../internals/object-keys-internal"),r=t("../internals/enum-bug-keys").concat("length","prototype");m.f=Object.getOwnPropertyNames||function(h){return p(h,r)}},{"../internals/enum-bug-keys":48,"../internals/object-keys-internal":98}],96:[function(t,g,m){m.f=Object.getOwnPropertySymbols},{}],97:[function(t,g,m){var p=t("../internals/has"),r=t("../internals/to-object"),h=t("../internals/shared-key"),u=t("../internals/correct-prototype-getter"),d=h("IE_PROTO"),c=Object.prototype;g.exports=u?Object.getPrototypeOf:function(i){return i=r(i),p(i,d)?i[d]:typeof i.constructor=="function"&&i instanceof i.constructor?i.constructor.prototype:i instanceof Object?c:null}},{"../internals/correct-prototype-getter":34,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":135}],98:[function(t,g,m){var p=t("../internals/has"),r=t("../internals/to-indexed-object"),h=t("../internals/array-includes").indexOf,u=t("../internals/hidden-keys");g.exports=function(d,c){var i,n=r(d),o=0,l=[];for(i in n)!p(u,i)&&p(n,i)&&l.push(i);for(;c.length>o;)p(n,i=c[o++])&&(~h(l,i)||l.push(i));return l}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":132}],99:[function(t,g,m){var p=t("../internals/object-keys-internal"),r=t("../internals/enum-bug-keys");g.exports=Object.keys||function(h){return p(h,r)}},{"../internals/enum-bug-keys":48,"../internals/object-keys-internal":98}],100:[function(t,g,m){var p={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,h=r&&!p.call({1:2},1);m.f=h?function(u){var d=r(this,u);return!!d&&d.enumerable}:p},{}],101:[function(t,g,m){var p=t("../internals/an-object"),r=t("../internals/a-possible-prototype");g.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var h,u=!1,d={};try{(h=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(d,[]),u=d instanceof Array}catch{}return function(c,i){return p(c),r(i),u?h.call(c,i):c.__proto__=i,c}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(t,g,m){var p=t("../internals/to-string-tag-support"),r=t("../internals/classof");g.exports=p?{}.toString:function(){return"[object "+r(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":139}],103:[function(t,g,m){var p=t("../internals/get-built-in"),r=t("../internals/object-get-own-property-names"),h=t("../internals/object-get-own-property-symbols"),u=t("../internals/an-object");g.exports=p("Reflect","ownKeys")||function(d){var c=r.f(u(d)),i=h.f;return i?c.concat(i(d)):c}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(t,g,m){var p=t("../internals/global");g.exports=p},{"../internals/global":59}],105:[function(t,g,m){g.exports=function(p){try{return{error:!1,value:p()}}catch(r){return{error:!0,value:r}}}},{}],106:[function(t,g,m){var p=t("../internals/an-object"),r=t("../internals/is-object"),h=t("../internals/new-promise-capability");g.exports=function(u,d){if(p(u),r(d)&&d.constructor===u)return d;var c=h.f(u);return(0,c.resolve)(d),c.promise}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(t,g,m){var p=t("../internals/redefine");g.exports=function(r,h,u){for(var d in h)p(r,d,h[d],u);return r}},{"../internals/redefine":108}],108:[function(t,g,m){var p=t("../internals/global"),r=t("../internals/create-non-enumerable-property"),h=t("../internals/has"),u=t("../internals/set-global"),d=t("../internals/inspect-source"),c=t("../internals/internal-state"),i=c.get,n=c.enforce,o=String(String).split("String");(g.exports=function(l,a,f,v){var b=!!v&&!!v.unsafe,_=!!v&&!!v.enumerable,w=!!v&&!!v.noTargetGet;typeof f=="function"&&(typeof a!="string"||h(f,"name")||r(f,"name",a),n(f).source=o.join(typeof a=="string"?a:"")),l!==p?(b?!w&&l[a]&&(_=!0):delete l[a],_?l[a]=f:r(l,a,f)):_?l[a]=f:u(a,f)})(Function.prototype,"toString",function(){return typeof this=="function"&&i(this).source||d(this)})},{"../internals/create-non-enumerable-property":37,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(t,g,m){var p=t("./classof-raw"),r=t("./regexp-exec");g.exports=function(h,u){var d=h.exec;if(typeof d=="function"){var c=d.call(h,u);if(typeof c!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return c}if(p(h)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return r.call(h,u)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(t,g,m){var p,r,h=t("./regexp-flags"),u=t("./regexp-sticky-helpers"),d=RegExp.prototype.exec,c=String.prototype.replace,i=d,n=(p=/a/,r=/b*/g,d.call(p,"a"),d.call(r,"a"),p.lastIndex!==0||r.lastIndex!==0),o=u.UNSUPPORTED_Y||u.BROKEN_CARET,l=/()??/.exec("")[1]!==void 0;(n||l||o)&&(i=function(a){var f,v,b,_,w=this,E=o&&w.sticky,C=h.call(w),A=w.source,L=0,P=a;return E&&((C=C.replace("y","")).indexOf("g")===-1&&(C+="g"),P=String(a).slice(w.lastIndex),0<w.lastIndex&&(!w.multiline||w.multiline&&a[w.lastIndex-1]!==`
`)&&(A="(?: "+A+")",P=" "+P,L++),v=new RegExp("^(?:"+A+")",C)),l&&(v=new RegExp("^"+A+"$(?!\\s)",C)),n&&(f=w.lastIndex),b=d.call(E?v:w,P),E?b?(b.input=b.input.slice(L),b[0]=b[0].slice(L),b.index=w.lastIndex,w.lastIndex+=b[0].length):w.lastIndex=0:n&&b&&(w.lastIndex=w.global?b.index+b[0].length:f),l&&b&&1<b.length&&c.call(b[0],v,function(){for(_=1;_<arguments.length-2;_++)arguments[_]===void 0&&(b[_]=void 0)}),b}),g.exports=i},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(t,g,m){var p=t("../internals/an-object");g.exports=function(){var r=p(this),h="";return r.global&&(h+="g"),r.ignoreCase&&(h+="i"),r.multiline&&(h+="m"),r.dotAll&&(h+="s"),r.unicode&&(h+="u"),r.sticky&&(h+="y"),h}},{"../internals/an-object":10}],112:[function(t,g,m){var p=t("./fails");function r(h,u){return RegExp(h,u)}m.UNSUPPORTED_Y=p(function(){var h=r("a","y");return h.lastIndex=2,h.exec("abcd")!=null}),m.BROKEN_CARET=p(function(){var h=r("^r","gy");return h.lastIndex=2,h.exec("str")!=null})},{"./fails":50}],113:[function(t,g,m){g.exports=function(p){if(p==null)throw TypeError("Can't call method on "+p);return p}},{}],114:[function(t,g,m){g.exports=Object.is||function(p,r){return p===r?p!==0||1/p==1/r:p!=p&&r!=r}},{}],115:[function(t,g,m){var p=t("../internals/global"),r=t("../internals/create-non-enumerable-property");g.exports=function(h,u){try{r(p,h,u)}catch{p[h]=u}return u}},{"../internals/create-non-enumerable-property":37,"../internals/global":59}],116:[function(t,g,m){var p=t("../internals/get-built-in"),r=t("../internals/object-define-property"),h=t("../internals/well-known-symbol"),u=t("../internals/descriptors"),d=h("species");g.exports=function(c){var i=p(c),n=r.f;u&&i&&!i[d]&&n(i,d,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":42,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],117:[function(t,g,m){var p=t("../internals/object-define-property").f,r=t("../internals/has"),h=t("../internals/well-known-symbol")("toStringTag");g.exports=function(u,d,c){u&&!r(u=c?u:u.prototype,h)&&p(u,h,{configurable:!0,value:d})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],118:[function(t,g,m){var p=t("../internals/shared"),r=t("../internals/uid"),h=p("keys");g.exports=function(u){return h[u]||(h[u]=r(u))}},{"../internals/shared":120,"../internals/uid":143}],119:[function(t,g,m){var p=t("../internals/global"),r=t("../internals/set-global"),h="__core-js_shared__",u=p[h]||r(h,{});g.exports=u},{"../internals/global":59,"../internals/set-global":115}],120:[function(t,g,m){var p=t("../internals/is-pure"),r=t("../internals/shared-store");(g.exports=function(h,u){return r[h]||(r[h]=u!==void 0?u:{})})("versions",[]).push({version:"3.6.5",mode:p?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(t,g,m){var p=t("../internals/an-object"),r=t("../internals/a-function"),h=t("../internals/well-known-symbol")("species");g.exports=function(u,d){var c,i=p(u).constructor;return i===void 0||(c=p(i)[h])==null?d:r(c)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":146}],122:[function(t,g,m){var p=t("../internals/fails");g.exports=function(r){return p(function(){var h=""[r]('"');return h!==h.toLowerCase()||3<h.split('"').length})}},{"../internals/fails":50}],123:[function(t,g,m){function p(u){return function(d,c){var i,n,o=String(h(d)),l=r(c),a=o.length;return l<0||a<=l?u?"":void 0:(i=o.charCodeAt(l))<55296||56319<i||l+1===a||(n=o.charCodeAt(l+1))<56320||57343<n?u?o.charAt(l):i:u?o.slice(l,l+2):n-56320+(i-55296<<10)+65536}}var r=t("../internals/to-integer"),h=t("../internals/require-object-coercible");g.exports={codeAt:p(!1),charAt:p(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],124:[function(t,g,m){function p(l){return l+22+75*(l<26)}function r(l,a,f){var v=0;for(l=f?n(l/700):l>>1,l+=n(l/a);455<l;v+=36)l=n(l/35);return n(v+36*l/(l+38))}function h(l){var a,f,v=[],b=(l=function(K){for(var ee=[],H=0,te=K.length;H<te;){var Z=K.charCodeAt(H++);if(55296<=Z&&Z<=56319&&H<te){var ge=K.charCodeAt(H++);(64512&ge)==56320?ee.push(((1023&Z)<<10)+(1023&ge)+65536):(ee.push(Z),H--)}else ee.push(Z)}return ee}(l)).length,_=128,w=0,E=72;for(a=0;a<l.length;a++)(f=l[a])<128&&v.push(o(f));var C=v.length,A=C;for(C&&v.push("-");A<b;){var L=u;for(a=0;a<l.length;a++)_<=(f=l[a])&&f<L&&(L=f);var P=A+1;if(L-_>n((u-w)/P))throw RangeError(i);for(w+=(L-_)*P,_=L,a=0;a<l.length;a++){if((f=l[a])<_&&++w>u)throw RangeError(i);if(f==_){for(var R=w,N=36;;N+=36){var I=N<=E?1:E+26<=N?26:N-E;if(R<I)break;var O=R-I,U=36-I;v.push(o(p(I+O%U))),R=n(O/U)}v.push(o(p(R))),E=r(w,P,A==C),w=0,++A}}++w,++_}return v.join("")}var u=2147483647,d=/[^\0-\u007E]/,c=/[.\u3002\uFF0E\uFF61]/g,i="Overflow: input needs wider integers to process",n=Math.floor,o=String.fromCharCode;g.exports=function(l){var a,f,v=[],b=l.toLowerCase().replace(c,".").split(".");for(a=0;a<b.length;a++)f=b[a],v.push(d.test(f)?"xn--"+h(f):f);return v.join(".")}},{}],125:[function(t,g,m){var p=t("../internals/to-integer"),r=t("../internals/require-object-coercible");g.exports="".repeat||function(h){var u=String(r(this)),d="",c=p(h);if(c<0||c==1/0)throw RangeError("Wrong number of repetitions");for(;0<c;(c>>>=1)&&(u+=u))1&c&&(d+=u);return d}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],126:[function(t,g,m){var p=t("../internals/fails"),r=t("../internals/whitespaces");g.exports=function(h){return p(function(){return!!r[h]()||"\u200B\x85\u180E"[h]()!="\u200B\x85\u180E"||r[h].name!==h})}},{"../internals/fails":50,"../internals/whitespaces":147}],127:[function(t,g,m){function p(c){return function(i){var n=String(r(i));return 1&c&&(n=n.replace(u,"")),2&c&&(n=n.replace(d,"")),n}}var r=t("../internals/require-object-coercible"),h="["+t("../internals/whitespaces")+"]",u=RegExp("^"+h+h+"*"),d=RegExp(h+h+"*$");g.exports={start:p(1),end:p(2),trim:p(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":147}],128:[function(t,g,m){function p(I){if(R.hasOwnProperty(I)){var O=R[I];delete R[I],O()}}function r(I){return function(){p(I)}}function h(I){p(I.data)}function u(I){n.postMessage(I+"",_.protocol+"//"+_.host)}var d,c,i,n=t("../internals/global"),o=t("../internals/fails"),l=t("../internals/classof-raw"),a=t("../internals/function-bind-context"),f=t("../internals/html"),v=t("../internals/document-create-element"),b=t("../internals/engine-is-ios"),_=n.location,w=n.setImmediate,E=n.clearImmediate,C=n.process,A=n.MessageChannel,L=n.Dispatch,P=0,R={},N="onreadystatechange";w&&E||(w=function(I){for(var O=[],U=1;U<arguments.length;)O.push(arguments[U++]);return R[++P]=function(){(typeof I=="function"?I:Function(I)).apply(void 0,O)},d(P),P},E=function(I){delete R[I]},l(C)=="process"?d=function(I){C.nextTick(r(I))}:L&&L.now?d=function(I){L.now(r(I))}:A&&!b?(i=(c=new A).port2,c.port1.onmessage=h,d=a(i.postMessage,i,1)):!n.addEventListener||typeof postMessage!="function"||n.importScripts||o(u)||_.protocol==="file:"?d=N in v("script")?function(I){f.appendChild(v("script"))[N]=function(){f.removeChild(this),p(I)}}:function(I){setTimeout(r(I),0)}:(d=u,n.addEventListener("message",h,!1))),g.exports={set:w,clear:E}},{"../internals/classof-raw":28,"../internals/document-create-element":43,"../internals/engine-is-ios":45,"../internals/fails":50,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],129:[function(t,g,m){var p=t("../internals/classof-raw");g.exports=function(r){if(typeof r!="number"&&p(r)!="Number")throw TypeError("Incorrect invocation");return+r}},{"../internals/classof-raw":28}],130:[function(t,g,m){var p=t("../internals/to-integer"),r=Math.max,h=Math.min;g.exports=function(u,d){var c=p(u);return c<0?r(c+d,0):h(c,d)}},{"../internals/to-integer":133}],131:[function(t,g,m){var p=t("../internals/to-integer"),r=t("../internals/to-length");g.exports=function(h){if(h===void 0)return 0;var u=p(h),d=r(u);if(u!==d)throw RangeError("Wrong length or index");return d}},{"../internals/to-integer":133,"../internals/to-length":134}],132:[function(t,g,m){var p=t("../internals/indexed-object"),r=t("../internals/require-object-coercible");g.exports=function(h){return p(r(h))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],133:[function(t,g,m){var p=Math.ceil,r=Math.floor;g.exports=function(h){return isNaN(h=+h)?0:(0<h?r:p)(h)}},{}],134:[function(t,g,m){var p=t("../internals/to-integer"),r=Math.min;g.exports=function(h){return 0<h?r(p(h),9007199254740991):0}},{"../internals/to-integer":133}],135:[function(t,g,m){var p=t("../internals/require-object-coercible");g.exports=function(r){return Object(p(r))}},{"../internals/require-object-coercible":113}],136:[function(t,g,m){var p=t("../internals/to-positive-integer");g.exports=function(r,h){var u=p(r);if(u%h)throw RangeError("Wrong offset");return u}},{"../internals/to-positive-integer":137}],137:[function(t,g,m){var p=t("../internals/to-integer");g.exports=function(r){var h=p(r);if(h<0)throw RangeError("The argument can't be less than 0");return h}},{"../internals/to-integer":133}],138:[function(t,g,m){var p=t("../internals/is-object");g.exports=function(r,h){if(!p(r))return r;var u,d;if(h&&typeof(u=r.toString)=="function"&&!p(d=u.call(r))||typeof(u=r.valueOf)=="function"&&!p(d=u.call(r))||!h&&typeof(u=r.toString)=="function"&&!p(d=u.call(r)))return d;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],139:[function(t,g,m){var p={};p[t("../internals/well-known-symbol")("toStringTag")]="z",g.exports=String(p)==="[object z]"},{"../internals/well-known-symbol":146}],140:[function(t,g,m){function p(pe,Se){for(var Re=0,Le=Se.length,ce=new(fe(pe))(Le);Re<Le;)ce[Re]=Se[Re++];return ce}function r(pe,Se){z(pe,Se,{get:function(){return $(this)[Se]}})}function h(pe){var Se;return pe instanceof j||(Se=P(pe))=="ArrayBuffer"||Se=="SharedArrayBuffer"}function u(pe,Se){return oe(pe)&&typeof Se!="symbol"&&Se in pe&&String(+Se)==String(Se)}function d(pe,Se){return u(pe,Se=A(Se,!0))?b(2,pe[Se]):de(pe,Se)}function c(pe,Se,Re){return!(u(pe,Se=A(Se,!0))&&R(Re)&&L(Re,"value"))||L(Re,"get")||L(Re,"set")||Re.configurable||L(Re,"writable")&&!Re.writable||L(Re,"enumerable")&&!Re.enumerable?z(pe,Se,Re):(pe[Se]=Re.value,pe)}var i=t("../internals/export"),n=t("../internals/global"),o=t("../internals/descriptors"),l=t("../internals/typed-array-constructors-require-wrappers"),a=t("../internals/array-buffer-view-core"),f=t("../internals/array-buffer"),v=t("../internals/an-instance"),b=t("../internals/create-property-descriptor"),_=t("../internals/create-non-enumerable-property"),w=t("../internals/to-length"),E=t("../internals/to-index"),C=t("../internals/to-offset"),A=t("../internals/to-primitive"),L=t("../internals/has"),P=t("../internals/classof"),R=t("../internals/is-object"),N=t("../internals/object-create"),I=t("../internals/object-set-prototype-of"),O=t("../internals/object-get-own-property-names").f,U=t("../internals/typed-array-from"),K=t("../internals/array-iteration").forEach,ee=t("../internals/set-species"),H=t("../internals/object-define-property"),te=t("../internals/object-get-own-property-descriptor"),Z=t("../internals/internal-state"),ge=t("../internals/inherit-if-required"),$=Z.get,se=Z.set,z=H.f,de=te.f,re=Math.round,ie=n.RangeError,j=f.ArrayBuffer,B=f.DataView,G=a.NATIVE_ARRAY_BUFFER_VIEWS,ne=a.TYPED_ARRAY_TAG,Y=a.TypedArray,J=a.TypedArrayPrototype,fe=a.aTypedArrayConstructor,oe=a.isTypedArray,X="BYTES_PER_ELEMENT",W="Wrong length";o?(G||(te.f=d,H.f=c,r(J,"buffer"),r(J,"byteOffset"),r(J,"byteLength"),r(J,"length")),i({target:"Object",stat:!0,forced:!G},{getOwnPropertyDescriptor:d,defineProperty:c}),g.exports=function(pe,Se,Re){function Le(Ge,be){z(Ge,be,{get:function(){return Xe=be,(k=$(this)).view[Ce](Xe*ce+k.byteOffset,!0);var Xe,k},set:function(Xe){return k=be,Q=Xe,V=$(this),Re&&(Q=(Q=re(Q))<0?0:255<Q?255:255&Q),void V.view[Ie](k*ce+V.byteOffset,Q,!0);var k,Q,V},enumerable:!0})}var ce=pe.match(/\d+$/)[0]/8,ue=pe+(Re?"Clamped":"")+"Array",Ce="get"+pe,Ie="set"+pe,Ve=n[ue],Pe=Ve,Oe=Pe&&Pe.prototype,Ae={};G?l&&(Pe=Se(function(Ge,be,Xe,k){return v(Ge,Pe,ue),ge(R(be)?h(be)?k!==void 0?new Ve(be,C(Xe,ce),k):Xe!==void 0?new Ve(be,C(Xe,ce)):new Ve(be):oe(be)?p(Pe,be):U.call(Pe,be):new Ve(E(be)),Ge,Pe)}),I&&I(Pe,Y),K(O(Ve),function(Ge){Ge in Pe||_(Pe,Ge,Ve[Ge])}),Pe.prototype=Oe):(Pe=Se(function(Ge,be,Xe,k){v(Ge,Pe,ue);var Q,V,ae,me=0,Me=0;if(R(be)){if(!h(be))return oe(be)?p(Pe,be):U.call(Pe,be);Q=be,Me=C(Xe,ce);var Ee=be.byteLength;if(k===void 0){if(Ee%ce||(V=Ee-Me)<0)throw ie(W)}else if(Ee<(V=w(k)*ce)+Me)throw ie(W);ae=V/ce}else ae=E(be),Q=new j(V=ae*ce);for(se(Ge,{buffer:Q,byteOffset:Me,byteLength:V,length:ae,view:new B(Q)});me<ae;)Le(Ge,me++)}),I&&I(Pe,Y),Oe=Pe.prototype=N(J)),Oe.constructor!==Pe&&_(Oe,"constructor",Pe),ne&&_(Oe,ne,ue),Ae[ue]=Pe,i({global:!0,forced:Pe!=Ve,sham:!G},Ae),X in Pe||_(Pe,X,ce),X in Oe||_(Oe,X,ce),ee(ue)}):g.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":37,"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/export":49,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":131,"../internals/to-length":134,"../internals/to-offset":136,"../internals/to-primitive":138,"../internals/typed-array-constructors-require-wrappers":141,"../internals/typed-array-from":142}],141:[function(t,g,m){var p=t("../internals/global"),r=t("../internals/fails"),h=t("../internals/check-correctness-of-iteration"),u=t("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,d=p.ArrayBuffer,c=p.Int8Array;g.exports=!u||!r(function(){c(1)})||!r(function(){new c(-1)})||!h(function(i){new c,new c(null),new c(1.5),new c(i)},!0)||r(function(){return new c(new d(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":50,"../internals/global":59}],142:[function(t,g,m){var p=t("../internals/to-object"),r=t("../internals/to-length"),h=t("../internals/get-iterator-method"),u=t("../internals/is-array-iterator-method"),d=t("../internals/function-bind-context"),c=t("../internals/array-buffer-view-core").aTypedArrayConstructor;g.exports=function(i,n,o){var l,a,f,v,b,_,w=p(i),E=arguments.length,C=1<E?n:void 0,A=C!==void 0,L=h(w);if(L!=null&&!u(L))for(_=(b=L.call(w)).next,w=[];!(v=_.call(b)).done;)w.push(v.value);for(A&&2<E&&(C=d(C,o,2)),a=r(w.length),f=new(c(this))(a),l=0;l<a;l++)f[l]=A?C(w[l],l):w[l];return f}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],143:[function(t,g,m){var p=0,r=Math.random();g.exports=function(h){return"Symbol("+String(h===void 0?"":h)+")_"+(++p+r).toString(36)}},{}],144:[function(t,g,m){var p=t("../internals/native-symbol");g.exports=p&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":83}],145:[function(t,g,m){var p=t("../internals/well-known-symbol");m.f=p},{"../internals/well-known-symbol":146}],146:[function(t,g,m){var p=t("../internals/global"),r=t("../internals/shared"),h=t("../internals/has"),u=t("../internals/uid"),d=t("../internals/native-symbol"),c=t("../internals/use-symbol-as-uid"),i=r("wks"),n=p.Symbol,o=c?n:n&&n.withoutSetter||u;g.exports=function(l){return h(i,l)||(d&&h(n,l)?i[l]=n[l]:i[l]=o("Symbol."+l)),i[l]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":143,"../internals/use-symbol-as-uid":144}],147:[function(t,g,m){g.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},{}],148:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/global"),h=t("../internals/array-buffer"),u=t("../internals/set-species"),d="ArrayBuffer",c=h[d];p({global:!0,forced:r[d]!==c},{ArrayBuffer:c}),u(d)},{"../internals/array-buffer":13,"../internals/export":49,"../internals/global":59,"../internals/set-species":116}],149:[function(t,g,m){function p(C){if(!d(C))return!1;var A=C[v];return A!==void 0?!!A:u(C)}var r=t("../internals/export"),h=t("../internals/fails"),u=t("../internals/is-array"),d=t("../internals/is-object"),c=t("../internals/to-object"),i=t("../internals/to-length"),n=t("../internals/create-property"),o=t("../internals/array-species-create"),l=t("../internals/array-method-has-species-support"),a=t("../internals/well-known-symbol"),f=t("../internals/engine-v8-version"),v=a("isConcatSpreadable"),b=9007199254740991,_="Maximum allowed index exceeded",w=51<=f||!h(function(){var C=[];return C[v]=!1,C.concat()[0]!==C}),E=l("concat");r({target:"Array",proto:!0,forced:!w||!E},{concat:function(C){var A,L,P,R,N,I=c(this),O=o(I,0),U=0;for(A=-1,P=arguments.length;A<P;A++)if(p(N=A===-1?I:arguments[A])){if(R=i(N.length),b<U+R)throw TypeError(_);for(L=0;L<R;L++,U++)L in N&&n(O,U,N[L])}else{if(b<=U)throw TypeError(_);n(O,U++,N)}return O.length=U,O}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":39,"../internals/engine-v8-version":47,"../internals/export":49,"../internals/fails":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":134,"../internals/to-object":135,"../internals/well-known-symbol":146}],150:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/array-iteration").every,h=t("../internals/array-method-is-strict"),u=t("../internals/array-method-uses-to-length"),d=h("every"),c=u("every");p({target:"Array",proto:!0,forced:!d||!c},{every:function(i,n){return r(this,i,1<arguments.length?n:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],151:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/array-fill"),h=t("../internals/add-to-unscopables");p({target:"Array",proto:!0},{fill:r}),h("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":49}],152:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/array-iteration").filter,h=t("../internals/array-method-has-species-support"),u=t("../internals/array-method-uses-to-length"),d=h("filter"),c=u("filter");p({target:"Array",proto:!0,forced:!d||!c},{filter:function(i,n){return r(this,i,1<arguments.length?n:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":49}],153:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/flatten-into-array"),h=t("../internals/to-object"),u=t("../internals/to-length"),d=t("../internals/a-function"),c=t("../internals/array-species-create");p({target:"Array",proto:!0},{flatMap:function(i,n){var o,l=h(this),a=u(l.length);return d(i),(o=c(l,0)).length=r(o,l,l,a,0,1,i,1<arguments.length?n:void 0),o}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":49,"../internals/flatten-into-array":52,"../internals/to-length":134,"../internals/to-object":135}],154:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/array-for-each");p({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},{"../internals/array-for-each":16,"../internals/export":49}],155:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/array-from");p({target:"Array",stat:!0,forced:!t("../internals/check-correctness-of-iteration")(function(h){Array.from(h)})},{from:r})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":49}],156:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/array-includes").includes,h=t("../internals/add-to-unscopables");p({target:"Array",proto:!0,forced:!t("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(u,d){return r(this,u,1<arguments.length?d:void 0)}}),h("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":49}],157:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/array-includes").indexOf,h=t("../internals/array-method-is-strict"),u=t("../internals/array-method-uses-to-length"),d=[].indexOf,c=!!d&&1/[1].indexOf(1,-0)<0,i=h("indexOf"),n=u("indexOf",{ACCESSORS:!0,1:0});p({target:"Array",proto:!0,forced:c||!i||!n},{indexOf:function(o,l){return c?d.apply(this,arguments)||0:r(this,o,1<arguments.length?l:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],158:[function(t,g,m){var p=t("../internals/to-indexed-object"),r=t("../internals/add-to-unscopables"),h=t("../internals/iterators"),u=t("../internals/internal-state"),d=t("../internals/define-iterator"),c="Array Iterator",i=u.set,n=u.getterFor(c);g.exports=d(Array,"Array",function(o,l){i(this,{type:c,target:p(o),index:0,kind:l})},function(){var o=n(this),l=o.target,a=o.kind,f=o.index++;return!l||f>=l.length?{value:o.target=void 0,done:!0}:a=="keys"?{value:f,done:!1}:a=="values"?{value:l[f],done:!1}:{value:[f,l[f]],done:!1}},"values"),h.Arguments=h.Array,r("keys"),r("values"),r("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":40,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":132}],159:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/indexed-object"),h=t("../internals/to-indexed-object"),u=t("../internals/array-method-is-strict"),d=[].join,c=r!=Object,i=u("join",",");p({target:"Array",proto:!0,forced:c||!i},{join:function(n){return d.call(h(this),n===void 0?",":n)}})},{"../internals/array-method-is-strict":22,"../internals/export":49,"../internals/indexed-object":66,"../internals/to-indexed-object":132}],160:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/array-last-index-of");p({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},{"../internals/array-last-index-of":20,"../internals/export":49}],161:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/array-iteration").map,h=t("../internals/array-method-has-species-support"),u=t("../internals/array-method-uses-to-length"),d=h("map"),c=u("map");p({target:"Array",proto:!0,forced:!d||!c},{map:function(i,n){return r(this,i,1<arguments.length?n:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":49}],162:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/is-object"),h=t("../internals/is-array"),u=t("../internals/to-absolute-index"),d=t("../internals/to-length"),c=t("../internals/to-indexed-object"),i=t("../internals/create-property"),n=t("../internals/well-known-symbol"),o=t("../internals/array-method-has-species-support"),l=t("../internals/array-method-uses-to-length"),a=o("slice"),f=l("slice",{ACCESSORS:!0,0:0,1:2}),v=n("species"),b=[].slice,_=Math.max;p({target:"Array",proto:!0,forced:!a||!f},{slice:function(w,E){var C,A,L,P=c(this),R=d(P.length),N=u(w,R),I=u(E===void 0?R:E,R);if(h(P)&&(typeof(C=P.constructor)!="function"||C!==Array&&!h(C.prototype)?r(C)&&(C=C[v])===null&&(C=void 0):C=void 0,C===Array||C===void 0))return b.call(P,N,I);for(A=new(C===void 0?Array:C)(_(I-N,0)),L=0;N<I;N++,L++)N in P&&i(A,L,P[N]);return A.length=L,A}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":39,"../internals/export":49,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134,"../internals/well-known-symbol":146}],163:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/array-iteration").some,h=t("../internals/array-method-is-strict"),u=t("../internals/array-method-uses-to-length"),d=h("some"),c=u("some");p({target:"Array",proto:!0,forced:!d||!c},{some:function(i,n){return r(this,i,1<arguments.length?n:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],164:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/to-absolute-index"),h=t("../internals/to-integer"),u=t("../internals/to-length"),d=t("../internals/to-object"),c=t("../internals/array-species-create"),i=t("../internals/create-property"),n=t("../internals/array-method-has-species-support"),o=t("../internals/array-method-uses-to-length"),l=n("splice"),a=o("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,v=Math.min;p({target:"Array",proto:!0,forced:!l||!a},{splice:function(b,_){var w,E,C,A,L,P,R=d(this),N=u(R.length),I=r(b,N),O=arguments.length;if(O===0?w=E=0:E=O===1?(w=0,N-I):(w=O-2,v(f(h(_),0),N-I)),9007199254740991<N+w-E)throw TypeError("Maximum allowed length exceeded");for(C=c(R,E),A=0;A<E;A++)(L=I+A)in R&&i(C,A,R[L]);if(w<(C.length=E)){for(A=I;A<N-E;A++)P=A+w,(L=A+E)in R?R[P]=R[L]:delete R[P];for(A=N;N-E+w<A;A--)delete R[A-1]}else if(E<w)for(A=N-E;I<A;A--)P=A+w-1,(L=A+E-1)in R?R[P]=R[L]:delete R[P];for(A=0;A<w;A++)R[A+I]=arguments[A+2];return R.length=N-E+w,C}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":39,"../internals/export":49,"../internals/to-absolute-index":130,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],165:[function(t,g,m){t("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],166:[function(t,g,m){var p=t("../internals/descriptors"),r=t("../internals/object-define-property").f,h=Function.prototype,u=h.toString,d=/^\s*function ([^ (]*)/;!p||"name"in h||r(h,"name",{configurable:!0,get:function(){try{return u.call(this).match(d)[1]}catch{return""}}})},{"../internals/descriptors":42,"../internals/object-define-property":92}],167:[function(t,g,m){var p=t("../internals/collection"),r=t("../internals/collection-strong");g.exports=p("Map",function(h){return function(u){return h(this,arguments.length?u:void 0)}},r)},{"../internals/collection":31,"../internals/collection-strong":30}],168:[function(t,g,m){var p=t("../internals/export"),r=Math.hypot,h=Math.abs,u=Math.sqrt;p({target:"Math",stat:!0,forced:!!r&&r(1/0,NaN)!==1/0},{hypot:function(d,c){for(var i,n,o=0,l=0,a=arguments.length,f=0;l<a;)f<(i=h(arguments[l++]))?(o=o*(n=f/i)*n+1,f=i):o+=0<i?(n=i/f)*n:i;return f===1/0?1/0:f*u(o)}})},{"../internals/export":49}],169:[function(t,g,m){t("../internals/export")({target:"Math",stat:!0},{sign:t("../internals/math-sign")})},{"../internals/export":49,"../internals/math-sign":80}],170:[function(t,g,m){function p(I){var O,U,K,ee,H,te,Z,ge,$=o(I,!1);if(typeof $=="string"&&2<$.length){if((O=($=_($)).charCodeAt(0))===43||O===45){if((U=$.charCodeAt(2))===88||U===120)return NaN}else if(O===48){switch($.charCodeAt(1)){case 66:case 98:K=2,ee=49;break;case 79:case 111:K=8,ee=55;break;default:return+$}for(te=(H=$.slice(2)).length,Z=0;Z<te;Z++)if((ge=H.charCodeAt(Z))<48||ee<ge)return NaN;return parseInt(H,K)}}return+$}var r=t("../internals/descriptors"),h=t("../internals/global"),u=t("../internals/is-forced"),d=t("../internals/redefine"),c=t("../internals/has"),i=t("../internals/classof-raw"),n=t("../internals/inherit-if-required"),o=t("../internals/to-primitive"),l=t("../internals/fails"),a=t("../internals/object-create"),f=t("../internals/object-get-own-property-names").f,v=t("../internals/object-get-own-property-descriptor").f,b=t("../internals/object-define-property").f,_=t("../internals/string-trim").trim,w="Number",E=h[w],C=E.prototype,A=i(a(C))==w;if(u(w,!E(" 0o1")||!E("0b1")||E("+0x1"))){for(var L,P=function(I){var O=arguments.length<1?0:I,U=this;return U instanceof P&&(A?l(function(){C.valueOf.call(U)}):i(U)!=w)?n(new E(p(O)),U,P):p(O)},R=r?f(E):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),N=0;R.length>N;N++)c(E,L=R[N])&&!c(P,L)&&b(P,L,v(E,L));(P.prototype=C).constructor=P,d(h,w,P)}},{"../internals/classof-raw":28,"../internals/descriptors":42,"../internals/fails":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":127,"../internals/to-primitive":138}],171:[function(t,g,m){t("../internals/export")({target:"Number",stat:!0},{isFinite:t("../internals/number-is-finite")})},{"../internals/export":49,"../internals/number-is-finite":88}],172:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/to-integer"),h=t("../internals/this-number-value"),u=t("../internals/string-repeat"),d=t("../internals/fails"),c=1 .toFixed,i=Math.floor,n=function(o,l,a){return l===0?a:l%2==1?n(o,l-1,a*o):n(o*o,l/2,a)};p({target:"Number",proto:!0,forced:c&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||0xde0b6b3a7640080 .toFixed(0)!=="1000000000000000128")||!d(function(){c.call({})})},{toFixed:function(o){function l(R,N){for(var I=-1,O=N;++I<6;)O+=R*A[I],A[I]=O%1e7,O=i(O/1e7)}function a(R){for(var N=6,I=0;0<=--N;)I+=A[N],A[N]=i(I/R),I=I%R*1e7}function f(){for(var R=6,N="";0<=--R;)if(N!==""||R===0||A[R]!==0){var I=String(A[R]);N=N===""?I:N+u.call("0",7-I.length)+I}return N}var v,b,_,w,E=h(this),C=r(o),A=[0,0,0,0,0,0],L="",P="0";if(C<0||20<C)throw RangeError("Incorrect fraction digits");if(E!=E)return"NaN";if(E<=-1e21||1e21<=E)return String(E);if(E<0&&(L="-",E=-E),1e-21<E)if(b=(v=function(R){for(var N=0,I=R;4096<=I;)N+=12,I/=4096;for(;2<=I;)N+=1,I/=2;return N}(E*n(2,69,1))-69)<0?E*n(2,-v,1):E/n(2,v,1),b*=4503599627370496,0<(v=52-v)){for(l(0,b),_=C;7<=_;)l(1e7,0),_-=7;for(l(n(10,_,1),0),_=v-1;23<=_;)a(1<<23),_-=23;a(1<<_),l(1,1),a(2),P=f()}else l(0,b),l(1<<-v,0),P=f()+u.call("0",C);return P=0<C?L+((w=P.length)<=C?"0."+u.call("0",C-w)+P:P.slice(0,w-C)+"."+P.slice(w-C)):L+P}})},{"../internals/export":49,"../internals/fails":50,"../internals/string-repeat":125,"../internals/this-number-value":129,"../internals/to-integer":133}],173:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/object-assign");p({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},{"../internals/export":49,"../internals/object-assign":89}],174:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/fails"),h=t("../internals/object-get-own-property-names-external").f;p({target:"Object",stat:!0,forced:r(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:h})},{"../internals/export":49,"../internals/fails":50,"../internals/object-get-own-property-names-external":94}],175:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/fails"),h=t("../internals/to-object"),u=t("../internals/object-get-prototype-of"),d=t("../internals/correct-prototype-getter");p({target:"Object",stat:!0,forced:r(function(){u(1)}),sham:!d},{getPrototypeOf:function(c){return u(h(c))}})},{"../internals/correct-prototype-getter":34,"../internals/export":49,"../internals/fails":50,"../internals/object-get-prototype-of":97,"../internals/to-object":135}],176:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/to-object"),h=t("../internals/object-keys");p({target:"Object",stat:!0,forced:t("../internals/fails")(function(){h(1)})},{keys:function(u){return h(r(u))}})},{"../internals/export":49,"../internals/fails":50,"../internals/object-keys":99,"../internals/to-object":135}],177:[function(t,g,m){var p=t("../internals/to-string-tag-support"),r=t("../internals/redefine"),h=t("../internals/object-to-string");p||r(Object.prototype,"toString",h,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":139}],178:[function(t,g,m){function p(Pe){var Oe;return!(!A(Pe)||typeof(Oe=Pe.then)!="function")&&Oe}function r(Pe,Oe,Ae){if(!Oe.notified){Oe.notified=!0;var Ge=Oe.reactions;ee(function(){for(var be=Oe.value,Xe=Oe.state==1,k=0;Ge.length>k;){var Q,V,ae,me=Ge[k++],Me=Xe?me.ok:me.fail,Ee=me.resolve,ke=me.reject,we=me.domain;try{Me?(Xe||(Oe.rejection===2&&Ie(Pe,Oe),Oe.rejection=1),Me===!0?Q=be:(we&&we.enter(),Q=Me(be),we&&(we.exit(),ae=!0)),Q===me.promise?ke(Y("Promise-chain cycle")):(V=p(Q))?V.call(Q,Ee,ke):Ee(Q)):ke(be)}catch(Je){we&&!ae&&we.exit(),ke(Je)}}Oe.reactions=[],Oe.notified=!1,Ae&&!Oe.rejection&&ue(Pe,Oe)})}}function h(Pe,Oe,Ae){var Ge,be;Se?((Ge=J.createEvent("Event")).promise=Oe,Ge.reason=Ae,Ge.initEvent(Pe,!1,!0),f.dispatchEvent(Ge)):Ge={promise:Oe,reason:Ae},(be=f["on"+Pe])?be(Ge):Pe===Re&&te("Unhandled promise rejection",Ae)}function u(Pe,Oe,Ae,Ge){return function(be){Pe(Oe,Ae,be,Ge)}}function d(Pe,Oe,Ae,Ge){Oe.done||(Oe.done=!0,Ge&&(Oe=Ge),Oe.value=Ae,Oe.state=2,r(Pe,Oe,!0))}var c,i,n,o,l=t("../internals/export"),a=t("../internals/is-pure"),f=t("../internals/global"),v=t("../internals/get-built-in"),b=t("../internals/native-promise-constructor"),_=t("../internals/redefine"),w=t("../internals/redefine-all"),E=t("../internals/set-to-string-tag"),C=t("../internals/set-species"),A=t("../internals/is-object"),L=t("../internals/a-function"),P=t("../internals/an-instance"),R=t("../internals/classof-raw"),N=t("../internals/inspect-source"),I=t("../internals/iterate"),O=t("../internals/check-correctness-of-iteration"),U=t("../internals/species-constructor"),K=t("../internals/task").set,ee=t("../internals/microtask"),H=t("../internals/promise-resolve"),te=t("../internals/host-report-errors"),Z=t("../internals/new-promise-capability"),ge=t("../internals/perform"),$=t("../internals/internal-state"),se=t("../internals/is-forced"),z=t("../internals/well-known-symbol"),de=t("../internals/engine-v8-version"),re=z("species"),ie="Promise",j=$.get,B=$.set,G=$.getterFor(ie),ne=b,Y=f.TypeError,J=f.document,fe=f.process,oe=v("fetch"),X=Z.f,W=X,pe=R(fe)=="process",Se=!!(J&&J.createEvent&&f.dispatchEvent),Re="unhandledrejection",Le=se(ie,function(){if(N(ne)===String(ne)&&(de===66||!pe&&typeof PromiseRejectionEvent!="function")||a&&!ne.prototype.finally)return!0;if(51<=de&&/native code/.test(ne))return!1;function Pe(Ae){Ae(function(){},function(){})}var Oe=ne.resolve(1);return(Oe.constructor={})[re]=Pe,!(Oe.then(function(){})instanceof Pe)}),ce=Le||!O(function(Pe){ne.all(Pe).catch(function(){})}),ue=function(Pe,Oe){K.call(f,function(){var Ae,Ge=Oe.value;if(Ce(Oe)&&(Ae=ge(function(){pe?fe.emit("unhandledRejection",Ge,Pe):h(Re,Pe,Ge)}),Oe.rejection=pe||Ce(Oe)?2:1,Ae.error))throw Ae.value})},Ce=function(Pe){return Pe.rejection!==1&&!Pe.parent},Ie=function(Pe,Oe){K.call(f,function(){pe?fe.emit("rejectionHandled",Pe):h("rejectionhandled",Pe,Oe.value)})},Ve=function(Pe,Oe,Ae,Ge){if(!Oe.done){Oe.done=!0,Ge&&(Oe=Ge);try{if(Pe===Ae)throw Y("Promise can't be resolved itself");var be=p(Ae);be?ee(function(){var Xe={done:!1};try{be.call(Ae,u(Ve,Pe,Xe,Oe),u(d,Pe,Xe,Oe))}catch(k){d(Pe,Xe,k,Oe)}}):(Oe.value=Ae,Oe.state=1,r(Pe,Oe,!1))}catch(Xe){d(Pe,{done:!1},Xe,Oe)}}};Le&&(ne=function(Pe){P(this,ne,ie),L(Pe),c.call(this);var Oe=j(this);try{Pe(u(Ve,this,Oe),u(d,this,Oe))}catch(Ae){d(this,Oe,Ae)}},(c=function(){B(this,{type:ie,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=w(ne.prototype,{then:function(Pe,Oe){var Ae=G(this),Ge=X(U(this,ne));return Ge.ok=typeof Pe!="function"||Pe,Ge.fail=typeof Oe=="function"&&Oe,Ge.domain=pe?fe.domain:void 0,Ae.parent=!0,Ae.reactions.push(Ge),Ae.state!=0&&r(this,Ae,!1),Ge.promise},catch:function(Pe){return this.then(void 0,Pe)}}),i=function(){var Pe=new c,Oe=j(Pe);this.promise=Pe,this.resolve=u(Ve,Pe,Oe),this.reject=u(d,Pe,Oe)},Z.f=X=function(Pe){return Pe===ne||Pe===n?new i(Pe):W(Pe)},a||typeof b!="function"||(o=b.prototype.then,_(b.prototype,"then",function(Pe,Oe){var Ae=this;return new ne(function(Ge,be){o.call(Ae,Ge,be)}).then(Pe,Oe)},{unsafe:!0}),typeof oe=="function"&&l({global:!0,enumerable:!0,forced:!0},{fetch:function(Pe){return H(ne,oe.apply(f,arguments))}}))),l({global:!0,wrap:!0,forced:Le},{Promise:ne}),E(ne,ie,!1,!0),C(ie),n=v(ie),l({target:ie,stat:!0,forced:Le},{reject:function(Pe){var Oe=X(this);return Oe.reject.call(void 0,Pe),Oe.promise}}),l({target:ie,stat:!0,forced:a||Le},{resolve:function(Pe){return H(a&&this===n?ne:this,Pe)}}),l({target:ie,stat:!0,forced:ce},{all:function(Pe){var Oe=this,Ae=X(Oe),Ge=Ae.resolve,be=Ae.reject,Xe=ge(function(){var k=L(Oe.resolve),Q=[],V=0,ae=1;I(Pe,function(me){var Me=V++,Ee=!1;Q.push(void 0),ae++,k.call(Oe,me).then(function(ke){Ee||(Ee=!0,Q[Me]=ke,--ae||Ge(Q))},be)}),--ae||Ge(Q)});return Xe.error&&be(Xe.value),Ae.promise},race:function(Pe){var Oe=this,Ae=X(Oe),Ge=Ae.reject,be=ge(function(){var Xe=L(Oe.resolve);I(Pe,function(k){Xe.call(Oe,k).then(Ae.resolve,Ge)})});return be.error&&Ge(be.value),Ae.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":47,"../internals/export":49,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":128,"../internals/well-known-symbol":146}],179:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/get-built-in"),h=t("../internals/a-function"),u=t("../internals/an-object"),d=t("../internals/is-object"),c=t("../internals/object-create"),i=t("../internals/function-bind"),n=t("../internals/fails"),o=r("Reflect","construct"),l=n(function(){function v(){}return!(o(function(){},[],v)instanceof v)}),a=!n(function(){o(function(){})}),f=l||a;p({target:"Reflect",stat:!0,forced:f,sham:f},{construct:function(v,b,_){h(v),u(b);var w=arguments.length<3?v:h(_);if(a&&!l)return o(v,b,w);if(v==w){switch(b.length){case 0:return new v;case 1:return new v(b[0]);case 2:return new v(b[0],b[1]);case 3:return new v(b[0],b[1],b[2]);case 4:return new v(b[0],b[1],b[2],b[3])}var E=[null];return E.push.apply(E,b),new(i.apply(v,E))}var C=w.prototype,A=c(d(C)?C:Object.prototype),L=Function.apply.call(v,A,b);return d(L)?L:A}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":49,"../internals/fails":50,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],180:[function(t,g,m){var p=t("../internals/descriptors"),r=t("../internals/global"),h=t("../internals/is-forced"),u=t("../internals/inherit-if-required"),d=t("../internals/object-define-property").f,c=t("../internals/object-get-own-property-names").f,i=t("../internals/is-regexp"),n=t("../internals/regexp-flags"),o=t("../internals/regexp-sticky-helpers"),l=t("../internals/redefine"),a=t("../internals/fails"),f=t("../internals/internal-state").set,v=t("../internals/set-species"),b=t("../internals/well-known-symbol")("match"),_=r.RegExp,w=_.prototype,E=/a/g,C=/a/g,A=new _(E)!==E,L=o.UNSUPPORTED_Y;if(p&&h("RegExp",!A||L||a(function(){return C[b]=!1,_(E)!=E||_(C)==C||_(E,"i")!="/a/i"}))){let I=function(O){O in P||d(P,O,{configurable:!0,get:function(){return _[O]},set:function(U){_[O]=U}})};for(var P=function(O,U){var K,ee=this instanceof P,H=i(O),te=U===void 0;if(!ee&&H&&O.constructor===P&&te)return O;A?H&&!te&&(O=O.source):O instanceof P&&(te&&(U=n.call(O)),O=O.source),L&&(K=!!U&&-1<U.indexOf("y"))&&(U=U.replace(/y/g,""));var Z=u(A?new _(O,U):_(O,U),ee?this:w,P);return L&&K&&f(Z,{sticky:K}),Z},R=c(_),N=0;R.length>N;)I(R[N++]);(w.constructor=P).prototype=w,l(r,"RegExp",P)}v("RegExp")},{"../internals/descriptors":42,"../internals/fails":50,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":146}],181:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/regexp-exec");p({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},{"../internals/export":49,"../internals/regexp-exec":110}],182:[function(t,g,m){var p=t("../internals/redefine"),r=t("../internals/an-object"),h=t("../internals/fails"),u=t("../internals/regexp-flags"),d="toString",c=RegExp.prototype,i=c[d],n=h(function(){return i.call({source:"a",flags:"b"})!="/a/b"}),o=i.name!=d;(n||o)&&p(RegExp.prototype,d,function(){var l=r(this),a=String(l.source),f=l.flags;return"/"+a+"/"+String(f===void 0&&l instanceof RegExp&&!("flags"in c)?u.call(l):f)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":50,"../internals/redefine":108,"../internals/regexp-flags":111}],183:[function(t,g,m){var p=t("../internals/collection"),r=t("../internals/collection-strong");g.exports=p("Set",function(h){return function(u){return h(this,arguments.length?u:void 0)}},r)},{"../internals/collection":31,"../internals/collection-strong":30}],184:[function(t,g,m){var p,r=t("../internals/export"),h=t("../internals/object-get-own-property-descriptor").f,u=t("../internals/to-length"),d=t("../internals/not-a-regexp"),c=t("../internals/require-object-coercible"),i=t("../internals/correct-is-regexp-logic"),n=t("../internals/is-pure"),o="".endsWith,l=Math.min,a=i("endsWith");r({target:"String",proto:!0,forced:!!(n||a||!(p=h(String.prototype,"endsWith"))||p.writable)&&!a},{endsWith:function(f,v){var b=String(c(this));d(f);var _=1<arguments.length?v:void 0,w=u(b.length),E=_===void 0?w:l(u(_),w),C=String(f);return o?o.call(b,C,E):b.slice(E-C.length,E)===C}})},{"../internals/correct-is-regexp-logic":33,"../internals/export":49,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":134}],185:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/not-a-regexp"),h=t("../internals/require-object-coercible");p({target:"String",proto:!0,forced:!t("../internals/correct-is-regexp-logic")("includes")},{includes:function(u,d){return!!~String(h(this)).indexOf(r(u),1<arguments.length?d:void 0)}})},{"../internals/correct-is-regexp-logic":33,"../internals/export":49,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],186:[function(t,g,m){var p=t("../internals/string-multibyte").charAt,r=t("../internals/internal-state"),h=t("../internals/define-iterator"),u="String Iterator",d=r.set,c=r.getterFor(u);h(String,"String",function(i){d(this,{type:u,string:String(i),index:0})},function(){var i,n=c(this),o=n.string,l=n.index;return l>=o.length?{value:void 0,done:!0}:(i=p(o,l),n.index+=i.length,{value:i,done:!1})})},{"../internals/define-iterator":40,"../internals/internal-state":70,"../internals/string-multibyte":123}],187:[function(t,g,m){var p=t("../internals/fix-regexp-well-known-symbol-logic"),r=t("../internals/an-object"),h=t("../internals/to-length"),u=t("../internals/require-object-coercible"),d=t("../internals/advance-string-index"),c=t("../internals/regexp-exec-abstract");p("match",1,function(i,n,o){return[function(l){var a=u(this),f=l==null?void 0:l[i];return f!==void 0?f.call(l,a):new RegExp(l)[i](String(a))},function(l){var a=o(n,l,this);if(a.done)return a.value;var f=r(l),v=String(this);if(!f.global)return c(f,v);for(var b,_=f.unicode,w=[],E=f.lastIndex=0;(b=c(f,v))!==null;){var C=String(b[0]);(w[E]=C)===""&&(f.lastIndex=d(v,h(f.lastIndex),_)),E++}return E===0?null:w}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":134}],188:[function(t,g,m){t("../internals/export")({target:"String",proto:!0},{repeat:t("../internals/string-repeat")})},{"../internals/export":49,"../internals/string-repeat":125}],189:[function(t,g,m){var p=t("../internals/fix-regexp-well-known-symbol-logic"),r=t("../internals/an-object"),h=t("../internals/to-object"),u=t("../internals/to-length"),d=t("../internals/to-integer"),c=t("../internals/require-object-coercible"),i=t("../internals/advance-string-index"),n=t("../internals/regexp-exec-abstract"),o=Math.max,l=Math.min,a=Math.floor,f=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g;p("replace",2,function(b,_,w,E){var C=E.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,A=E.REPLACE_KEEPS_$0,L=C?"$":"$0";return[function(R,N){var I=c(this),O=R==null?void 0:R[b];return O!==void 0?O.call(R,I,N):_.call(String(I),R,N)},function(R,N){if(!C&&A||typeof N=="string"&&N.indexOf(L)===-1){var I=w(_,R,this,N);if(I.done)return I.value}var O=r(R),U=String(this),K=typeof N=="function";K||(N=String(N));var ee=O.global;if(ee){var H=O.unicode;O.lastIndex=0}for(var te=[];;){var Z=n(O,U);if(Z===null||(te.push(Z),!ee))break;String(Z[0])===""&&(O.lastIndex=i(U,u(O.lastIndex),H))}for(var ge,$="",se=0,z=0;z<te.length;z++){Z=te[z];for(var de=String(Z[0]),re=o(l(d(Z.index),U.length),0),ie=[],j=1;j<Z.length;j++)ie.push((ge=Z[j])===void 0?ge:String(ge));var B=Z.groups;if(K){var G=[de].concat(ie,re,U);B!==void 0&&G.push(B);var ne=String(N.apply(void 0,G))}else ne=P(de,U,re,ie,B,N);se<=re&&($+=U.slice(se,re)+ne,se=re+de.length)}return $+U.slice(se)}];function P(R,N,I,O,U,K){var ee=I+R.length,H=O.length,te=v;return U!==void 0&&(U=h(U),te=f),_.call(K,te,function(Z,ge){var $;switch(ge.charAt(0)){case"$":return"$";case"&":return R;case"`":return N.slice(0,I);case"'":return N.slice(ee);case"<":$=U[ge.slice(1,-1)];break;default:var se=+ge;if(se==0)return Z;if(H<se){var z=a(se/10);return z===0?Z:z<=H?O[z-1]===void 0?ge.charAt(1):O[z-1]+ge.charAt(1):Z}$=O[se-1]}return $===void 0?"":$})}})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],190:[function(t,g,m){var p=t("../internals/fix-regexp-well-known-symbol-logic"),r=t("../internals/an-object"),h=t("../internals/require-object-coercible"),u=t("../internals/same-value"),d=t("../internals/regexp-exec-abstract");p("search",1,function(c,i,n){return[function(o){var l=h(this),a=o==null?void 0:o[c];return a!==void 0?a.call(o,l):new RegExp(o)[c](String(l))},function(o){var l=n(i,o,this);if(l.done)return l.value;var a=r(o),f=String(this),v=a.lastIndex;u(v,0)||(a.lastIndex=0);var b=d(a,f);return u(a.lastIndex,v)||(a.lastIndex=v),b===null?-1:b.index}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],191:[function(t,g,m){var p=t("../internals/fix-regexp-well-known-symbol-logic"),r=t("../internals/is-regexp"),h=t("../internals/an-object"),u=t("../internals/require-object-coercible"),d=t("../internals/species-constructor"),c=t("../internals/advance-string-index"),i=t("../internals/to-length"),n=t("../internals/regexp-exec-abstract"),o=t("../internals/regexp-exec"),l=t("../internals/fails"),a=[].push,f=Math.min,v=4294967295,b=!l(function(){return!RegExp(v,"y")});p("split",2,function(_,w,E){var C;return C="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(A,L){var P=String(u(this)),R=L===void 0?v:L>>>0;if(R==0)return[];if(A===void 0)return[P];if(!r(A))return w.call(P,A,R);for(var N,I,O,U=[],K=(A.ignoreCase?"i":"")+(A.multiline?"m":"")+(A.unicode?"u":"")+(A.sticky?"y":""),ee=0,H=new RegExp(A.source,K+"g");(N=o.call(H,P))&&!(ee<(I=H.lastIndex)&&(U.push(P.slice(ee,N.index)),1<N.length&&N.index<P.length&&a.apply(U,N.slice(1)),O=N[0].length,ee=I,U.length>=R));)H.lastIndex===N.index&&H.lastIndex++;return ee===P.length?!O&&H.test("")||U.push(""):U.push(P.slice(ee)),U.length>R?U.slice(0,R):U}:"0".split(void 0,0).length?function(A,L){return A===void 0&&L===0?[]:w.call(this,A,L)}:w,[function(A,L){var P=u(this),R=A==null?void 0:A[_];return R!==void 0?R.call(A,P,L):C.call(String(P),A,L)},function(A,L){var P=E(C,A,this,L,C!==w);if(P.done)return P.value;var R=h(A),N=String(this),I=d(R,RegExp),O=R.unicode,U=(R.ignoreCase?"i":"")+(R.multiline?"m":"")+(R.unicode?"u":"")+(b?"y":"g"),K=new I(b?R:"^(?:"+R.source+")",U),ee=L===void 0?v:L>>>0;if(ee==0)return[];if(N.length===0)return n(K,N)===null?[N]:[];for(var H=0,te=0,Z=[];te<N.length;){K.lastIndex=b?te:0;var ge,$=n(K,b?N:N.slice(te));if($===null||(ge=f(i(K.lastIndex+(b?0:te)),N.length))===H)te=c(N,te,O);else{if(Z.push(N.slice(H,te)),Z.length===ee)return Z;for(var se=1;se<=$.length-1;se++)if(Z.push($[se]),Z.length===ee)return Z;te=H=ge}}return Z.push(N.slice(H)),Z}]},!b)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":50,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":134}],192:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/create-html");p({target:"String",proto:!0,forced:t("../internals/string-html-forced")("sub")},{sub:function(){return r(this,"sub","","")}})},{"../internals/create-html":35,"../internals/export":49,"../internals/string-html-forced":122}],193:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/string-trim").trim;p({target:"String",proto:!0,forced:t("../internals/string-trim-forced")("trim")},{trim:function(){return r(this)}})},{"../internals/export":49,"../internals/string-trim":127,"../internals/string-trim-forced":126}],194:[function(t,g,m){var p=t("../internals/export"),r=t("../internals/descriptors"),h=t("../internals/global"),u=t("../internals/has"),d=t("../internals/is-object"),c=t("../internals/object-define-property").f,i=t("../internals/copy-constructor-properties"),n=h.Symbol;if(r&&typeof n=="function"&&(!("description"in n.prototype)||n().description!==void 0)){var o={},l=function(_){var w=arguments.length<1||_===void 0?void 0:String(_),E=this instanceof l?new n(w):w===void 0?n():n(w);return w===""&&(o[E]=!0),E};i(l,n);var a=l.prototype=n.prototype;a.constructor=l;var f=a.toString,v=String(n("test"))=="Symbol(test)",b=/^Symbol\((.*)\)[^)]+$/;c(a,"description",{configurable:!0,get:function(){var _=d(this)?this.valueOf():this,w=f.call(_);if(u(o,_))return"";var E=v?w.slice(7,-1):w.replace(b,"$1");return E===""?void 0:E}}),p({global:!0,forced:!0},{Symbol:l})}},{"../internals/copy-constructor-properties":32,"../internals/descriptors":42,"../internals/export":49,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],195:[function(t,g,m){t("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":41}],196:[function(t,g,m){function p(V,ae){var me=ue[V]=P(W[Y]);return fe(me,{type:ne,tag:V,description:ae}),o||(me.description=ae),me}function r(V,ae){w(V);var me=C(ae),Me=R(me).concat(Q(me));return B(Me,function(Ee){o&&!k.call(me,Ee)||Xe(V,Ee,me[Ee])}),V}function h(V,ae){var me=C(V),Me=A(ae,!0);if(me!==X||!v(ue,Me)||v(Ce,Me)){var Ee=Se(me,Me);return!Ee||!v(ue,Me)||v(me,G)&&me[G][Me]||(Ee.enumerable=!0),Ee}}function u(V){var ae=Le(C(V)),me=[];return B(ae,function(Me){v(ue,Me)||v($,Me)||me.push(Me)}),me}var d=t("../internals/export"),c=t("../internals/global"),i=t("../internals/get-built-in"),n=t("../internals/is-pure"),o=t("../internals/descriptors"),l=t("../internals/native-symbol"),a=t("../internals/use-symbol-as-uid"),f=t("../internals/fails"),v=t("../internals/has"),b=t("../internals/is-array"),_=t("../internals/is-object"),w=t("../internals/an-object"),E=t("../internals/to-object"),C=t("../internals/to-indexed-object"),A=t("../internals/to-primitive"),L=t("../internals/create-property-descriptor"),P=t("../internals/object-create"),R=t("../internals/object-keys"),N=t("../internals/object-get-own-property-names"),I=t("../internals/object-get-own-property-names-external"),O=t("../internals/object-get-own-property-symbols"),U=t("../internals/object-get-own-property-descriptor"),K=t("../internals/object-define-property"),ee=t("../internals/object-property-is-enumerable"),H=t("../internals/create-non-enumerable-property"),te=t("../internals/redefine"),Z=t("../internals/shared"),ge=t("../internals/shared-key"),$=t("../internals/hidden-keys"),se=t("../internals/uid"),z=t("../internals/well-known-symbol"),de=t("../internals/well-known-symbol-wrapped"),re=t("../internals/define-well-known-symbol"),ie=t("../internals/set-to-string-tag"),j=t("../internals/internal-state"),B=t("../internals/array-iteration").forEach,G=ge("hidden"),ne="Symbol",Y="prototype",J=z("toPrimitive"),fe=j.set,oe=j.getterFor(ne),X=Object[Y],W=c.Symbol,pe=i("JSON","stringify"),Se=U.f,Re=K.f,Le=I.f,ce=ee.f,ue=Z("symbols"),Ce=Z("op-symbols"),Ie=Z("string-to-symbol-registry"),Ve=Z("symbol-to-string-registry"),Pe=Z("wks"),Oe=c.QObject,Ae=!Oe||!Oe[Y]||!Oe[Y].findChild,Ge=o&&f(function(){return P(Re({},"a",{get:function(){return Re(this,"a",{value:7}).a}})).a!=7})?function(V,ae,me){var Me=Se(X,ae);Me&&delete X[ae],Re(V,ae,me),Me&&V!==X&&Re(X,ae,Me)}:Re,be=a?function(V){return typeof V=="symbol"}:function(V){return Object(V)instanceof W},Xe=function(V,ae,me){V===X&&Xe(Ce,ae,me),w(V);var Me=A(ae,!0);return w(me),v(ue,Me)?(me.enumerable?(v(V,G)&&V[G][Me]&&(V[G][Me]=!1),me=P(me,{enumerable:L(0,!1)})):(v(V,G)||Re(V,G,L(1,{})),V[G][Me]=!0),Ge(V,Me,me)):Re(V,Me,me)},k=function(V){var ae=A(V,!0),me=ce.call(this,ae);return!(this===X&&v(ue,ae)&&!v(Ce,ae))&&(!(me||!v(this,ae)||!v(ue,ae)||v(this,G)&&this[G][ae])||me)},Q=function(V){var ae=V===X,me=Le(ae?Ce:C(V)),Me=[];return B(me,function(Ee){!v(ue,Ee)||ae&&!v(X,Ee)||Me.push(ue[Ee])}),Me};l||(te((W=function(V){if(this instanceof W)throw TypeError("Symbol is not a constructor");var ae=arguments.length&&V!==void 0?String(V):void 0,me=se(ae),Me=function(Ee){this===X&&Me.call(Ce,Ee),v(this,G)&&v(this[G],me)&&(this[G][me]=!1),Ge(this,me,L(1,Ee))};return o&&Ae&&Ge(X,me,{configurable:!0,set:Me}),p(me,ae)})[Y],"toString",function(){return oe(this).tag}),te(W,"withoutSetter",function(V){return p(se(V),V)}),ee.f=k,K.f=Xe,U.f=h,N.f=I.f=u,O.f=Q,de.f=function(V){return p(z(V),V)},o&&(Re(W[Y],"description",{configurable:!0,get:function(){return oe(this).description}}),n||te(X,"propertyIsEnumerable",k,{unsafe:!0}))),d({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:W}),B(R(Pe),function(V){re(V)}),d({target:ne,stat:!0,forced:!l},{for:function(V){var ae=String(V);if(v(Ie,ae))return Ie[ae];var me=W(ae);return Ie[ae]=me,Ve[me]=ae,me},keyFor:function(V){if(!be(V))throw TypeError(V+" is not a symbol");if(v(Ve,V))return Ve[V]},useSetter:function(){Ae=!0},useSimple:function(){Ae=!1}}),d({target:"Object",stat:!0,forced:!l,sham:!o},{create:function(V,ae){return ae===void 0?P(V):r(P(V),ae)},defineProperty:Xe,defineProperties:r,getOwnPropertyDescriptor:h}),d({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:u,getOwnPropertySymbols:Q}),d({target:"Object",stat:!0,forced:f(function(){O.f(1)})},{getOwnPropertySymbols:function(V){return O.f(E(V))}}),pe&&d({target:"JSON",stat:!0,forced:!l||f(function(){var V=W();return pe([V])!="[null]"||pe({a:V})!="{}"||pe(Object(V))!="{}"})},{stringify:function(V,ae,me){for(var Me,Ee=[V],ke=1;ke<arguments.length;)Ee.push(arguments[ke++]);if((_(Me=ae)||V!==void 0)&&!be(V))return b(ae)||(ae=function(we,Je){if(typeof Me=="function"&&(Je=Me.call(this,we,Je)),!be(Je))return Je}),Ee[1]=ae,pe.apply(null,Ee)}}),W[Y][J]||H(W[Y],J,W[Y].valueOf),ie(W,ne),$[G]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":37,"../internals/create-property-descriptor":38,"../internals/define-well-known-symbol":41,"../internals/descriptors":42,"../internals/export":49,"../internals/fails":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":132,"../internals/to-object":135,"../internals/to-primitive":138,"../internals/uid":143,"../internals/use-symbol-as-uid":144,"../internals/well-known-symbol":146,"../internals/well-known-symbol-wrapped":145}],197:[function(t,g,m){var p=t("../internals/array-buffer-view-core"),r=t("../internals/array-copy-within"),h=p.aTypedArray;(0,p.exportTypedArrayMethod)("copyWithin",function(u,d,c){return r.call(h(this),u,d,2<arguments.length?c:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],198:[function(t,g,m){var p=t("../internals/array-buffer-view-core"),r=t("../internals/array-iteration").every,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("every",function(u,d){return r(h(this),u,1<arguments.length?d:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],199:[function(t,g,m){var p=t("../internals/array-buffer-view-core"),r=t("../internals/array-fill"),h=p.aTypedArray;(0,p.exportTypedArrayMethod)("fill",function(u){return r.apply(h(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],200:[function(t,g,m){var p=t("../internals/array-buffer-view-core"),r=t("../internals/array-iteration").filter,h=t("../internals/species-constructor"),u=p.aTypedArray,d=p.aTypedArrayConstructor;(0,p.exportTypedArrayMethod)("filter",function(c,i){for(var n=r(u(this),c,1<arguments.length?i:void 0),o=h(this,this.constructor),l=0,a=n.length,f=new(d(o))(a);l<a;)f[l]=n[l++];return f})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],201:[function(t,g,m){var p=t("../internals/array-buffer-view-core"),r=t("../internals/array-iteration").findIndex,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("findIndex",function(u,d){return r(h(this),u,1<arguments.length?d:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],202:[function(t,g,m){var p=t("../internals/array-buffer-view-core"),r=t("../internals/array-iteration").find,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("find",function(u,d){return r(h(this),u,1<arguments.length?d:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],203:[function(t,g,m){t("../internals/typed-array-constructor")("Float32",function(p){return function(r,h,u){return p(this,r,h,u)}})},{"../internals/typed-array-constructor":140}],204:[function(t,g,m){t("../internals/typed-array-constructor")("Float64",function(p){return function(r,h,u){return p(this,r,h,u)}})},{"../internals/typed-array-constructor":140}],205:[function(t,g,m){var p=t("../internals/array-buffer-view-core"),r=t("../internals/array-iteration").forEach,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("forEach",function(u,d){r(h(this),u,1<arguments.length?d:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],206:[function(t,g,m){var p=t("../internals/array-buffer-view-core"),r=t("../internals/array-includes").includes,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("includes",function(u,d){return r(h(this),u,1<arguments.length?d:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],207:[function(t,g,m){var p=t("../internals/array-buffer-view-core"),r=t("../internals/array-includes").indexOf,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("indexOf",function(u,d){return r(h(this),u,1<arguments.length?d:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],208:[function(t,g,m){t("../internals/typed-array-constructor")("Int16",function(p){return function(r,h,u){return p(this,r,h,u)}})},{"../internals/typed-array-constructor":140}],209:[function(t,g,m){t("../internals/typed-array-constructor")("Int32",function(p){return function(r,h,u){return p(this,r,h,u)}})},{"../internals/typed-array-constructor":140}],210:[function(t,g,m){function p(){return i.call(l(this))}var r=t("../internals/global"),h=t("../internals/array-buffer-view-core"),u=t("../modules/es.array.iterator"),d=t("../internals/well-known-symbol")("iterator"),c=r.Uint8Array,i=u.values,n=u.keys,o=u.entries,l=h.aTypedArray,a=h.exportTypedArrayMethod,f=c&&c.prototype[d],v=!!f&&(f.name=="values"||f.name==null);a("entries",function(){return o.call(l(this))}),a("keys",function(){return n.call(l(this))}),a("values",p,!v),a(d,p,!v)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],211:[function(t,g,m){var p=t("../internals/array-buffer-view-core"),r=p.aTypedArray,h=p.exportTypedArrayMethod,u=[].join;h("join",function(d){return u.apply(r(this),arguments)})},{"../internals/array-buffer-view-core":12}],212:[function(t,g,m){var p=t("../internals/array-buffer-view-core"),r=t("../internals/array-last-index-of"),h=p.aTypedArray;(0,p.exportTypedArrayMethod)("lastIndexOf",function(u){return r.apply(h(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],213:[function(t,g,m){var p=t("../internals/array-buffer-view-core"),r=t("../internals/array-iteration").map,h=t("../internals/species-constructor"),u=p.aTypedArray,d=p.aTypedArrayConstructor;(0,p.exportTypedArrayMethod)("map",function(c,i){return r(u(this),c,1<arguments.length?i:void 0,function(n,o){return new(d(h(n,n.constructor)))(o)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],214:[function(t,g,m){var p=t("../internals/array-buffer-view-core"),r=t("../internals/array-reduce").right,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("reduceRight",function(u,d){return r(h(this),u,arguments.length,1<arguments.length?d:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],215:[function(t,g,m){var p=t("../internals/array-buffer-view-core"),r=t("../internals/array-reduce").left,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("reduce",function(u,d){return r(h(this),u,arguments.length,1<arguments.length?d:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],216:[function(t,g,m){var p=t("../internals/array-buffer-view-core"),r=p.aTypedArray,h=p.exportTypedArrayMethod,u=Math.floor;h("reverse",function(){for(var d,c=r(this).length,i=u(c/2),n=0;n<i;)d=this[n],this[n++]=this[--c],this[c]=d;return this})},{"../internals/array-buffer-view-core":12}],217:[function(t,g,m){var p=t("../internals/array-buffer-view-core"),r=t("../internals/to-length"),h=t("../internals/to-offset"),u=t("../internals/to-object"),d=t("../internals/fails"),c=p.aTypedArray;(0,p.exportTypedArrayMethod)("set",function(i,n){c(this);var o=h(1<arguments.length?n:void 0,1),l=this.length,a=u(i),f=r(a.length),v=0;if(l<f+o)throw RangeError("Wrong length");for(;v<f;)this[o+v]=a[v++]},d(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/to-length":134,"../internals/to-object":135,"../internals/to-offset":136}],218:[function(t,g,m){var p=t("../internals/array-buffer-view-core"),r=t("../internals/species-constructor"),h=t("../internals/fails"),u=p.aTypedArray,d=p.aTypedArrayConstructor,c=p.exportTypedArrayMethod,i=[].slice;c("slice",function(n,o){for(var l=i.call(u(this),n,o),a=r(this,this.constructor),f=0,v=l.length,b=new(d(a))(v);f<v;)b[f]=l[f++];return b},h(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/species-constructor":121}],219:[function(t,g,m){var p=t("../internals/array-buffer-view-core"),r=t("../internals/array-iteration").some,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("some",function(u,d){return r(h(this),u,1<arguments.length?d:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],220:[function(t,g,m){var p=t("../internals/array-buffer-view-core"),r=p.aTypedArray,h=p.exportTypedArrayMethod,u=[].sort;h("sort",function(d){return u.call(r(this),d)})},{"../internals/array-buffer-view-core":12}],221:[function(t,g,m){var p=t("../internals/array-buffer-view-core"),r=t("../internals/to-length"),h=t("../internals/to-absolute-index"),u=t("../internals/species-constructor"),d=p.aTypedArray;(0,p.exportTypedArrayMethod)("subarray",function(c,i){var n=d(this),o=n.length,l=h(c,o);return new(u(n,n.constructor))(n.buffer,n.byteOffset+l*n.BYTES_PER_ELEMENT,r((i===void 0?o:h(i,o))-l))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":130,"../internals/to-length":134}],222:[function(t,g,m){var p=t("../internals/global"),r=t("../internals/array-buffer-view-core"),h=t("../internals/fails"),u=p.Int8Array,d=r.aTypedArray,c=r.exportTypedArrayMethod,i=[].toLocaleString,n=[].slice,o=!!u&&h(function(){i.call(new u(1))});c("toLocaleString",function(){return i.apply(o?n.call(d(this)):d(this),arguments)},h(function(){return[1,2].toLocaleString()!=new u([1,2]).toLocaleString()})||!h(function(){u.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/global":59}],223:[function(t,g,m){var p=t("../internals/array-buffer-view-core").exportTypedArrayMethod,r=t("../internals/fails"),h=t("../internals/global").Uint8Array,u=h&&h.prototype||{},d=[].toString,c=[].join;r(function(){d.call({})})&&(d=function(){return c.call(this)}),p("toString",d,u.toString!=d)},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/global":59}],224:[function(t,g,m){t("../internals/typed-array-constructor")("Uint16",function(p){return function(r,h,u){return p(this,r,h,u)}})},{"../internals/typed-array-constructor":140}],225:[function(t,g,m){t("../internals/typed-array-constructor")("Uint32",function(p){return function(r,h,u){return p(this,r,h,u)}})},{"../internals/typed-array-constructor":140}],226:[function(t,g,m){t("../internals/typed-array-constructor")("Uint8",function(p){return function(r,h,u){return p(this,r,h,u)}})},{"../internals/typed-array-constructor":140}],227:[function(t,g,m){t("../internals/typed-array-constructor")("Uint8",function(p){return function(r,h,u){return p(this,r,h,u)}},!0)},{"../internals/typed-array-constructor":140}],228:[function(t,g,m){var p=t("../internals/global"),r=t("../internals/dom-iterables"),h=t("../internals/array-for-each"),u=t("../internals/create-non-enumerable-property");for(var d in r){var c=p[d],i=c&&c.prototype;if(i&&i.forEach!==h)try{u(i,"forEach",h)}catch{i.forEach=h}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":37,"../internals/dom-iterables":44,"../internals/global":59}],229:[function(t,g,m){var p=t("../internals/global"),r=t("../internals/dom-iterables"),h=t("../modules/es.array.iterator"),u=t("../internals/create-non-enumerable-property"),d=t("../internals/well-known-symbol"),c=d("iterator"),i=d("toStringTag"),n=h.values;for(var o in r){var l=p[o],a=l&&l.prototype;if(a){if(a[c]!==n)try{u(a,c,n)}catch{a[c]=n}if(a[i]||u(a,i,o),r[o]){for(var f in h)if(a[f]!==h[f])try{u(a,f,h[f])}catch{a[f]=h[f]}}}}},{"../internals/create-non-enumerable-property":37,"../internals/dom-iterables":44,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],230:[function(t,g,m){t("../modules/es.array.iterator");function p(ne){try{return decodeURIComponent(ne)}catch{return ne}}function r(ne){var Y,J=ne.replace(z," "),fe=4;try{return decodeURIComponent(J)}catch{for(;fe;)J=J.replace((Y=fe--,de[Y-1]||(de[Y-1]=RegExp("((?:%[\\da-f]{2}){"+Y+"})","gi"))),p);return J}}function h(ne){return ie[ne]}function u(ne){return encodeURIComponent(ne).replace(re,h)}function d(ne,Y){if(Y)for(var J,fe,oe=Y.split("&"),X=0;X<oe.length;)(J=oe[X++]).length&&(fe=J.split("="),ne.push({key:r(fe.shift()),value:r(fe.join("="))}))}function c(ne){this.entries.length=0,d(this.entries,ne)}function i(ne,Y){if(ne<Y)throw TypeError("Not enough arguments")}var n=t("../internals/export"),o=t("../internals/get-built-in"),l=t("../internals/native-url"),a=t("../internals/redefine"),f=t("../internals/redefine-all"),v=t("../internals/set-to-string-tag"),b=t("../internals/create-iterator-constructor"),_=t("../internals/internal-state"),w=t("../internals/an-instance"),E=t("../internals/has"),C=t("../internals/function-bind-context"),A=t("../internals/classof"),L=t("../internals/an-object"),P=t("../internals/is-object"),R=t("../internals/object-create"),N=t("../internals/create-property-descriptor"),I=t("../internals/get-iterator"),O=t("../internals/get-iterator-method"),U=t("../internals/well-known-symbol"),K=o("fetch"),ee=o("Headers"),H=U("iterator"),te="URLSearchParams",Z=te+"Iterator",ge=_.set,$=_.getterFor(te),se=_.getterFor(Z),z=/\+/g,de=Array(4),re=/[!'()~]|%20/g,ie={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},j=b(function(ne,Y){ge(this,{type:Z,iterator:I($(ne).entries),kind:Y})},"Iterator",function(){var ne=se(this),Y=ne.kind,J=ne.iterator.next(),fe=J.value;return J.done||(J.value=Y==="keys"?fe.key:Y==="values"?fe.value:[fe.key,fe.value]),J}),B=function(ne){w(this,B,te);var Y,J,fe,oe,X,W,pe,Se,Re,Le=0<arguments.length?ne:void 0,ce=[];if(ge(this,{type:te,entries:ce,updateURL:function(){},updateSearchParams:c}),Le!==void 0)if(P(Le))if(typeof(Y=O(Le))=="function")for(fe=(J=Y.call(Le)).next;!(oe=fe.call(J)).done;){if((pe=(W=(X=I(L(oe.value))).next).call(X)).done||(Se=W.call(X)).done||!W.call(X).done)throw TypeError("Expected sequence with length 2");ce.push({key:pe.value+"",value:Se.value+""})}else for(Re in Le)E(Le,Re)&&ce.push({key:Re,value:Le[Re]+""});else d(ce,typeof Le=="string"?Le.charAt(0)==="?"?Le.slice(1):Le:Le+"")},G=B.prototype;f(G,{append:function(ne,Y){i(arguments.length,2);var J=$(this);J.entries.push({key:ne+"",value:Y+""}),J.updateURL()},delete:function(ne){i(arguments.length,1);for(var Y=$(this),J=Y.entries,fe=ne+"",oe=0;oe<J.length;)J[oe].key===fe?J.splice(oe,1):oe++;Y.updateURL()},get:function(ne){i(arguments.length,1);for(var Y=$(this).entries,J=ne+"",fe=0;fe<Y.length;fe++)if(Y[fe].key===J)return Y[fe].value;return null},getAll:function(ne){i(arguments.length,1);for(var Y=$(this).entries,J=ne+"",fe=[],oe=0;oe<Y.length;oe++)Y[oe].key===J&&fe.push(Y[oe].value);return fe},has:function(ne){i(arguments.length,1);for(var Y=$(this).entries,J=ne+"",fe=0;fe<Y.length;)if(Y[fe++].key===J)return!0;return!1},set:function(ne,Y){i(arguments.length,1);for(var J,fe=$(this),oe=fe.entries,X=!1,W=ne+"",pe=Y+"",Se=0;Se<oe.length;Se++)(J=oe[Se]).key===W&&(X?oe.splice(Se--,1):(X=!0,J.value=pe));X||oe.push({key:W,value:pe}),fe.updateURL()},sort:function(){var ne,Y,J,fe=$(this),oe=fe.entries,X=oe.slice();for(J=oe.length=0;J<X.length;J++){for(ne=X[J],Y=0;Y<J;Y++)if(oe[Y].key>ne.key){oe.splice(Y,0,ne);break}Y===J&&oe.push(ne)}fe.updateURL()},forEach:function(ne,Y){for(var J,fe=$(this).entries,oe=C(ne,1<arguments.length?Y:void 0,3),X=0;X<fe.length;)oe((J=fe[X++]).value,J.key,this)},keys:function(){return new j(this,"keys")},values:function(){return new j(this,"values")},entries:function(){return new j(this,"entries")}},{enumerable:!0}),a(G,H,G.entries),a(G,"toString",function(){for(var ne,Y=$(this).entries,J=[],fe=0;fe<Y.length;)ne=Y[fe++],J.push(u(ne.key)+"="+u(ne.value));return J.join("&")},{enumerable:!0}),v(B,te),n({global:!0,forced:!l},{URLSearchParams:B}),l||typeof K!="function"||typeof ee!="function"||n({global:!0,enumerable:!0,forced:!0},{fetch:function(ne,Y){var J,fe,oe,X=[ne];return 1<arguments.length&&(P(J=Y)&&(fe=J.body,A(fe)===te&&((oe=J.headers?new ee(J.headers):new ee).has("content-type")||oe.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),J=R(J,{body:N(0,String(fe)),headers:N(0,oe)}))),X.push(J)),K.apply(this,X)}}),g.exports={URLSearchParams:B,getState:$}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":36,"../internals/create-property-descriptor":38,"../internals/export":49,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],231:[function(t,g,m){t("../modules/es.string.iterator");function p(ve,Ue){var Ze,ze,et;if(Ue.charAt(0)=="["){if(Ue.charAt(Ue.length-1)!="]"||!(Ze=W(Ue.slice(1,-1))))return se;ve.host=Ze}else if(Ce(ve)){if(Ue=R(Ue),Y.test(Ue)||(Ze=X(Ue))===null)return se;ve.host=Ze}else{if(J.test(Ue))return se;for(Ze="",ze=L(Ue),et=0;et<ze.length;et++)Ze+=ce(ze[et],pe);ve.host=Ze}}function r(ve){var Ue,Ze,ze,et;if(typeof ve=="number"){for(Ue=[],Ze=0;Ze<4;Ze++)Ue.unshift(ve%256),ve=Z(ve/256);return Ue.join(".")}if(typeof ve!="object")return ve;for(Ue="",ze=function(qe){for(var xt=null,St=1,wt=null,st=0,rt=0;rt<8;rt++)qe[rt]!==0?(St<st&&(xt=wt,St=st),wt=null,st=0):(wt===null&&(wt=rt),++st);return St<st&&(xt=wt,St=st),xt}(ve),Ze=0;Ze<8;Ze++)et&&ve[Ze]===0||(et=et&&!1,ze===Ze?(Ue+=Ze?":":"::",et=!0):(Ue+=ve[Ze].toString(16),Ze<7&&(Ue+=":")));return"["+Ue+"]"}function h(ve){return ve.username!=""||ve.password!=""}function u(ve){return!ve.host||ve.cannotBeABaseURL||ve.scheme=="file"}function d(ve,Ue){var Ze;return ve.length==2&&de.test(ve.charAt(0))&&((Ze=ve.charAt(1))==":"||!Ue&&Ze=="|")}function c(ve){var Ue;return 1<ve.length&&d(ve.slice(0,2))&&(ve.length==2||(Ue=ve.charAt(2))==="/"||Ue==="\\"||Ue==="?"||Ue==="#")}function i(ve){var Ue=ve.path,Ze=Ue.length;!Ze||ve.scheme=="file"&&Ze==1&&d(Ue[0],!0)||Ue.pop()}function n(ve,Ue,Ze,ze){var et,qe,xt,St,wt,st,rt=Ze||Ie,bt=0,lt="",hr=!1,pr=!1,Yr=!1;for(Ze||(ve.scheme="",ve.username="",ve.password="",ve.host=null,ve.port=null,ve.path=[],ve.query=null,ve.fragment=null,ve.cannotBeABaseURL=!1,Ue=Ue.replace(fe,"")),Ue=Ue.replace(oe,""),et=L(Ue);bt<=et.length;){switch(qe=et[bt],rt){case Ie:if(!qe||!de.test(qe)){if(Ze)return $;rt=Pe;continue}lt+=qe.toLowerCase(),rt=Ve;break;case Ve:if(qe&&(re.test(qe)||qe=="+"||qe=="-"||qe=="."))lt+=qe.toLowerCase();else{if(qe!=":"){if(Ze)return $;lt="",rt=Pe,bt=0;continue}if(Ze&&(Ce(ve)!=C(ue,lt)||lt=="file"&&(h(ve)||ve.port!==null)||ve.scheme=="file"&&!ve.host))return;if(ve.scheme=lt,Ze)return void(Ce(ve)&&ue[ve.scheme]==ve.port&&(ve.port=null));lt="",ve.scheme=="file"?rt=Me:Ce(ve)&&ze&&ze.scheme==ve.scheme?rt=Oe:Ce(ve)?rt=Xe:et[bt+1]=="/"?(rt=Ae,bt++):(ve.cannotBeABaseURL=!0,ve.path.push(""),rt=nt)}break;case Pe:if(!ze||ze.cannotBeABaseURL&&qe!="#")return $;if(ze.cannotBeABaseURL&&qe=="#"){ve.scheme=ze.scheme,ve.path=ze.path.slice(),ve.query=ze.query,ve.fragment="",ve.cannotBeABaseURL=!0,rt=gt;break}rt=ze.scheme=="file"?Me:Ge;continue;case Oe:if(qe!="/"||et[bt+1]!="/"){rt=Ge;continue}rt=k,bt++;break;case Ae:if(qe=="/"){rt=Q;break}rt=Je;continue;case Ge:if(ve.scheme=ze.scheme,qe==l)ve.username=ze.username,ve.password=ze.password,ve.host=ze.host,ve.port=ze.port,ve.path=ze.path.slice(),ve.query=ze.query;else if(qe=="/"||qe=="\\"&&Ce(ve))rt=be;else if(qe=="?")ve.username=ze.username,ve.password=ze.password,ve.host=ze.host,ve.port=ze.port,ve.path=ze.path.slice(),ve.query="",rt=ut;else{if(qe!="#"){ve.username=ze.username,ve.password=ze.password,ve.host=ze.host,ve.port=ze.port,ve.path=ze.path.slice(),ve.path.pop(),rt=Je;continue}ve.username=ze.username,ve.password=ze.password,ve.host=ze.host,ve.port=ze.port,ve.path=ze.path.slice(),ve.query=ze.query,ve.fragment="",rt=gt}break;case be:if(!Ce(ve)||qe!="/"&&qe!="\\"){if(qe!="/"){ve.username=ze.username,ve.password=ze.password,ve.host=ze.host,ve.port=ze.port,rt=Je;continue}rt=Q}else rt=k;break;case Xe:if(rt=k,qe!="/"||lt.charAt(bt+1)!="/")continue;bt++;break;case k:if(qe=="/"||qe=="\\")break;rt=Q;continue;case Q:if(qe=="@"){hr&&(lt="%40"+lt),hr=!0,xt=L(lt);for(var qt=0;qt<xt.length;qt++){var Er=xt[qt];if(Er!=":"||Yr){var Nr=ce(Er,Le);Yr?ve.password+=Nr:ve.username+=Nr}else Yr=!0}lt=""}else if(qe==l||qe=="/"||qe=="?"||qe=="#"||qe=="\\"&&Ce(ve)){if(hr&&lt=="")return"Invalid authority";bt-=L(lt).length+1,lt="",rt=V}else lt+=qe;break;case V:case ae:if(Ze&&ve.scheme=="file"){rt=ke;continue}if(qe!=":"||pr){if(qe==l||qe=="/"||qe=="?"||qe=="#"||qe=="\\"&&Ce(ve)){if(Ce(ve)&&lt=="")return se;if(Ze&&lt==""&&(h(ve)||ve.port!==null))return;if(St=p(ve,lt))return St;if(lt="",rt=we,Ze)return;continue}qe=="["?pr=!0:qe=="]"&&(pr=!1),lt+=qe}else{if(lt=="")return se;if(St=p(ve,lt))return St;if(lt="",rt=me,Ze==ae)return}break;case me:if(!ie.test(qe)){if(qe==l||qe=="/"||qe=="?"||qe=="#"||qe=="\\"&&Ce(ve)||Ze){if(lt!=""){var rr=parseInt(lt,10);if(65535<rr)return z;ve.port=Ce(ve)&&rr===ue[ve.scheme]?null:rr,lt=""}if(Ze)return;rt=we;continue}return z}lt+=qe;break;case Me:if(ve.scheme="file",qe=="/"||qe=="\\")rt=Ee;else{if(!ze||ze.scheme!="file"){rt=Je;continue}if(qe==l)ve.host=ze.host,ve.path=ze.path.slice(),ve.query=ze.query;else if(qe=="?")ve.host=ze.host,ve.path=ze.path.slice(),ve.query="",rt=ut;else{if(qe!="#"){c(et.slice(bt).join(""))||(ve.host=ze.host,ve.path=ze.path.slice(),i(ve)),rt=Je;continue}ve.host=ze.host,ve.path=ze.path.slice(),ve.query=ze.query,ve.fragment="",rt=gt}}break;case Ee:if(qe=="/"||qe=="\\"){rt=ke;break}ze&&ze.scheme=="file"&&!c(et.slice(bt).join(""))&&(d(ze.path[0],!0)?ve.path.push(ze.path[0]):ve.host=ze.host),rt=Je;continue;case ke:if(qe==l||qe=="/"||qe=="\\"||qe=="?"||qe=="#"){if(!Ze&&d(lt))rt=Je;else if(lt==""){if(ve.host="",Ze)return;rt=we}else{if(St=p(ve,lt))return St;if(ve.host=="localhost"&&(ve.host=""),Ze)return;lt="",rt=we}continue}lt+=qe;break;case we:if(Ce(ve)){if(rt=Je,qe!="/"&&qe!="\\")continue}else if(Ze||qe!="?")if(Ze||qe!="#"){if(qe!=l&&(rt=Je,qe!="/"))continue}else ve.fragment="",rt=gt;else ve.query="",rt=ut;break;case Je:if(qe==l||qe=="/"||qe=="\\"&&Ce(ve)||!Ze&&(qe=="?"||qe=="#")){if((st=(st=lt).toLowerCase())===".."||st==="%2e."||st===".%2e"||st==="%2e%2e"?(i(ve),qe=="/"||qe=="\\"&&Ce(ve)||ve.path.push("")):(wt=lt)==="."||wt.toLowerCase()==="%2e"?qe=="/"||qe=="\\"&&Ce(ve)||ve.path.push(""):(ve.scheme=="file"&&!ve.path.length&&d(lt)&&(ve.host&&(ve.host=""),lt=lt.charAt(0)+":"),ve.path.push(lt)),lt="",ve.scheme=="file"&&(qe==l||qe=="?"||qe=="#"))for(;1<ve.path.length&&ve.path[0]==="";)ve.path.shift();qe=="?"?(ve.query="",rt=ut):qe=="#"&&(ve.fragment="",rt=gt)}else lt+=ce(qe,Re);break;case nt:qe=="?"?(ve.query="",rt=ut):qe=="#"?(ve.fragment="",rt=gt):qe!=l&&(ve.path[0]+=ce(qe,pe));break;case ut:Ze||qe!="#"?qe!=l&&(qe=="'"&&Ce(ve)?ve.query+="%27":ve.query+=qe=="#"?"%23":ce(qe,pe)):(ve.fragment="",rt=gt);break;case gt:qe!=l&&(ve.fragment+=ce(qe,Se))}bt++}}function o(ve,Ue){return{get:ve,set:Ue,configurable:!0,enumerable:!0}}var l,a=t("../internals/export"),f=t("../internals/descriptors"),v=t("../internals/native-url"),b=t("../internals/global"),_=t("../internals/object-define-properties"),w=t("../internals/redefine"),E=t("../internals/an-instance"),C=t("../internals/has"),A=t("../internals/object-assign"),L=t("../internals/array-from"),P=t("../internals/string-multibyte").codeAt,R=t("../internals/string-punycode-to-ascii"),N=t("../internals/set-to-string-tag"),I=t("../modules/web.url-search-params"),O=t("../internals/internal-state"),U=b.URL,K=I.URLSearchParams,ee=I.getState,H=O.set,te=O.getterFor("URL"),Z=Math.floor,ge=Math.pow,$="Invalid scheme",se="Invalid host",z="Invalid port",de=/[A-Za-z]/,re=/[\d+-.A-Za-z]/,ie=/\d/,j=/^(0x|0X)/,B=/^[0-7]+$/,G=/^\d+$/,ne=/^[\dA-Fa-f]+$/,Y=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,J=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,fe=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,oe=/[\u0009\u000A\u000D]/g,X=function(ve){var Ue,Ze,ze,et,qe,xt,St,wt=ve.split(".");if(wt.length&&wt[wt.length-1]==""&&wt.pop(),4<(Ue=wt.length))return ve;for(Ze=[],ze=0;ze<Ue;ze++){if((et=wt[ze])=="")return ve;if(qe=10,1<et.length&&et.charAt(0)=="0"&&(qe=j.test(et)?16:8,et=et.slice(qe==8?1:2)),et==="")xt=0;else{if(!(qe==10?G:qe==8?B:ne).test(et))return ve;xt=parseInt(et,qe)}Ze.push(xt)}for(ze=0;ze<Ue;ze++)if(xt=Ze[ze],ze==Ue-1){if(xt>=ge(256,5-Ue))return null}else if(255<xt)return null;for(St=Ze.pop(),ze=0;ze<Ze.length;ze++)St+=Ze[ze]*ge(256,3-ze);return St},W=function(ve){function Ue(){return ve.charAt(lt)}var Ze,ze,et,qe,xt,St,wt,st=[0,0,0,0,0,0,0,0],rt=0,bt=null,lt=0;if(Ue()==":"){if(ve.charAt(1)!=":")return;lt+=2,bt=++rt}for(;Ue();){if(rt==8)return;if(Ue()!=":"){for(Ze=ze=0;ze<4&&ne.test(Ue());)Ze=16*Ze+parseInt(Ue(),16),lt++,ze++;if(Ue()=="."){if(ze==0||(lt-=ze,6<rt))return;for(et=0;Ue();){if(qe=null,0<et){if(!(Ue()=="."&&et<4))return;lt++}if(!ie.test(Ue()))return;for(;ie.test(Ue());){if(xt=parseInt(Ue(),10),qe===null)qe=xt;else{if(qe==0)return;qe=10*qe+xt}if(255<qe)return;lt++}st[rt]=256*st[rt]+qe,++et!=2&&et!=4||rt++}if(et!=4)return;break}if(Ue()==":"){if(lt++,!Ue())return}else if(Ue())return;st[rt++]=Ze}else{if(bt!==null)return;lt++,bt=++rt}}if(bt!==null)for(St=rt-bt,rt=7;rt!=0&&0<St;)wt=st[rt],st[rt--]=st[bt+St-1],st[bt+--St]=wt;else if(rt!=8)return;return st},pe={},Se=A({},pe,{" ":1,'"':1,"<":1,">":1,"`":1}),Re=A({},Se,{"#":1,"?":1,"{":1,"}":1}),Le=A({},Re,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ce=function(ve,Ue){var Ze=P(ve,0);return 32<Ze&&Ze<127&&!C(Ue,ve)?ve:encodeURIComponent(ve)},ue={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Ce=function(ve){return C(ue,ve.scheme)},Ie={},Ve={},Pe={},Oe={},Ae={},Ge={},be={},Xe={},k={},Q={},V={},ae={},me={},Me={},Ee={},ke={},we={},Je={},nt={},ut={},gt={},ft=function(ve,Ue){var Ze,ze,et=E(this,ft,"URL"),qe=1<arguments.length?Ue:void 0,xt=String(ve),St=H(et,{type:"URL"});if(qe!==void 0){if(qe instanceof ft)Ze=te(qe);else if(ze=n(Ze={},String(qe)))throw TypeError(ze)}if(ze=n(St,xt,null,Ze))throw TypeError(ze);var wt=St.searchParams=new K,st=ee(wt);st.updateSearchParams(St.query),st.updateURL=function(){St.query=String(wt)||null},f||(et.href=At.call(et),et.origin=cr.call(et),et.protocol=Qt.call(et),et.username=Xr.call(et),et.password=Mr.call(et),et.host=yr.call(et),et.hostname=xe.call(et),et.port=Fe.call(et),et.pathname=We.call(et),et.search=Be.call(et),et.searchParams=$e.call(et),et.hash=mt.call(et))},dt=ft.prototype,At=function(){var ve=te(this),Ue=ve.scheme,Ze=ve.username,ze=ve.password,et=ve.host,qe=ve.port,xt=ve.path,St=ve.query,wt=ve.fragment,st=Ue+":";return et!==null?(st+="//",h(ve)&&(st+=Ze+(ze?":"+ze:"")+"@"),st+=r(et),qe!==null&&(st+=":"+qe)):Ue=="file"&&(st+="//"),st+=ve.cannotBeABaseURL?xt[0]:xt.length?"/"+xt.join("/"):"",St!==null&&(st+="?"+St),wt!==null&&(st+="#"+wt),st},cr=function(){var ve=te(this),Ue=ve.scheme,Ze=ve.port;if(Ue=="blob")try{return new URL(Ue.path[0]).origin}catch{return"null"}return Ue!="file"&&Ce(ve)?Ue+"://"+r(ve.host)+(Ze!==null?":"+Ze:""):"null"},Qt=function(){return te(this).scheme+":"},Xr=function(){return te(this).username},Mr=function(){return te(this).password},yr=function(){var ve=te(this),Ue=ve.host,Ze=ve.port;return Ue===null?"":Ze===null?r(Ue):r(Ue)+":"+Ze},xe=function(){var ve=te(this).host;return ve===null?"":r(ve)},Fe=function(){var ve=te(this).port;return ve===null?"":String(ve)},We=function(){var ve=te(this),Ue=ve.path;return ve.cannotBeABaseURL?Ue[0]:Ue.length?"/"+Ue.join("/"):""},Be=function(){var ve=te(this).query;return ve?"?"+ve:""},$e=function(){return te(this).searchParams},mt=function(){var ve=te(this).fragment;return ve?"#"+ve:""};if(f&&_(dt,{href:o(At,function(ve){var Ue=te(this),Ze=String(ve),ze=n(Ue,Ze);if(ze)throw TypeError(ze);ee(Ue.searchParams).updateSearchParams(Ue.query)}),origin:o(cr),protocol:o(Qt,function(ve){var Ue=te(this);n(Ue,String(ve)+":",Ie)}),username:o(Xr,function(ve){var Ue=te(this),Ze=L(String(ve));if(!u(Ue)){Ue.username="";for(var ze=0;ze<Ze.length;ze++)Ue.username+=ce(Ze[ze],Le)}}),password:o(Mr,function(ve){var Ue=te(this),Ze=L(String(ve));if(!u(Ue)){Ue.password="";for(var ze=0;ze<Ze.length;ze++)Ue.password+=ce(Ze[ze],Le)}}),host:o(yr,function(ve){var Ue=te(this);Ue.cannotBeABaseURL||n(Ue,String(ve),V)}),hostname:o(xe,function(ve){var Ue=te(this);Ue.cannotBeABaseURL||n(Ue,String(ve),ae)}),port:o(Fe,function(ve){var Ue=te(this);u(Ue)||((ve=String(ve))==""?Ue.port=null:n(Ue,ve,me))}),pathname:o(We,function(ve){var Ue=te(this);Ue.cannotBeABaseURL||(Ue.path=[],n(Ue,ve+"",we))}),search:o(Be,function(ve){var Ue=te(this);(ve=String(ve))==""?Ue.query=null:(ve.charAt(0)=="?"&&(ve=ve.slice(1)),Ue.query="",n(Ue,ve,ut)),ee(Ue.searchParams).updateSearchParams(Ue.query)}),searchParams:o($e),hash:o(mt,function(ve){var Ue=te(this);(ve=String(ve))!=""?(ve.charAt(0)=="#"&&(ve=ve.slice(1)),Ue.fragment="",n(Ue,ve,gt)):Ue.fragment=null})}),w(dt,"toJSON",function(){return At.call(this)},{enumerable:!0}),w(dt,"toString",function(){return At.call(this)},{enumerable:!0}),U){var yt=U.createObjectURL,vt=U.revokeObjectURL;yt&&w(ft,"createObjectURL",function(ve){return yt.apply(U,arguments)}),vt&&w(ft,"revokeObjectURL",function(ve){return vt.apply(U,arguments)})}N(ft,"URL"),a({global:!0,forced:!v,sham:!f},{URL:ft})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":42,"../internals/export":49,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":124,"../modules/es.string.iterator":186,"../modules/web.url-search-params":230}],232:[function(t,g,m){g.exports=t("./").polyfill()},{"./":233}],233:[function(t,g,m){(function(p,r){var h,u;h=this,u=function(){function d(oe){return typeof oe=="function"}var c=Array.isArray?Array.isArray:function(oe){return Object.prototype.toString.call(oe)==="[object Array]"},i=0,n=void 0,o=void 0,l=function(oe,X){E[i]=oe,E[i+1]=X,(i+=2)===2&&(o?o(C):N())},a=typeof window!="undefined"?window:void 0,f=a||{},v=f.MutationObserver||f.WebKitMutationObserver,b=typeof self=="undefined"&&p!==void 0&&{}.toString.call(p)==="[object process]",_=typeof Uint8ClampedArray!="undefined"&&typeof importScripts!="undefined"&&typeof MessageChannel!="undefined";function w(){var oe=setTimeout;return function(){return oe(C,1)}}var E=new Array(1e3);function C(){for(var oe=0;oe<i;oe+=2)(0,E[oe])(E[oe+1]),E[oe]=void 0,E[oe+1]=void 0;i=0}var A,L,P,R,N=void 0;function I(oe,X){var W=this,pe=new this.constructor(K);pe[U]===void 0&&G(pe);var Se=W._state;if(Se){var Re=arguments[Se-1];l(function(){return j(Se,pe,Re,W._result)})}else re(W,pe,oe,X);return pe}function O(oe){if(oe&&typeof oe=="object"&&oe.constructor===this)return oe;var X=new this(K);return $(X,oe),X}N=b?function(){return p.nextTick(C)}:v?(L=0,P=new v(C),R=document.createTextNode(""),P.observe(R,{characterData:!0}),function(){R.data=L=++L%2}):_?((A=new MessageChannel).port1.onmessage=C,function(){return A.port2.postMessage(0)}):a===void 0&&typeof t=="function"?function(){try{var oe=Function("return this")().require("vertx");return(n=oe.runOnLoop||oe.runOnContext)!==void 0?function(){n(C)}:w()}catch{return w()}}():w();var U=Math.random().toString(36).substring(2);function K(){}var ee=void 0,H=1,te=2;function Z(oe,X,W){l(function(pe){var Se=!1,Re=function(Le,ce,ue,Ce){try{Le.call(ce,ue,Ce)}catch(Ie){return Ie}}(W,X,function(Le){Se||(Se=!0,X!==Le?$(pe,Le):z(pe,Le))},function(Le){Se||(Se=!0,de(pe,Le))},pe._label);!Se&&Re&&(Se=!0,de(pe,Re))},oe)}function ge(oe,X,W){var pe,Se;X.constructor===oe.constructor&&W===I&&X.constructor.resolve===O?(pe=oe,(Se=X)._state===H?z(pe,Se._result):Se._state===te?de(pe,Se._result):re(Se,void 0,function(Re){return $(pe,Re)},function(Re){return de(pe,Re)})):W===void 0?z(oe,X):d(W)?Z(oe,X,W):z(oe,X)}function $(oe,X){if(oe===X)de(oe,new TypeError("You cannot resolve a promise with itself"));else if(Se=typeof(pe=X),pe===null||Se!="object"&&Se!="function")z(oe,X);else{var W=void 0;try{W=X.then}catch(Re){return void de(oe,Re)}ge(oe,X,W)}var pe,Se}function se(oe){oe._onerror&&oe._onerror(oe._result),ie(oe)}function z(oe,X){oe._state===ee&&(oe._result=X,oe._state=H,oe._subscribers.length!==0&&l(ie,oe))}function de(oe,X){oe._state===ee&&(oe._state=te,oe._result=X,l(se,oe))}function re(oe,X,W,pe){var Se=oe._subscribers,Re=Se.length;oe._onerror=null,Se[Re]=X,Se[Re+H]=W,Se[Re+te]=pe,Re===0&&oe._state&&l(ie,oe)}function ie(oe){var X=oe._subscribers,W=oe._state;if(X.length!==0){for(var pe=void 0,Se=void 0,Re=oe._result,Le=0;Le<X.length;Le+=3)pe=X[Le],Se=X[Le+W],pe?j(W,pe,Se,Re):Se(Re);oe._subscribers.length=0}}function j(oe,X,W,pe){var Se=d(W),Re=void 0,Le=void 0,ce=!0;if(Se){try{Re=W(pe)}catch(ue){ce=!1,Le=ue}if(X===Re)return void de(X,new TypeError("A promises callback cannot return that same promise."))}else Re=pe;X._state!==ee||(Se&&ce?$(X,Re):ce===!1?de(X,Le):oe===H?z(X,Re):oe===te&&de(X,Re))}var B=0;function G(oe){oe[U]=B++,oe._state=void 0,oe._result=void 0,oe._subscribers=[]}var ne=(Y.prototype._enumerate=function(oe){for(var X=0;this._state===ee&&X<oe.length;X++)this._eachEntry(oe[X],X)},Y.prototype._eachEntry=function(oe,X){var W=this._instanceConstructor,pe=W.resolve;if(pe===O){var Se=void 0,Re=void 0,Le=!1;try{Se=oe.then}catch(ue){Le=!0,Re=ue}if(Se===I&&oe._state!==ee)this._settledAt(oe._state,X,oe._result);else if(typeof Se!="function")this._remaining--,this._result[X]=oe;else if(W===J){var ce=new W(K);Le?de(ce,Re):ge(ce,oe,Se),this._willSettleAt(ce,X)}else this._willSettleAt(new W(function(ue){return ue(oe)}),X)}else this._willSettleAt(pe(oe),X)},Y.prototype._settledAt=function(oe,X,W){var pe=this.promise;pe._state===ee&&(this._remaining--,oe===te?de(pe,W):this._result[X]=W),this._remaining===0&&z(pe,this._result)},Y.prototype._willSettleAt=function(oe,X){var W=this;re(oe,void 0,function(pe){return W._settledAt(H,X,pe)},function(pe){return W._settledAt(te,X,pe)})},Y);function Y(oe,X){this._instanceConstructor=oe,this.promise=new oe(K),this.promise[U]||G(this.promise),c(X)?(this.length=X.length,this._remaining=X.length,this._result=new Array(this.length),this.length===0?z(this.promise,this._result):(this.length=this.length||0,this._enumerate(X),this._remaining===0&&z(this.promise,this._result))):de(this.promise,new Error("Array Methods must be provided an Array"))}var J=(fe.prototype.catch=function(oe){return this.then(null,oe)},fe.prototype.finally=function(oe){var X=this.constructor;return d(oe)?this.then(function(W){return X.resolve(oe()).then(function(){return W})},function(W){return X.resolve(oe()).then(function(){throw W})}):this.then(oe,oe)},fe);function fe(oe){this[U]=B++,this._result=this._state=void 0,this._subscribers=[],K!==oe&&(typeof oe!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof fe?function(X,W){try{W(function(pe){$(X,pe)},function(pe){de(X,pe)})}catch(pe){de(X,pe)}}(this,oe):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return J.prototype.then=I,J.all=function(oe){return new ne(this,oe).promise},J.race=function(oe){var X=this;return c(oe)?new X(function(W,pe){for(var Se=oe.length,Re=0;Re<Se;Re++)X.resolve(oe[Re]).then(W,pe)}):new X(function(W,pe){return pe(new TypeError("You must pass an array to race."))})},J.resolve=O,J.reject=function(oe){var X=new this(K);return de(X,oe),X},J._setScheduler=function(oe){o=oe},J._setAsap=function(oe){l=oe},J._asap=l,J.polyfill=function(){var oe=void 0;if(r!==void 0)oe=r;else if(typeof self!="undefined")oe=self;else try{oe=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var X=oe.Promise;if(X){var W=null;try{W=Object.prototype.toString.call(X.resolve())}catch{}if(W==="[object Promise]"&&!X.cast)return}oe.Promise=J},J.Promise=J},typeof m=="object"&&g!==void 0?g.exports=u():h.ES6Promise=u()}).call(this,t("_process"),typeof Yi!="undefined"?Yi:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{_process:241}],234:[function(t,g,m){(function(p,r){if(m!==void 0&&g!==void 0)r(m,g);else{var h={exports:{}};r(h.exports,h),p.fetchJsonp=h.exports}})(this,function(p,r){var h=5e3,u="callback";function d(i){try{delete window[i]}catch{window[i]=void 0}}function c(i){var n=document.getElementById(i);n&&document.getElementsByTagName("head")[0].removeChild(n)}r.exports=function(i){var n=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],o=i,l=n.timeout||h,a=n.jsonpCallback||u,f=void 0;return new Promise(function(v,b){var _=n.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),w=a+"_"+_;window[_]=function(C){v({ok:!0,json:function(){return Promise.resolve(C)}}),f&&clearTimeout(f),c(w),d(_)},o+=o.indexOf("?")===-1?"?":"&";var E=document.createElement("script");E.setAttribute("src",""+o+a+"="+_),n.charset&&E.setAttribute("charset",n.charset),E.id=w,document.getElementsByTagName("head")[0].appendChild(E),f=setTimeout(function(){b(new Error("JSONP request to "+i+" timed out")),d(_),c(w),window[_]=function(){d(_)}},l),E.onerror=function(){b(new Error("JSONP request to "+i+" failed")),d(_),c(w),f&&clearTimeout(f)}})}})},{}],235:[function(t,g,m){var p=p||function(r){if(!(r===void 0||typeof navigator!="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent))){var h=r.document,u=function(){return r.URL||r.webkitURL||r},d=h.createElementNS("http://www.w3.org/1999/xhtml","a"),c="download"in d,i=/constructor/i.test(r.HTMLElement)||r.safari,n=/CriOS\/[\d]+/.test(navigator.userAgent),o=function(b){(r.setImmediate||r.setTimeout)(function(){throw b},0)},l=function(b){setTimeout(function(){typeof b=="string"?u().revokeObjectURL(b):b.remove()},4e4)},a=function(b){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(b.type)?new Blob([String.fromCharCode(65279),b],{type:b.type}):b},f=function(b,_,w){w||(b=a(b));function E(){(function(P,R,N){for(var I=(R=[].concat(R)).length;I--;){var O=P["on"+R[I]];if(typeof O=="function")try{O.call(P,N||P)}catch(U){o(U)}}})(A,"writestart progress write writeend".split(" "))}var C,A=this,L=b.type==="application/octet-stream";if(A.readyState=A.INIT,c)return C=u().createObjectURL(b),void setTimeout(function(){var P,R;d.href=C,d.download=_,P=d,R=new MouseEvent("click"),P.dispatchEvent(R),E(),l(C),A.readyState=A.DONE});(function(){if((n||L&&i)&&r.FileReader){var P=new FileReader;return P.onloadend=function(){var R=n?P.result:P.result.replace(/^data:[^;]*;/,"data:attachment/file;");r.open(R,"_blank")||(r.location.href=R),R=void 0,A.readyState=A.DONE,E()},P.readAsDataURL(b),A.readyState=A.INIT}C=C||u().createObjectURL(b),L?r.location.href=C:r.open(C,"_blank")||(r.location.href=C),A.readyState=A.DONE,E(),l(C)})()},v=f.prototype;return typeof navigator!="undefined"&&navigator.msSaveOrOpenBlob?function(b,_,w){return _=_||b.name||"download",w||(b=a(b)),navigator.msSaveOrOpenBlob(b,_)}:(v.abort=function(){},v.readyState=v.INIT=0,v.WRITING=1,v.DONE=2,v.error=v.onwritestart=v.onprogress=v.onwrite=v.onabort=v.onerror=v.onwriteend=null,function(b,_,w){return new f(b,_||b.name||"download",w)})}}(typeof self!="undefined"&&self||typeof window!="undefined"&&window||this.content);g!==void 0&&g.exports?g.exports.saveAs=p:s!=null},{}],236:[function(t,g,m){m.read=function(p,r,h,u,d){var c,i,n=8*d-u-1,o=(1<<n)-1,l=o>>1,a=-7,f=h?d-1:0,v=h?-1:1,b=p[r+f];for(f+=v,c=b&(1<<-a)-1,b>>=-a,a+=n;0<a;c=256*c+p[r+f],f+=v,a-=8);for(i=c&(1<<-a)-1,c>>=-a,a+=u;0<a;i=256*i+p[r+f],f+=v,a-=8);if(c===0)c=1-l;else{if(c===o)return i?NaN:1/0*(b?-1:1);i+=Math.pow(2,u),c-=l}return(b?-1:1)*i*Math.pow(2,c-u)},m.write=function(p,r,h,u,d,c){var i,n,o,l=8*c-d-1,a=(1<<l)-1,f=a>>1,v=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=u?0:c-1,_=u?1:-1,w=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(n=isNaN(r)?1:0,i=a):(i=Math.floor(Math.log(r)/Math.LN2),r*(o=Math.pow(2,-i))<1&&(i--,o*=2),2<=(r+=1<=i+f?v/o:v*Math.pow(2,1-f))*o&&(i++,o/=2),a<=i+f?(n=0,i=a):1<=i+f?(n=(r*o-1)*Math.pow(2,d),i+=f):(n=r*Math.pow(2,f-1)*Math.pow(2,d),i=0));8<=d;p[h+b]=255&n,b+=_,n/=256,d-=8);for(i=i<<d|n,l+=d;0<l;p[h+b]=255&i,b+=_,i/=256,l-=8);p[h+b-_]|=128*w}},{}],237:[function(t,g,m){var p;function r(k,Q){return k.b===Q.b&&k.a===Q.a}function h(k,Q){return k.b<Q.b||k.b===Q.b&&k.a<=Q.a}function u(k,Q,V){var ae=Q.b-k.b,me=V.b-Q.b;return 0<ae+me?ae<me?Q.a-k.a+ae/(ae+me)*(k.a-V.a):Q.a-V.a+me/(ae+me)*(V.a-k.a):0}function d(k,Q,V){var ae=Q.b-k.b,me=V.b-Q.b;return 0<ae+me?(Q.a-V.a)*ae+(Q.a-k.a)*me:0}function c(k,Q){return k.a<Q.a||k.a===Q.a&&k.b<=Q.b}function i(k,Q,V){var ae=Q.a-k.a,me=V.a-Q.a;return 0<ae+me?ae<me?Q.b-k.b+ae/(ae+me)*(k.b-V.b):Q.b-V.b+me/(ae+me)*(V.b-k.b):0}function n(k,Q,V){var ae=Q.a-k.a,me=V.a-Q.a;return 0<ae+me?(Q.b-V.b)*ae+(Q.b-k.b)*me:0}function o(k,Q,V,ae){return(k=k<0?0:k)<=(V=V<0?0:V)?V===0?(Q+ae)/2:Q+k/(k+V)*(ae-Q):ae+V/(k+V)*(Q-ae)}function l(k){var Q=_(k.b);return E(Q,k.c),E(Q.b,k.c),C(Q,k.a),Q}function a(k,Q){var V=!1,ae=!1;k!==Q&&(Q.a!==k.a&&(ae=!0,L(Q.a,k.a)),Q.d!==k.d&&(V=!0,P(Q.d,k.d)),w(Q,k),ae||(E(Q,k.a),k.a.c=k),V||(C(Q,k.d),k.d.a=k))}function f(k){var Q=k.b,V=!1;k.d!==k.b.d&&(V=!0,P(k.d,k.b.d)),k.c===k?L(k.a,null):(k.b.d.a=pe(k),k.a.c=k.c,w(k,pe(k)),V||C(k,k.d)),Q.c===Q?(L(Q.a,null),P(Q.d,null)):(k.d.a=pe(Q),Q.a.c=Q.c,w(Q,pe(Q))),A(k)}function v(k){var Q=_(k),V=Q.b;return w(Q,k.e),Q.a=k.b.a,E(V,Q.a),Q.d=V.d=k.d,Q=Q.b,w(k.b,pe(k.b)),w(k.b,Q),k.b.a=Q.a,Q.b.a.c=Q.b,Q.b.d=k.b.d,Q.f=k.f,Q.b.f=k.b.f,Q}function b(k,Q){var V=!1,ae=_(k),me=ae.b;return Q.d!==k.d&&(V=!0,P(Q.d,k.d)),w(ae,k.e),w(me,Q),ae.a=k.b.a,me.a=Q.a,ae.d=me.d=k.d,k.d.a=me,V||C(ae,k.d),ae}function _(k){var Q=new W,V=new W,ae=k.b.h;return(((V.h=ae).b.h=Q).h=k).b.h=V,Q.b=V,((Q.c=Q).e=V).b=Q,(V.c=V).e=Q}function w(k,Q){var V=k.c,ae=Q.c;V.b.e=Q,(ae.b.e=k).c=ae,Q.c=V}function E(k,Q){var V=Q.f,ae=new Re(Q,V);for(V.e=ae,V=(Q.f=ae).c=k;V.a=ae,(V=V.c)!==k;);}function C(k,Q){var V=Q.d,ae=new X(Q,V);for(V.b=ae,(Q.d=ae).a=k,ae.c=Q.c,V=k;V.d=ae,(V=V.e)!==k;);}function A(k){var Q=k.h;k=k.b.h,(Q.b.h=k).b.h=Q}function L(k,Q){for(var V=k.c,ae=V;ae.a=Q,(ae=ae.c)!==V;);V=k.f,((ae=k.e).f=V).e=ae}function P(k,Q){for(var V=k.a,ae=V;ae.d=Q,(ae=ae.e)!==V;);V=k.d,((ae=k.b).d=V).b=ae}function R(k){var Q=0;return Math.abs(k[1])>Math.abs(k[0])&&(Q=1),Math.abs(k[2])>Math.abs(k[Q])&&(Q=2),Q}function N(k,Q){k.f+=Q.f,k.b.f+=Q.b.f}function I(k,Q,V){return k=k.a,Q=Q.a,V=V.a,Q.b.a===k?V.b.a===k?h(Q.a,V.a)?d(V.b.a,Q.a,V.a)<=0:0<=d(Q.b.a,V.a,Q.a):d(V.b.a,k,V.a)<=0:V.b.a===k?0<=d(Q.b.a,k,Q.a):(Q=u(Q.b.a,k,Q.a),(k=u(V.b.a,k,V.a))<=Q)}function O(k){k.a.i=null;var Q=k.e;Q.a.c=Q.c,Q.c.a=Q.a,k.e=null}function U(k,Q){f(k.a),k.c=!1,(k.a=Q).i=k}function K(k){for(var Q=k.a.a;(k=Xe(k)).a.a===Q;);return k.c&&(U(k,Q=b(be(k).a.b,k.a.e)),k=Xe(k)),k}function ee(k,Q,V){var ae=new Ge;return ae.a=V,ae.e=ne(k.f,Q.e,ae),V.i=ae}function H(k,Q){switch(k.s){case 100130:return(1&Q)!=0;case 100131:return Q!==0;case 100132:return 0<Q;case 100133:return Q<0;case 100134:return 2<=Q||Q<=-2}return!1}function te(k){var Q=k.a,V=Q.d;V.c=k.d,V.a=Q,O(k)}function Z(k,Q,V){for(Q=(k=Q).a;k!==V;){k.c=!1;var ae=be(k),me=ae.a;if(me.a!==Q.a){if(!ae.c){te(k);break}U(ae,me=b(Q.c.b,me.b))}Q.c!==me&&(a(pe(me),me),a(Q,me)),te(k),Q=ae.a,k=ae}return Q}function ge(k,Q,V,ae,me,Me){for(var Ee=!0;ee(k,Q,V.b),(V=V.c)!==ae;);for(me===null&&(me=be(Q).a.b.c);(V=(ae=be(Q)).a.b).a===me.a;)V.c!==me&&(a(pe(V),V),a(pe(me),V)),ae.f=Q.f-V.f,ae.d=H(k,ae.f),Q.b=!0,!Ee&&de(k,Q)&&(N(V,me),O(Q),f(me)),Ee=!1,Q=ae,me=V;Q.b=!0,Me&&ie(k,Q)}function $(k,Q,V,ae,me){var Me=[Q.g[0],Q.g[1],Q.g[2]];Q.d=null,Q.d=k.o&&k.o(Me,V,ae,k.c)||null,Q.d===null&&(me?k.n||(oe(k,100156),k.n=!0):Q.d=V[0])}function se(k,Q,V){var ae=[null,null,null,null];ae[0]=Q.a.d,ae[1]=V.a.d,$(k,Q.a,ae,[.5,.5,0,0],!1),a(Q,V)}function z(k,Q,V,ae,me){var Me=Math.abs(Q.b-k.b)+Math.abs(Q.a-k.a),Ee=Math.abs(V.b-k.b)+Math.abs(V.a-k.a),ke=me+1;ae[me]=.5*Ee/(Me+Ee),ae[ke]=.5*Me/(Me+Ee),k.g[0]+=ae[me]*Q.g[0]+ae[ke]*V.g[0],k.g[1]+=ae[me]*Q.g[1]+ae[ke]*V.g[1],k.g[2]+=ae[me]*Q.g[2]+ae[ke]*V.g[2]}function de(k,Q){var V=be(Q),ae=Q.a,me=V.a;if(h(ae.a,me.a)){if(0<d(me.b.a,ae.a,me.a))return!1;if(r(ae.a,me.a)){if(ae.a!==me.a){V=k.e;var Me=ae.a.h;if(0<=Me){var Ee=(V=V.b).d,ke=V.e,we=V.c,Je=we[Me];Ee[Je]=Ee[V.a],(we[Ee[Je]]=Je)<=--V.a&&(Je<=1||h(ke[Ee[Je>>1]],ke[Ee[Je]])?Oe(V,Je):Ae(V,Je)),ke[Me]=null,we[Me]=V.b,V.b=Me}else for(V.c[-(Me+1)]=null;0<V.a&&V.c[V.d[V.a-1]]===null;)--V.a;se(k,pe(me),ae)}}else v(me.b),a(ae,pe(me)),Q.b=V.b=!0}else{if(d(ae.b.a,me.a,ae.a)<0)return!1;Xe(Q).b=Q.b=!0,v(ae.b),a(pe(me),ae)}return!0}function re(k,Q){var V=be(Q),ae=Q.a,me=V.a,Me=ae.a,Ee=me.a,ke=ae.b.a,we=me.b.a,Je=new Re;if(d(ke,k.a,Me),d(we,k.a,Ee),Me===Ee||Math.min(Me.a,ke.a)>Math.max(Ee.a,we.a))return!1;if(h(Me,Ee)){if(0<d(we,Me,Ee))return!1}else if(d(ke,Ee,Me)<0)return!1;var nt,ut,gt=ke,ft=Me,dt=we,At=Ee;if(h(gt,ft)||(nt=gt,gt=ft,ft=nt),h(dt,At)||(nt=dt,dt=At,At=nt),h(gt,dt)||(nt=gt,gt=dt,dt=nt,nt=ft,ft=At,At=nt),h(dt,ft)?h(ft,At)?((nt=u(gt,dt,ft))+(ut=u(dt,ft,At))<0&&(nt=-nt,ut=-ut),Je.b=o(nt,dt.b,ut,ft.b)):((nt=d(gt,dt,ft))+(ut=-d(gt,At,ft))<0&&(nt=-nt,ut=-ut),Je.b=o(nt,dt.b,ut,At.b)):Je.b=(dt.b+ft.b)/2,c(gt,ft)||(nt=gt,gt=ft,ft=nt),c(dt,At)||(nt=dt,dt=At,At=nt),c(gt,dt)||(nt=gt,gt=dt,dt=nt,nt=ft,ft=At,At=nt),c(dt,ft)?c(ft,At)?((nt=i(gt,dt,ft))+(ut=i(dt,ft,At))<0&&(nt=-nt,ut=-ut),Je.a=o(nt,dt.a,ut,ft.a)):((nt=n(gt,dt,ft))+(ut=-n(gt,At,ft))<0&&(nt=-nt,ut=-ut),Je.a=o(nt,dt.a,ut,At.a)):Je.a=(dt.a+ft.a)/2,h(Je,k.a)&&(Je.b=k.a.b,Je.a=k.a.a),gt=h(Me,Ee)?Me:Ee,h(gt,Je)&&(Je.b=gt.b,Je.a=gt.a),r(Je,Me)||r(Je,Ee))return de(k,Q),!1;if(!r(ke,k.a)&&0<=d(ke,k.a,Je)||!r(we,k.a)&&d(we,k.a,Je)<=0){if(we===k.a)return v(ae.b),a(me.b,ae),ae=be(Q=K(Q)).a,Z(k,be(Q),V),ge(k,Q,pe(ae),ae,ae,!0),!0;if(ke!==k.a)return 0<=d(ke,k.a,Je)&&(Xe(Q).b=Q.b=!0,v(ae.b),ae.a.b=k.a.b,ae.a.a=k.a.a),d(we,k.a,Je)<=0&&(Q.b=V.b=!0,v(me.b),me.a.b=k.a.b,me.a.a=k.a.a),!1;for(v(me.b),a(ae.e,pe(me)),Ee=(Me=V=Q).a.b.a;(Me=Xe(Me)).a.b.a===Ee;);return Me=be(Q=Me).a.b.c,V.a=pe(me),ge(k,Q,(me=Z(k,V,null)).c,ae.b.c,Me,!0),!0}return v(ae.b),v(me.b),a(pe(me),ae),ae.a.b=Je.b,ae.a.a=Je.a,ae.a.h=ce(k.e,ae.a),ae=ae.a,me=[0,0,0,0],Je=[Me.d,ke.d,Ee.d,we.d],ae.g[0]=ae.g[1]=ae.g[2]=0,z(ae,Me,ke,me,0),z(ae,Ee,we,me,2),$(k,ae,Je,me,!0),Xe(Q).b=Q.b=V.b=!0,!1}function ie(k,Q){for(var V=be(Q);;){for(;V.b;)V=be(Q=V);if(!Q.b&&((Q=Xe(V=Q))===null||!Q.b))break;Q.b=!1;var ae,me=Q.a,Me=V.a;if(ae=me.b.a!==Me.b.a)e:{var Ee=be(ae=Q),ke=ae.a,we=Ee.a,Je=void 0;if(h(ke.b.a,we.b.a)){if(d(ke.b.a,we.b.a,ke.a)<0){ae=!1;break e}Xe(ae).b=ae.b=!0,Je=v(ke),a(we.b,Je),Je.d.c=ae.d}else{if(0<d(we.b.a,ke.b.a,we.a)){ae=!1;break e}ae.b=Ee.b=!0,Je=v(we),a(ke.e,we.b),Je.b.d.c=ae.d}ae=!0}if(ae&&(V.c?(O(V),f(Me),Me=(V=be(Q)).a):Q.c&&(O(Q),f(me),me=(Q=Xe(V)).a)),me.a!==Me.a){if(me.b.a===Me.b.a||Q.c||V.c||me.b.a!==k.a&&Me.b.a!==k.a)de(k,Q);else if(re(k,Q))break}me.a===Me.a&&me.b.a===Me.b.a&&(N(Me,me),O(Q),f(me),Q=Xe(V))}}function j(k,Q){for(var V=(k.a=Q).c;V.i===null;)if((V=V.c)===Q.c){V=k;var ae=Q;(Ee=new Ge).a=ae.c.b;for(var me=(we=V.f).a;(me=me.a).b!==null&&!we.c(we.b,Ee,me.b););var Me=be(we=me.b),Ee=we.a;if(me=Me.a,d(Ee.b.a,ae,Ee.a)===0)r((Ee=we.a).a,ae)||r(Ee.b.a,ae)||(v(Ee.b),we.c&&(f(Ee.c),we.c=!1),a(ae.c,Ee),j(V,ae));else{var ke=h(me.b.a,Ee.b.a)?we:Me;Me=void 0,we.d||ke.c?(Me=ke===we?b(ae.c.b,Ee.e):b(me.b.c.b,ae.c).b,ke.c?U(ke,Me):((we=ee(Ee=V,we,Me)).f=Xe(we).f+we.a.f,we.d=H(Ee,we.f)),j(V,ae)):ge(V,we,ae.c,ae.c,null,!0)}return}if(we=(Ee=be(V=K(V.i))).a,(Ee=Z(k,Ee,null)).c===we){Ee=(we=Ee).c,me=be(V),Me=V.a,ke=me.a;var we,Je=!1;Me.b.a!==ke.b.a&&re(k,V),r(Me.a,k.a)&&(a(pe(Ee),Me),Ee=be(V=K(V)).a,Z(k,be(V),me),Je=!0),r(ke.a,k.a)&&(a(we,pe(ke)),we=Z(k,me,null),Je=!0),Je?ge(k,V,we.c,Ee,Ee,!0):(ae=h(ke.a,Me.a)?pe(ke):Me,ge(k,V,ae=b(we.c.b,ae),ae.c,ae.c,!1),ae.b.i.c=!0,ie(k,V))}else ge(k,V,Ee.c,we,we,!0)}function B(k,Q){var V=new Ge,ae=l(k.b);ae.a.b=4e150,ae.a.a=Q,ae.b.a.b=-4e150,ae.b.a.a=Q,k.a=ae.b.a,V.a=ae,V.f=0,V.d=!1,V.c=!1,V.h=!0,V.b=!1,ae=ne(ae=k.f,ae.a,V),V.e=ae}function G(k){this.a=new Y,this.b=k,this.c=I}function ne(k,Q,V){for(;(Q=Q.c).b!==null&&!k.c(k.b,Q.b,V););return k=new Y(V,Q.a,Q),Q.a.c=k,Q.a=k}function Y(k,Q,V){this.b=k||null,this.a=Q||this,this.c=V||this}function J(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function fe(k,Q){if(k.d!==Q)for(;k.d!==Q;)if(k.d<Q)switch(k.d){case 0:oe(k,100151),k.u(null);break;case 1:oe(k,100152),k.t()}else switch(k.d){case 2:oe(k,100154),k.v();break;case 1:oe(k,100153),k.w()}}function oe(k,Q){k.p&&k.p(Q,k.c)}function X(k,Q){this.b=k||this,this.d=Q||this,this.a=null,this.c=!1}function W(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function pe(k){return k.b.e}function Se(){this.c=new Re,this.a=new X,this.b=new W,this.d=new W,this.b.b=this.d,this.d.b=this.b}function Re(k,Q){this.e=k||this,this.f=Q||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Le(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Ce}function ce(k,Q){if(k.e){var V,ae=k.b,me=++ae.a;return 2*me>ae.f&&(ae.f*=2,ae.c=Ie(ae.c,ae.f+1)),ae.b===0?V=me:(V=ae.b,ae.b=ae.c[ae.b]),ae.e[V]=Q,ae.c[V]=me,ae.d[me]=V,ae.h&&Ae(ae,me),V}return ae=k.a++,k.c[ae]=Q,-(ae+1)}function ue(k){if(k.a===0)return Pe(k.b);var Q=k.c[k.d[k.a-1]];if(k.b.a!==0&&h(Ve(k.b),Q))return Pe(k.b);for(;--k.a,0<k.a&&k.c[k.d[k.a-1]]===null;);return Q}function Ce(){this.d=Ie([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function Ie(k,Q){for(var V=Array(Q),ae=0;ae<k.length;ae++)V[ae]=k[ae];for(;ae<Q;ae++)V[ae]=0;return V}function Ve(k){return k.e[k.d[1]]}function Pe(k){var Q=k.d,V=k.e,ae=k.c,me=Q[1],Me=V[me];return 0<k.a&&(Q[1]=Q[k.a],ae[Q[1]]=1,V[me]=null,ae[me]=k.b,k.b=me,0<--k.a&&Oe(k,1)),Me}function Oe(k,Q){for(var V=k.d,ae=k.e,me=k.c,Me=Q,Ee=V[Me];;){var ke=Me<<1;ke<k.a&&h(ae[V[ke+1]],ae[V[ke]])&&(ke+=1);var we=V[ke];if(ke>k.a||h(ae[Ee],ae[we])){me[V[Me]=Ee]=Me;break}me[V[Me]=we]=Me,Me=ke}}function Ae(k,Q){for(var V=k.d,ae=k.e,me=k.c,Me=Q,Ee=V[Me];;){var ke=Me>>1,we=V[ke];if(ke==0||h(ae[we],ae[Ee])){me[V[Me]=Ee]=Me;break}me[V[Me]=we]=Me,Me=ke}}function Ge(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function be(k){return k.e.c.b}function Xe(k){return k.e.a.b}(p=J.prototype).x=function(){fe(this,0)},p.B=function(k,Q){switch(k){case 100142:return;case 100140:switch(Q){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=Q)}break;case 100141:return void(this.m=!!Q);default:return void oe(this,100900)}oe(this,100901)},p.y=function(k){switch(k){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:oe(this,100900)}return!1},p.A=function(k,Q,V){this.j[0]=k,this.j[1]=Q,this.j[2]=V},p.z=function(k,Q){var V=Q||null;switch(k){case 100100:case 100106:this.h=V;break;case 100104:case 100110:this.l=V;break;case 100101:case 100107:this.k=V;break;case 100102:case 100108:this.i=V;break;case 100103:case 100109:this.p=V;break;case 100105:case 100111:this.o=V;break;case 100112:this.r=V;break;default:oe(this,100900)}},p.C=function(k,Q){var V=!1,ae=[0,0,0];fe(this,2);for(var me=0;me<3;++me){var Me=k[me];Me<-1e150&&(Me=-1e150,V=!0),1e150<Me&&(Me=1e150,V=!0),ae[me]=Me}V&&oe(this,100155),(V=this.q)===null?a(V=l(this.b),V.b):(v(V),V=V.e),V.a.d=Q,V.a.g[0]=ae[0],V.a.g[1]=ae[1],V.a.g[2]=ae[2],V.f=1,V.b.f=-1,this.q=V},p.u=function(k){fe(this,0),this.d=1,this.b=new Se,this.c=k},p.t=function(){fe(this,1),this.d=2,this.q=null},p.v=function(){fe(this,2),this.d=1},p.w=function(){fe(this,1),this.d=0;var k,Q,V=!1,ae=[we=this.j[0],me=this.j[1],Ee=this.j[2]];if(we===0&&me===0&&Ee===0){for(var me=[-2e150,-2e150,-2e150],Me=[2e150,2e150,2e150],Ee=[],ke=[],we=(V=this.b.c).e;we!==V;we=we.e)for(var Je=0;Je<3;++Je){var nt=we.g[Je];nt<Me[Je]&&(Me[Je]=nt,ke[Je]=we),nt>me[Je]&&(me[Je]=nt,Ee[Je]=we)}if(we=0,me[1]-Me[1]>me[0]-Me[0]&&(we=1),me[2]-Me[2]>me[we]-Me[we]&&(we=2),Me[we]>=me[we])ae[0]=0,ae[1]=0,ae[2]=1;else{for(me=0,Me=ke[we],Ee=Ee[we],ke=[0,0,0],Me=[Me.g[0]-Ee.g[0],Me.g[1]-Ee.g[1],Me.g[2]-Ee.g[2]],Je=[0,0,0],we=V.e;we!==V;we=we.e)Je[0]=we.g[0]-Ee.g[0],Je[1]=we.g[1]-Ee.g[1],Je[2]=we.g[2]-Ee.g[2],ke[0]=Me[1]*Je[2]-Me[2]*Je[1],ke[1]=Me[2]*Je[0]-Me[0]*Je[2],ke[2]=Me[0]*Je[1]-Me[1]*Je[0],me<(nt=ke[0]*ke[0]+ke[1]*ke[1]+ke[2]*ke[2])&&(me=nt,ae[0]=ke[0],ae[1]=ke[1],ae[2]=ke[2]);me<=0&&(ae[0]=ae[1]=ae[2]=0,ae[R(Me)]=1)}V=!0}for(ke=R(ae),we=this.b.c,me=(ke+1)%3,Ee=(ke+2)%3,ke=0<ae[ke]?1:-1,ae=we.e;ae!==we;ae=ae.e)ae.b=ae.g[me],ae.a=ke*ae.g[Ee];if(V){for(ae=0,we=(V=this.b.a).b;we!==V;we=we.b)if(!((me=we.a).f<=0))for(;ae+=(me.a.b-me.b.a.b)*(me.a.a+me.b.a.a),(me=me.e)!==we.a;);if(ae<0)for(V=(ae=this.b.c).e;V!==ae;V=V.e)V.a=-V.a}for(this.n=!1,we=(ae=this.b.b).h;we!==ae;we=V)V=we.h,me=we.e,r(we.a,we.b.a)&&we.e.e!==we&&(se(this,me,we),f(we),me=(we=me).e),me.e===we&&(me!==we&&(me!==V&&me!==V.b||(V=V.h),f(me)),we!==V&&we!==V.b||(V=V.h),f(we));for(this.e=ae=new Le,we=(V=this.b.c).e;we!==V;we=we.e)we.h=ce(ae,we);for(function(ut){ut.d=[];for(var gt=0;gt<ut.a;gt++)ut.d[gt]=gt;ut.d.sort(function(ft){return function(dt,At){return h(ft[dt],ft[At])?1:-1}}(ut.c)),ut.e=!0,function(ft){for(var dt=ft.a;1<=dt;--dt)Oe(ft,dt);ft.h=!0}(ut.b)}(ae),this.f=new G(this),B(this,-4e150),B(this,4e150);(ae=ue(this.e))!==null;){for(;;){e:if(we=this.e,we.a===0)V=Ve(we.b);else if(V=we.c[we.d[we.a-1]],we.b.a!==0&&(we=Ve(we.b),h(we,V))){V=we;break e}if(V===null||!r(V,ae))break;V=ue(this.e),se(this,ae.c,V.c)}j(this,ae)}for(this.a=this.f.a.a.b.a.a,ae=0;(V=this.f.a.a.b)!==null;)V.h||++ae,O(V);for(this.f=null,(ae=this.e).b=null,ae.d=null,this.e=ae.c=null,we=(ae=this.b).a.b;we!==ae.a;we=V)V=we.b,(we=we.a).e.e===we&&(N(we.c,we),f(we));if(!this.n){if(ae=this.b,this.m)for(we=ae.b.h;we!==ae.b;we=V)V=we.h,we.b.d.c!==we.d.c?we.f=we.d.c?1:-1:f(we);else for(we=ae.a.b;we!==ae.a;we=V)if(V=we.b,we.c){for(we=we.a;h(we.b.a,we.a);we=we.c.b);for(;h(we.a,we.b.a);we=we.e);for(me=we.c.b,Ee=void 0;we.e!==me;)if(h(we.b.a,me.a)){for(;me.e!==we&&(h((Q=me.e).b.a,Q.a)||d(me.a,me.b.a,me.e.b.a)<=0);)me=(Ee=b(me.e,me)).b;me=me.c.b}else{for(;me.e!==we&&(h((k=we.c.b).a,k.b.a)||0<=d(we.b.a,we.a,we.c.b.a));)we=(Ee=b(we,we.c.b)).b;we=we.e}for(;me.e.e!==we;)me=(Ee=b(me.e,me)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(V=(ae=this.b).a.b;V!==ae.a;V=V.b)if(V.c){for(this.h&&this.h(2,this.c),we=V.a;this.k&&this.k(we.a.d,this.c),(we=we.e)!==V.a;);this.i&&this.i(this.c)}}else{for(ae=this.b,V=!!this.l,we=!1,me=-1,Ee=ae.a.d;Ee!==ae.a;Ee=Ee.d)if(Ee.c)for(we||(this.h&&this.h(4,this.c),we=!0),ke=Ee.a;V&&me!==(Me=ke.b.d.c?0:1)&&(me=Me,this.l&&this.l(!!me,this.c)),this.k&&this.k(ke.a.d,this.c),(ke=ke.e)!==Ee.a;);we&&this.i&&this.i(this.c)}if(this.r){for(we=(ae=this.b).a.b;we!==ae.a;we=V)if(V=we.b,!we.c){for(Ee=(me=we.a).e,ke=void 0;Ee=(ke=Ee).e,(ke.d=null)===ke.b.d&&(ke.c===ke?L(ke.a,null):(ke.a.c=ke.c,w(ke,pe(ke))),(Me=ke.b).c===Me?L(Me.a,null):(Me.a.c=Me.c,w(Me,pe(Me))),A(ke)),ke!==me;);me=we.d,((we=we.b).d=me).b=we}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:J,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},J.prototype.gluDeleteTess=J.prototype.x,J.prototype.gluTessProperty=J.prototype.B,J.prototype.gluGetTessProperty=J.prototype.y,J.prototype.gluTessNormal=J.prototype.A,J.prototype.gluTessCallback=J.prototype.z,J.prototype.gluTessVertex=J.prototype.C,J.prototype.gluTessBeginPolygon=J.prototype.u,J.prototype.gluTessBeginContour=J.prototype.t,J.prototype.gluTessEndContour=J.prototype.v,J.prototype.gluTessEndPolygon=J.prototype.w,g!==void 0&&(g.exports=this.libtess)},{}],238:[function(t,g,m){function p(r,h,u,d){for(var c=r[h++],i=1<<c,n=1+i,o=1+n,l=c+1,a=(1<<l)-1,f=0,v=0,b=0,_=r[h++],w=new Int32Array(4096),E=null;;){for(;f<16&&_!==0;)v|=r[h++]<<f,f+=8,_===1?_=r[h++]:--_;if(f<l)break;var C=v&a;if(v>>=l,f-=l,C!=i){if(C==n)break;for(var A=C<o?C:E,L=0,P=A;i<P;)P=w[P]>>8,++L;var R=P;if(d<b+L+(A!==C?1:0))return void console.log("Warning, gif stream longer than expected.");u[b++]=R;var N=b+=L;for(A!==C&&(u[b++]=R),P=A;L--;)P=w[P],u[--N]=255&P,P>>=8;E!==null&&o<4096&&(w[o++]=E<<8|R,a+1<=o&&l<12&&(++l,a=a<<1|1)),E=C}else o=1+n,a=(1<<(l=c+1))-1,E=null}return b!==d&&console.log("Warning, gif stream shorter than expected."),u}try{m.GifWriter=function(r,h,u,d){var c=0,i=(d=d===void 0?{}:d).loop===void 0?null:d.loop,n=d.palette===void 0?null:d.palette;if(h<=0||u<=0||65535<h||65535<u)throw new Error("Width/Height invalid.");function o(E){var C=E.length;if(C<2||256<C||C&C-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return C}r[c++]=71,r[c++]=73,r[c++]=70,r[c++]=56,r[c++]=57,r[c++]=97;var l=0,a=0;if(n!==null){for(var f=o(n);f>>=1;)++l;if(f=1<<l,--l,d.background!==void 0){if(f<=(a=d.background))throw new Error("Background index out of range.");if(a===0)throw new Error("Background index explicitly passed as 0.")}}if(r[c++]=255&h,r[c++]=h>>8&255,r[c++]=255&u,r[c++]=u>>8&255,r[c++]=(n!==null?128:0)|l,r[c++]=a,r[c++]=0,n!==null)for(var v=0,b=n.length;v<b;++v){var _=n[v];r[c++]=_>>16&255,r[c++]=_>>8&255,r[c++]=255&_}if(i!==null){if(i<0||65535<i)throw new Error("Loop count invalid.");r[c++]=33,r[c++]=255,r[c++]=11,r[c++]=78,r[c++]=69,r[c++]=84,r[c++]=83,r[c++]=67,r[c++]=65,r[c++]=80,r[c++]=69,r[c++]=50,r[c++]=46,r[c++]=48,r[c++]=3,r[c++]=1,r[c++]=255&i,r[c++]=i>>8&255,r[c++]=0}var w=!1;this.addFrame=function(E,C,A,L,P,R){if(w===!0&&(--c,w=!1),R=R===void 0?{}:R,E<0||C<0||65535<E||65535<C)throw new Error("x/y invalid.");if(A<=0||L<=0||65535<A||65535<L)throw new Error("Width/Height invalid.");if(P.length<A*L)throw new Error("Not enough pixels for the frame size.");var N=!0,I=R.palette;if(I==null&&(N=!1,I=n),I==null)throw new Error("Must supply either a local or global palette.");for(var O=o(I),U=0;O>>=1;)++U;O=1<<U;var K=R.delay===void 0?0:R.delay,ee=R.disposal===void 0?0:R.disposal;if(ee<0||3<ee)throw new Error("Disposal out of range.");var H=!1,te=0;if(R.transparent!==void 0&&R.transparent!==null&&(H=!0,(te=R.transparent)<0||O<=te))throw new Error("Transparent color index.");if(ee===0&&!H&&K===0||(r[c++]=33,r[c++]=249,r[c++]=4,r[c++]=ee<<2|(H===!0?1:0),r[c++]=255&K,r[c++]=K>>8&255,r[c++]=te,r[c++]=0),r[c++]=44,r[c++]=255&E,r[c++]=E>>8&255,r[c++]=255&C,r[c++]=C>>8&255,r[c++]=255&A,r[c++]=A>>8&255,r[c++]=255&L,r[c++]=L>>8&255,r[c++]=N===!0?128|U-1:0,N===!0)for(var Z=0,ge=I.length;Z<ge;++Z){var $=I[Z];r[c++]=$>>16&255,r[c++]=$>>8&255,r[c++]=255&$}return c=function(se,z,de,re){se[z++]=de;var ie=z++,j=1<<de,B=j-1,G=1+j,ne=1+G,Y=de+1,J=0,fe=0;function oe(Ce){for(;Ce<=J;)se[z++]=255&fe,fe>>=8,J-=8,z===ie+256&&(se[ie]=255,ie=z++)}function X(Ce){fe|=Ce<<J,J+=Y,oe(8)}var W=re[0]&B,pe={};X(j);for(var Se=1,Re=re.length;Se<Re;++Se){var Le=re[Se]&B,ce=W<<8|Le,ue=pe[ce];if(ue===void 0){for(fe|=W<<J,J+=Y;8<=J;)se[z++]=255&fe,fe>>=8,J-=8,z===ie+256&&(se[ie]=255,ie=z++);ne===4096?(X(j),ne=1+G,Y=de+1,pe={}):(1<<Y<=ne&&++Y,pe[ce]=ne++),W=Le}else W=ue}return X(W),X(G),oe(1),ie+1===z?se[ie]=0:(se[ie]=z-ie-1,se[z++]=0),z}(r,c,U<2?2:U,P)},this.end=function(){return w===!1&&(r[c++]=59,w=!0),c},this.getOutputBuffer=function(){return r},this.setOutputBuffer=function(E){r=E},this.getOutputBufferPosition=function(){return c},this.setOutputBufferPosition=function(E){c=E}},m.GifReader=function(r){var h=0;if(r[h++]!==71||r[h++]!==73||r[h++]!==70||r[h++]!==56||(r[h++]+1&253)!=56||r[h++]!==97)throw new Error("Invalid GIF 87a/89a header.");var u=r[h++]|r[h++]<<8,d=r[h++]|r[h++]<<8,c=r[h++],i=c>>7,n=1<<1+(7&c);r[h++],r[h++];var o=null,l=null;i&&(o=h,h+=3*(l=n));var a=!0,f=[],v=0,b=null,_=0,w=null;for(this.width=u,this.height=d;a&&h<r.length;)switch(r[h++]){case 33:switch(r[h++]){case 255:if(r[h]!==11||r[h+1]==78&&r[h+2]==69&&r[h+3]==84&&r[h+4]==83&&r[h+5]==67&&r[h+6]==65&&r[h+7]==80&&r[h+8]==69&&r[h+9]==50&&r[h+10]==46&&r[h+11]==48&&r[h+12]==3&&r[h+13]==1&&r[h+16]==0)h+=14,w=r[h++]|r[h++]<<8,h++;else for(h+=12;;){if(!(0<=(H=r[h++])))throw Error("Invalid block size");if(H===0)break;h+=H}break;case 249:if(r[h++]!==4||r[h+4]!==0)throw new Error("Invalid graphics extension block.");var E=r[h++];v=r[h++]|r[h++]<<8,b=r[h++],(1&E)==0&&(b=null),_=E>>2&7,h++;break;case 254:for(;;){if(!(0<=(H=r[h++])))throw Error("Invalid block size");if(H===0)break;h+=H}break;default:throw new Error("Unknown graphic control label: 0x"+r[h-1].toString(16))}break;case 44:var C=r[h++]|r[h++]<<8,A=r[h++]|r[h++]<<8,L=r[h++]|r[h++]<<8,P=r[h++]|r[h++]<<8,R=r[h++],N=R>>6&1,I=1<<1+(7&R),O=o,U=l,K=!1;R>>7&&(K=!0,O=h,h+=3*(U=I));var ee=h;for(h++;;){var H;if(!(0<=(H=r[h++])))throw Error("Invalid block size");if(H===0)break;h+=H}f.push({x:C,y:A,width:L,height:P,has_local_palette:K,palette_offset:O,palette_size:U,data_offset:ee,data_length:h-ee,transparent_index:b,interlaced:!!N,delay:v,disposal:_});break;case 59:a=!1;break;default:throw new Error("Unknown gif block: 0x"+r[h-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return w},this.frameInfo=function(te){if(te<0||te>=f.length)throw new Error("Frame index out of range.");return f[te]},this.decodeAndBlitFrameBGRA=function(te,Z){var ge=this.frameInfo(te),$=ge.width*ge.height,se=new Uint8Array($);p(r,ge.data_offset,se,$);var z=ge.palette_offset,de=ge.transparent_index;de===null&&(de=256);var re=ge.width,ie=u-re,j=re,B=4*(ge.y*u+ge.x),G=4*((ge.y+ge.height)*u+ge.x),ne=B,Y=4*ie;ge.interlaced===!0&&(Y+=4*u*7);for(var J=8,fe=0,oe=se.length;fe<oe;++fe){var X=se[fe];if(j===0&&(j=re,G<=(ne+=Y)&&(Y=4*ie+4*u*(J-1),ne=B+(re+ie)*(J<<1),J>>=1)),X===de)ne+=4;else{var W=r[z+3*X],pe=r[z+3*X+1],Se=r[z+3*X+2];Z[ne++]=Se,Z[ne++]=pe,Z[ne++]=W,Z[ne++]=255}--j}},this.decodeAndBlitFrameRGBA=function(te,Z){var ge=this.frameInfo(te),$=ge.width*ge.height,se=new Uint8Array($);p(r,ge.data_offset,se,$);var z=ge.palette_offset,de=ge.transparent_index;de===null&&(de=256);var re=ge.width,ie=u-re,j=re,B=4*(ge.y*u+ge.x),G=4*((ge.y+ge.height)*u+ge.x),ne=B,Y=4*ie;ge.interlaced===!0&&(Y+=4*u*7);for(var J=8,fe=0,oe=se.length;fe<oe;++fe){var X=se[fe];if(j===0&&(j=re,G<=(ne+=Y)&&(Y=4*ie+4*u*(J-1),ne=B+(re+ie)*(J<<1),J>>=1)),X===de)ne+=4;else{var W=r[z+3*X],pe=r[z+3*X+1],Se=r[z+3*X+2];Z[ne++]=W,Z[ne++]=pe,Z[ne++]=Se,Z[ne++]=255}--j}}}}catch{}},{}],239:[function(t,g,m){(function(p){var r,h;r=this,h=function(u){function d(y){if(this==null)throw TypeError();var x=String(this),M=x.length,T=y?Number(y):0;if(T!=T&&(T=0),!(T<0||M<=T)){var D,F=x.charCodeAt(T);return 55296<=F&&F<=56319&&T+1<M&&56320<=(D=x.charCodeAt(T+1))&&D<=57343?1024*(F-55296)+D-56320+65536:F}}var c;String.prototype.codePointAt||((c=function(){try{var y={},x=Object.defineProperty,M=x(y,y,y)&&x}catch{}return M}())?c(String.prototype,"codePointAt",{value:d,configurable:!0,writable:!0}):String.prototype.codePointAt=d);var i=0,n=-3;function o(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function l(y,x){this.source=y,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=x,this.destLen=0,this.ltree=new o,this.dtree=new o}var a=new o,f=new o,v=new Uint8Array(30),b=new Uint16Array(30),_=new Uint8Array(30),w=new Uint16Array(30),E=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),C=new o,A=new Uint8Array(320);function L(y,x,M,T){var D,F;for(D=0;D<M;++D)y[D]=0;for(D=0;D<30-M;++D)y[D+M]=D/M|0;for(F=T,D=0;D<30;++D)x[D]=F,F+=1<<y[D]}var P=new Uint16Array(16);function R(y,x,M,T){var D,F;for(D=0;D<16;++D)y.table[D]=0;for(D=0;D<T;++D)y.table[x[M+D]]++;for(D=F=y.table[0]=0;D<16;++D)P[D]=F,F+=y.table[D];for(D=0;D<T;++D)x[M+D]&&(y.trans[P[x[M+D]]++]=D)}function N(y){y.bitcount--||(y.tag=y.source[y.sourceIndex++],y.bitcount=7);var x=1&y.tag;return y.tag>>>=1,x}function I(y,x,M){if(!x)return M;for(;y.bitcount<24;)y.tag|=y.source[y.sourceIndex++]<<y.bitcount,y.bitcount+=8;var T=y.tag&65535>>>16-x;return y.tag>>>=x,y.bitcount-=x,T+M}function O(y,x){for(;y.bitcount<24;)y.tag|=y.source[y.sourceIndex++]<<y.bitcount,y.bitcount+=8;for(var M=0,T=0,D=0,F=y.tag;T=2*T+(1&F),F>>>=1,++D,M+=x.table[D],0<=(T-=x.table[D]););return y.tag=F,y.bitcount-=D,x.trans[M+T]}function U(y,x,M){var T,D,F,q,le,he;for(T=I(y,5,257),D=I(y,5,1),F=I(y,4,4),q=0;q<19;++q)A[q]=0;for(q=0;q<F;++q){var _e=I(y,3,0);A[E[q]]=_e}for(R(C,A,0,19),le=0;le<T+D;){var Te=O(y,C);switch(Te){case 16:var je=A[le-1];for(he=I(y,2,3);he;--he)A[le++]=je;break;case 17:for(he=I(y,3,3);he;--he)A[le++]=0;break;case 18:for(he=I(y,7,11);he;--he)A[le++]=0;break;default:A[le++]=Te}}R(x,A,0,T),R(M,A,T,D)}function K(y,x,M){for(;;){var T,D,F,q,le=O(y,x);if(le===256)return i;if(le<256)y.dest[y.destLen++]=le;else for(T=I(y,v[le-=257],b[le]),D=O(y,M),q=F=y.destLen-I(y,_[D],w[D]);q<F+T;++q)y.dest[y.destLen++]=y.dest[q]}}function ee(y){for(var x,M;8<y.bitcount;)y.sourceIndex--,y.bitcount-=8;if((x=256*(x=y.source[y.sourceIndex+1])+y.source[y.sourceIndex])!==(65535&~(256*y.source[y.sourceIndex+3]+y.source[y.sourceIndex+2])))return n;for(y.sourceIndex+=4,M=x;M;--M)y.dest[y.destLen++]=y.source[y.sourceIndex++];return y.bitcount=0,i}(function(y,x){var M;for(M=0;M<7;++M)y.table[M]=0;for(y.table[7]=24,y.table[8]=152,y.table[9]=112,M=0;M<24;++M)y.trans[M]=256+M;for(M=0;M<144;++M)y.trans[24+M]=M;for(M=0;M<8;++M)y.trans[168+M]=280+M;for(M=0;M<112;++M)y.trans[176+M]=144+M;for(M=0;M<5;++M)x.table[M]=0;for(x.table[5]=32,M=0;M<32;++M)x.trans[M]=M})(a,f),L(v,b,4,3),L(_,w,2,1),v[28]=0,b[28]=258;var H=function(y,x){var M,T,D=new l(y,x);do{switch(M=N(D),I(D,2,0)){case 0:T=ee(D);break;case 1:T=K(D,a,f);break;case 2:U(D,D.ltree,D.dtree),T=K(D,D.ltree,D.dtree);break;default:T=n}if(T!==i)throw new Error("Data error")}while(!M);return D.destLen<D.dest.length?typeof D.dest.slice=="function"?D.dest.slice(0,D.destLen):D.dest.subarray(0,D.destLen):D.dest};function te(y,x,M,T,D){return Math.pow(1-D,3)*y+3*Math.pow(1-D,2)*D*x+3*(1-D)*Math.pow(D,2)*M+Math.pow(D,3)*T}function Z(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function ge(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function $(y){throw new Error(y)}function se(y,x){y||$(x)}Z.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Z.prototype.addPoint=function(y,x){typeof y=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=y,this.x2=y),y<this.x1&&(this.x1=y),y>this.x2&&(this.x2=y)),typeof x=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=x,this.y2=x),x<this.y1&&(this.y1=x),x>this.y2&&(this.y2=x))},Z.prototype.addX=function(y){this.addPoint(y,null)},Z.prototype.addY=function(y){this.addPoint(null,y)},Z.prototype.addBezier=function(y,x,M,T,D,F,q,le){var he=[y,x],_e=[M,T],Te=[D,F],je=[q,le];this.addPoint(y,x),this.addPoint(q,le);for(var ye=0;ye<=1;ye++){var tt=6*he[ye]-12*_e[ye]+6*Te[ye],Ke=-3*he[ye]+9*_e[ye]-9*Te[ye]+3*je[ye],Ye=3*_e[ye]-3*he[ye];if(Ke!=0){var Ne=Math.pow(tt,2)-4*Ye*Ke;if(!(Ne<0)){var He=(-tt+Math.sqrt(Ne))/(2*Ke);0<He&&He<1&&(ye===0&&this.addX(te(he[ye],_e[ye],Te[ye],je[ye],He)),ye===1&&this.addY(te(he[ye],_e[ye],Te[ye],je[ye],He)));var at=(-tt-Math.sqrt(Ne))/(2*Ke);0<at&&at<1&&(ye===0&&this.addX(te(he[ye],_e[ye],Te[ye],je[ye],at)),ye===1&&this.addY(te(he[ye],_e[ye],Te[ye],je[ye],at)))}}else{if(tt==0)continue;var ot=-Ye/tt;0<ot&&ot<1&&(ye===0&&this.addX(te(he[ye],_e[ye],Te[ye],je[ye],ot)),ye===1&&this.addY(te(he[ye],_e[ye],Te[ye],je[ye],ot)))}}},Z.prototype.addQuad=function(y,x,M,T,D,F){var q=y+.6666666666666666*(M-y),le=x+2/3*(T-x),he=q+1/3*(D-y),_e=le+1/3*(F-x);this.addBezier(y,x,q,le,he,_e,D,F)},ge.prototype.moveTo=function(y,x){this.commands.push({type:"M",x:y,y:x})},ge.prototype.lineTo=function(y,x){this.commands.push({type:"L",x:y,y:x})},ge.prototype.curveTo=ge.prototype.bezierCurveTo=function(y,x,M,T,D,F){this.commands.push({type:"C",x1:y,y1:x,x2:M,y2:T,x:D,y:F})},ge.prototype.quadTo=ge.prototype.quadraticCurveTo=function(y,x,M,T){this.commands.push({type:"Q",x1:y,y1:x,x:M,y:T})},ge.prototype.close=ge.prototype.closePath=function(){this.commands.push({type:"Z"})},ge.prototype.extend=function(y){if(y.commands)y=y.commands;else if(y instanceof Z){var x=y;return this.moveTo(x.x1,x.y1),this.lineTo(x.x2,x.y1),this.lineTo(x.x2,x.y2),this.lineTo(x.x1,x.y2),void this.close()}Array.prototype.push.apply(this.commands,y)},ge.prototype.getBoundingBox=function(){for(var y=new Z,x=0,M=0,T=0,D=0,F=0;F<this.commands.length;F++){var q=this.commands[F];switch(q.type){case"M":y.addPoint(q.x,q.y),x=T=q.x,M=D=q.y;break;case"L":y.addPoint(q.x,q.y),T=q.x,D=q.y;break;case"Q":y.addQuad(T,D,q.x1,q.y1,q.x,q.y),T=q.x,D=q.y;break;case"C":y.addBezier(T,D,q.x1,q.y1,q.x2,q.y2,q.x,q.y),T=q.x,D=q.y;break;case"Z":T=x,D=M;break;default:throw new Error("Unexpected path command "+q.type)}}return y.isEmpty()&&y.addPoint(0,0),y},ge.prototype.draw=function(y){y.beginPath();for(var x=0;x<this.commands.length;x+=1){var M=this.commands[x];M.type==="M"?y.moveTo(M.x,M.y):M.type==="L"?y.lineTo(M.x,M.y):M.type==="C"?y.bezierCurveTo(M.x1,M.y1,M.x2,M.y2,M.x,M.y):M.type==="Q"?y.quadraticCurveTo(M.x1,M.y1,M.x,M.y):M.type==="Z"&&y.closePath()}this.fill&&(y.fillStyle=this.fill,y.fill()),this.stroke&&(y.strokeStyle=this.stroke,y.lineWidth=this.strokeWidth,y.stroke())},ge.prototype.toPathData=function(y){function x(){for(var F,q=arguments,le="",he=0;he<arguments.length;he+=1){var _e=q[he];0<=_e&&0<he&&(le+=" "),le+=(F=_e,Math.round(F)===F?""+Math.round(F):F.toFixed(y))}return le}y=y!==void 0?y:2;for(var M="",T=0;T<this.commands.length;T+=1){var D=this.commands[T];D.type==="M"?M+="M"+x(D.x,D.y):D.type==="L"?M+="L"+x(D.x,D.y):D.type==="C"?M+="C"+x(D.x1,D.y1,D.x2,D.y2,D.x,D.y):D.type==="Q"?M+="Q"+x(D.x1,D.y1,D.x,D.y):D.type==="Z"&&(M+="Z")}return M},ge.prototype.toSVG=function(y){var x='<path d="';return x+=this.toPathData(y),x+='"',this.fill&&this.fill!=="black"&&(this.fill===null?x+=' fill="none"':x+=' fill="'+this.fill+'"'),this.stroke&&(x+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),x+="/>"},ge.prototype.toDOMElement=function(y){var x=this.toPathData(y),M=document.createElementNS("http://www.w3.org/2000/svg","path");return M.setAttribute("d",x),M};var z={fail:$,argument:se,assert:se},de={},re={},ie={};function j(y){return function(){return y}}re.BYTE=function(y){return z.argument(0<=y&&y<=255,"Byte value should be between 0 and 255."),[y]},ie.BYTE=j(1),re.CHAR=function(y){return[y.charCodeAt(0)]},ie.CHAR=j(1),re.CHARARRAY=function(y){for(var x=[],M=0;M<y.length;M+=1)x[M]=y.charCodeAt(M);return x},ie.CHARARRAY=function(y){return y.length},re.USHORT=function(y){return[y>>8&255,255&y]},ie.USHORT=j(2),re.SHORT=function(y){return 32768<=y&&(y=-(65536-y)),[y>>8&255,255&y]},ie.SHORT=j(2),re.UINT24=function(y){return[y>>16&255,y>>8&255,255&y]},ie.UINT24=j(3),re.ULONG=function(y){return[y>>24&255,y>>16&255,y>>8&255,255&y]},ie.ULONG=j(4),re.LONG=function(y){return 2147483648<=y&&(y=-(4294967296-y)),[y>>24&255,y>>16&255,y>>8&255,255&y]},ie.LONG=j(4),re.FIXED=re.ULONG,ie.FIXED=ie.ULONG,re.FWORD=re.SHORT,ie.FWORD=ie.SHORT,re.UFWORD=re.USHORT,ie.UFWORD=ie.USHORT,re.LONGDATETIME=function(y){return[0,0,0,0,y>>24&255,y>>16&255,y>>8&255,255&y]},ie.LONGDATETIME=j(8),re.TAG=function(y){return z.argument(y.length===4,"Tag should be exactly 4 ASCII characters."),[y.charCodeAt(0),y.charCodeAt(1),y.charCodeAt(2),y.charCodeAt(3)]},ie.TAG=j(4),re.Card8=re.BYTE,ie.Card8=ie.BYTE,re.Card16=re.USHORT,ie.Card16=ie.USHORT,re.OffSize=re.BYTE,ie.OffSize=ie.BYTE,re.SID=re.USHORT,ie.SID=ie.USHORT,re.NUMBER=function(y){return-107<=y&&y<=107?[y+139]:108<=y&&y<=1131?[247+((y-=108)>>8),255&y]:-1131<=y&&y<=-108?[251+((y=-y-108)>>8),255&y]:-32768<=y&&y<=32767?re.NUMBER16(y):re.NUMBER32(y)},ie.NUMBER=function(y){return re.NUMBER(y).length},re.NUMBER16=function(y){return[28,y>>8&255,255&y]},ie.NUMBER16=j(3),re.NUMBER32=function(y){return[29,y>>24&255,y>>16&255,y>>8&255,255&y]},ie.NUMBER32=j(5),re.REAL=function(y){var x=y.toString(),M=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(x);if(M){var T=parseFloat("1e"+((M[2]?+M[2]:0)+M[1].length));x=(Math.round(y*T)/T).toString()}for(var D="",F=0,q=x.length;F<q;F+=1){var le=x[F];D+=le==="e"?x[++F]==="-"?"c":"b":le==="."?"a":le==="-"?"e":le}for(var he=[30],_e=0,Te=(D+=1&D.length?"f":"ff").length;_e<Te;_e+=2)he.push(parseInt(D.substr(_e,2),16));return he},ie.REAL=function(y){return re.REAL(y).length},re.NAME=re.CHARARRAY,ie.NAME=ie.CHARARRAY,re.STRING=re.CHARARRAY,ie.STRING=ie.CHARARRAY,de.UTF8=function(y,x,M){for(var T=[],D=M,F=0;F<D;F++,x+=1)T[F]=y.getUint8(x);return String.fromCharCode.apply(null,T)},de.UTF16=function(y,x,M){for(var T=[],D=M/2,F=0;F<D;F++,x+=2)T[F]=y.getUint16(x);return String.fromCharCode.apply(null,T)},re.UTF16=function(y){for(var x=[],M=0;M<y.length;M+=1){var T=y.charCodeAt(M);x[x.length]=T>>8&255,x[x.length]=255&T}return x},ie.UTF16=function(y){return 2*y.length};var B={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026\xA0\u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026\xA0\u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026\xA0\u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"};de.MACSTRING=function(y,x,M,T){var D=B[T];if(D!==void 0){for(var F="",q=0;q<M;q++){var le=y.getUint8(x+q);F+=le<=127?String.fromCharCode(le):D[127&le]}return F}};var G,ne=typeof WeakMap=="function"&&new WeakMap;function Y(y){return-128<=y&&y<=127}function J(y,x,M){for(var T=0,D=y.length;x<D&&T<64&&y[x]===0;)++x,++T;return M.push(128|T-1),x}function fe(y,x,M){for(var T=0,D=y.length,F=x;F<D&&T<64;){var q=y[F];if(!Y(q)||q===0&&F+1<D&&y[F+1]===0)break;++F,++T}M.push(T-1);for(var le=x;le<F;++le)M.push(y[le]+256&255);return F}function oe(y,x,M){for(var T=0,D=y.length,F=x;F<D&&T<64;){var q=y[F];if(q===0||Y(q)&&F+1<D&&Y(y[F+1]))break;++F,++T}M.push(64|T-1);for(var le=x;le<F;++le){var he=y[le];M.push(he+65536>>8&255,he+256&255)}return F}re.MACSTRING=function(y,x){var M=function(q){if(!G)for(var le in G={},B)G[le]=new String(le);var he=G[q];if(he!==void 0){if(ne){var _e=ne.get(he);if(_e!==void 0)return _e}var Te=B[q];if(Te!==void 0){for(var je={},ye=0;ye<Te.length;ye++)je[Te.charCodeAt(ye)]=ye+128;return ne&&ne.set(he,je),je}}}(x);if(M!==void 0){for(var T=[],D=0;D<y.length;D++){var F=y.charCodeAt(D);if(128<=F&&(F=M[F])===void 0)return;T[D]=F}return T}},ie.MACSTRING=function(y,x){var M=re.MACSTRING(y,x);return M!==void 0?M.length:0},re.VARDELTAS=function(y){for(var x=0,M=[];x<y.length;){var T=y[x];x=T===0?J(y,x,M):-128<=T&&T<=127?fe(y,x,M):oe(y,x,M)}return M},re.INDEX=function(y){for(var x=1,M=[x],T=[],D=0;D<y.length;D+=1){var F=re.OBJECT(y[D]);Array.prototype.push.apply(T,F),x+=F.length,M.push(x)}if(T.length===0)return[0,0];for(var q=[],le=1+Math.floor(Math.log(x)/Math.log(2))/8|0,he=[void 0,re.BYTE,re.USHORT,re.UINT24,re.ULONG][le],_e=0;_e<M.length;_e+=1){var Te=he(M[_e]);Array.prototype.push.apply(q,Te)}return Array.prototype.concat(re.Card16(y.length),re.OffSize(le),q,T)},ie.INDEX=function(y){return re.INDEX(y).length},re.DICT=function(y){for(var x=[],M=Object.keys(y),T=M.length,D=0;D<T;D+=1){var F=parseInt(M[D],0),q=y[F];x=(x=x.concat(re.OPERAND(q.value,q.type))).concat(re.OPERATOR(F))}return x},ie.DICT=function(y){return re.DICT(y).length},re.OPERATOR=function(y){return y<1200?[y]:[12,y-1200]},re.OPERAND=function(y,x){var M=[];if(Array.isArray(x))for(var T=0;T<x.length;T+=1)z.argument(y.length===x.length,"Not enough arguments given for type"+x),M=M.concat(re.OPERAND(y[T],x[T]));else if(x==="SID")M=M.concat(re.NUMBER(y));else if(x==="offset")M=M.concat(re.NUMBER32(y));else if(x==="number")M=M.concat(re.NUMBER(y));else{if(x!=="real")throw new Error("Unknown operand type "+x);M=M.concat(re.REAL(y))}return M},re.OP=re.BYTE,ie.OP=ie.BYTE;var X=typeof WeakMap=="function"&&new WeakMap;function W(y,x,M){for(var T=0;T<x.length;T+=1){var D=x[T];this[D.name]=D.value}if(this.tableName=y,this.fields=x,M)for(var F=Object.keys(M),q=0;q<F.length;q+=1){var le=F[q],he=M[le];this[le]!==void 0&&(this[le]=he)}}function pe(y,x,M){M===void 0&&(M=x.length);var T=new Array(x.length+1);T[0]={name:y+"Count",type:"USHORT",value:M};for(var D=0;D<x.length;D++)T[D+1]={name:y+D,type:"USHORT",value:x[D]};return T}function Se(y,x,M){var T=x.length,D=new Array(T+1);D[0]={name:y+"Count",type:"USHORT",value:T};for(var F=0;F<T;F++)D[F+1]={name:y+F,type:"TABLE",value:M(x[F],F)};return D}function Re(y,x,M){var T=x.length,D=[];D[0]={name:y+"Count",type:"USHORT",value:T};for(var F=0;F<T;F++)D=D.concat(M(x[F],F));return D}function Le(y){y.format===1?W.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(pe("glyph",y.glyphs))):z.assert(!1,"Can't create coverage table format 2 yet.")}function ce(y){W.call(this,"scriptListTable",Re("scriptRecord",y,function(x,M){var T=x.script,D=T.defaultLangSys;return z.assert(!!D,"Unable to write GSUB: script "+x.tag+" has no default language system."),[{name:"scriptTag"+M,type:"TAG",value:x.tag},{name:"script"+M,type:"TABLE",value:new W("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new W("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:D.reqFeatureIndex}].concat(pe("featureIndex",D.featureIndexes)))}].concat(Re("langSys",T.langSysRecords,function(F,q){var le=F.langSys;return[{name:"langSysTag"+q,type:"TAG",value:F.tag},{name:"langSys"+q,type:"TABLE",value:new W("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:le.reqFeatureIndex}].concat(pe("featureIndex",le.featureIndexes)))}]})))}]}))}function ue(y){W.call(this,"featureListTable",Re("featureRecord",y,function(x,M){var T=x.feature;return[{name:"featureTag"+M,type:"TAG",value:x.tag},{name:"feature"+M,type:"TABLE",value:new W("featureTable",[{name:"featureParams",type:"USHORT",value:T.featureParams}].concat(pe("lookupListIndex",T.lookupListIndexes)))}]}))}function Ce(y,x){W.call(this,"lookupListTable",Se("lookup",y,function(M){var T=x[M.lookupType];return z.assert(!!T,"Unable to write GSUB lookup type "+M.lookupType+" tables."),new W("lookupTable",[{name:"lookupType",type:"USHORT",value:M.lookupType},{name:"lookupFlag",type:"USHORT",value:M.lookupFlag}].concat(Se("subtable",M.subtables,T)))}))}re.CHARSTRING=function(y){if(X){var x=X.get(y);if(x!==void 0)return x}for(var M=[],T=y.length,D=0;D<T;D+=1){var F=y[D];M=M.concat(re[F.type](F.value))}return X&&X.set(y,M),M},ie.CHARSTRING=function(y){return re.CHARSTRING(y).length},re.OBJECT=function(y){var x=re[y.type];return z.argument(x!==void 0,"No encoding function for type "+y.type),x(y.value)},ie.OBJECT=function(y){var x=ie[y.type];return z.argument(x!==void 0,"No sizeOf function for type "+y.type),x(y.value)},re.TABLE=function(y){for(var x=[],M=y.fields.length,T=[],D=[],F=0;F<M;F+=1){var q=y.fields[F],le=re[q.type];z.argument(le!==void 0,"No encoding function for field type "+q.type+" ("+q.name+")");var he=y[q.name];he===void 0&&(he=q.value);var _e=le(he);q.type==="TABLE"?(D.push(x.length),x=x.concat([0,0]),T.push(_e)):x=x.concat(_e)}for(var Te=0;Te<T.length;Te+=1){var je=D[Te],ye=x.length;z.argument(ye<65536,"Table "+y.tableName+" too big."),x[je]=ye>>8,x[je+1]=255&ye,x=x.concat(T[Te])}return x},ie.TABLE=function(y){for(var x=0,M=y.fields.length,T=0;T<M;T+=1){var D=y.fields[T],F=ie[D.type];z.argument(F!==void 0,"No sizeOf function for field type "+D.type+" ("+D.name+")");var q=y[D.name];q===void 0&&(q=D.value),x+=F(q),D.type==="TABLE"&&(x+=2)}return x},re.RECORD=re.TABLE,ie.RECORD=ie.TABLE,re.LITERAL=function(y){return y},ie.LITERAL=function(y){return y.length},W.prototype.encode=function(){return re.TABLE(this)},W.prototype.sizeOf=function(){return ie.TABLE(this)};var Ie={Table:W,Record:W,Coverage:(Le.prototype=Object.create(W.prototype)).constructor=Le,ScriptList:(ce.prototype=Object.create(W.prototype)).constructor=ce,FeatureList:(ue.prototype=Object.create(W.prototype)).constructor=ue,LookupList:(Ce.prototype=Object.create(W.prototype)).constructor=Ce,ushortList:pe,tableList:Se,recordList:Re};function Ve(y,x){return y.getUint8(x)}function Pe(y,x){return y.getUint16(x,!1)}function Oe(y,x){return y.getUint32(x,!1)}function Ae(y,x){return y.getInt16(x,!1)+y.getUint16(x+2,!1)/65535}var Ge={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function be(y,x){this.data=y,this.offset=x,this.relativeOffset=0}be.prototype.parseByte=function(){var y=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,y},be.prototype.parseChar=function(){var y=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,y},be.prototype.parseCard8=be.prototype.parseByte,be.prototype.parseCard16=be.prototype.parseUShort=function(){var y=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,y},be.prototype.parseSID=be.prototype.parseUShort,be.prototype.parseOffset16=be.prototype.parseUShort,be.prototype.parseShort=function(){var y=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,y},be.prototype.parseF2Dot14=function(){var y=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,y},be.prototype.parseOffset32=be.prototype.parseULong=function(){var y=Oe(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,y},be.prototype.parseFixed=function(){var y=Ae(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,y},be.prototype.parseString=function(y){var x=this.data,M=this.offset+this.relativeOffset,T="";this.relativeOffset+=y;for(var D=0;D<y;D++)T+=String.fromCharCode(x.getUint8(M+D));return T},be.prototype.parseTag=function(){return this.parseString(4)},be.prototype.parseLongDateTime=function(){var y=Oe(this.data,this.offset+this.relativeOffset+4);return y-=2082844800,this.relativeOffset+=8,y},be.prototype.parseVersion=function(y){var x=Pe(this.data,this.offset+this.relativeOffset),M=Pe(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,y===void 0&&(y=4096),x+M/y/10},be.prototype.skip=function(y,x){x===void 0&&(x=1),this.relativeOffset+=Ge[y]*x},be.prototype.parseULongList=function(y){y===void 0&&(y=this.parseULong());for(var x=new Array(y),M=this.data,T=this.offset+this.relativeOffset,D=0;D<y;D++)x[D]=M.getUint32(T),T+=4;return this.relativeOffset+=4*y,x},be.prototype.parseOffset16List=be.prototype.parseUShortList=function(y){y===void 0&&(y=this.parseUShort());for(var x=new Array(y),M=this.data,T=this.offset+this.relativeOffset,D=0;D<y;D++)x[D]=M.getUint16(T),T+=2;return this.relativeOffset+=2*y,x},be.prototype.parseShortList=function(y){for(var x=new Array(y),M=this.data,T=this.offset+this.relativeOffset,D=0;D<y;D++)x[D]=M.getInt16(T),T+=2;return this.relativeOffset+=2*y,x},be.prototype.parseByteList=function(y){for(var x=new Array(y),M=this.data,T=this.offset+this.relativeOffset,D=0;D<y;D++)x[D]=M.getUint8(T++);return this.relativeOffset+=y,x},be.prototype.parseList=function(y,x){x||(x=y,y=this.parseUShort());for(var M=new Array(y),T=0;T<y;T++)M[T]=x.call(this);return M},be.prototype.parseList32=function(y,x){x||(x=y,y=this.parseULong());for(var M=new Array(y),T=0;T<y;T++)M[T]=x.call(this);return M},be.prototype.parseRecordList=function(y,x){x||(x=y,y=this.parseUShort());for(var M=new Array(y),T=Object.keys(x),D=0;D<y;D++){for(var F={},q=0;q<T.length;q++){var le=T[q],he=x[le];F[le]=he.call(this)}M[D]=F}return M},be.prototype.parseRecordList32=function(y,x){x||(x=y,y=this.parseULong());for(var M=new Array(y),T=Object.keys(x),D=0;D<y;D++){for(var F={},q=0;q<T.length;q++){var le=T[q],he=x[le];F[le]=he.call(this)}M[D]=F}return M},be.prototype.parseStruct=function(y){if(typeof y=="function")return y.call(this);for(var x=Object.keys(y),M={},T=0;T<x.length;T++){var D=x[T],F=y[D];M[D]=F.call(this)}return M},be.prototype.parseValueRecord=function(y){if(y===void 0&&(y=this.parseUShort()),y!==0){var x={};return 1&y&&(x.xPlacement=this.parseShort()),2&y&&(x.yPlacement=this.parseShort()),4&y&&(x.xAdvance=this.parseShort()),8&y&&(x.yAdvance=this.parseShort()),16&y&&(x.xPlaDevice=void 0,this.parseShort()),32&y&&(x.yPlaDevice=void 0,this.parseShort()),64&y&&(x.xAdvDevice=void 0,this.parseShort()),128&y&&(x.yAdvDevice=void 0,this.parseShort()),x}},be.prototype.parseValueRecordList=function(){for(var y=this.parseUShort(),x=this.parseUShort(),M=new Array(x),T=0;T<x;T++)M[T]=this.parseValueRecord(y);return M},be.prototype.parsePointer=function(y){var x=this.parseOffset16();if(0<x)return new be(this.data,this.offset+x).parseStruct(y)},be.prototype.parsePointer32=function(y){var x=this.parseOffset32();if(0<x)return new be(this.data,this.offset+x).parseStruct(y)},be.prototype.parseListOfLists=function(y){for(var x=this.parseOffset16List(),M=x.length,T=this.relativeOffset,D=new Array(M),F=0;F<M;F++){var q=x[F];if(q!==0)if(this.relativeOffset=q,y){for(var le=this.parseOffset16List(),he=new Array(le.length),_e=0;_e<le.length;_e++)this.relativeOffset=q+le[_e],he[_e]=y.call(this);D[F]=he}else D[F]=this.parseUShortList();else D[F]=void 0}return this.relativeOffset=T,D},be.prototype.parseCoverage=function(){var y=this.offset+this.relativeOffset,x=this.parseUShort(),M=this.parseUShort();if(x===1)return{format:1,glyphs:this.parseUShortList(M)};if(x!==2)throw new Error("0x"+y.toString(16)+": Coverage format must be 1 or 2.");for(var T=new Array(M),D=0;D<M;D++)T[D]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:T}},be.prototype.parseClassDef=function(){var y=this.offset+this.relativeOffset,x=this.parseUShort();if(x===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(x===2)return{format:2,ranges:this.parseRecordList({start:be.uShort,end:be.uShort,classId:be.uShort})};throw new Error("0x"+y.toString(16)+": ClassDef format must be 1 or 2.")},be.list=function(y,x){return function(){return this.parseList(y,x)}},be.list32=function(y,x){return function(){return this.parseList32(y,x)}},be.recordList=function(y,x){return function(){return this.parseRecordList(y,x)}},be.recordList32=function(y,x){return function(){return this.parseRecordList32(y,x)}},be.pointer=function(y){return function(){return this.parsePointer(y)}},be.pointer32=function(y){return function(){return this.parsePointer32(y)}},be.tag=be.prototype.parseTag,be.byte=be.prototype.parseByte,be.uShort=be.offset16=be.prototype.parseUShort,be.uShortList=be.prototype.parseUShortList,be.uLong=be.offset32=be.prototype.parseULong,be.uLongList=be.prototype.parseULongList,be.struct=be.prototype.parseStruct,be.coverage=be.prototype.parseCoverage,be.classDef=be.prototype.parseClassDef;var Xe={reserved:be.uShort,reqFeatureIndex:be.uShort,featureIndexes:be.uShortList};be.prototype.parseScriptList=function(){return this.parsePointer(be.recordList({tag:be.tag,script:be.pointer({defaultLangSys:be.pointer(Xe),langSysRecords:be.recordList({tag:be.tag,langSys:be.pointer(Xe)})})}))||[]},be.prototype.parseFeatureList=function(){return this.parsePointer(be.recordList({tag:be.tag,feature:be.pointer({featureParams:be.offset16,lookupListIndexes:be.uShortList})}))||[]},be.prototype.parseLookupList=function(y){return this.parsePointer(be.list(be.pointer(function(){var x=this.parseUShort();z.argument(1<=x&&x<=9,"GPOS/GSUB lookup type "+x+" unknown.");var M=this.parseUShort(),T=16&M;return{lookupType:x,lookupFlag:M,subtables:this.parseList(be.pointer(y[x])),markFilteringSet:T?this.parseUShort():void 0}})))||[]},be.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var y=this.parseUShort(),x=this.parseUShort();return z.argument(y===1&&x<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:be.offset32,featureTableSubstitutionOffset:be.offset32})})||[]};var k={getByte:Ve,getCard8:Ve,getUShort:Pe,getCard16:Pe,getShort:function(y,x){return y.getInt16(x,!1)},getULong:Oe,getFixed:Ae,getTag:function(y,x){for(var M="",T=x;T<x+4;T+=1)M+=String.fromCharCode(y.getInt8(T));return M},getOffset:function(y,x,M){for(var T=0,D=0;D<M;D+=1)T<<=8,T+=y.getUint8(x+D);return T},getBytes:function(y,x,M){for(var T=[],D=x;D<M;D+=1)T.push(y.getUint8(D));return T},bytesToString:function(y){for(var x="",M=0;M<y.length;M+=1)x+=String.fromCharCode(y[M]);return x},Parser:be},Q={parse:function(y,x){var M={};M.version=k.getUShort(y,x),z.argument(M.version===0,"cmap table version should be 0."),M.numTables=k.getUShort(y,x+2);for(var T=-1,D=M.numTables-1;0<=D;--D){var F=k.getUShort(y,x+4+8*D),q=k.getUShort(y,x+4+8*D+2);if(F===3&&(q===0||q===1||q===10)||F===0&&(q===0||q===1||q===2||q===3||q===4)){T=k.getULong(y,x+4+8*D+4);break}}if(T===-1)throw new Error("No valid cmap sub-tables found.");var le=new k.Parser(y,x+T);if(M.format=le.parseUShort(),M.format===12)(function(he,_e){var Te;_e.parseUShort(),he.length=_e.parseULong(),he.language=_e.parseULong(),he.groupCount=Te=_e.parseULong(),he.glyphIndexMap={};for(var je=0;je<Te;je+=1)for(var ye=_e.parseULong(),tt=_e.parseULong(),Ke=_e.parseULong(),Ye=ye;Ye<=tt;Ye+=1)he.glyphIndexMap[Ye]=Ke,Ke++})(M,le);else{if(M.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+M.format+").");(function(he,_e,Te,je,ye){var tt;he.length=_e.parseUShort(),he.language=_e.parseUShort(),he.segCount=tt=_e.parseUShort()>>1,_e.skip("uShort",3),he.glyphIndexMap={};for(var Ke=new k.Parser(Te,je+ye+14),Ye=new k.Parser(Te,je+ye+16+2*tt),Ne=new k.Parser(Te,je+ye+16+4*tt),He=new k.Parser(Te,je+ye+16+6*tt),at=je+ye+16+8*tt,ot=0;ot<tt-1;ot+=1)for(var Mt=void 0,ht=Ke.parseUShort(),pt=Ye.parseUShort(),Gt=Ne.parseShort(),Ct=He.parseUShort(),Et=pt;Et<=ht;Et+=1)Ct!==0?(at=He.offset+He.relativeOffset-2,at+=Ct,at+=2*(Et-pt),(Mt=k.getUShort(Te,at))!==0&&(Mt=Mt+Gt&65535)):Mt=Et+Gt&65535,he.glyphIndexMap[Et]=Mt})(M,le,y,x,T)}return M},make:function(y){var x,M=!0;for(x=y.length-1;0<x;--x)if(65535<y.get(x).unicode){console.log("Adding CMAP format 12 (needed!)"),M=!1;break}var T=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:M?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:M?12:20}];M||(T=T.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),T=T.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var D,F,q,le=new Ie.Table("cmap",T);for(le.segments=[],x=0;x<y.length;x+=1){for(var he=y.get(x),_e=0;_e<he.unicodes.length;_e+=1)D=le,F=he.unicodes[_e],q=x,D.segments.push({end:F,start:F,delta:-(F-q),offset:0,glyphIndex:q});le.segments=le.segments.sort(function(Mt,ht){return Mt.start-ht.start})}le.segments.push({end:65535,start:65535,delta:1,offset:0});var Te=le.segments.length,je=0,ye=[],tt=[],Ke=[],Ye=[],Ne=[],He=[];for(x=0;x<Te;x+=1){var at=le.segments[x];at.end<=65535&&at.start<=65535?(ye=ye.concat({name:"end_"+x,type:"USHORT",value:at.end}),tt=tt.concat({name:"start_"+x,type:"USHORT",value:at.start}),Ke=Ke.concat({name:"idDelta_"+x,type:"SHORT",value:at.delta}),Ye=Ye.concat({name:"idRangeOffset_"+x,type:"USHORT",value:at.offset}),at.glyphId!==void 0&&(Ne=Ne.concat({name:"glyph_"+x,type:"USHORT",value:at.glyphId}))):je+=1,M||at.glyphIndex===void 0||(He=(He=(He=He.concat({name:"cmap12Start_"+x,type:"ULONG",value:at.start})).concat({name:"cmap12End_"+x,type:"ULONG",value:at.end})).concat({name:"cmap12Glyph_"+x,type:"ULONG",value:at.glyphIndex}))}if(le.segCountX2=2*(Te-je),le.searchRange=2*Math.pow(2,Math.floor(Math.log(Te-je)/Math.log(2))),le.entrySelector=Math.log(le.searchRange/2)/Math.log(2),le.rangeShift=le.segCountX2-le.searchRange,le.fields=le.fields.concat(ye),le.fields.push({name:"reservedPad",type:"USHORT",value:0}),le.fields=le.fields.concat(tt),le.fields=le.fields.concat(Ke),le.fields=le.fields.concat(Ye),le.fields=le.fields.concat(Ne),le.cmap4Length=14+2*ye.length+2+2*tt.length+2*Ke.length+2*Ye.length+2*Ne.length,!M){var ot=16+4*He.length;le.cmap12Offset=20+le.cmap4Length,le.fields=le.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:ot},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:He.length/3}]),le.fields=le.fields.concat(He)}return le}},V=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],ae=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],me=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Me=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Ee(y){this.font=y}function ke(y){this.cmap=y}function we(y,x){this.encoding=y,this.charset=x}function Je(y){switch(y.version){case 1:this.names=Me.slice();break;case 2:this.names=new Array(y.numberOfGlyphs);for(var x=0;x<y.numberOfGlyphs;x++)y.glyphNameIndex[x]<Me.length?this.names[x]=Me[y.glyphNameIndex[x]]:this.names[x]=y.names[y.glyphNameIndex[x]-Me.length];break;case 2.5:this.names=new Array(y.numberOfGlyphs);for(var M=0;M<y.numberOfGlyphs;M++)this.names[M]=Me[M+y.glyphNameIndex[M]];break;case 3:default:this.names=[]}}Ee.prototype.charToGlyphIndex=function(y){var x=y.codePointAt(0),M=this.font.glyphs;if(M){for(var T=0;T<M.length;T+=1)for(var D=M.get(T),F=0;F<D.unicodes.length;F+=1)if(D.unicodes[F]===x)return T}return null},ke.prototype.charToGlyphIndex=function(y){return this.cmap.glyphIndexMap[y.codePointAt(0)]||0},we.prototype.charToGlyphIndex=function(y){var x=y.codePointAt(0),M=this.encoding[x];return this.charset.indexOf(M)},Je.prototype.nameToGlyphIndex=function(y){return this.names.indexOf(y)},Je.prototype.glyphIndexToName=function(y){return this.names[y]};var nt={line:function(y,x,M,T,D){y.beginPath(),y.moveTo(x,M),y.lineTo(T,D),y.stroke()}};function ut(y){this.bindConstructorValues(y)}function gt(y,x,M){Object.defineProperty(y,x,{get:function(){return y.path,y[M]},set:function(T){y[M]=T},enumerable:!0,configurable:!0})}function ft(y,x){if(this.font=y,this.glyphs={},Array.isArray(x))for(var M=0;M<x.length;M++)this.glyphs[M]=x[M];this.length=x&&x.length||0}ut.prototype.bindConstructorValues=function(y){var x,M;this.index=y.index||0,this.name=y.name||null,this.unicode=y.unicode||void 0,this.unicodes=y.unicodes||y.unicode!==void 0?[y.unicode]:[],y.xMin&&(this.xMin=y.xMin),y.yMin&&(this.yMin=y.yMin),y.xMax&&(this.xMax=y.xMax),y.yMax&&(this.yMax=y.yMax),y.advanceWidth&&(this.advanceWidth=y.advanceWidth),Object.defineProperty(this,"path",(x=y.path,M=x||new ge,{configurable:!0,get:function(){return typeof M=="function"&&(M=M()),M},set:function(T){M=T}}))},ut.prototype.addUnicode=function(y){this.unicodes.length===0&&(this.unicode=y),this.unicodes.push(y)},ut.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},ut.prototype.getPath=function(y,x,M,T,D){var F,q;y=y!==void 0?y:0,x=x!==void 0?x:0,M=M!==void 0?M:72;var le=(T=T||{}).xScale,he=T.yScale;if(T.hinting&&D&&D.hinting&&(q=this.path&&D.hinting.exec(this,M)),q)F=D.hinting.getCommands(q),y=Math.round(y),x=Math.round(x),le=he=1;else{F=this.path.commands;var _e=1/this.path.unitsPerEm*M;le===void 0&&(le=_e),he===void 0&&(he=_e)}for(var Te=new ge,je=0;je<F.length;je+=1){var ye=F[je];ye.type==="M"?Te.moveTo(y+ye.x*le,x+-ye.y*he):ye.type==="L"?Te.lineTo(y+ye.x*le,x+-ye.y*he):ye.type==="Q"?Te.quadraticCurveTo(y+ye.x1*le,x+-ye.y1*he,y+ye.x*le,x+-ye.y*he):ye.type==="C"?Te.curveTo(y+ye.x1*le,x+-ye.y1*he,y+ye.x2*le,x+-ye.y2*he,y+ye.x*le,x+-ye.y*he):ye.type==="Z"&&Te.closePath()}return Te},ut.prototype.getContours=function(){if(this.points===void 0)return[];for(var y=[],x=[],M=0;M<this.points.length;M+=1){var T=this.points[M];x.push(T),T.lastPointOfContour&&(y.push(x),x=[])}return z.argument(x.length===0,"There are still points left in the current contour."),y},ut.prototype.getMetrics=function(){for(var y=this.path.commands,x=[],M=[],T=0;T<y.length;T+=1){var D=y[T];D.type!=="Z"&&(x.push(D.x),M.push(D.y)),D.type!=="Q"&&D.type!=="C"||(x.push(D.x1),M.push(D.y1)),D.type==="C"&&(x.push(D.x2),M.push(D.y2))}var F={xMin:Math.min.apply(null,x),yMin:Math.min.apply(null,M),xMax:Math.max.apply(null,x),yMax:Math.max.apply(null,M),leftSideBearing:this.leftSideBearing};return isFinite(F.xMin)||(F.xMin=0),isFinite(F.xMax)||(F.xMax=this.advanceWidth),isFinite(F.yMin)||(F.yMin=0),isFinite(F.yMax)||(F.yMax=0),F.rightSideBearing=this.advanceWidth-F.leftSideBearing-(F.xMax-F.xMin),F},ut.prototype.draw=function(y,x,M,T,D){this.getPath(x,M,T,D).draw(y)},ut.prototype.drawPoints=function(y,x,M,T){function D(je,ye,tt,Ke){var Ye=2*Math.PI;y.beginPath();for(var Ne=0;Ne<je.length;Ne+=1)y.moveTo(ye+je[Ne].x*Ke,tt+je[Ne].y*Ke),y.arc(ye+je[Ne].x*Ke,tt+je[Ne].y*Ke,2,0,Ye,!1);y.closePath(),y.fill()}x=x!==void 0?x:0,M=M!==void 0?M:0,T=T!==void 0?T:24;for(var F=1/this.path.unitsPerEm*T,q=[],le=[],he=this.path,_e=0;_e<he.commands.length;_e+=1){var Te=he.commands[_e];Te.x!==void 0&&q.push({x:Te.x,y:-Te.y}),Te.x1!==void 0&&le.push({x:Te.x1,y:-Te.y1}),Te.x2!==void 0&&le.push({x:Te.x2,y:-Te.y2})}y.fillStyle="blue",D(q,x,M,F),y.fillStyle="red",D(le,x,M,F)},ut.prototype.drawMetrics=function(y,x,M,T){var D;x=x!==void 0?x:0,M=M!==void 0?M:0,T=T!==void 0?T:24,D=1/this.path.unitsPerEm*T,y.lineWidth=1,y.strokeStyle="black",nt.line(y,x,-1e4,x,1e4),nt.line(y,-1e4,M,1e4,M);var F=this.xMin||0,q=this.yMin||0,le=this.xMax||0,he=this.yMax||0,_e=this.advanceWidth||0;y.strokeStyle="blue",nt.line(y,x+F*D,-1e4,x+F*D,1e4),nt.line(y,x+le*D,-1e4,x+le*D,1e4),nt.line(y,-1e4,M+-q*D,1e4,M+-q*D),nt.line(y,-1e4,M+-he*D,1e4,M+-he*D),y.strokeStyle="green",nt.line(y,x+_e*D,-1e4,x+_e*D,1e4)},ft.prototype.get=function(y){return typeof this.glyphs[y]=="function"&&(this.glyphs[y]=this.glyphs[y]()),this.glyphs[y]},ft.prototype.push=function(y,x){this.glyphs[y]=x,this.length++};var dt={GlyphSet:ft,glyphLoader:function(y,x){return new ut({index:x,font:y})},ttfGlyphLoader:function(y,x,M,T,D,F){return function(){var q=new ut({index:x,font:y});return q.path=function(){M(q,T,D);var le=F(y.glyphs,q);return le.unitsPerEm=y.unitsPerEm,le},gt(q,"xMin","_xMin"),gt(q,"xMax","_xMax"),gt(q,"yMin","_yMin"),gt(q,"yMax","_yMax"),q}},cffGlyphLoader:function(y,x,M,T){return function(){var D=new ut({index:x,font:y});return D.path=function(){var F=M(y,D,T);return F.unitsPerEm=y.unitsPerEm,F},D}}};function At(y,x){if(y===x)return!0;if(Array.isArray(y)&&Array.isArray(x)){if(y.length!==x.length)return!1;for(var M=0;M<y.length;M+=1)if(!At(y[M],x[M]))return!1;return!0}return!1}function cr(y){return y.length<1240?107:y.length<33900?1131:32768}function Qt(y,x,M){var T,D,F=[],q=[],le=k.getCard16(y,x);if(le!==0){var he=k.getByte(y,x+2);T=x+(le+1)*he+2;for(var _e=x+3,Te=0;Te<le+1;Te+=1)F.push(k.getOffset(y,_e,he)),_e+=he;D=T+F[le]}else D=x+2;for(var je=0;je<F.length-1;je+=1){var ye=k.getBytes(y,T+F[je],T+F[je+1]);M&&(ye=M(ye)),q.push(ye)}return{objects:q,startOffset:x,endOffset:D}}function Xr(y,x){if(x===28)return y.parseByte()<<8|y.parseByte();if(x===29)return y.parseByte()<<24|y.parseByte()<<16|y.parseByte()<<8|y.parseByte();if(x===30)return function(M){for(var T="",D=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var F=M.parseByte(),q=F>>4,le=15&F;if(q==15||(T+=D[q],le==15))break;T+=D[le]}return parseFloat(T)}(y);if(32<=x&&x<=246)return x-139;if(247<=x&&x<=250)return 256*(x-247)+y.parseByte()+108;if(251<=x&&x<=254)return 256*-(x-251)-y.parseByte()-108;throw new Error("Invalid b0 "+x)}function Mr(y,x,M){x=x!==void 0?x:0;var T=new k.Parser(y,x),D=[],F=[];for(M=M!==void 0?M:y.length;T.relativeOffset<M;){var q=T.parseByte();q<=21?(q===12&&(q=1200+T.parseByte()),D.push([q,F]),F=[]):F.push(Xr(T,q))}return function(le){for(var he={},_e=0;_e<le.length;_e+=1){var Te=le[_e][0],je=le[_e][1],ye=void 0;if(ye=je.length===1?je[0]:je,he.hasOwnProperty(Te)&&!isNaN(he[Te]))throw new Error("Object "+he+" already has key "+Te);he[Te]=ye}return he}(D)}function yr(y,x){return x=x<=390?V[x]:y[x-391]}function xe(y,x,M){for(var T,D={},F=0;F<x.length;F+=1){var q=x[F];if(Array.isArray(q.type)){var le=[];le.length=q.type.length;for(var he=0;he<q.type.length;he++)(T=y[q.op]!==void 0?y[q.op][he]:void 0)===void 0&&(T=q.value!==void 0&&q.value[he]!==void 0?q.value[he]:null),q.type[he]==="SID"&&(T=yr(M,T)),le[he]=T;D[q.name]=le}else(T=y[q.op])===void 0&&(T=q.value!==void 0?q.value:null),q.type==="SID"&&(T=yr(M,T)),D[q.name]=T}return D}var Fe=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],We=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Be(y,x,M,T){return xe(Mr(y,x,M),We,T)}function $e(y,x,M,T){for(var D,F,q=[],le=0;le<M.length;le+=1){var he=new DataView(new Uint8Array(M[le]).buffer),_e=(F=T,xe(Mr(D=he,0,D.byteLength),Fe,F));_e._subrs=[],_e._subrsBias=0;var Te=_e.private[0],je=_e.private[1];if(Te!==0&&je!==0){var ye=Be(y,je+x,Te,T);if(_e._defaultWidthX=ye.defaultWidthX,_e._nominalWidthX=ye.nominalWidthX,ye.subrs!==0){var tt=Qt(y,je+ye.subrs+x);_e._subrs=tt.objects,_e._subrsBias=cr(_e._subrs)}_e._privateDict=ye}q.push(_e)}return q}function mt(y,x,M){var T,D,F,q,le,he,_e,Te,je=new ge,ye=[],tt=0,Ke=!1,Ye=!1,Ne=0,He=0;if(y.isCIDFont){var at=y.tables.cff.topDict._fdSelect[x.index],ot=y.tables.cff.topDict._fdArray[at];le=ot._subrs,he=ot._subrsBias,_e=ot._defaultWidthX,Te=ot._nominalWidthX}else le=y.tables.cff.topDict._subrs,he=y.tables.cff.topDict._subrsBias,_e=y.tables.cff.topDict._defaultWidthX,Te=y.tables.cff.topDict._nominalWidthX;var Mt=_e;function ht(Gt,Ct){Ye&&je.closePath(),je.moveTo(Gt,Ct),Ye=!0}function pt(){ye.length%2==0||Ke||(Mt=ye.shift()+Te),tt+=ye.length>>1,ye.length=0,Ke=!0}return function Gt(Ct){for(var Et,Lt,jt,Rt,Ut,It,Dt,Bt,Ot,Wt,Pt,Xt,Nt=0;Nt<Ct.length;){var Ft=Ct[Nt];switch(Nt+=1,Ft){case 1:case 3:pt();break;case 4:1<ye.length&&!Ke&&(Mt=ye.shift()+Te,Ke=!0),He+=ye.pop(),ht(Ne,He);break;case 5:for(;0<ye.length;)Ne+=ye.shift(),He+=ye.shift(),je.lineTo(Ne,He);break;case 6:for(;0<ye.length&&(Ne+=ye.shift(),je.lineTo(Ne,He),ye.length!==0);)He+=ye.shift(),je.lineTo(Ne,He);break;case 7:for(;0<ye.length&&(He+=ye.shift(),je.lineTo(Ne,He),ye.length!==0);)Ne+=ye.shift(),je.lineTo(Ne,He);break;case 8:for(;0<ye.length;)T=Ne+ye.shift(),D=He+ye.shift(),F=T+ye.shift(),q=D+ye.shift(),Ne=F+ye.shift(),He=q+ye.shift(),je.curveTo(T,D,F,q,Ne,He);break;case 10:Ut=ye.pop()+he,(It=le[Ut])&&Gt(It);break;case 11:return;case 12:switch(Ft=Ct[Nt],Nt+=1,Ft){case 35:T=Ne+ye.shift(),D=He+ye.shift(),F=T+ye.shift(),q=D+ye.shift(),Dt=F+ye.shift(),Bt=q+ye.shift(),Ot=Dt+ye.shift(),Wt=Bt+ye.shift(),Pt=Ot+ye.shift(),Xt=Wt+ye.shift(),Ne=Pt+ye.shift(),He=Xt+ye.shift(),ye.shift(),je.curveTo(T,D,F,q,Dt,Bt),je.curveTo(Ot,Wt,Pt,Xt,Ne,He);break;case 34:T=Ne+ye.shift(),D=He,F=T+ye.shift(),q=D+ye.shift(),Dt=F+ye.shift(),Bt=q,Ot=Dt+ye.shift(),Wt=q,Pt=Ot+ye.shift(),Xt=He,Ne=Pt+ye.shift(),je.curveTo(T,D,F,q,Dt,Bt),je.curveTo(Ot,Wt,Pt,Xt,Ne,He);break;case 36:T=Ne+ye.shift(),D=He+ye.shift(),F=T+ye.shift(),q=D+ye.shift(),Dt=F+ye.shift(),Bt=q,Ot=Dt+ye.shift(),Wt=q,Pt=Ot+ye.shift(),Xt=Wt+ye.shift(),Ne=Pt+ye.shift(),je.curveTo(T,D,F,q,Dt,Bt),je.curveTo(Ot,Wt,Pt,Xt,Ne,He);break;case 37:T=Ne+ye.shift(),D=He+ye.shift(),F=T+ye.shift(),q=D+ye.shift(),Dt=F+ye.shift(),Bt=q+ye.shift(),Ot=Dt+ye.shift(),Wt=Bt+ye.shift(),Pt=Ot+ye.shift(),Xt=Wt+ye.shift(),Math.abs(Pt-Ne)>Math.abs(Xt-He)?Ne=Pt+ye.shift():He=Xt+ye.shift(),je.curveTo(T,D,F,q,Dt,Bt),je.curveTo(Ot,Wt,Pt,Xt,Ne,He);break;default:console.log("Glyph "+x.index+": unknown operator 1200"+Ft),ye.length=0}break;case 14:0<ye.length&&!Ke&&(Mt=ye.shift()+Te,Ke=!0),Ye&&(je.closePath(),Ye=!1);break;case 18:pt();break;case 19:case 20:pt(),Nt+=tt+7>>3;break;case 21:2<ye.length&&!Ke&&(Mt=ye.shift()+Te,Ke=!0),He+=ye.pop(),ht(Ne+=ye.pop(),He);break;case 22:1<ye.length&&!Ke&&(Mt=ye.shift()+Te,Ke=!0),ht(Ne+=ye.pop(),He);break;case 23:pt();break;case 24:for(;2<ye.length;)T=Ne+ye.shift(),D=He+ye.shift(),F=T+ye.shift(),q=D+ye.shift(),Ne=F+ye.shift(),He=q+ye.shift(),je.curveTo(T,D,F,q,Ne,He);Ne+=ye.shift(),He+=ye.shift(),je.lineTo(Ne,He);break;case 25:for(;6<ye.length;)Ne+=ye.shift(),He+=ye.shift(),je.lineTo(Ne,He);T=Ne+ye.shift(),D=He+ye.shift(),F=T+ye.shift(),q=D+ye.shift(),Ne=F+ye.shift(),He=q+ye.shift(),je.curveTo(T,D,F,q,Ne,He);break;case 26:for(ye.length%2&&(Ne+=ye.shift());0<ye.length;)T=Ne,D=He+ye.shift(),F=T+ye.shift(),q=D+ye.shift(),Ne=F,He=q+ye.shift(),je.curveTo(T,D,F,q,Ne,He);break;case 27:for(ye.length%2&&(He+=ye.shift());0<ye.length;)T=Ne+ye.shift(),D=He,F=T+ye.shift(),q=D+ye.shift(),Ne=F+ye.shift(),He=q,je.curveTo(T,D,F,q,Ne,He);break;case 28:Et=Ct[Nt],Lt=Ct[Nt+1],ye.push((Et<<24|Lt<<16)>>16),Nt+=2;break;case 29:Ut=ye.pop()+y.gsubrsBias,(It=y.gsubrs[Ut])&&Gt(It);break;case 30:for(;0<ye.length&&(T=Ne,D=He+ye.shift(),F=T+ye.shift(),q=D+ye.shift(),Ne=F+ye.shift(),He=q+(ye.length===1?ye.shift():0),je.curveTo(T,D,F,q,Ne,He),ye.length!==0);)T=Ne+ye.shift(),D=He,F=T+ye.shift(),q=D+ye.shift(),He=q+ye.shift(),Ne=F+(ye.length===1?ye.shift():0),je.curveTo(T,D,F,q,Ne,He);break;case 31:for(;0<ye.length&&(T=Ne+ye.shift(),D=He,F=T+ye.shift(),q=D+ye.shift(),He=q+ye.shift(),Ne=F+(ye.length===1?ye.shift():0),je.curveTo(T,D,F,q,Ne,He),ye.length!==0);)T=Ne,D=He+ye.shift(),F=T+ye.shift(),q=D+ye.shift(),Ne=F+ye.shift(),He=q+(ye.length===1?ye.shift():0),je.curveTo(T,D,F,q,Ne,He);break;default:Ft<32?console.log("Glyph "+x.index+": unknown operator "+Ft):Ft<247?ye.push(Ft-139):Ft<251?(Et=Ct[Nt],Nt+=1,ye.push(256*(Ft-247)+Et+108)):Ft<255?(Et=Ct[Nt],Nt+=1,ye.push(256*-(Ft-251)-Et-108)):(Et=Ct[Nt],Lt=Ct[Nt+1],jt=Ct[Nt+2],Rt=Ct[Nt+3],Nt+=4,ye.push((Et<<24|Lt<<16|jt<<8|Rt)/65536))}}}(M),x.advanceWidth=Mt,je}function yt(y,x){var M,T=V.indexOf(y);return 0<=T&&(M=T),0<=(T=x.indexOf(y))?M=T+V.length:(M=V.length+x.length,x.push(y)),M}function vt(y,x,M){for(var T={},D=0;D<y.length;D+=1){var F=y[D],q=x[F.name];q===void 0||At(q,F.value)||(F.type==="SID"&&(q=yt(q,M)),T[F.op]={name:F.name,type:F.type,value:q})}return T}function ve(y,x){var M=new Ie.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return M.dict=vt(Fe,y,x),M}function Ue(y){var x=new Ie.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return x.topDicts=[{name:"topDict_0",type:"TABLE",value:y}],x}function Ze(y){var x=[],M=y.path;x.push({name:"width",type:"NUMBER",value:y.advanceWidth});for(var T=0,D=0,F=0;F<M.commands.length;F+=1){var q=void 0,le=void 0,he=M.commands[F];if(he.type==="Q"&&(he={type:"C",x:he.x,y:he.y,x1:1/3*T+2/3*he.x1,y1:1/3*D+2/3*he.y1,x2:1/3*he.x+2/3*he.x1,y2:1/3*he.y+2/3*he.y1}),he.type==="M")q=Math.round(he.x-T),le=Math.round(he.y-D),x.push({name:"dx",type:"NUMBER",value:q}),x.push({name:"dy",type:"NUMBER",value:le}),x.push({name:"rmoveto",type:"OP",value:21}),T=Math.round(he.x),D=Math.round(he.y);else if(he.type==="L")q=Math.round(he.x-T),le=Math.round(he.y-D),x.push({name:"dx",type:"NUMBER",value:q}),x.push({name:"dy",type:"NUMBER",value:le}),x.push({name:"rlineto",type:"OP",value:5}),T=Math.round(he.x),D=Math.round(he.y);else if(he.type==="C"){var _e=Math.round(he.x1-T),Te=Math.round(he.y1-D),je=Math.round(he.x2-he.x1),ye=Math.round(he.y2-he.y1);q=Math.round(he.x-he.x2),le=Math.round(he.y-he.y2),x.push({name:"dx1",type:"NUMBER",value:_e}),x.push({name:"dy1",type:"NUMBER",value:Te}),x.push({name:"dx2",type:"NUMBER",value:je}),x.push({name:"dy2",type:"NUMBER",value:ye}),x.push({name:"dx",type:"NUMBER",value:q}),x.push({name:"dy",type:"NUMBER",value:le}),x.push({name:"rrcurveto",type:"OP",value:8}),T=Math.round(he.x),D=Math.round(he.y)}}return x.push({name:"endchar",type:"OP",value:14}),x}var ze={parse:function(y,x,M){M.tables.cff={};var T,D,F,q=Qt(y,(T=y,D=x,(F={}).formatMajor=k.getCard8(T,D),F.formatMinor=k.getCard8(T,D+1),F.size=k.getCard8(T,D+2),F.offsetSize=k.getCard8(T,D+3),F.startOffset=D,F.endOffset=D+4,F).endOffset,k.bytesToString),le=Qt(y,q.endOffset),he=Qt(y,le.endOffset,k.bytesToString),_e=Qt(y,he.endOffset);M.gsubrs=_e.objects,M.gsubrsBias=cr(M.gsubrs);var Te=$e(y,x,le.objects,he.objects);if(Te.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+Te.length);var je=Te[0];if((M.tables.cff.topDict=je)._privateDict&&(M.defaultWidthX=je._privateDict.defaultWidthX,M.nominalWidthX=je._privateDict.nominalWidthX),je.ros[0]!==void 0&&je.ros[1]!==void 0&&(M.isCIDFont=!0),M.isCIDFont){var ye=je.fdArray,tt=je.fdSelect;if(ye===0||tt===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var Ke=$e(y,x,Qt(y,ye+=x).objects,he.objects);je._fdArray=Ke,tt+=x,je._fdSelect=function(pt,Gt,Ct,Et){var Lt,jt=[],Rt=new k.Parser(pt,Gt),Ut=Rt.parseCard8();if(Ut===0)for(var It=0;It<Ct;It++){if(Et<=(Lt=Rt.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+Lt+" (FD count "+Et+")");jt.push(Lt)}else{if(Ut!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Ut);var Dt,Bt=Rt.parseCard16(),Ot=Rt.parseCard16();if(Ot!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Ot);for(var Wt=0;Wt<Bt;Wt++){if(Lt=Rt.parseCard8(),Dt=Rt.parseCard16(),Et<=Lt)throw new Error("CFF table CID Font FDSelect has bad FD index value "+Lt+" (FD count "+Et+")");if(Ct<Dt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+Dt);for(;Ot<Dt;Ot++)jt.push(Lt);Ot=Dt}if(Dt!==Ct)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+Dt)}return jt}(y,tt,M.numGlyphs,Ke.length)}var Ye=x+je.private[1],Ne=Be(y,Ye,je.private[0],he.objects);if(M.defaultWidthX=Ne.defaultWidthX,M.nominalWidthX=Ne.nominalWidthX,Ne.subrs!==0){var He=Qt(y,Ye+Ne.subrs);M.subrs=He.objects,M.subrsBias=cr(M.subrs)}else M.subrs=[],M.subrsBias=0;var at=Qt(y,x+je.charStrings);M.nGlyphs=at.objects.length;var ot=function(pt,Gt,Ct,Et){var Lt,jt,Rt=new k.Parser(pt,Gt);--Ct;var Ut=[".notdef"],It=Rt.parseCard8();if(It===0)for(var Dt=0;Dt<Ct;Dt+=1)Lt=Rt.parseSID(),Ut.push(yr(Et,Lt));else if(It===1)for(;Ut.length<=Ct;){Lt=Rt.parseSID(),jt=Rt.parseCard8();for(var Bt=0;Bt<=jt;Bt+=1)Ut.push(yr(Et,Lt)),Lt+=1}else{if(It!==2)throw new Error("Unknown charset format "+It);for(;Ut.length<=Ct;){Lt=Rt.parseSID(),jt=Rt.parseCard16();for(var Ot=0;Ot<=jt;Ot+=1)Ut.push(yr(Et,Lt)),Lt+=1}}return Ut}(y,x+je.charset,M.nGlyphs,he.objects);je.encoding===0?M.cffEncoding=new we(ae,ot):je.encoding===1?M.cffEncoding=new we(me,ot):M.cffEncoding=function(pt,Gt,Ct){var Et,Lt={},jt=new k.Parser(pt,Gt),Rt=jt.parseCard8();if(Rt===0)for(var Ut=jt.parseCard8(),It=0;It<Ut;It+=1)Lt[Et=jt.parseCard8()]=It;else{if(Rt!==1)throw new Error("Unknown encoding format "+Rt);var Dt=jt.parseCard8();Et=1;for(var Bt=0;Bt<Dt;Bt+=1)for(var Ot=jt.parseCard8(),Wt=jt.parseCard8(),Pt=Ot;Pt<=Ot+Wt;Pt+=1)Lt[Pt]=Et,Et+=1}return new we(Lt,Ct)}(y,x+je.encoding,ot),M.encoding=M.encoding||M.cffEncoding,M.glyphs=new dt.GlyphSet(M);for(var Mt=0;Mt<M.nGlyphs;Mt+=1){var ht=at.objects[Mt];M.glyphs.push(Mt,dt.cffGlyphLoader(M,Mt,mt,ht))}},make:function(y,x){for(var M,T=new Ie.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),D=1/x.unitsPerEm,F={version:x.version,fullName:x.fullName,familyName:x.familyName,weight:x.weightName,fontBBox:x.fontBBox||[0,0,0,0],fontMatrix:[D,0,0,D,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},q=[],le=1;le<y.length;le+=1)M=y.get(le),q.push(M.name);var he=[];T.header=new Ie.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),T.nameIndex=function(Ke){var Ye=new Ie.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Ye.names=[];for(var Ne=0;Ne<Ke.length;Ne+=1)Ye.names.push({name:"name_"+Ne,type:"NAME",value:Ke[Ne]});return Ye}([x.postScriptName]);var _e,Te,je,ye=ve(F,he);T.topDictIndex=Ue(ye),T.globalSubrIndex=new Ie.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),T.charsets=function(Ke,Ye){for(var Ne=new Ie.Record("Charsets",[{name:"format",type:"Card8",value:0}]),He=0;He<Ke.length;He+=1){var at=yt(Ke[He],Ye);Ne.fields.push({name:"glyph_"+He,type:"SID",value:at})}return Ne}(q,he),T.charStringsIndex=function(Ke){for(var Ye=new Ie.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),Ne=0;Ne<Ke.length;Ne+=1){var He=Ke.get(Ne),at=Ze(He);Ye.charStrings.push({name:He.name,type:"CHARSTRING",value:at})}return Ye}(y),T.privateDict=(_e={},Te=he,(je=new Ie.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=vt(We,_e,Te),je),T.stringIndex=function(Ke){var Ye=new Ie.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Ye.strings=[];for(var Ne=0;Ne<Ke.length;Ne+=1)Ye.strings.push({name:"string_"+Ne,type:"STRING",value:Ke[Ne]});return Ye}(he);var tt=T.header.sizeOf()+T.nameIndex.sizeOf()+T.topDictIndex.sizeOf()+T.stringIndex.sizeOf()+T.globalSubrIndex.sizeOf();return F.charset=tt,F.encoding=0,F.charStrings=F.charset+T.charsets.sizeOf(),F.private[1]=F.charStrings+T.charStringsIndex.sizeOf(),ye=ve(F,he),T.topDictIndex=Ue(ye),T}},et={parse:function(y,x){var M={},T=new k.Parser(y,x);return M.version=T.parseVersion(),M.fontRevision=Math.round(1e3*T.parseFixed())/1e3,M.checkSumAdjustment=T.parseULong(),M.magicNumber=T.parseULong(),z.argument(M.magicNumber===1594834165,"Font header has wrong magic number."),M.flags=T.parseUShort(),M.unitsPerEm=T.parseUShort(),M.created=T.parseLongDateTime(),M.modified=T.parseLongDateTime(),M.xMin=T.parseShort(),M.yMin=T.parseShort(),M.xMax=T.parseShort(),M.yMax=T.parseShort(),M.macStyle=T.parseUShort(),M.lowestRecPPEM=T.parseUShort(),M.fontDirectionHint=T.parseShort(),M.indexToLocFormat=T.parseShort(),M.glyphDataFormat=T.parseShort(),M},make:function(y){var x=Math.round(new Date().getTime()/1e3)+2082844800,M=x;return y.createdTimestamp&&(M=y.createdTimestamp+2082844800),new Ie.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:M},{name:"modified",type:"LONGDATETIME",value:x},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],y)}},qe={parse:function(y,x){var M={},T=new k.Parser(y,x);return M.version=T.parseVersion(),M.ascender=T.parseShort(),M.descender=T.parseShort(),M.lineGap=T.parseShort(),M.advanceWidthMax=T.parseUShort(),M.minLeftSideBearing=T.parseShort(),M.minRightSideBearing=T.parseShort(),M.xMaxExtent=T.parseShort(),M.caretSlopeRise=T.parseShort(),M.caretSlopeRun=T.parseShort(),M.caretOffset=T.parseShort(),T.relativeOffset+=8,M.metricDataFormat=T.parseShort(),M.numberOfHMetrics=T.parseUShort(),M},make:function(y){return new Ie.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],y)}},xt={parse:function(y,x,M,T,D){for(var F,q,le=new k.Parser(y,x),he=0;he<T;he+=1){he<M&&(F=le.parseUShort(),q=le.parseShort());var _e=D.get(he);_e.advanceWidth=F,_e.leftSideBearing=q}},make:function(y){for(var x=new Ie.Table("hmtx",[]),M=0;M<y.length;M+=1){var T=y.get(M),D=T.advanceWidth||0,F=T.leftSideBearing||0;x.fields.push({name:"advanceWidth_"+M,type:"USHORT",value:D}),x.fields.push({name:"leftSideBearing_"+M,type:"SHORT",value:F})}return x}},St={make:function(y){for(var x=new Ie.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:y.length}]),M="",T=12+4*y.length,D=0;D<y.length;++D){var F=M.indexOf(y[D]);F<0&&(F=M.length,M+=y[D]),x.fields.push({name:"offset "+D,type:"USHORT",value:T+F}),x.fields.push({name:"length "+D,type:"USHORT",value:y[D].length})}return x.fields.push({name:"stringPool",type:"CHARARRAY",value:M}),x},parse:function(y,x){var M=new k.Parser(y,x),T=M.parseULong();z.argument(T===1,"Unsupported ltag table version."),M.skip("uLong",1);for(var D=M.parseULong(),F=[],q=0;q<D;q++){for(var le="",he=x+M.parseUShort(),_e=M.parseUShort(),Te=he;Te<he+_e;++Te)le+=String.fromCharCode(y.getInt8(Te));F.push(le)}return F}},wt={parse:function(y,x){var M={},T=new k.Parser(y,x);return M.version=T.parseVersion(),M.numGlyphs=T.parseUShort(),M.version===1&&(M.maxPoints=T.parseUShort(),M.maxContours=T.parseUShort(),M.maxCompositePoints=T.parseUShort(),M.maxCompositeContours=T.parseUShort(),M.maxZones=T.parseUShort(),M.maxTwilightPoints=T.parseUShort(),M.maxStorage=T.parseUShort(),M.maxFunctionDefs=T.parseUShort(),M.maxInstructionDefs=T.parseUShort(),M.maxStackElements=T.parseUShort(),M.maxSizeOfInstructions=T.parseUShort(),M.maxComponentElements=T.parseUShort(),M.maxComponentDepth=T.parseUShort()),M},make:function(y){return new Ie.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:y}])}},st=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],rt={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},bt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},lt={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function hr(y,x,M){switch(y){case 0:if(x===65535)return"und";if(M)return M[x];break;case 1:return rt[x];case 3:return lt[x]}}var pr="utf-16",Yr={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},qt={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Er(y,x,M){switch(y){case 0:return pr;case 1:return qt[M]||Yr[x];case 3:if(x===1||x===10)return pr}}function Nr(y){var x={};for(var M in y)x[y[M]]=parseInt(M);return x}function rr(y,x,M,T,D,F){return new Ie.Record("NameRecord",[{name:"platformID",type:"USHORT",value:y},{name:"encodingID",type:"USHORT",value:x},{name:"languageID",type:"USHORT",value:M},{name:"nameID",type:"USHORT",value:T},{name:"length",type:"USHORT",value:D},{name:"offset",type:"USHORT",value:F}])}function Zo(y,x){var M=function(F,q){var le=F.length,he=q.length-le+1;e:for(var _e=0;_e<he;_e++)for(;_e<he;_e++){for(var Te=0;Te<le;Te++)if(q[_e+Te]!==F[Te])continue e;return _e}return-1}(y,x);if(M<0){M=x.length;for(var T=0,D=y.length;T<D;++T)x.push(y[T])}return M}var Jo={parse:function(y,x,M){for(var T={},D=new k.Parser(y,x),F=D.parseUShort(),q=D.parseUShort(),le=D.offset+D.parseUShort(),he=0;he<q;he++){var _e=D.parseUShort(),Te=D.parseUShort(),je=D.parseUShort(),ye=D.parseUShort(),tt=st[ye]||ye,Ke=D.parseUShort(),Ye=D.parseUShort(),Ne=hr(_e,je,M),He=Er(_e,Te,je);if(He!==void 0&&Ne!==void 0){var at=void 0;if(at=He===pr?de.UTF16(y,le+Ye,Ke):de.MACSTRING(y,le+Ye,Ke,He)){var ot=T[tt];ot===void 0&&(ot=T[tt]={}),ot[Ne]=at}}}return F===1&&D.parseUShort(),T},make:function(y,x){var M,T=[],D={},F=Nr(st);for(var q in y){var le=F[q];if(le===void 0&&(le=q),M=parseInt(le),isNaN(M))throw new Error('Name table entry "'+q+'" does not exist, see nameTableNames for complete list.');D[M]=y[q],T.push(M)}for(var he=Nr(rt),_e=Nr(lt),Te=[],je=[],ye=0;ye<T.length;ye++){var tt=D[M=T[ye]];for(var Ke in tt){var Ye=tt[Ke],Ne=1,He=he[Ke],at=bt[He],ot=Er(Ne,at,He),Mt=re.MACSTRING(Ye,ot);Mt===void 0&&(Ne=0,(He=x.indexOf(Ke))<0&&(He=x.length,x.push(Ke)),at=4,Mt=re.UTF16(Ye));var ht=Zo(Mt,je);Te.push(rr(Ne,at,He,M,Mt.length,ht));var pt=_e[Ke];if(pt!==void 0){var Gt=re.UTF16(Ye),Ct=Zo(Gt,je);Te.push(rr(3,1,pt,M,Gt.length,Ct))}}}Te.sort(function(jt,Rt){return jt.platformID-Rt.platformID||jt.encodingID-Rt.encodingID||jt.languageID-Rt.languageID||jt.nameID-Rt.nameID});for(var Et=new Ie.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:Te.length},{name:"stringOffset",type:"USHORT",value:6+12*Te.length}]),Lt=0;Lt<Te.length;Lt++)Et.fields.push({name:"record_"+Lt,type:"RECORD",value:Te[Lt]});return Et.fields.push({name:"strings",type:"LITERAL",value:je}),Et}},Ls=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Ps={parse:function(y,x){var M={},T=new k.Parser(y,x);M.version=T.parseUShort(),M.xAvgCharWidth=T.parseShort(),M.usWeightClass=T.parseUShort(),M.usWidthClass=T.parseUShort(),M.fsType=T.parseUShort(),M.ySubscriptXSize=T.parseShort(),M.ySubscriptYSize=T.parseShort(),M.ySubscriptXOffset=T.parseShort(),M.ySubscriptYOffset=T.parseShort(),M.ySuperscriptXSize=T.parseShort(),M.ySuperscriptYSize=T.parseShort(),M.ySuperscriptXOffset=T.parseShort(),M.ySuperscriptYOffset=T.parseShort(),M.yStrikeoutSize=T.parseShort(),M.yStrikeoutPosition=T.parseShort(),M.sFamilyClass=T.parseShort(),M.panose=[];for(var D=0;D<10;D++)M.panose[D]=T.parseByte();return M.ulUnicodeRange1=T.parseULong(),M.ulUnicodeRange2=T.parseULong(),M.ulUnicodeRange3=T.parseULong(),M.ulUnicodeRange4=T.parseULong(),M.achVendID=String.fromCharCode(T.parseByte(),T.parseByte(),T.parseByte(),T.parseByte()),M.fsSelection=T.parseUShort(),M.usFirstCharIndex=T.parseUShort(),M.usLastCharIndex=T.parseUShort(),M.sTypoAscender=T.parseShort(),M.sTypoDescender=T.parseShort(),M.sTypoLineGap=T.parseShort(),M.usWinAscent=T.parseUShort(),M.usWinDescent=T.parseUShort(),1<=M.version&&(M.ulCodePageRange1=T.parseULong(),M.ulCodePageRange2=T.parseULong()),2<=M.version&&(M.sxHeight=T.parseShort(),M.sCapHeight=T.parseShort(),M.usDefaultChar=T.parseUShort(),M.usBreakChar=T.parseUShort(),M.usMaxContent=T.parseUShort()),M},make:function(y){return new Ie.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],y)},unicodeRanges:Ls,getUnicodeRange:function(y){for(var x=0;x<Ls.length;x+=1){var M=Ls[x];if(y>=M.begin&&y<M.end)return x}return-1}},$o={parse:function(y,x){var M={},T=new k.Parser(y,x);switch(M.version=T.parseVersion(),M.italicAngle=T.parseFixed(),M.underlinePosition=T.parseShort(),M.underlineThickness=T.parseShort(),M.isFixedPitch=T.parseULong(),M.minMemType42=T.parseULong(),M.maxMemType42=T.parseULong(),M.minMemType1=T.parseULong(),M.maxMemType1=T.parseULong(),M.version){case 1:M.names=Me.slice();break;case 2:M.numberOfGlyphs=T.parseUShort(),M.glyphNameIndex=new Array(M.numberOfGlyphs);for(var D=0;D<M.numberOfGlyphs;D++)M.glyphNameIndex[D]=T.parseUShort();M.names=[];for(var F=0;F<M.numberOfGlyphs;F++)if(M.glyphNameIndex[F]>=Me.length){var q=T.parseChar();M.names.push(T.parseString(q))}break;case 2.5:M.numberOfGlyphs=T.parseUShort(),M.offset=new Array(M.numberOfGlyphs);for(var le=0;le<M.numberOfGlyphs;le++)M.offset[le]=T.parseChar()}return M},make:function(){return new Ie.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},Tr=new Array(9);Tr[1]=function(){var y=this.offset+this.relativeOffset,x=this.parseUShort();return x===1?{substFormat:1,coverage:this.parsePointer(be.coverage),deltaGlyphId:this.parseUShort()}:x===2?{substFormat:2,coverage:this.parsePointer(be.coverage),substitute:this.parseOffset16List()}:void z.assert(!1,"0x"+y.toString(16)+": lookup type 1 format must be 1 or 2.")},Tr[2]=function(){var y=this.parseUShort();return z.argument(y===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:y,coverage:this.parsePointer(be.coverage),sequences:this.parseListOfLists()}},Tr[3]=function(){var y=this.parseUShort();return z.argument(y===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:y,coverage:this.parsePointer(be.coverage),alternateSets:this.parseListOfLists()}},Tr[4]=function(){var y=this.parseUShort();return z.argument(y===1,"GSUB ligature table identifier-format must be 1"),{substFormat:y,coverage:this.parsePointer(be.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var Gn={sequenceIndex:be.uShort,lookupListIndex:be.uShort};Tr[5]=function(){var y=this.offset+this.relativeOffset,x=this.parseUShort();if(x===1)return{substFormat:x,coverage:this.parsePointer(be.coverage),ruleSets:this.parseListOfLists(function(){var D=this.parseUShort(),F=this.parseUShort();return{input:this.parseUShortList(D-1),lookupRecords:this.parseRecordList(F,Gn)}})};if(x===2)return{substFormat:x,coverage:this.parsePointer(be.coverage),classDef:this.parsePointer(be.classDef),classSets:this.parseListOfLists(function(){var D=this.parseUShort(),F=this.parseUShort();return{classes:this.parseUShortList(D-1),lookupRecords:this.parseRecordList(F,Gn)}})};if(x===3){var M=this.parseUShort(),T=this.parseUShort();return{substFormat:x,coverages:this.parseList(M,be.pointer(be.coverage)),lookupRecords:this.parseRecordList(T,Gn)}}z.assert(!1,"0x"+y.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},Tr[6]=function(){var y=this.offset+this.relativeOffset,x=this.parseUShort();return x===1?{substFormat:1,coverage:this.parsePointer(be.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Gn)}})}:x===2?{substFormat:2,coverage:this.parsePointer(be.coverage),backtrackClassDef:this.parsePointer(be.classDef),inputClassDef:this.parsePointer(be.classDef),lookaheadClassDef:this.parsePointer(be.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Gn)}})}:x===3?{substFormat:3,backtrackCoverage:this.parseList(be.pointer(be.coverage)),inputCoverage:this.parseList(be.pointer(be.coverage)),lookaheadCoverage:this.parseList(be.pointer(be.coverage)),lookupRecords:this.parseRecordList(Gn)}:void z.assert(!1,"0x"+y.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},Tr[7]=function(){var y=this.parseUShort();z.argument(y===1,"GSUB Extension Substitution subtable identifier-format must be 1");var x=this.parseUShort(),M=new be(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:x,extension:Tr[x].call(M)}},Tr[8]=function(){var y=this.parseUShort();return z.argument(y===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:y,coverage:this.parsePointer(be.coverage),backtrackCoverage:this.parseList(be.pointer(be.coverage)),lookaheadCoverage:this.parseList(be.pointer(be.coverage)),substitutes:this.parseUShortList()}};var Vi=new Array(9);Vi[1]=function(y){return y.substFormat===1?new Ie.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ie.Coverage(y.coverage)},{name:"deltaGlyphID",type:"USHORT",value:y.deltaGlyphId}]):new Ie.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Ie.Coverage(y.coverage)}].concat(Ie.ushortList("substitute",y.substitute)))},Vi[3]=function(y){return z.assert(y.substFormat===1,"Lookup type 3 substFormat must be 1."),new Ie.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ie.Coverage(y.coverage)}].concat(Ie.tableList("altSet",y.alternateSets,function(x){return new Ie.Table("alternateSetTable",Ie.ushortList("alternate",x))})))},Vi[4]=function(y){return z.assert(y.substFormat===1,"Lookup type 4 substFormat must be 1."),new Ie.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ie.Coverage(y.coverage)}].concat(Ie.tableList("ligSet",y.ligatureSets,function(x){return new Ie.Table("ligatureSetTable",Ie.tableList("ligature",x,function(M){return new Ie.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:M.ligGlyph}].concat(Ie.ushortList("component",M.components,M.components.length+1)))}))})))};var Ko={parse:function(y,x){var M=new be(y,x=x||0),T=M.parseVersion(1);return z.argument(T===1||T===1.1,"Unsupported GSUB table version."),T===1?{version:T,scripts:M.parseScriptList(),features:M.parseFeatureList(),lookups:M.parseLookupList(Tr)}:{version:T,scripts:M.parseScriptList(),features:M.parseFeatureList(),lookups:M.parseLookupList(Tr),variations:M.parseFeatureVariationsList()}},make:function(y){return new Ie.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Ie.ScriptList(y.scripts)},{name:"features",type:"TABLE",value:new Ie.FeatureList(y.features)},{name:"lookups",type:"TABLE",value:new Ie.LookupList(y.lookups,Vi)}])}},Qo={parse:function(y,x){var M=new k.Parser(y,x),T=M.parseULong();z.argument(T===1,"Unsupported META table version."),M.parseULong(),M.parseULong();for(var D=M.parseULong(),F={},q=0;q<D;q++){var le=M.parseTag(),he=M.parseULong(),_e=M.parseULong(),Te=de.UTF8(y,x+he,_e);F[le]=Te}return F},make:function(y){var x=Object.keys(y).length,M="",T=16+12*x,D=new Ie.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:T},{name:"numTags",type:"ULONG",value:x}]);for(var F in y){var q=M.length;M+=y[F],D.fields.push({name:"tag "+F,type:"TAG",value:F}),D.fields.push({name:"offset "+F,type:"ULONG",value:T+q}),D.fields.push({name:"length "+F,type:"ULONG",value:y[F].length})}return D.fields.push({name:"stringPool",type:"CHARARRAY",value:M}),D}};function ea(y){return Math.log(y)/Math.log(2)|0}function Rs(y){for(;y.length%4!=0;)y.push(0);for(var x=0,M=0;M<y.length;M+=4)x+=(y[M]<<24)+(y[M+1]<<16)+(y[M+2]<<8)+y[M+3];return x%=Math.pow(2,32)}function ta(y,x,M,T){return new Ie.Record("Table Record",[{name:"tag",type:"TAG",value:y!==void 0?y:""},{name:"checkSum",type:"ULONG",value:x!==void 0?x:0},{name:"offset",type:"ULONG",value:M!==void 0?M:0},{name:"length",type:"ULONG",value:T!==void 0?T:0}])}function ra(y){var x=new Ie.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);x.tables=y,x.numTables=y.length;var M=Math.pow(2,ea(x.numTables));x.searchRange=16*M,x.entrySelector=ea(M),x.rangeShift=16*x.numTables-x.searchRange;for(var T=[],D=[],F=x.sizeOf()+ta().sizeOf()*x.numTables;F%4!=0;)F+=1,D.push({name:"padding",type:"BYTE",value:0});for(var q=0;q<y.length;q+=1){var le=y[q];z.argument(le.tableName.length===4,"Table name"+le.tableName+" is invalid.");var he=le.sizeOf(),_e=ta(le.tableName,Rs(le.encode()),F,he);for(T.push({name:_e.tag+" Table Record",type:"RECORD",value:_e}),D.push({name:le.tableName+" table",type:"RECORD",value:le}),F+=he,z.argument(!isNaN(F),"Something went wrong calculating the offset.");F%4!=0;)F+=1,D.push({name:"padding",type:"BYTE",value:0})}return T.sort(function(Te,je){return Te.value.tag>je.value.tag?1:-1}),x.fields=x.fields.concat(T),x.fields=x.fields.concat(D),x}function na(y,x,M){for(var T=0;T<x.length;T+=1){var D=y.charToGlyphIndex(x[T]);if(0<D)return y.glyphs.get(D).getMetrics()}return M}var Hu={make:ra,fontToTable:function(y){for(var x,M=[],T=[],D=[],F=[],q=[],le=[],he=[],_e=0,Te=0,je=0,ye=0,tt=0,Ke=0;Ke<y.glyphs.length;Ke+=1){var Ye=y.glyphs.get(Ke),Ne=0|Ye.unicode;if(isNaN(Ye.advanceWidth))throw new Error("Glyph "+Ye.name+" ("+Ke+"): advanceWidth is not a number.");(Ne<x||x===void 0)&&0<Ne&&(x=Ne),_e<Ne&&(_e=Ne);var He=Ps.getUnicodeRange(Ne);if(He<32)Te|=1<<He;else if(He<64)je|=1<<He-32;else if(He<96)ye|=1<<He-64;else{if(!(He<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");tt|=1<<He-96}if(Ye.name!==".notdef"){var at=Ye.getMetrics();M.push(at.xMin),T.push(at.yMin),D.push(at.xMax),F.push(at.yMax),le.push(at.leftSideBearing),he.push(at.rightSideBearing),q.push(Ye.advanceWidth)}}var ot={xMin:Math.min.apply(null,M),yMin:Math.min.apply(null,T),xMax:Math.max.apply(null,D),yMax:Math.max.apply(null,F),advanceWidthMax:Math.max.apply(null,q),advanceWidthAvg:function(Hn){for(var Ia=0,Us=0;Us<Hn.length;Us+=1)Ia+=Hn[Us];return Ia/Hn.length}(q),minLeftSideBearing:Math.min.apply(null,le),maxLeftSideBearing:Math.max.apply(null,le),minRightSideBearing:Math.min.apply(null,he)};ot.ascender=y.ascender,ot.descender=y.descender;var Mt=et.make({flags:3,unitsPerEm:y.unitsPerEm,xMin:ot.xMin,yMin:ot.yMin,xMax:ot.xMax,yMax:ot.yMax,lowestRecPPEM:3,createdTimestamp:y.createdTimestamp}),ht=qe.make({ascender:ot.ascender,descender:ot.descender,advanceWidthMax:ot.advanceWidthMax,minLeftSideBearing:ot.minLeftSideBearing,minRightSideBearing:ot.minRightSideBearing,xMaxExtent:ot.maxLeftSideBearing+(ot.xMax-ot.xMin),numberOfHMetrics:y.glyphs.length}),pt=wt.make(y.glyphs.length),Gt=Ps.make({xAvgCharWidth:Math.round(ot.advanceWidthAvg),usWeightClass:y.tables.os2.usWeightClass,usWidthClass:y.tables.os2.usWidthClass,usFirstCharIndex:x,usLastCharIndex:_e,ulUnicodeRange1:Te,ulUnicodeRange2:je,ulUnicodeRange3:ye,ulUnicodeRange4:tt,fsSelection:y.tables.os2.fsSelection,sTypoAscender:ot.ascender,sTypoDescender:ot.descender,sTypoLineGap:0,usWinAscent:ot.yMax,usWinDescent:Math.abs(ot.yMin),ulCodePageRange1:1,sxHeight:na(y,"xyvw",{yMax:Math.round(ot.ascender/2)}).yMax,sCapHeight:na(y,"HIKLEFJMNTZBDPRAGOQSUVWXY",ot).yMax,usDefaultChar:y.hasChar(" ")?32:0,usBreakChar:y.hasChar(" ")?32:0}),Ct=xt.make(y.glyphs),Et=Q.make(y.glyphs),Lt=y.getEnglishName("fontFamily"),jt=y.getEnglishName("fontSubfamily"),Rt=Lt+" "+jt,Ut=y.getEnglishName("postScriptName");Ut=Ut||Lt.replace(/\s/g,"")+"-"+jt;var It={};for(var Dt in y.names)It[Dt]=y.names[Dt];It.uniqueID||(It.uniqueID={en:y.getEnglishName("manufacturer")+":"+Rt}),It.postScriptName||(It.postScriptName={en:Ut}),It.preferredFamily||(It.preferredFamily=y.names.fontFamily),It.preferredSubfamily||(It.preferredSubfamily=y.names.fontSubfamily);var Bt=[],Ot=Jo.make(It,Bt),Wt=0<Bt.length?St.make(Bt):void 0,Pt=$o.make(),Xt=ze.make(y.glyphs,{version:y.getEnglishName("version"),fullName:Rt,familyName:Lt,weightName:jt,postScriptName:Ut,unitsPerEm:y.unitsPerEm,fontBBox:[0,ot.yMin,ot.ascender,ot.advanceWidthMax]}),Nt=y.metas&&0<Object.keys(y.metas).length?Qo.make(y.metas):void 0,Ft=[Mt,ht,pt,Gt,Ot,Et,Pt,Xt,Ct];Wt&&Ft.push(Wt),y.tables.gsub&&Ft.push(Ko.make(y.tables.gsub)),Nt&&Ft.push(Nt);for(var Br=ra(Ft),Vn=Rs(Br.encode()),xn=Br.fields,vr=!1,wn=0;wn<xn.length;wn+=1)if(xn[wn].name==="head table"){xn[wn].value.checkSumAdjustment=2981146554-Vn,vr=!0;break}if(!vr)throw new Error("Could not find head table with checkSum to adjust.");return Br},computeCheckSum:Rs};function Ds(y,x){for(var M=0,T=y.length-1;M<=T;){var D=M+T>>>1,F=y[D].tag;if(F===x)return D;F<x?M=1+D:T=D-1}return-M-1}function ia(y,x){for(var M=0,T=y.length-1;M<=T;){var D=M+T>>>1,F=y[D];if(F===x)return D;F<x?M=1+D:T=D-1}return-M-1}function sa(y,x){for(var M,T=0,D=y.length-1;T<=D;){var F=T+D>>>1,q=(M=y[F]).start;if(q===x)return M;q<x?T=1+F:D=F-1}if(0<T)return x>(M=y[T-1]).end?0:M}function Hi(y,x){this.font=y,this.tableName=x}function Wi(y){Hi.call(this,y,"gpos")}function Fr(y){Hi.call(this,y,"gsub")}function Wu(y,x){var M=y.length;if(M!==x.length)return!1;for(var T=0;T<M;T++)if(y[T]!==x[T])return!1;return!0}function oa(y,x,M){for(var T=y.subtables,D=0;D<T.length;D++){var F=T[D];if(F.substFormat===x)return F}if(M)return T.push(M),M}function aa(y){for(var x=new ArrayBuffer(y.length),M=new Uint8Array(x),T=0;T<y.length;++T)M[T]=y[T];return x}function zn(y,x){if(!y)throw x}function la(y,x,M,T,D){var F;return F=0<(x&T)?(F=y.parseByte(),(x&D)==0&&(F=-F),M+F):0<(x&D)?M:M+y.parseShort()}function qu(y,x,M){var T,D,F=new k.Parser(x,M);if(y.numberOfContours=F.parseShort(),y._xMin=F.parseShort(),y._yMin=F.parseShort(),y._xMax=F.parseShort(),y._yMax=F.parseShort(),0<y.numberOfContours){for(var q=y.endPointIndices=[],le=0;le<y.numberOfContours;le+=1)q.push(F.parseUShort());y.instructionLength=F.parseUShort(),y.instructions=[];for(var he=0;he<y.instructionLength;he+=1)y.instructions.push(F.parseByte());var _e=q[q.length-1]+1;T=[];for(var Te=0;Te<_e;Te+=1)if(D=F.parseByte(),T.push(D),0<(8&D))for(var je=F.parseByte(),ye=0;ye<je;ye+=1)T.push(D),Te+=1;if(z.argument(T.length===_e,"Bad flags."),0<q.length){var tt,Ke=[];if(0<_e){for(var Ye=0;Ye<_e;Ye+=1)D=T[Ye],(tt={}).onCurve=!!(1&D),tt.lastPointOfContour=0<=q.indexOf(Ye),Ke.push(tt);for(var Ne=0,He=0;He<_e;He+=1)D=T[He],(tt=Ke[He]).x=la(F,D,Ne,2,16),Ne=tt.x;for(var at=0,ot=0;ot<_e;ot+=1)D=T[ot],(tt=Ke[ot]).y=la(F,D,at,4,32),at=tt.y}y.points=Ke}else y.points=[]}else if(y.numberOfContours===0)y.points=[];else{y.isComposite=!0,y.points=[],y.components=[];for(var Mt=!0;Mt;){T=F.parseUShort();var ht={glyphIndex:F.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&T)?0<(2&T)?(ht.dx=F.parseShort(),ht.dy=F.parseShort()):ht.matchedPoints=[F.parseUShort(),F.parseUShort()]:0<(2&T)?(ht.dx=F.parseChar(),ht.dy=F.parseChar()):ht.matchedPoints=[F.parseByte(),F.parseByte()],0<(8&T)?ht.xScale=ht.yScale=F.parseF2Dot14():0<(64&T)?(ht.xScale=F.parseF2Dot14(),ht.yScale=F.parseF2Dot14()):0<(128&T)&&(ht.xScale=F.parseF2Dot14(),ht.scale01=F.parseF2Dot14(),ht.scale10=F.parseF2Dot14(),ht.yScale=F.parseF2Dot14()),y.components.push(ht),Mt=!!(32&T)}if(256&T){y.instructionLength=F.parseUShort(),y.instructions=[];for(var pt=0;pt<y.instructionLength;pt+=1)y.instructions.push(F.parseByte())}}}function js(y,x){for(var M=[],T=0;T<y.length;T+=1){var D=y[T],F={x:x.xScale*D.x+x.scale01*D.y+x.dx,y:x.scale10*D.x+x.yScale*D.y+x.dy,onCurve:D.onCurve,lastPointOfContour:D.lastPointOfContour};M.push(F)}return M}function ua(y){var x=new ge;if(!y)return x;for(var M=function(je){for(var ye=[],tt=[],Ke=0;Ke<je.length;Ke+=1){var Ye=je[Ke];tt.push(Ye),Ye.lastPointOfContour&&(ye.push(tt),tt=[])}return z.argument(tt.length===0,"There are still points left in the current contour."),ye}(y),T=0;T<M.length;++T){var D=M[T],F=null,q=D[D.length-1],le=D[0];if(q.onCurve)x.moveTo(q.x,q.y);else if(le.onCurve)x.moveTo(le.x,le.y);else{var he={x:.5*(q.x+le.x),y:.5*(q.y+le.y)};x.moveTo(he.x,he.y)}for(var _e=0;_e<D.length;++_e)if(F=q,q=le,le=D[(_e+1)%D.length],q.onCurve)x.lineTo(q.x,q.y);else{var Te=le;F.onCurve||(.5*(q.x+F.x),.5*(q.y+F.y)),le.onCurve||(Te={x:.5*(q.x+le.x),y:.5*(q.y+le.y)}),x.quadraticCurveTo(q.x,q.y,Te.x,Te.y)}x.closePath()}return x}function Xu(y,x){if(x.isComposite)for(var M=0;M<x.components.length;M+=1){var T=x.components[M],D=y.get(T.glyphIndex);if(D.getPath(),D.points){var F=void 0;if(T.matchedPoints===void 0)F=js(D.points,T);else{if(T.matchedPoints[0]>x.points.length-1||T.matchedPoints[1]>D.points.length-1)throw Error("Matched points out of range in "+x.name);var q=x.points[T.matchedPoints[0]],le=D.points[T.matchedPoints[1]],he={xScale:T.xScale,scale01:T.scale01,scale10:T.scale10,yScale:T.yScale,dx:0,dy:0};le=js([le],he)[0],he.dx=q.x-le.x,he.dy=q.y-le.y,F=js(D.points,he)}x.points=x.points.concat(F)}}return ua(x.points)}(Wi.prototype=Hi.prototype={searchTag:Ds,binSearch:ia,getTable:function(y){var x=this.font.tables[this.tableName];return!x&&y&&(x=this.font.tables[this.tableName]=this.createDefaultTable()),x},getScriptNames:function(){var y=this.getTable();return y?y.scripts.map(function(x){return x.tag}):[]},getDefaultScriptName:function(){var y=this.getTable();if(y){for(var x=!1,M=0;M<y.scripts.length;M++){var T=y.scripts[M].tag;if(T==="DFLT")return T;T==="latn"&&(x=!0)}return x?"latn":void 0}},getScriptTable:function(y,x){var M=this.getTable(x);if(M){y=y||"DFLT";var T=M.scripts,D=Ds(M.scripts,y);if(0<=D)return T[D].script;if(x){var F={tag:y,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return T.splice(-1-D,0,F),F.script}}},getLangSysTable:function(y,x,M){var T=this.getScriptTable(y,M);if(T){if(!x||x==="dflt"||x==="DFLT")return T.defaultLangSys;var D=Ds(T.langSysRecords,x);if(0<=D)return T.langSysRecords[D].langSys;if(M){var F={tag:x,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return T.langSysRecords.splice(-1-D,0,F),F.langSys}}},getFeatureTable:function(y,x,M,T){var D=this.getLangSysTable(y,x,T);if(D){for(var F,q=D.featureIndexes,le=this.font.tables[this.tableName].features,he=0;he<q.length;he++)if((F=le[q[he]]).tag===M)return F.feature;if(T){var _e=le.length;return z.assert(_e===0||M>=le[_e-1].tag,"Features must be added in alphabetical order."),F={tag:M,feature:{params:0,lookupListIndexes:[]}},le.push(F),q.push(_e),F.feature}}},getLookupTables:function(y,x,M,T,D){var F=this.getFeatureTable(y,x,M,D),q=[];if(F){for(var le,he=F.lookupListIndexes,_e=this.font.tables[this.tableName].lookups,Te=0;Te<he.length;Te++)(le=_e[he[Te]]).lookupType===T&&q.push(le);if(q.length===0&&D){le={lookupType:T,lookupFlag:0,subtables:[],markFilteringSet:void 0};var je=_e.length;return _e.push(le),he.push(je),[le]}}return q},getGlyphClass:function(y,x){switch(y.format){case 1:return y.startGlyph<=x&&x<y.startGlyph+y.classes.length?y.classes[x-y.startGlyph]:0;case 2:var M=sa(y.ranges,x);return M?M.classId:0}},getCoverageIndex:function(y,x){switch(y.format){case 1:var M=ia(y.glyphs,x);return 0<=M?M:-1;case 2:var T=sa(y.ranges,x);return T?T.index+x-T.start:-1}},expandCoverage:function(y){if(y.format===1)return y.glyphs;for(var x=[],M=y.ranges,T=0;T<M.length;T++)for(var D=M[T],F=D.start,q=D.end,le=F;le<=q;le++)x.push(le);return x}}).init=function(){var y=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(y)},Wi.prototype.getKerningValue=function(y,x,M){for(var T=0;T<y.length;T++)for(var D=y[T].subtables,F=0;F<D.length;F++){var q=D[F],le=this.getCoverageIndex(q.coverage,x);if(!(le<0))switch(q.posFormat){case 1:for(var he=q.pairSets[le],_e=0;_e<he.length;_e++){var Te=he[_e];if(Te.secondGlyph===M)return Te.value1&&Te.value1.xAdvance||0}break;case 2:var je=this.getGlyphClass(q.classDef1,x),ye=this.getGlyphClass(q.classDef2,M),tt=q.classRecords[je][ye];return tt.value1&&tt.value1.xAdvance||0}}return 0},Wi.prototype.getKerningTables=function(y,x){if(this.font.tables.gpos)return this.getLookupTables(y,x,"kern",2)},(Fr.prototype=Hi.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Fr.prototype.getSingle=function(y,x,M){for(var T=[],D=this.getLookupTables(x,M,y,1),F=0;F<D.length;F++)for(var q=D[F].subtables,le=0;le<q.length;le++){var he=q[le],_e=this.expandCoverage(he.coverage),Te=void 0;if(he.substFormat===1){var je=he.deltaGlyphId;for(Te=0;Te<_e.length;Te++){var ye=_e[Te];T.push({sub:ye,by:ye+je})}}else{var tt=he.substitute;for(Te=0;Te<_e.length;Te++)T.push({sub:_e[Te],by:tt[Te]})}}return T},Fr.prototype.getAlternates=function(y,x,M){for(var T=[],D=this.getLookupTables(x,M,y,3),F=0;F<D.length;F++)for(var q=D[F].subtables,le=0;le<q.length;le++)for(var he=q[le],_e=this.expandCoverage(he.coverage),Te=he.alternateSets,je=0;je<_e.length;je++)T.push({sub:_e[je],by:Te[je]});return T},Fr.prototype.getLigatures=function(y,x,M){for(var T=[],D=this.getLookupTables(x,M,y,4),F=0;F<D.length;F++)for(var q=D[F].subtables,le=0;le<q.length;le++)for(var he=q[le],_e=this.expandCoverage(he.coverage),Te=he.ligatureSets,je=0;je<_e.length;je++)for(var ye=_e[je],tt=Te[je],Ke=0;Ke<tt.length;Ke++){var Ye=tt[Ke];T.push({sub:[ye].concat(Ye.components),by:Ye.ligGlyph})}return T},Fr.prototype.addSingle=function(y,x,M,T){var D=oa(this.getLookupTables(M,T,y,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});z.assert(D.coverage.format===1,"Ligature: unable to modify coverage table format "+D.coverage.format);var F=x.sub,q=this.binSearch(D.coverage.glyphs,F);q<0&&(q=-1-q,D.coverage.glyphs.splice(q,0,F),D.substitute.splice(q,0,0)),D.substitute[q]=x.by},Fr.prototype.addAlternate=function(y,x,M,T){var D=oa(this.getLookupTables(M,T,y,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});z.assert(D.coverage.format===1,"Ligature: unable to modify coverage table format "+D.coverage.format);var F=x.sub,q=this.binSearch(D.coverage.glyphs,F);q<0&&(q=-1-q,D.coverage.glyphs.splice(q,0,F),D.alternateSets.splice(q,0,0)),D.alternateSets[q]=x.by},Fr.prototype.addLigature=function(y,x,M,T){var D=this.getLookupTables(M,T,y,4,!0)[0],F=D.subtables[0];F||(F={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},D.subtables[0]=F),z.assert(F.coverage.format===1,"Ligature: unable to modify coverage table format "+F.coverage.format);var q=x.sub[0],le=x.sub.slice(1),he={ligGlyph:x.by,components:le},_e=this.binSearch(F.coverage.glyphs,q);if(0<=_e){for(var Te=F.ligatureSets[_e],je=0;je<Te.length;je++)if(Wu(Te[je].components,le))return;Te.push(he)}else _e=-1-_e,F.coverage.glyphs.splice(_e,0,q),F.ligatureSets.splice(_e,0,[he])},Fr.prototype.getFeature=function(y,x,M){if(/ss\d\d/.test(y))return this.getSingle(y,x,M);switch(y){case"aalt":case"salt":return this.getSingle(y,x,M).concat(this.getAlternates(y,x,M));case"dlig":case"liga":case"rlig":return this.getLigatures(y,x,M)}},Fr.prototype.add=function(y,x,M,T){if(/ss\d\d/.test(y))return this.addSingle(y,x,M,T);switch(y){case"aalt":case"salt":return typeof x.by=="number"?this.addSingle(y,x,M,T):this.addAlternate(y,x,M,T);case"dlig":case"liga":case"rlig":return this.addLigature(y,x,M,T)}};var ca,_n,ha,Is,da={getPath:ua,parse:function(y,x,M,T){for(var D=new dt.GlyphSet(T),F=0;F<M.length-1;F+=1){var q=M[F];q!==M[F+1]?D.push(F,dt.ttfGlyphLoader(T,F,qu,y,x+q,Xu)):D.push(F,dt.glyphLoader(T,F))}return D}};function fa(y){this.font=y,this.getCommands=function(x){return da.getPath(x).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Yu(y){return y}function pa(y){return Math.sign(y)*Math.round(Math.abs(y))}function Zu(y){return Math.sign(y)*Math.round(Math.abs(2*y))/2}function Ju(y){return Math.sign(y)*(Math.round(Math.abs(y)+.5)-.5)}function $u(y){return Math.sign(y)*Math.ceil(Math.abs(y))}function Ku(y){return Math.sign(y)*Math.floor(Math.abs(y))}function ma(y){var x=this.srPeriod,M=this.srPhase,T=1;return y<0&&(y=-y,T=-1),y+=this.srThreshold-M,y=Math.trunc(y/x)*x,(y+=M)<0?M*T:y*T}var Ur={x:1,y:0,axis:"x",distance:function(y,x,M,T){return(M?y.xo:y.x)-(T?x.xo:x.x)},interpolate:function(y,x,M,T){var D,F,q,le,he,_e,Te;if(!T||T===this)return D=y.xo-x.xo,F=y.xo-M.xo,he=x.x-x.xo,_e=M.x-M.xo,(Te=(q=Math.abs(D))+(le=Math.abs(F)))===0?void(y.x=y.xo+(he+_e)/2):void(y.x=y.xo+(he*le+_e*q)/Te);D=T.distance(y,x,!0,!0),F=T.distance(y,M,!0,!0),he=T.distance(x,x,!1,!0),_e=T.distance(M,M,!1,!0),(Te=(q=Math.abs(D))+(le=Math.abs(F)))!==0?Ur.setRelative(y,y,(he*le+_e*q)/Te,T,!0):Ur.setRelative(y,y,(he+_e)/2,T,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(y,x,M,T,D){if(T&&T!==this){var F=D?x.xo:x.x,q=D?x.yo:x.y,le=F+M*T.x,he=q+M*T.y;y.x=le+(y.y-he)/T.normalSlope}else y.x=(D?x.xo:x.x)+M},slope:0,touch:function(y){y.xTouched=!0},touched:function(y){return y.xTouched},untouch:function(y){y.xTouched=!1}},Zr={x:0,y:1,axis:"y",distance:function(y,x,M,T){return(M?y.yo:y.y)-(T?x.yo:x.y)},interpolate:function(y,x,M,T){var D,F,q,le,he,_e,Te;if(!T||T===this)return D=y.yo-x.yo,F=y.yo-M.yo,he=x.y-x.yo,_e=M.y-M.yo,(Te=(q=Math.abs(D))+(le=Math.abs(F)))===0?void(y.y=y.yo+(he+_e)/2):void(y.y=y.yo+(he*le+_e*q)/Te);D=T.distance(y,x,!0,!0),F=T.distance(y,M,!0,!0),he=T.distance(x,x,!1,!0),_e=T.distance(M,M,!1,!0),(Te=(q=Math.abs(D))+(le=Math.abs(F)))!==0?Zr.setRelative(y,y,(he*le+_e*q)/Te,T,!0):Zr.setRelative(y,y,(he+_e)/2,T,!0)},normalSlope:0,setRelative:function(y,x,M,T,D){if(T&&T!==this){var F=D?x.xo:x.x,q=D?x.yo:x.y,le=F+M*T.x,he=q+M*T.y;y.y=he+T.normalSlope*(y.x-le)}else y.y=(D?x.yo:x.y)+M},slope:Number.POSITIVE_INFINITY,touch:function(y){y.yTouched=!0},touched:function(y){return y.yTouched},untouch:function(y){y.yTouched=!1}};function _i(y,x){this.x=y,this.y=x,this.axis=void 0,this.slope=x/y,this.normalSlope=-y/x,Object.freeze(this)}function xi(y,x){var M=Math.sqrt(y*y+x*x);return x/=M,(y/=M)===1&&x===0?Ur:y===0&&x===1?Zr:new _i(y,x)}function Jr(y,x,M,T){this.x=this.xo=Math.round(64*y)/64,this.y=this.yo=Math.round(64*x)/64,this.lastPointOfContour=M,this.onCurve=T,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Ur),Object.freeze(Zr),_i.prototype.distance=function(y,x,M,T){return this.x*Ur.distance(y,x,M,T)+this.y*Zr.distance(y,x,M,T)},_i.prototype.interpolate=function(y,x,M,T){var D,F,q,le,he,_e,Te;q=T.distance(y,x,!0,!0),le=T.distance(y,M,!0,!0),D=T.distance(x,x,!1,!0),F=T.distance(M,M,!1,!0),(Te=(he=Math.abs(q))+(_e=Math.abs(le)))!==0?this.setRelative(y,y,(D*_e+F*he)/Te,T,!0):this.setRelative(y,y,(D+F)/2,T,!0)},_i.prototype.setRelative=function(y,x,M,T,D){T=T||this;var F=D?x.xo:x.x,q=D?x.yo:x.y,le=F+M*T.x,he=q+M*T.y,_e=T.normalSlope,Te=this.slope,je=y.x,ye=y.y;y.x=(Te*je-_e*le+he-ye)/(Te-_e),y.y=Te*(y.x-je)+ye},_i.prototype.touch=function(y){y.xTouched=!0,y.yTouched=!0},Jr.prototype.nextTouched=function(y){for(var x=this.nextPointOnContour;!y.touched(x)&&x!==this;)x=x.nextPointOnContour;return x},Jr.prototype.prevTouched=function(y){for(var x=this.prevPointOnContour;!y.touched(x)&&x!==this;)x=x.prevPointOnContour;return x};var wi=Object.freeze(new Jr(0,0)),Qu={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function an(y,x){switch(this.env=y,this.stack=[],this.prog=x,y){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Ur,this.round=pa}}function qi(y){for(var x=y.tZone=new Array(y.gZone.length),M=0;M<x.length;M++)x[M]=new Jr(0,0)}function ga(y,x){var M,T=y.prog,D=y.ip,F=1;do if((M=T[++D])===88)F++;else if(M===89)F--;else if(M===64)D+=T[D+1]+1;else if(M===65)D+=2*T[D+1]+1;else if(176<=M&&M<=183)D+=M-176+1;else if(184<=M&&M<=191)D+=2*(M-184+1);else if(x&&F===1&&M===27)break;while(0<F);y.ip=D}function ya(y,x){u.DEBUG&&console.log(x.step,"SVTCA["+y.axis+"]"),x.fv=x.pv=x.dpv=y}function va(y,x){u.DEBUG&&console.log(x.step,"SPVTCA["+y.axis+"]"),x.pv=x.dpv=y}function ba(y,x){u.DEBUG&&console.log(x.step,"SFVTCA["+y.axis+"]"),x.fv=y}function _a(y,x){var M,T,D=x.stack,F=D.pop(),q=D.pop(),le=x.z2[F],he=x.z1[q];u.DEBUG&&console.log("SPVTL["+y+"]",F,q),T=y?(M=le.y-he.y,he.x-le.x):(M=he.x-le.x,he.y-le.y),x.pv=x.dpv=xi(M,T)}function xa(y,x){var M,T,D=x.stack,F=D.pop(),q=D.pop(),le=x.z2[F],he=x.z1[q];u.DEBUG&&console.log("SFVTL["+y+"]",F,q),T=y?(M=le.y-he.y,he.x-le.x):(M=he.x-le.x,he.y-le.y),x.fv=xi(M,T)}function Os(y){u.DEBUG&&console.log(y.step,"POP[]"),y.stack.pop()}function wa(y,x){var M=x.stack.pop(),T=x.z0[M],D=x.fv,F=x.pv;u.DEBUG&&console.log(x.step,"MDAP["+y+"]",M);var q=F.distance(T,wi);y&&(q=x.round(q)),D.setRelative(T,wi,q,F),D.touch(T),x.rp0=x.rp1=M}function Sa(y,x){var M,T,D,F=x.z2,q=F.length-2;u.DEBUG&&console.log(x.step,"IUP["+y.axis+"]");for(var le=0;le<q;le++)M=F[le],y.touched(M)||(T=M.prevTouched(y))!==M&&(T===(D=M.nextTouched(y))&&y.setRelative(M,M,y.distance(T,T,!1,!0),y,!0),y.interpolate(M,T,D,y))}function Ma(y,x){for(var M=x.stack,T=y?x.rp1:x.rp2,D=(y?x.z0:x.z1)[T],F=x.fv,q=x.pv,le=x.loop,he=x.z2;le--;){var _e=M.pop(),Te=he[_e],je=q.distance(D,D,!1,!0);F.setRelative(Te,Te,je,q),F.touch(Te),u.DEBUG&&console.log(x.step,(1<x.loop?"loop "+(x.loop-le)+": ":"")+"SHP["+(y?"rp1":"rp2")+"]",_e)}x.loop=1}function Ea(y,x){var M=x.stack,T=y?x.rp1:x.rp2,D=(y?x.z0:x.z1)[T],F=x.fv,q=x.pv,le=M.pop(),he=x.z2[x.contours[le]],_e=he;u.DEBUG&&console.log(x.step,"SHC["+y+"]",le);for(var Te=q.distance(D,D,!1,!0);_e!==D&&F.setRelative(_e,_e,Te,q),(_e=_e.nextPointOnContour)!==he;);}function Ta(y,x){var M,T,D=x.stack,F=y?x.rp1:x.rp2,q=(y?x.z0:x.z1)[F],le=x.fv,he=x.pv,_e=D.pop();switch(u.DEBUG&&console.log(x.step,"SHZ["+y+"]",_e),_e){case 0:M=x.tZone;break;case 1:M=x.gZone;break;default:throw new Error("Invalid zone")}for(var Te=he.distance(q,q,!1,!0),je=M.length-2,ye=0;ye<je;ye++)T=M[ye],le.setRelative(T,T,Te,he)}function Aa(y,x){var M=x.stack,T=M.pop()/64,D=M.pop(),F=x.z1[D],q=x.z0[x.rp0],le=x.fv,he=x.pv;le.setRelative(F,q,T,he),le.touch(F),u.DEBUG&&console.log(x.step,"MSIRP["+y+"]",T,D),x.rp1=x.rp0,x.rp2=D,y&&(x.rp0=D)}function Ca(y,x){var M=x.stack,T=M.pop(),D=M.pop(),F=x.z0[D],q=x.fv,le=x.pv,he=x.cvt[T];u.DEBUG&&console.log(x.step,"MIAP["+y+"]",T,"(",he,")",D);var _e=le.distance(F,wi);y&&(Math.abs(_e-he)<x.cvCutIn&&(_e=he),_e=x.round(_e)),q.setRelative(F,wi,_e,le),x.zp0===0&&(F.xo=F.x,F.yo=F.y),q.touch(F),x.rp0=x.rp1=D}function La(y,x){var M=x.stack,T=M.pop(),D=x.z2[T];u.DEBUG&&console.log(x.step,"GC["+y+"]",T),M.push(64*x.dpv.distance(D,wi,y,!1))}function Pa(y,x){var M=x.stack,T=M.pop(),D=M.pop(),F=x.z1[T],q=x.z0[D],le=x.dpv.distance(q,F,y,y);u.DEBUG&&console.log(x.step,"MD["+y+"]",T,D,"->",le),x.stack.push(Math.round(64*le))}function ks(y,x){var M=x.stack,T=M.pop(),D=x.fv,F=x.pv,q=x.ppem,le=x.deltaBase+16*(y-1),he=x.deltaShift,_e=x.z0;u.DEBUG&&console.log(x.step,"DELTAP["+y+"]",T,M);for(var Te=0;Te<T;Te++){var je=M.pop(),ye=M.pop();if(le+((240&ye)>>4)===q){var tt=(15&ye)-8;0<=tt&&tt++,u.DEBUG&&console.log(x.step,"DELTAPFIX",je,"by",tt*he);var Ke=_e[je];D.setRelative(Ke,Ke,tt*he,F)}}}function Xi(y,x){var M=x.stack,T=M.pop();u.DEBUG&&console.log(x.step,"ROUND[]"),M.push(64*x.round(T/64))}function Ns(y,x){var M=x.stack,T=M.pop(),D=x.ppem,F=x.deltaBase+16*(y-1),q=x.deltaShift;u.DEBUG&&console.log(x.step,"DELTAC["+y+"]",T,M);for(var le=0;le<T;le++){var he=M.pop(),_e=M.pop();if(F+((240&_e)>>4)===D){var Te=(15&_e)-8;0<=Te&&Te++;var je=Te*q;u.DEBUG&&console.log(x.step,"DELTACFIX",he,"by",je),x.cvt[he]+=je}}}function Ra(y,x){var M,T,D=x.stack,F=D.pop(),q=D.pop(),le=x.z2[F],he=x.z1[q];u.DEBUG&&console.log(x.step,"SDPVTL["+y+"]",F,q),T=y?(M=le.y-he.y,he.x-le.x):(M=he.x-le.x,he.y-le.y),x.dpv=xi(M,T)}function ln(y,x){var M=x.stack,T=x.prog,D=x.ip;u.DEBUG&&console.log(x.step,"PUSHB["+y+"]");for(var F=0;F<y;F++)M.push(T[++D]);x.ip=D}function un(y,x){var M=x.ip,T=x.prog,D=x.stack;u.DEBUG&&console.log(x.ip,"PUSHW["+y+"]");for(var F=0;F<y;F++){var q=T[++M]<<8|T[++M];32768&q&&(q=-(1+(65535^q))),D.push(q)}x.ip=M}function ct(y,x,M,T,D,F){var q,le,he,_e,Te=F.stack,je=y&&Te.pop(),ye=Te.pop(),tt=F.rp0,Ke=F.z0[tt],Ye=F.z1[ye],Ne=F.minDis,He=F.fv,at=F.dpv;he=0<=(le=q=at.distance(Ye,Ke,!0,!0))?1:-1,le=Math.abs(le),y&&(_e=F.cvt[je],T&&Math.abs(le-_e)<F.cvCutIn&&(le=_e)),M&&le<Ne&&(le=Ne),T&&(le=F.round(le)),He.setRelative(Ye,Ke,he*le,at),He.touch(Ye),u.DEBUG&&console.log(F.step,(y?"MIRP[":"MDRP[")+(x?"M":"m")+(M?">":"_")+(T?"R":"_")+(D===0?"Gr":D===1?"Bl":D===2?"Wh":"")+"]",y?je+"("+F.cvt[je]+","+_e+")":"",ye,"(d =",q,"->",he*le,")"),F.rp1=F.rp0,F.rp2=ye,x&&(F.rp0=ye)}fa.prototype.exec=function(y,x){if(typeof x!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var M=this.font,T=this._prepState;if(!T||T.ppem!==x){var D=this._fpgmState;if(!D){an.prototype=Qu,(D=this._fpgmState=new an("fpgm",M.tables.fpgm)).funcs=[],D.font=M,u.DEBUG&&(console.log("---EXEC FPGM---"),D.step=-1);try{_n(D)}catch(_e){return console.log("Hinting error in FPGM:"+_e),void(this._errorState=3)}}an.prototype=D,(T=this._prepState=new an("prep",M.tables.prep)).ppem=x;var F=M.tables.cvt;if(F)for(var q=T.cvt=new Array(F.length),le=x/M.unitsPerEm,he=0;he<F.length;he++)q[he]=F[he]*le;else T.cvt=[];u.DEBUG&&(console.log("---EXEC PREP---"),T.step=-1);try{_n(T)}catch(_e){this._errorState<2&&console.log("Hinting error in PREP:"+_e),this._errorState=2}}if(!(1<this._errorState))try{return ha(y,T)}catch(_e){return this._errorState<1&&(console.log("Hinting error:"+_e),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},ha=function(y,x){var M,T,D,F=x.ppem/x.font.unitsPerEm,q=F,le=y.components;if(an.prototype=x,le){var he=x.font;T=[],M=[];for(var _e=0;_e<le.length;_e++){var Te=le[_e],je=he.glyphs.get(Te.glyphIndex);D=new an("glyf",je.instructions),u.DEBUG&&(console.log("---EXEC COMP "+_e+"---"),D.step=-1),Is(je,D,F,q);for(var ye=Math.round(Te.dx*F),tt=Math.round(Te.dy*q),Ke=D.gZone,Ye=D.contours,Ne=0;Ne<Ke.length;Ne++){var He=Ke[Ne];He.xTouched=He.yTouched=!1,He.xo=He.x=He.x+ye,He.yo=He.y=He.y+tt}var at=T.length;T.push.apply(T,Ke);for(var ot=0;ot<Ye.length;ot++)M.push(Ye[ot]+at)}y.instructions&&!D.inhibitGridFit&&((D=new an("glyf",y.instructions)).gZone=D.z0=D.z1=D.z2=T,D.contours=M,T.push(new Jr(0,0),new Jr(Math.round(y.advanceWidth*F),0)),u.DEBUG&&(console.log("---EXEC COMPOSITE---"),D.step=-1),_n(D),T.length-=2)}else D=new an("glyf",y.instructions),u.DEBUG&&(console.log("---EXEC GLYPH---"),D.step=-1),Is(y,D,F,q),T=D.gZone;return T},Is=function(y,x,M,T){for(var D,F,q,le=y.points||[],he=le.length,_e=x.gZone=x.z0=x.z1=x.z2=[],Te=x.contours=[],je=0;je<he;je++)D=le[je],_e[je]=new Jr(D.x*M,D.y*T,D.lastPointOfContour,D.onCurve);for(var ye=0;ye<he;ye++)D=_e[ye],F||(F=D,Te.push(ye)),D.lastPointOfContour?((D.nextPointOnContour=F).prevPointOnContour=D,F=void 0):(q=_e[ye+1],(D.nextPointOnContour=q).prevPointOnContour=D);if(!x.inhibitGridFit){if(u.DEBUG){console.log("PROCESSING GLYPH",x.stack);for(var tt=0;tt<he;tt++)console.log(tt,_e[tt].x,_e[tt].y)}if(_e.push(new Jr(0,0),new Jr(Math.round(y.advanceWidth*M),0)),_n(x),_e.length-=2,u.DEBUG){console.log("FINISHED GLYPH",x.stack);for(var Ke=0;Ke<he;Ke++)console.log(Ke,_e[Ke].x,_e[Ke].y)}}},_n=function(y){var x=y.prog;if(x){var M,T=x.length;for(y.ip=0;y.ip<T;y.ip++){if(u.DEBUG&&y.step++,!(M=ca[x[y.ip]]))throw new Error("unknown instruction: 0x"+Number(x[y.ip]).toString(16));M(y)}}},ca=[ya.bind(void 0,Zr),ya.bind(void 0,Ur),va.bind(void 0,Zr),va.bind(void 0,Ur),ba.bind(void 0,Zr),ba.bind(void 0,Ur),_a.bind(void 0,0),_a.bind(void 0,1),xa.bind(void 0,0),xa.bind(void 0,1),function(y){var x=y.stack,M=x.pop(),T=x.pop();u.DEBUG&&console.log(y.step,"SPVFS[]",M,T),y.pv=y.dpv=xi(T,M)},function(y){var x=y.stack,M=x.pop(),T=x.pop();u.DEBUG&&console.log(y.step,"SPVFS[]",M,T),y.fv=xi(T,M)},function(y){var x=y.stack,M=y.pv;u.DEBUG&&console.log(y.step,"GPV[]"),x.push(16384*M.x),x.push(16384*M.y)},function(y){var x=y.stack,M=y.fv;u.DEBUG&&console.log(y.step,"GFV[]"),x.push(16384*M.x),x.push(16384*M.y)},function(y){y.fv=y.pv,u.DEBUG&&console.log(y.step,"SFVTPV[]")},function(y){var x=y.stack,M=x.pop(),T=x.pop(),D=x.pop(),F=x.pop(),q=x.pop(),le=y.z0,he=y.z1,_e=le[M],Te=le[T],je=he[D],ye=he[F],tt=y.z2[q];u.DEBUG&&console.log("ISECT[], ",M,T,D,F,q);var Ke=_e.x,Ye=_e.y,Ne=Te.x,He=Te.y,at=je.x,ot=je.y,Mt=ye.x,ht=ye.y,pt=(Ke-Ne)*(ot-ht)-(Ye-He)*(at-Mt),Gt=Ke*He-Ye*Ne,Ct=at*ht-ot*Mt;tt.x=(Gt*(at-Mt)-Ct*(Ke-Ne))/pt,tt.y=(Gt*(ot-ht)-Ct*(Ye-He))/pt},function(y){y.rp0=y.stack.pop(),u.DEBUG&&console.log(y.step,"SRP0[]",y.rp0)},function(y){y.rp1=y.stack.pop(),u.DEBUG&&console.log(y.step,"SRP1[]",y.rp1)},function(y){y.rp2=y.stack.pop(),u.DEBUG&&console.log(y.step,"SRP2[]",y.rp2)},function(y){var x=y.stack.pop();switch(u.DEBUG&&console.log(y.step,"SZP0[]",x),y.zp0=x){case 0:y.tZone||qi(y),y.z0=y.tZone;break;case 1:y.z0=y.gZone;break;default:throw new Error("Invalid zone pointer")}},function(y){var x=y.stack.pop();switch(u.DEBUG&&console.log(y.step,"SZP1[]",x),y.zp1=x){case 0:y.tZone||qi(y),y.z1=y.tZone;break;case 1:y.z1=y.gZone;break;default:throw new Error("Invalid zone pointer")}},function(y){var x=y.stack.pop();switch(u.DEBUG&&console.log(y.step,"SZP2[]",x),y.zp2=x){case 0:y.tZone||qi(y),y.z2=y.tZone;break;case 1:y.z2=y.gZone;break;default:throw new Error("Invalid zone pointer")}},function(y){var x=y.stack.pop();switch(u.DEBUG&&console.log(y.step,"SZPS[]",x),y.zp0=y.zp1=y.zp2=x,x){case 0:y.tZone||qi(y),y.z0=y.z1=y.z2=y.tZone;break;case 1:y.z0=y.z1=y.z2=y.gZone;break;default:throw new Error("Invalid zone pointer")}},function(y){y.loop=y.stack.pop(),u.DEBUG&&console.log(y.step,"SLOOP[]",y.loop)},function(y){u.DEBUG&&console.log(y.step,"RTG[]"),y.round=pa},function(y){u.DEBUG&&console.log(y.step,"RTHG[]"),y.round=Ju},function(y){var x=y.stack.pop();u.DEBUG&&console.log(y.step,"SMD[]",x),y.minDis=x/64},function(y){u.DEBUG&&console.log(y.step,"ELSE[]"),ga(y,!1)},function(y){var x=y.stack.pop();u.DEBUG&&console.log(y.step,"JMPR[]",x),y.ip+=x-1},function(y){var x=y.stack.pop();u.DEBUG&&console.log(y.step,"SCVTCI[]",x),y.cvCutIn=x/64},void 0,void 0,function(y){var x=y.stack;u.DEBUG&&console.log(y.step,"DUP[]"),x.push(x[x.length-1])},Os,function(y){u.DEBUG&&console.log(y.step,"CLEAR[]"),y.stack.length=0},function(y){var x=y.stack,M=x.pop(),T=x.pop();u.DEBUG&&console.log(y.step,"SWAP[]"),x.push(M),x.push(T)},function(y){var x=y.stack;u.DEBUG&&console.log(y.step,"DEPTH[]"),x.push(x.length)},function(y){var x=y.stack,M=x.pop();u.DEBUG&&console.log(y.step,"CINDEX[]",M),x.push(x[x.length-M])},function(y){var x=y.stack,M=x.pop();u.DEBUG&&console.log(y.step,"MINDEX[]",M),x.push(x.splice(x.length-M,1)[0])},void 0,void 0,void 0,function(y){var x=y.stack,M=x.pop(),T=x.pop();u.DEBUG&&console.log(y.step,"LOOPCALL[]",M,T);var D=y.ip,F=y.prog;y.prog=y.funcs[M];for(var q=0;q<T;q++)_n(y),u.DEBUG&&console.log(++y.step,q+1<T?"next loopcall":"done loopcall",q);y.ip=D,y.prog=F},function(y){var x=y.stack.pop();u.DEBUG&&console.log(y.step,"CALL[]",x);var M=y.ip,T=y.prog;y.prog=y.funcs[x],_n(y),y.ip=M,y.prog=T,u.DEBUG&&console.log(++y.step,"returning from",x)},function(y){if(y.env!=="fpgm")throw new Error("FDEF not allowed here");var x=y.stack,M=y.prog,T=y.ip,D=x.pop(),F=T;for(u.DEBUG&&console.log(y.step,"FDEF[]",D);M[++T]!==45;);y.ip=T,y.funcs[D]=M.slice(F+1,T)},void 0,wa.bind(void 0,0),wa.bind(void 0,1),Sa.bind(void 0,Zr),Sa.bind(void 0,Ur),Ma.bind(void 0,0),Ma.bind(void 0,1),Ea.bind(void 0,0),Ea.bind(void 0,1),Ta.bind(void 0,0),Ta.bind(void 0,1),function(y){for(var x=y.stack,M=y.loop,T=y.fv,D=x.pop()/64,F=y.z2;M--;){var q=x.pop(),le=F[q];u.DEBUG&&console.log(y.step,(1<y.loop?"loop "+(y.loop-M)+": ":"")+"SHPIX[]",q,D),T.setRelative(le,le,D),T.touch(le)}y.loop=1},function(y){for(var x=y.stack,M=y.rp1,T=y.rp2,D=y.loop,F=y.z0[M],q=y.z1[T],le=y.fv,he=y.dpv,_e=y.z2;D--;){var Te=x.pop(),je=_e[Te];u.DEBUG&&console.log(y.step,(1<y.loop?"loop "+(y.loop-D)+": ":"")+"IP[]",Te,M,"<->",T),le.interpolate(je,F,q,he),le.touch(je)}y.loop=1},Aa.bind(void 0,0),Aa.bind(void 0,1),function(y){for(var x=y.stack,M=y.rp0,T=y.z0[M],D=y.loop,F=y.fv,q=y.pv,le=y.z1;D--;){var he=x.pop(),_e=le[he];u.DEBUG&&console.log(y.step,(1<y.loop?"loop "+(y.loop-D)+": ":"")+"ALIGNRP[]",he),F.setRelative(_e,T,0,q),F.touch(_e)}y.loop=1},function(y){u.DEBUG&&console.log(y.step,"RTDG[]"),y.round=Zu},Ca.bind(void 0,0),Ca.bind(void 0,1),function(y){var x=y.prog,M=y.ip,T=y.stack,D=x[++M];u.DEBUG&&console.log(y.step,"NPUSHB[]",D);for(var F=0;F<D;F++)T.push(x[++M]);y.ip=M},function(y){var x=y.ip,M=y.prog,T=y.stack,D=M[++x];u.DEBUG&&console.log(y.step,"NPUSHW[]",D);for(var F=0;F<D;F++){var q=M[++x]<<8|M[++x];32768&q&&(q=-(1+(65535^q))),T.push(q)}y.ip=x},function(y){var x=y.stack,M=y.store;M=M||(y.store=[]);var T=x.pop(),D=x.pop();u.DEBUG&&console.log(y.step,"WS",T,D),M[D]=T},function(y){var x=y.stack,M=y.store,T=x.pop();u.DEBUG&&console.log(y.step,"RS",T);var D=M&&M[T]||0;x.push(D)},function(y){var x=y.stack,M=x.pop(),T=x.pop();u.DEBUG&&console.log(y.step,"WCVTP",M,T),y.cvt[T]=M/64},function(y){var x=y.stack,M=x.pop();u.DEBUG&&console.log(y.step,"RCVT",M),x.push(64*y.cvt[M])},La.bind(void 0,0),La.bind(void 0,1),void 0,Pa.bind(void 0,0),Pa.bind(void 0,1),function(y){u.DEBUG&&console.log(y.step,"MPPEM[]"),y.stack.push(y.ppem)},void 0,function(y){u.DEBUG&&console.log(y.step,"FLIPON[]"),y.autoFlip=!0},void 0,void 0,function(y){var x=y.stack,M=x.pop(),T=x.pop();u.DEBUG&&console.log(y.step,"LT[]",M,T),x.push(T<M?1:0)},function(y){var x=y.stack,M=x.pop(),T=x.pop();u.DEBUG&&console.log(y.step,"LTEQ[]",M,T),x.push(T<=M?1:0)},function(y){var x=y.stack,M=x.pop(),T=x.pop();u.DEBUG&&console.log(y.step,"GT[]",M,T),x.push(M<T?1:0)},function(y){var x=y.stack,M=x.pop(),T=x.pop();u.DEBUG&&console.log(y.step,"GTEQ[]",M,T),x.push(M<=T?1:0)},function(y){var x=y.stack,M=x.pop(),T=x.pop();u.DEBUG&&console.log(y.step,"EQ[]",M,T),x.push(M===T?1:0)},function(y){var x=y.stack,M=x.pop(),T=x.pop();u.DEBUG&&console.log(y.step,"NEQ[]",M,T),x.push(M!==T?1:0)},function(y){var x=y.stack,M=x.pop();u.DEBUG&&console.log(y.step,"ODD[]",M),x.push(Math.trunc(M)%2?1:0)},function(y){var x=y.stack,M=x.pop();u.DEBUG&&console.log(y.step,"EVEN[]",M),x.push(Math.trunc(M)%2?0:1)},function(y){var x=y.stack.pop();u.DEBUG&&console.log(y.step,"IF[]",x),x||(ga(y,!0),u.DEBUG&&console.log(y.step,"EIF[]"))},function(y){u.DEBUG&&console.log(y.step,"EIF[]")},function(y){var x=y.stack,M=x.pop(),T=x.pop();u.DEBUG&&console.log(y.step,"AND[]",M,T),x.push(M&&T?1:0)},function(y){var x=y.stack,M=x.pop(),T=x.pop();u.DEBUG&&console.log(y.step,"OR[]",M,T),x.push(M||T?1:0)},function(y){var x=y.stack,M=x.pop();u.DEBUG&&console.log(y.step,"NOT[]",M),x.push(M?0:1)},ks.bind(void 0,1),function(y){var x=y.stack.pop();u.DEBUG&&console.log(y.step,"SDB[]",x),y.deltaBase=x},function(y){var x=y.stack.pop();u.DEBUG&&console.log(y.step,"SDS[]",x),y.deltaShift=Math.pow(.5,x)},function(y){var x=y.stack,M=x.pop(),T=x.pop();u.DEBUG&&console.log(y.step,"ADD[]",M,T),x.push(T+M)},function(y){var x=y.stack,M=x.pop(),T=x.pop();u.DEBUG&&console.log(y.step,"SUB[]",M,T),x.push(T-M)},function(y){var x=y.stack,M=x.pop(),T=x.pop();u.DEBUG&&console.log(y.step,"DIV[]",M,T),x.push(64*T/M)},function(y){var x=y.stack,M=x.pop(),T=x.pop();u.DEBUG&&console.log(y.step,"MUL[]",M,T),x.push(T*M/64)},function(y){var x=y.stack,M=x.pop();u.DEBUG&&console.log(y.step,"ABS[]",M),x.push(Math.abs(M))},function(y){var x=y.stack,M=x.pop();u.DEBUG&&console.log(y.step,"NEG[]",M),x.push(-M)},function(y){var x=y.stack,M=x.pop();u.DEBUG&&console.log(y.step,"FLOOR[]",M),x.push(64*Math.floor(M/64))},function(y){var x=y.stack,M=x.pop();u.DEBUG&&console.log(y.step,"CEILING[]",M),x.push(64*Math.ceil(M/64))},Xi.bind(void 0,0),Xi.bind(void 0,1),Xi.bind(void 0,2),Xi.bind(void 0,3),void 0,void 0,void 0,void 0,function(y){var x=y.stack,M=x.pop(),T=x.pop();u.DEBUG&&console.log(y.step,"WCVTF[]",M,T),y.cvt[T]=M*y.ppem/y.font.unitsPerEm},ks.bind(void 0,2),ks.bind(void 0,3),Ns.bind(void 0,1),Ns.bind(void 0,2),Ns.bind(void 0,3),function(y){var x,M=y.stack.pop();switch(u.DEBUG&&console.log(y.step,"SROUND[]",M),y.round=ma,192&M){case 0:x=.5;break;case 64:x=1;break;case 128:x=2;break;default:throw new Error("invalid SROUND value")}switch(y.srPeriod=x,48&M){case 0:y.srPhase=0;break;case 16:y.srPhase=.25*x;break;case 32:y.srPhase=.5*x;break;case 48:y.srPhase=.75*x;break;default:throw new Error("invalid SROUND value")}M&=15,y.srThreshold=M===0?0:(M/8-.5)*x},function(y){var x,M=y.stack.pop();switch(u.DEBUG&&console.log(y.step,"S45ROUND[]",M),y.round=ma,192&M){case 0:x=Math.sqrt(2)/2;break;case 64:x=Math.sqrt(2);break;case 128:x=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(y.srPeriod=x,48&M){case 0:y.srPhase=0;break;case 16:y.srPhase=.25*x;break;case 32:y.srPhase=.5*x;break;case 48:y.srPhase=.75*x;break;default:throw new Error("invalid S45ROUND value")}M&=15,y.srThreshold=M===0?0:(M/8-.5)*x},void 0,void 0,function(y){u.DEBUG&&console.log(y.step,"ROFF[]"),y.round=Yu},void 0,function(y){u.DEBUG&&console.log(y.step,"RUTG[]"),y.round=$u},function(y){u.DEBUG&&console.log(y.step,"RDTG[]"),y.round=Ku},Os,Os,void 0,void 0,void 0,void 0,void 0,function(y){var x=y.stack.pop();u.DEBUG&&console.log(y.step,"SCANCTRL[]",x)},Ra.bind(void 0,0),Ra.bind(void 0,1),function(y){var x=y.stack,M=x.pop(),T=0;u.DEBUG&&console.log(y.step,"GETINFO[]",M),1&M&&(T=35),32&M&&(T|=4096),x.push(T)},void 0,function(y){var x=y.stack,M=x.pop(),T=x.pop(),D=x.pop();u.DEBUG&&console.log(y.step,"ROLL[]"),x.push(T),x.push(M),x.push(D)},function(y){var x=y.stack,M=x.pop(),T=x.pop();u.DEBUG&&console.log(y.step,"MAX[]",M,T),x.push(Math.max(T,M))},function(y){var x=y.stack,M=x.pop(),T=x.pop();u.DEBUG&&console.log(y.step,"MIN[]",M,T),x.push(Math.min(T,M))},function(y){var x=y.stack.pop();u.DEBUG&&console.log(y.step,"SCANTYPE[]",x)},function(y){var x=y.stack.pop(),M=y.stack.pop();switch(u.DEBUG&&console.log(y.step,"INSTCTRL[]",x,M),x){case 1:return void(y.inhibitGridFit=!!M);case 2:return void(y.ignoreCvt=!!M);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,ln.bind(void 0,1),ln.bind(void 0,2),ln.bind(void 0,3),ln.bind(void 0,4),ln.bind(void 0,5),ln.bind(void 0,6),ln.bind(void 0,7),ln.bind(void 0,8),un.bind(void 0,1),un.bind(void 0,2),un.bind(void 0,3),un.bind(void 0,4),un.bind(void 0,5),un.bind(void 0,6),un.bind(void 0,7),un.bind(void 0,8),ct.bind(void 0,0,0,0,0,0),ct.bind(void 0,0,0,0,0,1),ct.bind(void 0,0,0,0,0,2),ct.bind(void 0,0,0,0,0,3),ct.bind(void 0,0,0,0,1,0),ct.bind(void 0,0,0,0,1,1),ct.bind(void 0,0,0,0,1,2),ct.bind(void 0,0,0,0,1,3),ct.bind(void 0,0,0,1,0,0),ct.bind(void 0,0,0,1,0,1),ct.bind(void 0,0,0,1,0,2),ct.bind(void 0,0,0,1,0,3),ct.bind(void 0,0,0,1,1,0),ct.bind(void 0,0,0,1,1,1),ct.bind(void 0,0,0,1,1,2),ct.bind(void 0,0,0,1,1,3),ct.bind(void 0,0,1,0,0,0),ct.bind(void 0,0,1,0,0,1),ct.bind(void 0,0,1,0,0,2),ct.bind(void 0,0,1,0,0,3),ct.bind(void 0,0,1,0,1,0),ct.bind(void 0,0,1,0,1,1),ct.bind(void 0,0,1,0,1,2),ct.bind(void 0,0,1,0,1,3),ct.bind(void 0,0,1,1,0,0),ct.bind(void 0,0,1,1,0,1),ct.bind(void 0,0,1,1,0,2),ct.bind(void 0,0,1,1,0,3),ct.bind(void 0,0,1,1,1,0),ct.bind(void 0,0,1,1,1,1),ct.bind(void 0,0,1,1,1,2),ct.bind(void 0,0,1,1,1,3),ct.bind(void 0,1,0,0,0,0),ct.bind(void 0,1,0,0,0,1),ct.bind(void 0,1,0,0,0,2),ct.bind(void 0,1,0,0,0,3),ct.bind(void 0,1,0,0,1,0),ct.bind(void 0,1,0,0,1,1),ct.bind(void 0,1,0,0,1,2),ct.bind(void 0,1,0,0,1,3),ct.bind(void 0,1,0,1,0,0),ct.bind(void 0,1,0,1,0,1),ct.bind(void 0,1,0,1,0,2),ct.bind(void 0,1,0,1,0,3),ct.bind(void 0,1,0,1,1,0),ct.bind(void 0,1,0,1,1,1),ct.bind(void 0,1,0,1,1,2),ct.bind(void 0,1,0,1,1,3),ct.bind(void 0,1,1,0,0,0),ct.bind(void 0,1,1,0,0,1),ct.bind(void 0,1,1,0,0,2),ct.bind(void 0,1,1,0,0,3),ct.bind(void 0,1,1,0,1,0),ct.bind(void 0,1,1,0,1,1),ct.bind(void 0,1,1,0,1,2),ct.bind(void 0,1,1,0,1,3),ct.bind(void 0,1,1,1,0,0),ct.bind(void 0,1,1,1,0,1),ct.bind(void 0,1,1,1,0,2),ct.bind(void 0,1,1,1,0,3),ct.bind(void 0,1,1,1,1,0),ct.bind(void 0,1,1,1,1,1),ct.bind(void 0,1,1,1,1,2),ct.bind(void 0,1,1,1,1,3)];var ec=Array.from||function(y){return y.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function kt(y){(y=y||{}).empty||(zn(y.familyName,"When creating a new Font object, familyName is required."),zn(y.styleName,"When creating a new Font object, styleName is required."),zn(y.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),zn(y.ascender,"When creating a new Font object, ascender is required."),zn(y.descender,"When creating a new Font object, descender is required."),zn(y.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:y.familyName||" "},fontSubfamily:{en:y.styleName||" "},fullName:{en:y.fullName||y.familyName+" "+y.styleName},postScriptName:{en:y.postScriptName||(y.familyName+y.styleName).replace(/\s/g,"")},designer:{en:y.designer||" "},designerURL:{en:y.designerURL||" "},manufacturer:{en:y.manufacturer||" "},manufacturerURL:{en:y.manufacturerURL||" "},license:{en:y.license||" "},licenseURL:{en:y.licenseURL||" "},version:{en:y.version||"Version 0.1"},description:{en:y.description||" "},copyright:{en:y.copyright||" "},trademark:{en:y.trademark||" "}},this.unitsPerEm=y.unitsPerEm||1e3,this.ascender=y.ascender,this.descender=y.descender,this.createdTimestamp=y.createdTimestamp,this.tables={os2:{usWeightClass:y.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:y.widthClass||this.usWidthClasses.MEDIUM,fsSelection:y.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new dt.GlyphSet(this,y.glyphs||[]),this.encoding=new Ee(this),this.position=new Wi(this),this.substitution=new Fr(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:this.outlinesFormat==="truetype"?this._hinting=new fa(this):void 0}})}function Da(y,x){var M=JSON.stringify(y),T=256;for(var D in x){var F=parseInt(D);if(F&&!(F<256)){if(JSON.stringify(x[D])===M)return F;T<=F&&(T=F+1)}}return x[T]=y,T}function tc(y,x,M,T){for(var D=[{name:"nameID_"+y,type:"USHORT",value:Da(x.name,T)},{name:"flags_"+y,type:"USHORT",value:0}],F=0;F<M.length;++F){var q=M[F].tag;D.push({name:"axis_"+y+" "+q,type:"FIXED",value:x.coordinates[q]<<16})}return D}function rc(y,x,M,T){var D={},F=new k.Parser(y,x);D.name=T[F.parseUShort()]||{},F.skip("uShort",1),D.coordinates={};for(var q=0;q<M.length;++q)D.coordinates[M[q].tag]=F.parseFixed();return D}kt.prototype.hasChar=function(y){return this.encoding.charToGlyphIndex(y)!==null},kt.prototype.charToGlyphIndex=function(y){return this.encoding.charToGlyphIndex(y)},kt.prototype.charToGlyph=function(y){var x=this.charToGlyphIndex(y),M=this.glyphs.get(x);return M=M||this.glyphs.get(0)},kt.prototype.stringToGlyphs=function(y,x){x=x||this.defaultRenderOptions;for(var M=ec(y),T=[],D=0;D<M.length;D+=1){var F=M[D];T.push(this.charToGlyphIndex(F))}var q=T.length;if(x.features){var le=x.script||this.substitution.getDefaultScriptName(),he=[];x.features.liga&&(he=he.concat(this.substitution.getFeature("liga",le,x.language))),x.features.rlig&&(he=he.concat(this.substitution.getFeature("rlig",le,x.language)));for(var _e=0;_e<q;_e+=1)for(var Te=0;Te<he.length;Te++){for(var je=he[Te],ye=je.sub,tt=ye.length,Ke=0;Ke<tt&&ye[Ke]===T[_e+Ke];)Ke++;Ke===tt&&(T.splice(_e,tt,je.by),q=q-tt+1)}}for(var Ye=new Array(q),Ne=this.glyphs.get(0),He=0;He<q;He+=1)Ye[He]=this.glyphs.get(T[He])||Ne;return Ye},kt.prototype.nameToGlyphIndex=function(y){return this.glyphNames.nameToGlyphIndex(y)},kt.prototype.nameToGlyph=function(y){var x=this.nameToGlyphIndex(y),M=this.glyphs.get(x);return M=M||this.glyphs.get(0)},kt.prototype.glyphIndexToName=function(y){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(y):""},kt.prototype.getKerningValue=function(y,x){y=y.index||y,x=x.index||x;var M=this.position.defaultKerningTables;return M?this.position.getKerningValue(M,y,x):this.kerningPairs[y+","+x]||0},kt.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},kt.prototype.forEachGlyph=function(y,x,M,T,D,F){x=x!==void 0?x:0,M=M!==void 0?M:0,T=T!==void 0?T:72,D=D||this.defaultRenderOptions;var q,le=1/this.unitsPerEm*T,he=this.stringToGlyphs(y,D);if(D.kerning){var _e=D.script||this.position.getDefaultScriptName();q=this.position.getKerningTables(_e,D.language)}for(var Te=0;Te<he.length;Te+=1){var je=he[Te];F.call(this,je,x,M,T,D),je.advanceWidth&&(x+=je.advanceWidth*le),D.kerning&&Te<he.length-1&&(x+=(q?this.position.getKerningValue(q,je.index,he[Te+1].index):this.getKerningValue(je,he[Te+1]))*le),D.letterSpacing?x+=D.letterSpacing*T:D.tracking&&(x+=D.tracking/1e3*T)}return x},kt.prototype.getPath=function(y,x,M,T,D){var F=new ge;return this.forEachGlyph(y,x,M,T,D,function(q,le,he,_e){var Te=q.getPath(le,he,_e,D,this);F.extend(Te)}),F},kt.prototype.getPaths=function(y,x,M,T,D){var F=[];return this.forEachGlyph(y,x,M,T,D,function(q,le,he,_e){var Te=q.getPath(le,he,_e,D,this);F.push(Te)}),F},kt.prototype.getAdvanceWidth=function(y,x,M){return this.forEachGlyph(y,0,0,x,M,function(){})},kt.prototype.draw=function(y,x,M,T,D,F){this.getPath(x,M,T,D,F).draw(y)},kt.prototype.drawPoints=function(y,x,M,T,D,F){this.forEachGlyph(x,M,T,D,F,function(q,le,he,_e){q.drawPoints(y,le,he,_e)})},kt.prototype.drawMetrics=function(y,x,M,T,D,F){this.forEachGlyph(x,M,T,D,F,function(q,le,he,_e){q.drawMetrics(y,le,he,_e)})},kt.prototype.getEnglishName=function(y){var x=this.names[y];if(x)return x.en},kt.prototype.validate=function(){var y=this;function x(M){var T=y.getEnglishName(M);T&&T.trim().length}x("fontFamily"),x("weightName"),x("manufacturer"),x("copyright"),x("version"),this.unitsPerEm},kt.prototype.toTables=function(){return Hu.fontToTable(this)},kt.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},kt.prototype.toArrayBuffer=function(){for(var y=this.toTables().encode(),x=new ArrayBuffer(y.length),M=new Uint8Array(x),T=0;T<y.length;T++)M[T]=y[T];return x},kt.prototype.download=function(y){var x=this.getEnglishName("fontFamily"),M=this.getEnglishName("fontSubfamily");y=y||x.replace(/\s/g,"")+"-"+M+".otf";var T=this.toArrayBuffer();if(typeof window!="undefined")window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,T.byteLength,function(q){q.root.getFile(y,{create:!0},function(le){le.createWriter(function(he){var _e=new DataView(T),Te=new Blob([_e],{type:"font/opentype"});he.write(Te),he.addEventListener("writeend",function(){location.href=le.toURL()},!1)})})},function(q){throw new Error(q.name+": "+q.message)});else{var D=t("fs"),F=function(q){for(var le=new p(q.byteLength),he=new Uint8Array(q),_e=0;_e<le.length;++_e)le[_e]=he[_e];return le}(T);D.writeFileSync(y,F)}},kt.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},kt.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},kt.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var nc={make:function(y,x){var M,T,D,F,q=new Ie.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:y.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:y.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*y.axes.length}]);q.offsetToData=q.sizeOf();for(var le=0;le<y.axes.length;le++)q.fields=q.fields.concat((M=le,T=y.axes[le],D=x,F=Da(T.name,D),[{name:"tag_"+M,type:"TAG",value:T.tag},{name:"minValue_"+M,type:"FIXED",value:T.minValue<<16},{name:"defaultValue_"+M,type:"FIXED",value:T.defaultValue<<16},{name:"maxValue_"+M,type:"FIXED",value:T.maxValue<<16},{name:"flags_"+M,type:"USHORT",value:0},{name:"nameID_"+M,type:"USHORT",value:F}]));for(var he=0;he<y.instances.length;he++)q.fields=q.fields.concat(tc(he,y.instances[he],y.axes,x));return q},parse:function(y,x,M){var T=new k.Parser(y,x),D=T.parseULong();z.argument(D===65536,"Unsupported fvar table version.");var F=T.parseOffset16();T.skip("uShort",1);for(var q,le,he,_e,Te,je=T.parseUShort(),ye=T.parseUShort(),tt=T.parseUShort(),Ke=T.parseUShort(),Ye=[],Ne=0;Ne<je;Ne++)Ye.push((q=y,le=x+F+Ne*ye,he=M,Te=_e=void 0,_e={},Te=new k.Parser(q,le),_e.tag=Te.parseTag(),_e.minValue=Te.parseFixed(),_e.defaultValue=Te.parseFixed(),_e.maxValue=Te.parseFixed(),Te.skip("uShort",1),_e.name=he[Te.parseUShort()]||{},_e));for(var He=[],at=x+F+je*ye,ot=0;ot<tt;ot++)He.push(rc(y,at+ot*Ke,Ye,M));return{axes:Ye,instances:He}}},Ar=new Array(10);Ar[1]=function(){var y=this.offset+this.relativeOffset,x=this.parseUShort();return x===1?{posFormat:1,coverage:this.parsePointer(be.coverage),value:this.parseValueRecord()}:x===2?{posFormat:2,coverage:this.parsePointer(be.coverage),values:this.parseValueRecordList()}:void z.assert(!1,"0x"+y.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Ar[2]=function(){var y=this.offset+this.relativeOffset,x=this.parseUShort();z.assert(x===1||x===2,"0x"+y.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var M=this.parsePointer(be.coverage),T=this.parseUShort(),D=this.parseUShort();if(x===1)return{posFormat:x,coverage:M,valueFormat1:T,valueFormat2:D,pairSets:this.parseList(be.pointer(be.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(T),value2:this.parseValueRecord(D)}})))};if(x===2){var F=this.parsePointer(be.classDef),q=this.parsePointer(be.classDef),le=this.parseUShort(),he=this.parseUShort();return{posFormat:x,coverage:M,valueFormat1:T,valueFormat2:D,classDef1:F,classDef2:q,class1Count:le,class2Count:he,classRecords:this.parseList(le,be.list(he,function(){return{value1:this.parseValueRecord(T),value2:this.parseValueRecord(D)}}))}}},Ar[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Ar[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Ar[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Ar[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Ar[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Ar[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Ar[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var ic=new Array(10),sc={parse:function(y,x){var M=new be(y,x=x||0),T=M.parseVersion(1);return z.argument(T===1||T===1.1,"Unsupported GPOS table version "+T),T===1?{version:T,scripts:M.parseScriptList(),features:M.parseFeatureList(),lookups:M.parseLookupList(Ar)}:{version:T,scripts:M.parseScriptList(),features:M.parseFeatureList(),lookups:M.parseLookupList(Ar),variations:M.parseFeatureVariationsList()}},make:function(y){return new Ie.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Ie.ScriptList(y.scripts)},{name:"features",type:"TABLE",value:new Ie.FeatureList(y.features)},{name:"lookups",type:"TABLE",value:new Ie.LookupList(y.lookups,ic)}])}},oc={parse:function(y,x){var M=new k.Parser(y,x),T=M.parseUShort();if(T===0)return function(D){var F={};D.skip("uShort");var q=D.parseUShort();z.argument(q===0,"Unsupported kern sub-table version."),D.skip("uShort",2);var le=D.parseUShort();D.skip("uShort",3);for(var he=0;he<le;he+=1){var _e=D.parseUShort(),Te=D.parseUShort(),je=D.parseShort();F[_e+","+Te]=je}return F}(M);if(T===1)return function(D){var F={};D.skip("uShort"),1<D.parseULong()&&console.warn("Only the first kern subtable is supported."),D.skip("uLong");var q=255&D.parseUShort();if(D.skip("uShort"),q==0){var le=D.parseUShort();D.skip("uShort",3);for(var he=0;he<le;he+=1){var _e=D.parseUShort(),Te=D.parseUShort(),je=D.parseShort();F[_e+","+Te]=je}}return F}(M);throw new Error("Unsupported kern table version ("+T+").")}},ac={parse:function(y,x,M,T){for(var D=new k.Parser(y,x),F=T?D.parseUShort:D.parseULong,q=[],le=0;le<M+1;le+=1){var he=F.call(D);T&&(he*=2),q.push(he)}return q}};function lc(y,x){t("fs").readFile(y,function(M,T){if(M)return x(M.message);x(null,aa(T))})}function uc(y,x){var M=new XMLHttpRequest;M.open("get",y,!0),M.responseType="arraybuffer",M.onload=function(){return M.response?x(null,M.response):x("Font could not be loaded: "+M.statusText)},M.onerror=function(){x("Font could not be loaded")},M.send()}function ja(y,x){for(var M=[],T=12,D=0;D<x;D+=1){var F=k.getTag(y,T),q=k.getULong(y,T+4),le=k.getULong(y,T+8),he=k.getULong(y,T+12);M.push({tag:F,checksum:q,offset:le,length:he,compression:!1}),T+=16}return M}function Yt(y,x){if(x.compression!=="WOFF")return{data:y,offset:x.offset};var M=new Uint8Array(y.buffer,x.offset+2,x.compressedLength-2),T=new Uint8Array(x.length);if(H(M,T),T.byteLength!==x.length)throw new Error("Decompression error: "+x.tag+" decompressed length doesn't match recorded length");return{data:new DataView(T.buffer,0),offset:0}}function Fs(y){var x,M,T,D,F,q,le,he,_e,Te,je,ye,tt,Ke,Ye=new kt({empty:!0}),Ne=new DataView(y,0),He=[],at=k.getTag(Ne,0);if(at===String.fromCharCode(0,1,0,0)||at==="true"||at==="typ1")Ye.outlinesFormat="truetype",He=ja(Ne,T=k.getUShort(Ne,4));else if(at==="OTTO")Ye.outlinesFormat="cff",He=ja(Ne,T=k.getUShort(Ne,4));else{if(at!=="wOFF")throw new Error("Unsupported OpenType signature "+at);var ot=k.getTag(Ne,4);if(ot===String.fromCharCode(0,1,0,0))Ye.outlinesFormat="truetype";else{if(ot!=="OTTO")throw new Error("Unsupported OpenType flavor "+at);Ye.outlinesFormat="cff"}He=function(Pt,Xt){for(var Nt=[],Ft=44,Br=0;Br<Xt;Br+=1){var Vn=k.getTag(Pt,Ft),xn=k.getULong(Pt,Ft+4),vr=k.getULong(Pt,Ft+8),wn=k.getULong(Pt,Ft+12),Hn=void 0;Hn=vr<wn&&"WOFF",Nt.push({tag:Vn,offset:xn,compression:Hn,compressedLength:vr,length:wn}),Ft+=20}return Nt}(Ne,T=k.getUShort(Ne,12))}for(var Mt=0;Mt<T;Mt+=1){var ht=He[Mt],pt=void 0;switch(ht.tag){case"cmap":pt=Yt(Ne,ht),Ye.tables.cmap=Q.parse(pt.data,pt.offset),Ye.encoding=new ke(Ye.tables.cmap);break;case"cvt ":pt=Yt(Ne,ht),Ke=new k.Parser(pt.data,pt.offset),Ye.tables.cvt=Ke.parseShortList(ht.length/2);break;case"fvar":F=ht;break;case"fpgm":pt=Yt(Ne,ht),Ke=new k.Parser(pt.data,pt.offset),Ye.tables.fpgm=Ke.parseByteList(ht.length);break;case"head":pt=Yt(Ne,ht),Ye.tables.head=et.parse(pt.data,pt.offset),Ye.unitsPerEm=Ye.tables.head.unitsPerEm,x=Ye.tables.head.indexToLocFormat;break;case"hhea":pt=Yt(Ne,ht),Ye.tables.hhea=qe.parse(pt.data,pt.offset),Ye.ascender=Ye.tables.hhea.ascender,Ye.descender=Ye.tables.hhea.descender,Ye.numberOfHMetrics=Ye.tables.hhea.numberOfHMetrics;break;case"hmtx":_e=ht;break;case"ltag":pt=Yt(Ne,ht),M=St.parse(pt.data,pt.offset);break;case"maxp":pt=Yt(Ne,ht),Ye.tables.maxp=wt.parse(pt.data,pt.offset),Ye.numGlyphs=Ye.tables.maxp.numGlyphs;break;case"name":ye=ht;break;case"OS/2":pt=Yt(Ne,ht),Ye.tables.os2=Ps.parse(pt.data,pt.offset);break;case"post":pt=Yt(Ne,ht),Ye.tables.post=$o.parse(pt.data,pt.offset),Ye.glyphNames=new Je(Ye.tables.post);break;case"prep":pt=Yt(Ne,ht),Ke=new k.Parser(pt.data,pt.offset),Ye.tables.prep=Ke.parseByteList(ht.length);break;case"glyf":q=ht;break;case"loca":je=ht;break;case"CFF ":D=ht;break;case"kern":Te=ht;break;case"GPOS":le=ht;break;case"GSUB":he=ht;break;case"meta":tt=ht}}var Gt=Yt(Ne,ye);if(Ye.tables.name=Jo.parse(Gt.data,Gt.offset,M),Ye.names=Ye.tables.name,q&&je){var Ct=x===0,Et=Yt(Ne,je),Lt=ac.parse(Et.data,Et.offset,Ye.numGlyphs,Ct),jt=Yt(Ne,q);Ye.glyphs=da.parse(jt.data,jt.offset,Lt,Ye)}else{if(!D)throw new Error("Font doesn't contain TrueType or CFF outlines.");var Rt=Yt(Ne,D);ze.parse(Rt.data,Rt.offset,Ye)}var Ut=Yt(Ne,_e);if(xt.parse(Ut.data,Ut.offset,Ye.numberOfHMetrics,Ye.numGlyphs,Ye.glyphs),function(Pt){for(var Xt,Nt=Pt.tables.cmap.glyphIndexMap,Ft=Object.keys(Nt),Br=0;Br<Ft.length;Br+=1){var Vn=Ft[Br],xn=Nt[Vn];(Xt=Pt.glyphs.get(xn)).addUnicode(parseInt(Vn))}for(var vr=0;vr<Pt.glyphs.length;vr+=1)Xt=Pt.glyphs.get(vr),Pt.cffEncoding?Pt.isCIDFont?Xt.name="gid"+vr:Xt.name=Pt.cffEncoding.charset[vr]:Pt.glyphNames.names&&(Xt.name=Pt.glyphNames.glyphIndexToName(vr))}(Ye),Te){var It=Yt(Ne,Te);Ye.kerningPairs=oc.parse(It.data,It.offset)}else Ye.kerningPairs={};if(le){var Dt=Yt(Ne,le);Ye.tables.gpos=sc.parse(Dt.data,Dt.offset),Ye.position.init()}if(he){var Bt=Yt(Ne,he);Ye.tables.gsub=Ko.parse(Bt.data,Bt.offset)}if(F){var Ot=Yt(Ne,F);Ye.tables.fvar=nc.parse(Ot.data,Ot.offset,Ye.names)}if(tt){var Wt=Yt(Ne,tt);Ye.tables.meta=Qo.parse(Wt.data,Wt.offset),Ye.metas=Ye.tables.meta}return Ye}u.Font=kt,u.Glyph=ut,u.Path=ge,u.BoundingBox=Z,u._parse=k,u.parse=Fs,u.load=function(y,x){(typeof window=="undefined"?lc:uc)(y,function(M,T){if(M)return x(M);var D;try{D=Fs(T)}catch(F){return x(F,null)}return x(null,D)})},u.loadSync=function(y){return Fs(aa(t("fs").readFileSync(y)))},Object.defineProperty(u,"__esModule",{value:!0})},h(typeof m=="object"&&g!==void 0?m:r.opentype={})}).call(this,t("buffer").Buffer)},{buffer:4,fs:2}],240:[function(t,g,m){(function(p){function r(d,c){for(var i=0,n=d.length-1;0<=n;n--){var o=d[n];o==="."?d.splice(n,1):o===".."?(d.splice(n,1),i++):i&&(d.splice(n,1),i--)}if(c)for(;i--;)d.unshift("..");return d}function h(d,c){if(d.filter)return d.filter(c);for(var i=[],n=0;n<d.length;n++)c(d[n],n,d)&&i.push(d[n]);return i}m.resolve=function(){for(var d="",c=!1,i=arguments.length-1;-1<=i&&!c;i--){var n=0<=i?arguments[i]:p.cwd();if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");n&&(d=n+"/"+d,c=n.charAt(0)==="/")}return(c?"/":"")+(d=r(h(d.split("/"),function(o){return!!o}),!c).join("/"))||"."},m.normalize=function(d){var c=m.isAbsolute(d),i=u(d,-1)==="/";return(d=r(h(d.split("/"),function(n){return!!n}),!c).join("/"))||c||(d="."),d&&i&&(d+="/"),(c?"/":"")+d},m.isAbsolute=function(d){return d.charAt(0)==="/"},m.join=function(){var d=Array.prototype.slice.call(arguments,0);return m.normalize(h(d,function(c,i){if(typeof c!="string")throw new TypeError("Arguments to path.join must be strings");return c}).join("/"))},m.relative=function(d,c){function i(b){for(var _=0;_<b.length&&b[_]==="";_++);for(var w=b.length-1;0<=w&&b[w]==="";w--);return w<_?[]:b.slice(_,w-_+1)}d=m.resolve(d).substr(1),c=m.resolve(c).substr(1);for(var n=i(d.split("/")),o=i(c.split("/")),l=Math.min(n.length,o.length),a=l,f=0;f<l;f++)if(n[f]!==o[f]){a=f;break}var v=[];for(f=a;f<n.length;f++)v.push("..");return(v=v.concat(o.slice(a))).join("/")},m.sep="/",m.delimiter=":",m.dirname=function(d){if(typeof d!="string"&&(d+=""),d.length===0)return".";for(var c=d.charCodeAt(0),i=c===47,n=-1,o=!0,l=d.length-1;1<=l;--l)if((c=d.charCodeAt(l))===47){if(!o){n=l;break}}else o=!1;return n===-1?i?"/":".":i&&n===1?"/":d.slice(0,n)},m.basename=function(d,c){var i=function(n){typeof n!="string"&&(n+="");var o,l=0,a=-1,f=!0;for(o=n.length-1;0<=o;--o)if(n.charCodeAt(o)===47){if(!f){l=o+1;break}}else a===-1&&(f=!1,a=o+1);return a===-1?"":n.slice(l,a)}(d);return c&&i.substr(-1*c.length)===c&&(i=i.substr(0,i.length-c.length)),i},m.extname=function(d){typeof d!="string"&&(d+="");for(var c=-1,i=0,n=-1,o=!0,l=0,a=d.length-1;0<=a;--a){var f=d.charCodeAt(a);if(f===47){if(o)continue;i=a+1;break}n===-1&&(o=!1,n=a+1),f===46?c===-1?c=a:l!==1&&(l=1):c!==-1&&(l=-1)}return c===-1||n===-1||l===0||l===1&&c===n-1&&c===i+1?"":d.slice(c,n)};var u="ab".substr(-1)==="b"?function(d,c,i){return d.substr(c,i)}:function(d,c,i){return c<0&&(c=d.length+c),d.substr(c,i)}}).call(this,t("_process"))},{_process:241}],241:[function(t,g,m){var p,r,h=g.exports={};function u(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function c(_){if(p===setTimeout)return setTimeout(_,0);if((p===u||!p)&&setTimeout)return p=setTimeout,setTimeout(_,0);try{return p(_,0)}catch{try{return p.call(null,_,0)}catch{return p.call(this,_,0)}}}(function(){try{p=typeof setTimeout=="function"?setTimeout:u}catch{p=u}try{r=typeof clearTimeout=="function"?clearTimeout:d}catch{r=d}})();var i,n=[],o=!1,l=-1;function a(){o&&i&&(o=!1,i.length?n=i.concat(n):l=-1,n.length&&f())}function f(){if(!o){var _=c(a);o=!0;for(var w=n.length;w;){for(i=n,n=[];++l<w;)i&&i[l].run();l=-1,w=n.length}i=null,o=!1,function(E){if(r===clearTimeout)return clearTimeout(E);if((r===d||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(E);try{r(E)}catch{try{return r.call(null,E)}catch{return r.call(this,E)}}}(_)}}function v(_,w){this.fun=_,this.array=w}function b(){}h.nextTick=function(_){var w=new Array(arguments.length-1);if(1<arguments.length)for(var E=1;E<arguments.length;E++)w[E-1]=arguments[E];n.push(new v(_,w)),n.length!==1||o||c(f)},v.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=b,h.addListener=b,h.once=b,h.off=b,h.removeListener=b,h.removeAllListeners=b,h.emit=b,h.prependListener=b,h.prependOnceListener=b,h.listeners=function(_){return[]},h.binding=function(_){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(_){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],242:[function(t,g,m){(function(p){if(!p.fetch){var r="URLSearchParams"in p,h="Symbol"in p&&"iterator"in Symbol,u="FileReader"in p&&"Blob"in p&&function(){try{return new Blob,!0}catch{return!1}}(),d="FormData"in p,c="ArrayBuffer"in p;if(c)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=function(I){return I&&DataView.prototype.isPrototypeOf(I)},o=ArrayBuffer.isView||function(I){return I&&-1<i.indexOf(Object.prototype.toString.call(I))};_.prototype.append=function(I,O){I=f(I),O=v(O);var U=this.map[I];this.map[I]=U?U+","+O:O},_.prototype.delete=function(I){delete this.map[f(I)]},_.prototype.get=function(I){return I=f(I),this.has(I)?this.map[I]:null},_.prototype.has=function(I){return this.map.hasOwnProperty(f(I))},_.prototype.set=function(I,O){this.map[f(I)]=v(O)},_.prototype.forEach=function(I,O){for(var U in this.map)this.map.hasOwnProperty(U)&&I.call(O,this.map[U],U,this)},_.prototype.keys=function(){var I=[];return this.forEach(function(O,U){I.push(U)}),b(I)},_.prototype.values=function(){var I=[];return this.forEach(function(O){I.push(O)}),b(I)},_.prototype.entries=function(){var I=[];return this.forEach(function(O,U){I.push([U,O])}),b(I)},h&&(_.prototype[Symbol.iterator]=_.prototype.entries);var l=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];P.prototype.clone=function(){return new P(this,{body:this._bodyInit})},L.call(P.prototype),L.call(N.prototype),N.prototype.clone=function(){return new N(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new _(this.headers),url:this.url})},N.error=function(){var I=new N(null,{status:0,statusText:""});return I.type="error",I};var a=[301,302,303,307,308];N.redirect=function(I,O){if(a.indexOf(O)===-1)throw new RangeError("Invalid status code");return new N(null,{status:O,headers:{location:I}})},p.Headers=_,p.Request=P,p.Response=N,p.fetch=function(I,O){return new Promise(function(U,K){var ee=new P(I,O),H=new XMLHttpRequest;H.onload=function(){var te,Z,ge={status:H.status,statusText:H.statusText,headers:(te=H.getAllResponseHeaders()||"",Z=new _,te.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(se){var z=se.split(":"),de=z.shift().trim();if(de){var re=z.join(":").trim();Z.append(de,re)}}),Z)};ge.url="responseURL"in H?H.responseURL:ge.headers.get("X-Request-URL");var $="response"in H?H.response:H.responseText;U(new N($,ge))},H.onerror=function(){K(new TypeError("Network request failed"))},H.ontimeout=function(){K(new TypeError("Network request failed"))},H.open(ee.method,ee.url,!0),ee.credentials==="include"?H.withCredentials=!0:ee.credentials==="omit"&&(H.withCredentials=!1),"responseType"in H&&u&&(H.responseType="blob"),ee.headers.forEach(function(te,Z){H.setRequestHeader(Z,te)}),H.send(ee._bodyInit===void 0?null:ee._bodyInit)})},p.fetch.polyfill=!0}function f(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(I))throw new TypeError("Invalid character in header field name");return I.toLowerCase()}function v(I){return typeof I!="string"&&(I=String(I)),I}function b(I){var O={next:function(){var U=I.shift();return{done:U===void 0,value:U}}};return h&&(O[Symbol.iterator]=function(){return O}),O}function _(I){this.map={},I instanceof _?I.forEach(function(O,U){this.append(U,O)},this):Array.isArray(I)?I.forEach(function(O){this.append(O[0],O[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(O){this.append(O,I[O])},this)}function w(I){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}function E(I){return new Promise(function(O,U){I.onload=function(){O(I.result)},I.onerror=function(){U(I.error)}})}function C(I){var O=new FileReader,U=E(O);return O.readAsArrayBuffer(I),U}function A(I){if(I.slice)return I.slice(0);var O=new Uint8Array(I.byteLength);return O.set(new Uint8Array(I)),O.buffer}function L(){return this.bodyUsed=!1,this._initBody=function(I){if(this._bodyInit=I)if(typeof I=="string")this._bodyText=I;else if(u&&Blob.prototype.isPrototypeOf(I))this._bodyBlob=I;else if(d&&FormData.prototype.isPrototypeOf(I))this._bodyFormData=I;else if(r&&URLSearchParams.prototype.isPrototypeOf(I))this._bodyText=I.toString();else if(c&&u&&n(I))this._bodyArrayBuffer=A(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!c||!ArrayBuffer.prototype.isPrototypeOf(I)&&!o(I))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=A(I)}else this._bodyText="";this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u&&(this.blob=function(){var I=w(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?w(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(C)}),this.text=function(){var I,O,U,K=w(this);if(K)return K;if(this._bodyBlob)return I=this._bodyBlob,O=new FileReader,U=E(O),O.readAsText(I),U;if(this._bodyArrayBuffer)return Promise.resolve(function(ee){for(var H=new Uint8Array(ee),te=new Array(H.length),Z=0;Z<H.length;Z++)te[Z]=String.fromCharCode(H[Z]);return te.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d&&(this.formData=function(){return this.text().then(R)}),this.json=function(){return this.text().then(JSON.parse)},this}function P(I,O){var U,K,ee=(O=O||{}).body;if(I instanceof P){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,O.headers||(this.headers=new _(I.headers)),this.method=I.method,this.mode=I.mode,ee||I._bodyInit==null||(ee=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=O.credentials||this.credentials||"omit",!O.headers&&this.headers||(this.headers=new _(O.headers)),this.method=(U=O.method||this.method||"GET",K=U.toUpperCase(),-1<l.indexOf(K)?K:U),this.mode=O.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ee)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ee)}function R(I){var O=new FormData;return I.trim().split("&").forEach(function(U){if(U){var K=U.split("="),ee=K.shift().replace(/\+/g," "),H=K.join("=").replace(/\+/g," ");O.append(decodeURIComponent(ee),decodeURIComponent(H))}}),O}function N(I,O){O=O||{},this.type="default",this.status=O.status===void 0?200:O.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in O?O.statusText:"OK",this.headers=new _(O.headers),this.url=O.url||"",this._initBody(I)}})(typeof self!="undefined"?self:this)},{}],243:[function(t,g,m){t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=u(t("../core/main")),h=u(t("../color/color_conversion"));function u(n){return n&&n.__esModule?n:{default:n}}var d=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],c=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];r.default.prototype._rgbColorName=function(n){var o=h.default._rgbaToHSBA(n);return function(l){var a;if(l[0]!==0){l[0]=Math.round(100*l[0]);var f=l[0].toString().split(""),v=f.length-1;f[v]=parseInt(f[v]),f[v]<2.5?f[v]=0:2.5<=f[v]&&f[v]<7.5&&(f[v]=5),f.length===2?(f[0]=parseInt(f[0]),7.5<=f[v]&&(f[v]=0,f[0]=f[0]+1),l[0]=10*f[0]+f[1]):7.5<=f[v]?l[0]=10:l[0]=f[v]}l[2]=l[2]/255;for(var b=l.length-1;1<=b;b--)l[b]<=.25?l[b]=0:.25<l[b]&&l[b]<.75?l[b]=.5:l[b]=1;if(l[0]===0&&l[1]===0&&l[2]===1){for(var _=2;0<=_;_--)p[_]=Math.round(1e4*p[_])/1e4;for(var w=0;w<d.length;w++){if(d[w].h===p[0]&&d[w].s===p[1]&&d[w].b===p[2]){a=d[w].name;break}a="white"}}else for(var E=0;E<c.length;E++)if(c[E].h===l[0]&&c[E].s===l[1]&&c[E].b===l[2]){a=c[E].name;break}return a}([(p=o)[0],o[1],o[2]])};var i=r.default;m.default=i},{"../color/color_conversion":249,"../core/main":264,"core-js/modules/es.function.name":166,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],244:[function(t,g,m){t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p},h="_Description",u="_fallbackDesc",d="_fallbackTable",c="_Label",i="_labelDesc",n="_labelTable";function o(a){if(a==="label"||a==="fallback")throw new Error("description should not be LABEL or FALLBACK");return a.endsWith(".")||a.endsWith(";")||a.endsWith(",")||a.endsWith("?")||a.endsWith("!")||(a+="."),a}r.default.prototype.describe=function(a,f){if(r.default._validateParameters("describe",arguments),typeof a=="string"){var v=this.canvas.id;a=o(a),this.dummyDOM||(this.dummyDOM=document.getElementById(v).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==a&&(this.descriptions.fallback.innerHTML=a):this._describeHTML("fallback",a),f===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==a&&(this.descriptions.label.innerHTML=a):this._describeHTML("label",a))}},r.default.prototype.describeElement=function(a,f,v){if(r.default._validateParameters("describeElement",arguments),typeof f=="string"&&typeof a=="string"){var b=this.canvas.id;f=o(f);var _=function(E){if(E==="label"||E==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return E.endsWith(".")||E.endsWith(";")||E.endsWith(",")?E=E.replace(/.$/,":"):E.endsWith(":")||(E+=":"),E}(a);a=a.replace(/[^a-zA-Z0-9]/g,"");var w='<th scope="row">'.concat(_,"</th><td>").concat(f,"</td>");this.dummyDOM||(this.dummyDOM=document.getElementById(b).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[a]?this.descriptions.fallbackElements[a].innerHTML!==w&&(this.descriptions.fallbackElements[a].innerHTML=w):this._describeElementHTML("fallback",a,w),v===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[a]?this.descriptions.labelElements[a].innerHTML!==w&&(this.descriptions.labelElements[a].innerHTML=w):this._describeElementHTML("label",a,w))}},r.default.prototype._describeHTML=function(a,f){var v=this.canvas.id;if(a==="fallback"){if(this.dummyDOM.querySelector("#".concat(v+h)))this.dummyDOM.querySelector("#"+v+d).insertAdjacentHTML("beforebegin",'<p id="'.concat(v+u,'"></p>'));else{var b='<div id="'.concat(v).concat(h,'" role="region" aria-label="Canvas Description"><p id="').concat(v).concat(u,'"></p></div>');this.dummyDOM.querySelector("#".concat(v,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(v,"accessibleOutput")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#".concat(v)).innerHTML=b}return this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(v).concat(u)),void(this.descriptions.fallback.innerHTML=f)}if(a==="label"){if(this.dummyDOM.querySelector("#".concat(v+c)))this.dummyDOM.querySelector("#".concat(v+n))&&this.dummyDOM.querySelector("#".concat(v+n)).insertAdjacentHTML("beforebegin",'<p id="'.concat(v).concat(i,'"></p>'));else{var _='<div id="'.concat(v).concat(c,'" class="p5Label"><p id="').concat(v).concat(i,'"></p></div>');this.dummyDOM.querySelector("#".concat(v,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(v,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",_):this.dummyDOM.querySelector("#"+v).insertAdjacentHTML("afterend",_)}return this.descriptions.label=this.dummyDOM.querySelector("#"+v+i),void(this.descriptions.label.innerHTML=f)}},r.default.prototype._describeElementHTML=function(a,f,v){var b=this.canvas.id;if(a==="fallback"){if(this.dummyDOM.querySelector("#".concat(b+h)))this.dummyDOM.querySelector("#"+b+d)||this.dummyDOM.querySelector("#"+b+u).insertAdjacentHTML("afterend",'<table id="'.concat(b).concat(d,'"><caption>Canvas elements and their descriptions</caption></table>'));else{var _='<div id="'.concat(b).concat(h,'" role="region" aria-label="Canvas Description"><table id="').concat(b).concat(d,'"><caption>Canvas elements and their descriptions</caption></table></div>');this.dummyDOM.querySelector("#".concat(b,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutput")).insertAdjacentHTML("beforebegin",_):this.dummyDOM.querySelector("#"+b).innerHTML=_}var w=document.createElement("tr");return w.id=b+"_fte_"+f,this.dummyDOM.querySelector("#"+b+d).appendChild(w),this.descriptions.fallbackElements[f]=this.dummyDOM.querySelector("#".concat(b).concat("_fte_").concat(f)),void(this.descriptions.fallbackElements[f].innerHTML=v)}if(a==="label"){if(this.dummyDOM.querySelector("#".concat(b+c)))this.dummyDOM.querySelector("#".concat(b+n))||this.dummyDOM.querySelector("#"+b+i).insertAdjacentHTML("afterend",'<table id="'.concat(b+n,'"></table>'));else{var E='<div id="'.concat(b).concat(c,'" class="p5Label"><table id="').concat(b).concat(n,'"></table></div>');this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(b,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",E):this.dummyDOM.querySelector("#"+b).insertAdjacentHTML("afterend",E)}var C=document.createElement("tr");C.id=b+"_lte_"+f,this.dummyDOM.querySelector("#"+b+n).appendChild(C),this.descriptions.labelElements[f]=this.dummyDOM.querySelector("#".concat(b).concat("_lte_").concat(f)),this.descriptions.labelElements[f].innerHTML=v}};var l=r.default;m.default=l},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.replace":189}],245:[function(t,g,m){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.map"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};r.default.prototype._updateGridOutput=function(u){if(this.dummyDOM.querySelector("#".concat(u,"_summary"))){var d=this._accessibleOutputs[u],c=function(o,l){var a="",f="",v=0;for(var b in l){var _=0;for(var w in l[b]){var E='<li id="'.concat(o,"shape").concat(v,'">').concat(l[b][w].color," ").concat(b,",");b==="line"?E+=" location = ".concat(l[b][w].pos,", length = ").concat(l[b][w].length," pixels"):(E+=" location = ".concat(l[b][w].pos),b!=="point"&&(E+=", area = ".concat(l[b][w].area," %")),E+="</li>"),a+=E,_++,v++}f=1<_?"".concat(f," ").concat(_," ").concat(b,"s"):"".concat(f," ").concat(_," ").concat(b)}return{numShapes:[v,f],details:a}}(u,this.ingredients.shapes),i=function(o,l,a,f){var v="".concat(l," canvas, ").concat(a," by ").concat(f," pixels, contains ").concat(o[0]);return v=o[0]===1?"".concat(v," shape: ").concat(o[1]):"".concat(v," shapes: ").concat(o[1]),v}(c.numShapes,this.ingredients.colors.background,this.width,this.height),n=function(o,l){var a=0,f="",v=Array.apply(null,Array(10)).map(function(){});for(var b in v)v[b]=Array.apply(null,Array(10)).map(function(){});for(var _ in l)for(var w in l[_]){var E=void 0;E=_!=="line"?'<a href="#'.concat(o,"shape").concat(a,'">').concat(l[_][w].color," ").concat(_,"</a>"):'<a href="#'.concat(o,"shape").concat(a,'">').concat(l[_][w].color," ").concat(_," midpoint</a>"),v[l[_][w].loc.locY][l[_][w].loc.locX]?v[l[_][w].loc.locY][l[_][w].loc.locX]=v[l[_][w].loc.locY][l[_][w].loc.locX]+"  "+E:v[l[_][w].loc.locY][l[_][w].loc.locX]=E,a++}for(var C in v){var A="<tr>";for(var L in v[C])A+="<td>",v[C][L]!==void 0&&(A+=v[C][L]),A+="</td>";f=f+A+"</tr>"}return f}(u,this.ingredients.shapes);i!==d.summary.innerHTML&&(d.summary.innerHTML=i),n!==d.map.innerHTML&&(d.map.innerHTML=n),c.details!==d.shapeDetails.innerHTML&&(d.shapeDetails.innerHTML=c.details),this._accessibleOutputs[u]=d}};var h=r.default;m.default=h},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.map":161}],246:[function(t,g,m){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};function h(c,i,n){return c[0]<.4*i?c[1]<.4*n?"top left":c[1]>.6*n?"bottom left":"mid left":c[0]>.6*i?c[1]<.4*n?"top right":c[1]>.6*n?"bottom right":"mid right":c[1]<.4*n?"top middle":c[1]>.6*n?"bottom middle":"middle"}function u(c,i,n){var o=Math.floor(c[0]/i*10),l=Math.floor(c[1]/n*10);return o===10&&--o,l===10&&--l,{locX:o,locY:l}}r.default.prototype.textOutput=function(c){r.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),c===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},r.default.prototype.gridOutput=function(c){r.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),c===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},r.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},r.default.prototype._createOutput=function(c,i){var n,o,l,a=this.canvas.id;this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(a).parentNode);var f="";i==="Fallback"?(n=a+c,o=a+"accessibleOutput",this.dummyDOM.querySelector("#".concat(o))||(this.dummyDOM.querySelector("#".concat(a,"_Description"))?this.dummyDOM.querySelector("#".concat(a,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(o,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(a)).innerHTML='<div id="'.concat(o,'" role="region" aria-label="Canvas Outputs"></div>'))):i==="Label"&&(n=a+c+(f=i),o=a+"accessibleOutput"+i,this.dummyDOM.querySelector("#".concat(o))||(this.dummyDOM.querySelector("#".concat(a,"_Label"))?this.dummyDOM.querySelector("#".concat(a,"_Label")).insertAdjacentHTML("afterend",'<div id="'.concat(o,'"></div>')):this.dummyDOM.querySelector("#".concat(a)).insertAdjacentHTML("afterend",'<div id="'.concat(o,'"></div>')))),this._accessibleOutputs[n]={},c==="textOutput"?(f="#".concat(a,"gridOutput").concat(f),l='<div id="'.concat(n,'">Text Output<div id="').concat(n,'Summary" aria-label="text output summary"><p id="').concat(n,'_summary"></p><ul id="').concat(n,'_list"></ul></div><table id="').concat(n,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(f)?this.dummyDOM.querySelector(f).insertAdjacentHTML("beforebegin",l):this.dummyDOM.querySelector("#".concat(o)).innerHTML=l,this._accessibleOutputs[n].list=this.dummyDOM.querySelector("#".concat(n,"_list"))):c==="gridOutput"&&(f="#".concat(a,"textOutput").concat(f),l='<div id="'.concat(n,'">Grid Output<p id="').concat(n,'_summary" aria-label="grid output summary"><table id="').concat(n,'_map" summary="grid output content"></table><ul id="').concat(n,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(f)?this.dummyDOM.querySelector(f).insertAdjacentHTML("afterend",l):this.dummyDOM.querySelector("#".concat(o)).innerHTML=l,this._accessibleOutputs[n].map=this.dummyDOM.querySelector("#".concat(n,"_map"))),this._accessibleOutputs[n].shapeDetails=this.dummyDOM.querySelector("#".concat(n,"_shapeDetails")),this._accessibleOutputs[n].summary=this.dummyDOM.querySelector("#".concat(n,"_summary"))},r.default.prototype._updateAccsOutput=function(){var c=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(c+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(c+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(c+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(c+"gridOutputLabel"))},r.default.prototype._accsBackground=function(c){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==c&&(this.ingredients.colors.backgroundRGBA=c,this.ingredients.colors.background=this._rgbColorName(c))},r.default.prototype._accsCanvasColors=function(c,i){c==="fill"?this.ingredients.colors.fillRGBA!==i&&(this.ingredients.colors.fillRGBA=i,this.ingredients.colors.fill=this._rgbColorName(i)):c==="stroke"&&this.ingredients.colors.strokeRGBA!==i&&(this.ingredients.colors.strokeRGBA=i,this.ingredients.colors.stroke=this._rgbColorName(i))},r.default.prototype._accsOutput=function(c,i){c==="ellipse"&&i[2]===i[3]?c="circle":c==="rectangle"&&i[2]===i[3]&&(c="square");var n={},o=!0,l=function(b,_){var w,E;return E=b==="rectangle"||b==="ellipse"||b==="arc"||b==="circle"||b==="square"?(w=Math.round(_[0]+_[2]/2),Math.round(_[1]+_[3]/2)):b==="triangle"?(w=(_[0]+_[2]+_[4])/3,(_[1]+_[3]+_[5])/3):b==="quadrilateral"?(w=(_[0]+_[2]+_[4]+_[6])/4,(_[1]+_[3]+_[5]+_[7])/4):b==="line"?(w=(_[0]+_[2])/2,(_[1]+_[3])/2):(w=_[0],_[1]),[w,E]}(c,i);if(c==="line"){n.color=this.ingredients.colors.stroke,n.length=Math.round(this.dist(i[0],i[1],i[2],i[3]));var a=h([i[0],[1]],this.width,this.height),f=h([i[2],[3]],this.width,this.height);n.loc=u(l,this.width,this.height),n.pos=a===f?"at ".concat(a):"from ".concat(a," to ").concat(f)}else c==="point"?n.color=this.ingredients.colors.stroke:(n.color=this.ingredients.colors.fill,n.area=function(b,_,w,E){var C=0;if(b==="arc"){var A=((_[5]-_[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI);if(C=A*_[2]*_[3]/8,_[6]==="open"||_[6]==="chord"){var L=_[0],P=_[1],R=_[0]+_[2]/2*Math.cos(_[4]).toFixed(2),N=_[1]+_[3]/2*Math.sin(_[4]).toFixed(2),I=_[0]+_[2]/2*Math.cos(_[5]).toFixed(2),O=_[1]+_[3]/2*Math.sin(_[5]).toFixed(2),U=Math.abs(L*(N-O)+R*(O-P)+I*(P-N))/2;A>Math.PI?C+=U:C-=U}}else b==="ellipse"||b==="circle"?C=3.14*_[2]/2*_[3]/2:b==="line"||b==="point"?C=0:b==="quadrilateral"?C=Math.abs((_[6]+_[0])*(_[7]-_[1])+(_[0]+_[2])*(_[1]-_[3])+(_[2]+_[4])*(_[3]-_[5])+(_[4]+_[6])*(_[5]-_[7]))/2:b==="rectangle"||b==="square"?C=_[2]*_[3]:b==="triangle"&&(C=Math.abs(_[0]*(_[3]-_[5])+_[2]*(_[5]-_[1])+_[4]*(_[1]-_[3]))/2);return Math.round(100*C/(w*E))}(c,i,this.width,this.height)),n.pos=h(l,this.width,this.height),n.loc=u(l,this.width,this.height);if(this.ingredients.shapes[c]){if(this.ingredients.shapes[c]!==[n]){for(var v in this.ingredients.shapes[c])JSON.stringify(this.ingredients.shapes[c][v])===JSON.stringify(n)&&(o=!1);o===!0&&this.ingredients.shapes[c].push(n)}}else this.ingredients.shapes[c]=[n]};var d=r.default;m.default=d},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.map":161,"core-js/modules/es.number.to-fixed":172}],247:[function(t,g,m){t("core-js/modules/es.array.concat"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};r.default.prototype._updateTextOutput=function(u){if(this.dummyDOM.querySelector("#".concat(u,"_summary"))){var d=this._accessibleOutputs[u],c=function(o,l){var a="",f=0;for(var v in l)for(var b in l[v]){var _='<li><a href="#'.concat(o,"shape").concat(f,'">').concat(l[v][b].color," ").concat(v,"</a>");v==="line"?_+=", ".concat(l[v][b].pos,", ").concat(l[v][b].length," pixels long.</li>"):(_+=", at ".concat(l[v][b].pos),v!=="point"&&(_+=", covering ".concat(l[v][b].area,"% of the canvas")),_+=".</li>"),a+=_,f++}return{numShapes:f,listShapes:a}}(u,this.ingredients.shapes),i=function(o,l,a,f){var v="Your output is a, ".concat(a," by ").concat(f," pixels, ").concat(l," canvas containing the following");return v=o===1?"".concat(v," shape:"):"".concat(v," ").concat(o," shapes:"),v}(c.numShapes,this.ingredients.colors.background,this.width,this.height),n=function(o,l){var a="",f=0;for(var v in l)for(var b in l[v]){var _='<tr id="'.concat(o,"shape").concat(f,'"><th>').concat(l[v][b].color," ").concat(v,"</th>");v==="line"?_+="<td>location = ".concat(l[v][b].pos,"</td><td>length = ").concat(l[v][b].length," pixels</td></tr>"):(_+="<td>location = ".concat(l[v][b].pos,"</td>"),v!=="point"&&(_+="<td> area = ".concat(l[v][b].area,"%</td>")),_+="</tr>"),a+=_,f++}return a}(u,this.ingredients.shapes);i!==d.summary.innerHTML&&(d.summary.innerHTML=i),c.listShapes!==d.list.innerHTML&&(d.list.innerHTML=c.listShapes),n!==d.shapeDetails.innerHTML&&(d.shapeDetails.innerHTML=n),this._accessibleOutputs[u]=d}};var h=r.default;m.default=h},{"../core/main":264,"core-js/modules/es.array.concat":149}],248:[function(t,g,m){var p,r=(p=t("./core/main"))&&p.__esModule?p:{default:p};t("./core/constants"),t("./core/environment"),t("./core/friendly_errors/stacktrace"),t("./core/friendly_errors/validate_params"),t("./core/friendly_errors/file_errors"),t("./core/friendly_errors/fes_core"),t("./core/friendly_errors/sketch_reader"),t("./core/helpers"),t("./core/legacy"),t("./core/preload"),t("./core/p5.Element"),t("./core/p5.Graphics"),t("./core/p5.Renderer"),t("./core/p5.Renderer2D"),t("./core/rendering"),t("./core/shim"),t("./core/structure"),t("./core/transform"),t("./core/shape/2d_primitives"),t("./core/shape/attributes"),t("./core/shape/curves"),t("./core/shape/vertex"),t("./accessibility/outputs"),t("./accessibility/textOutput"),t("./accessibility/gridOutput"),t("./accessibility/color_namer"),t("./color/color_conversion"),t("./color/creating_reading"),t("./color/p5.Color"),t("./color/setting"),t("./data/p5.TypedDict"),t("./data/local_storage.js"),t("./dom/dom"),t("./accessibility/describe"),t("./events/acceleration"),t("./events/keyboard"),t("./events/mouse"),t("./events/touch"),t("./image/filters"),t("./image/image"),t("./image/loading_displaying"),t("./image/p5.Image"),t("./image/pixels"),t("./io/files"),t("./io/p5.Table"),t("./io/p5.TableRow"),t("./io/p5.XML"),t("./math/calculation"),t("./math/math"),t("./math/noise"),t("./math/p5.Vector"),t("./math/random"),t("./math/trigonometry"),t("./typography/attributes"),t("./typography/loading_displaying"),t("./typography/p5.Font"),t("./utilities/array_functions"),t("./utilities/conversion"),t("./utilities/string_functions"),t("./utilities/time_date"),t("./webgl/3d_primitives"),t("./webgl/interaction"),t("./webgl/light"),t("./webgl/loading"),t("./webgl/material"),t("./webgl/p5.Camera"),t("./webgl/p5.Geometry"),t("./webgl/p5.Matrix"),t("./webgl/p5.RendererGL.Immediate"),t("./webgl/p5.RendererGL"),t("./webgl/p5.RendererGL.Retained"),t("./webgl/p5.Shader"),t("./webgl/p5.RenderBuffer"),t("./webgl/p5.Texture"),t("./webgl/text"),t("./core/init"),g.exports=r.default},{"./accessibility/color_namer":243,"./accessibility/describe":244,"./accessibility/gridOutput":245,"./accessibility/outputs":246,"./accessibility/textOutput":247,"./color/color_conversion":249,"./color/creating_reading":250,"./color/p5.Color":251,"./color/setting":252,"./core/constants":253,"./core/environment":254,"./core/friendly_errors/fes_core":255,"./core/friendly_errors/file_errors":256,"./core/friendly_errors/sketch_reader":257,"./core/friendly_errors/stacktrace":258,"./core/friendly_errors/validate_params":259,"./core/helpers":260,"./core/init":261,"./core/legacy":263,"./core/main":264,"./core/p5.Element":265,"./core/p5.Graphics":266,"./core/p5.Renderer":267,"./core/p5.Renderer2D":268,"./core/preload":269,"./core/rendering":270,"./core/shape/2d_primitives":271,"./core/shape/attributes":272,"./core/shape/curves":273,"./core/shape/vertex":274,"./core/shim":275,"./core/structure":276,"./core/transform":277,"./data/local_storage.js":278,"./data/p5.TypedDict":279,"./dom/dom":280,"./events/acceleration":281,"./events/keyboard":282,"./events/mouse":283,"./events/touch":284,"./image/filters":285,"./image/image":286,"./image/loading_displaying":287,"./image/p5.Image":288,"./image/pixels":289,"./io/files":290,"./io/p5.Table":291,"./io/p5.TableRow":292,"./io/p5.XML":293,"./math/calculation":294,"./math/math":295,"./math/noise":296,"./math/p5.Vector":297,"./math/random":298,"./math/trigonometry":299,"./typography/attributes":300,"./typography/loading_displaying":301,"./typography/p5.Font":302,"./utilities/array_functions":303,"./utilities/conversion":304,"./utilities/string_functions":305,"./utilities/time_date":306,"./webgl/3d_primitives":307,"./webgl/interaction":308,"./webgl/light":309,"./webgl/loading":310,"./webgl/material":311,"./webgl/p5.Camera":312,"./webgl/p5.Geometry":313,"./webgl/p5.Matrix":314,"./webgl/p5.RenderBuffer":315,"./webgl/p5.RendererGL":318,"./webgl/p5.RendererGL.Immediate":316,"./webgl/p5.RendererGL.Retained":317,"./webgl/p5.Shader":319,"./webgl/p5.Texture":320,"./webgl/text":321}],249:[function(t,g,m){Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};r.default.ColorConversion={},r.default.ColorConversion._hsbaToHSLA=function(u){var d=u[0],c=u[1],i=u[2],n=(2-c)*i/2;return n!=0&&(n==1?c=0:n<.5?c/=2-c:c=c*i/(2-2*n)),[d,c,n,u[3]]},r.default.ColorConversion._hsbaToRGBA=function(u){var d=6*u[0],c=u[1],i=u[2],n=[];if(c===0)n=[i,i,i,u[3]];else{var o,l,a,f=Math.floor(d),v=i*(1-c),b=i*(1-c*(d-f)),_=i*(1-c*(1+f-d));a=f===1?(o=b,l=i,v):f===2?(o=v,l=i,_):f===3?(o=v,l=b,i):f===4?(o=_,l=v,i):f===5?(o=i,l=v,b):(o=i,l=_,v),n=[o,l,a,u[3]]}return n},r.default.ColorConversion._hslaToHSBA=function(u){var d,c=u[0],i=u[1],n=u[2];return[c,i=2*((d=n<.5?(1+i)*n:n+i-n*i)-n)/d,d,u[3]]},r.default.ColorConversion._hslaToRGBA=function(u){var d=6*u[0],c=u[1],i=u[2],n=[];if(c===0)n=[i,i,i,u[3]];else{var o,l=2*i-(o=i<.5?(1+c)*i:i+c-i*c),a=function(f,v,b){return f<0?f+=6:6<=f&&(f-=6),f<1?v+(b-v)*f:f<3?b:f<4?v+(b-v)*(4-f):v};n=[a(2+d,l,o),a(d,l,o),a(d-2,l,o),u[3]]}return n},r.default.ColorConversion._rgbaToHSBA=function(u){var d,c,i=u[0],n=u[1],o=u[2],l=Math.max(i,n,o),a=l-Math.min(i,n,o);return a==0?c=d=0:(c=a/l,i===l?d=(n-o)/a:n===l?d=2+(o-i)/a:o===l&&(d=4+(i-n)/a),d<0?d+=6:6<=d&&(d-=6)),[d/6,c,l,u[3]]},r.default.ColorConversion._rgbaToHSLA=function(u){var d,c,i=u[0],n=u[1],o=u[2],l=Math.max(i,n,o),a=Math.min(i,n,o),f=l+a,v=l-a;return v==0?c=d=0:(c=f<1?v/f:v/(2-f),i===l?d=(n-o)/v:n===l?d=2+(o-i)/v:o===l&&(d=4+(i-n)/v),d<0?d+=6:6<=d&&(d-=6)),[d/6,c,f/2,u[3]]};var h=r.default.ColorConversion;m.default=h},{"../core/main":264}],250:[function(t,g,m){function p(i){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(i)}t("core-js/modules/es.array.map"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r,h=(r=t("../core/main"))&&r.__esModule?r:{default:r},u=function(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var n=d();if(n&&n.has(i))return n.get(i);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){var f=l?Object.getOwnPropertyDescriptor(i,a):null;f&&(f.get||f.set)?Object.defineProperty(o,a,f):o[a]=i[a]}return o.default=i,n&&n.set(i,o),o}(t("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return d=function(){return i},i}t("./p5.Color"),t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),h.default.prototype.alpha=function(i){return h.default._validateParameters("alpha",arguments),this.color(i)._getAlpha()},h.default.prototype.blue=function(i){return h.default._validateParameters("blue",arguments),this.color(i)._getBlue()},h.default.prototype.brightness=function(i){return h.default._validateParameters("brightness",arguments),this.color(i)._getBrightness()},h.default.prototype.color=function(){if(h.default._validateParameters("color",arguments),arguments[0]instanceof h.default.Color)return arguments[0];var i=arguments[0]instanceof Array?arguments[0]:arguments;return new h.default.Color(this,i)},h.default.prototype.green=function(i){return h.default._validateParameters("green",arguments),this.color(i)._getGreen()},h.default.prototype.hue=function(i){return h.default._validateParameters("hue",arguments),this.color(i)._getHue()},h.default.prototype.lerpColor=function(i,n,o){h.default._validateParameters("lerpColor",arguments);var l,a,f,v,b,_,w=this._colorMode,E=this._colorMaxes;if(w===u.RGB)b=i.levels.map(function(C){return C/255}),_=n.levels.map(function(C){return C/255});else if(w===u.HSB)i._getBrightness(),n._getBrightness(),b=i.hsba,_=n.hsba;else{if(w!==u.HSL)throw new Error("".concat(w,"cannot be used for interpolation."));i._getLightness(),n._getLightness(),b=i.hsla,_=n.hsla}return o=Math.max(Math.min(o,1),0),this.lerp===void 0&&(this.lerp=function(C,A,L){return L*(A-C)+C}),l=this.lerp(b[0],_[0],o),a=this.lerp(b[1],_[1],o),f=this.lerp(b[2],_[2],o),v=this.lerp(b[3],_[3],o),l*=E[w][0],a*=E[w][1],f*=E[w][2],v*=E[w][3],this.color(l,a,f,v)},h.default.prototype.lightness=function(i){return h.default._validateParameters("lightness",arguments),this.color(i)._getLightness()},h.default.prototype.red=function(i){return h.default._validateParameters("red",arguments),this.color(i)._getRed()},h.default.prototype.saturation=function(i){return h.default._validateParameters("saturation",arguments),this.color(i)._getSaturation()};var c=h.default;m.default=c},{"../core/constants":253,"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/main":264,"./p5.Color":251,"core-js/modules/es.array.map":161}],251:[function(t,g,m){function p(b){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(b)}t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.trim"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r=c(t("../core/main")),h=function(b){if(b&&b.__esModule)return b;if(b===null||p(b)!=="object"&&typeof b!="function")return{default:b};var _=d();if(_&&_.has(b))return _.get(b);var w={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in b)if(Object.prototype.hasOwnProperty.call(b,C)){var A=E?Object.getOwnPropertyDescriptor(b,C):null;A&&(A.get||A.set)?Object.defineProperty(w,C,A):w[C]=b[C]}return w.default=b,_&&_.set(b,w),w}(t("../core/constants")),u=c(t("./color_conversion"));function d(){if(typeof WeakMap!="function")return null;var b=new WeakMap;return d=function(){return b},b}function c(b){return b&&b.__esModule?b:{default:b}}r.default.Color=function(b,_){if(this._storeModeAndMaxes(b._colorMode,b._colorMaxes),this.mode!==h.RGB&&this.mode!==h.HSL&&this.mode!==h.HSB)throw new Error("".concat(this.mode," is an invalid colorMode."));return this._array=r.default.Color._parseInputs.apply(this,_),this._calculateLevels(),this},r.default.Color.prototype.toString=function(b){var _=this.levels,w=this._array,E=w[3];switch(b){case"#rrggbb":return"#".concat(_[0]<16?"0".concat(_[0].toString(16)):_[0].toString(16),_[1]<16?"0".concat(_[1].toString(16)):_[1].toString(16),_[2]<16?"0".concat(_[2].toString(16)):_[2].toString(16));case"#rrggbbaa":return"#".concat(_[0]<16?"0".concat(_[0].toString(16)):_[0].toString(16),_[1]<16?"0".concat(_[1].toString(16)):_[1].toString(16),_[2]<16?"0".concat(_[2].toString(16)):_[2].toString(16),_[3]<16?"0".concat(_[3].toString(16)):_[3].toString(16));case"#rgb":return"#".concat(Math.round(15*w[0]).toString(16),Math.round(15*w[1]).toString(16),Math.round(15*w[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*w[0]).toString(16),Math.round(15*w[1]).toString(16),Math.round(15*w[2]).toString(16),Math.round(15*w[3]).toString(16));case"rgb":return"rgb(".concat(_[0],", ",_[1],", ",_[2],")");case"rgb%":return"rgb(".concat((100*w[0]).toPrecision(3),"%, ",(100*w[1]).toPrecision(3),"%, ",(100*w[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*w[0]).toPrecision(3),"%, ",(100*w[1]).toPrecision(3),"%, ",(100*w[2]).toPrecision(3),"%, ",(100*w[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=u.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[h.HSB][0],", ",this.hsba[1]*this.maxes[h.HSB][1],", ",this.hsba[2]*this.maxes[h.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=u.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=u.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[h.HSB][0],", ",this.hsba[1]*this.maxes[h.HSB][1],", ",this.hsba[2]*this.maxes[h.HSB][2],", ",E,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=u.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*E).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=u.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[h.HSL][0],", ",this.hsla[1]*this.maxes[h.HSL][1],", ",this.hsla[2]*this.maxes[h.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=u.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=u.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[h.HSL][0],", ",this.hsla[1]*this.maxes[h.HSL][1],", ",this.hsla[2]*this.maxes[h.HSL][2],", ",E,")");case"hsla%":return this.hsla||(this.hsla=u.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*E).toPrecision(3),"%)");case"rgba":default:return"rgba(".concat(_[0],",",_[1],",",_[2],",",E,")")}},r.default.Color.prototype.setRed=function(b){this._array[0]=b/this.maxes[h.RGB][0],this._calculateLevels()},r.default.Color.prototype.setGreen=function(b){this._array[1]=b/this.maxes[h.RGB][1],this._calculateLevels()},r.default.Color.prototype.setBlue=function(b){this._array[2]=b/this.maxes[h.RGB][2],this._calculateLevels()},r.default.Color.prototype.setAlpha=function(b){this._array[3]=b/this.maxes[this.mode][3],this._calculateLevels()},r.default.Color.prototype._calculateLevels=function(){for(var b=this._array,_=this.levels=new Array(b.length),w=b.length-1;0<=w;--w)_[w]=Math.round(255*b[w])},r.default.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},r.default.Color.prototype._storeModeAndMaxes=function(b,_){this.mode=b,this.maxes=_},r.default.Color.prototype._getMode=function(){return this.mode},r.default.Color.prototype._getMaxes=function(){return this.maxes},r.default.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[h.RGB][2]},r.default.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=u.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[h.HSB][2]},r.default.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[h.RGB][1]},r.default.Color.prototype._getHue=function(){return this.mode===h.HSB?(this.hsba||(this.hsba=u.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[h.HSB][0]):(this.hsla||(this.hsla=u.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[h.HSL][0])},r.default.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=u.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[h.HSL][2]},r.default.Color.prototype._getRed=function(){return this._array[0]*this.maxes[h.RGB][0]},r.default.Color.prototype._getSaturation=function(){return this.mode===h.HSB?(this.hsba||(this.hsba=u.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[h.HSB][1]):(this.hsla||(this.hsla=u.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[h.HSL][1])};var i={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},n=/\s*/,o=/(\d{1,3})/,l=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,a=new RegExp("".concat(l.source,"%")),f={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",o.source,",",o.source,",",o.source,"\\)$"].join(n.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",a.source,",",a.source,",",a.source,"\\)$"].join(n.source),"i"),RGBA:new RegExp(["^rgba\\(",o.source,",",o.source,",",o.source,",",l.source,"\\)$"].join(n.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",a.source,",",a.source,",",a.source,",",l.source,"\\)$"].join(n.source),"i"),HSL:new RegExp(["^hsl\\(",o.source,",",a.source,",",a.source,"\\)$"].join(n.source),"i"),HSLA:new RegExp(["^hsla\\(",o.source,",",a.source,",",a.source,",",l.source,"\\)$"].join(n.source),"i"),HSB:new RegExp(["^hsb\\(",o.source,",",a.source,",",a.source,"\\)$"].join(n.source),"i"),HSBA:new RegExp(["^hsba\\(",o.source,",",a.source,",",a.source,",",l.source,"\\)$"].join(n.source),"i")};r.default.Color._parseInputs=function(b,_,w,E){var C,A=arguments.length,L=this.mode,P=this.maxes[L],R=[];if(3<=A){for(R[0]=b/P[0],R[1]=_/P[1],R[2]=w/P[2],R[3]=typeof E=="number"?E/P[3]:1,C=R.length-1;0<=C;--C){var N=R[C];N<0?R[C]=0:1<N&&(R[C]=1)}return L===h.HSL?u.default._hslaToRGBA(R):L===h.HSB?u.default._hsbaToRGBA(R):R}if(A===1&&typeof b=="string"){var I=b.trim().toLowerCase();if(i[I])return r.default.Color._parseInputs.call(this,i[I]);if(f.HEX3.test(I))return(R=f.HEX3.exec(I).slice(1).map(function(O){return parseInt(O+O,16)/255}))[3]=1,R;if(f.HEX6.test(I))return(R=f.HEX6.exec(I).slice(1).map(function(O){return parseInt(O,16)/255}))[3]=1,R;if(f.HEX4.test(I))return R=f.HEX4.exec(I).slice(1).map(function(O){return parseInt(O+O,16)/255});if(f.HEX8.test(I))return R=f.HEX8.exec(I).slice(1).map(function(O){return parseInt(O,16)/255});if(f.RGB.test(I))return(R=f.RGB.exec(I).slice(1).map(function(O){return O/255}))[3]=1,R;if(f.RGB_PERCENT.test(I))return(R=f.RGB_PERCENT.exec(I).slice(1).map(function(O){return parseFloat(O)/100}))[3]=1,R;if(f.RGBA.test(I))return R=f.RGBA.exec(I).slice(1).map(function(O,U){return U===3?parseFloat(O):O/255});if(f.RGBA_PERCENT.test(I))return R=f.RGBA_PERCENT.exec(I).slice(1).map(function(O,U){return U===3?parseFloat(O):parseFloat(O)/100});if(f.HSL.test(I)?(R=f.HSL.exec(I).slice(1).map(function(O,U){return U===0?parseInt(O,10)/360:parseInt(O,10)/100}))[3]=1:f.HSLA.test(I)&&(R=f.HSLA.exec(I).slice(1).map(function(O,U){return U===0?parseInt(O,10)/360:U===3?parseFloat(O):parseInt(O,10)/100})),(R=R.map(function(O){return Math.max(Math.min(O,1),0)})).length)return u.default._hslaToRGBA(R);if(f.HSB.test(I)?(R=f.HSB.exec(I).slice(1).map(function(O,U){return U===0?parseInt(O,10)/360:parseInt(O,10)/100}))[3]=1:f.HSBA.test(I)&&(R=f.HSBA.exec(I).slice(1).map(function(O,U){return U===0?parseInt(O,10)/360:U===3?parseFloat(O):parseInt(O,10)/100})),R.length){for(C=R.length-1;0<=C;--C)R[C]=Math.max(Math.min(R[C],1),0);return u.default._hsbaToRGBA(R)}R=[1,1,1,1]}else{if(A!==1&&A!==2||typeof b!="number")throw new Error("".concat(arguments,"is not a valid color representation."));R[0]=b/P[2],R[1]=b/P[2],R[2]=b/P[2],R[3]=typeof _=="number"?_/P[3]:1,R=R.map(function(O){return Math.max(Math.min(O,1),0)})}return R};var v=r.default.Color;m.default=v},{"../core/constants":253,"../core/main":264,"./color_conversion":249,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.trim":193}],252:[function(t,g,m){function p(i){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(i)}t("core-js/modules/es.array.fill"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r,h=(r=t("../core/main"))&&r.__esModule?r:{default:r},u=function(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var n=d();if(n&&n.has(i))return n.get(i);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){var f=l?Object.getOwnPropertyDescriptor(i,a):null;f&&(f.get||f.set)?Object.defineProperty(o,a,f):o[a]=i[a]}return o.default=i,n&&n.set(i,o),o}(t("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return d=function(){return i},i}t("./p5.Color"),h.default.prototype.background=function(){var i;return(i=this._renderer).background.apply(i,arguments),this},h.default.prototype.clear=function(){var i=(arguments.length<=0?void 0:arguments[0])||0,n=(arguments.length<=1?void 0:arguments[1])||0,o=(arguments.length<=2?void 0:arguments[2])||0,l=(arguments.length<=3?void 0:arguments[3])||0;return this._renderer.clear(i,n,o,l),this},h.default.prototype.colorMode=function(i,n,o,l,a){if(h.default._validateParameters("colorMode",arguments),i===u.RGB||i===u.HSB||i===u.HSL){this._colorMode=i;var f=this._colorMaxes[i];arguments.length===2?(f[0]=n,f[1]=n,f[2]=n,f[3]=n):arguments.length===4?(f[0]=n,f[1]=o,f[2]=l):arguments.length===5&&(f[0]=n,f[1]=o,f[2]=l,f[3]=a)}return this},h.default.prototype.fill=function(){var i;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(i=this._renderer).fill.apply(i,arguments),this},h.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},h.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},h.default.prototype.stroke=function(){var i;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(i=this._renderer).stroke.apply(i,arguments),this},h.default.prototype.erase=function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:255;return this._renderer.erase(i,n),this},h.default.prototype.noErase=function(){return this._renderer.noErase(),this};var c=h.default;m.default=c},{"../core/constants":253,"../core/main":264,"./p5.Color":251,"core-js/modules/es.array.fill":151}],253:[function(t,g,m){Object.defineProperty(m,"__esModule",{value:!0}),m.BEZIER=m.QUADRATIC=m.LINEAR=m._CTX_MIDDLE=m._DEFAULT_LEADMULT=m._DEFAULT_TEXT_FILL=m.WORD=m.CHAR=m.BOLDITALIC=m.BOLD=m.ITALIC=m.NORMAL=m.BLUR=m.ERODE=m.DILATE=m.POSTERIZE=m.INVERT=m.OPAQUE=m.GRAY=m.THRESHOLD=m.BURN=m.DODGE=m.SOFT_LIGHT=m.HARD_LIGHT=m.OVERLAY=m.REPLACE=m.SCREEN=m.MULTIPLY=m.EXCLUSION=m.SUBTRACT=m.DIFFERENCE=m.LIGHTEST=m.DARKEST=m.ADD=m.REMOVE=m.BLEND=m.UP_ARROW=m.TAB=m.SHIFT=m.RIGHT_ARROW=m.RETURN=m.OPTION=m.LEFT_ARROW=m.ESCAPE=m.ENTER=m.DOWN_ARROW=m.DELETE=m.CONTROL=m.BACKSPACE=m.ALT=m.AUTO=m.HSL=m.HSB=m.RGB=m.MITER=m.BEVEL=m.ROUND=m.SQUARE=m.PROJECT=m.PIE=m.CHORD=m.OPEN=m.CLOSE=m.TESS=m.QUAD_STRIP=m.QUADS=m.TRIANGLE_STRIP=m.TRIANGLE_FAN=m.TRIANGLES=m.LINE_LOOP=m.LINE_STRIP=m.LINES=m.POINTS=m.BASELINE=m.BOTTOM=m.TOP=m.CENTER=m.LEFT=m.RIGHT=m.RADIUS=m.CORNERS=m.CORNER=m.RAD_TO_DEG=m.DEG_TO_RAD=m.RADIANS=m.DEGREES=m.TWO_PI=m.TAU=m.QUARTER_PI=m.PI=m.HALF_PI=m.WAIT=m.TEXT=m.MOVE=m.HAND=m.CROSS=m.ARROW=m.WEBGL=m.P2D=m.VERSION=void 0,m.FALLBACK=m.LABEL=m.AXES=m.GRID=m._DEFAULT_FILL=m._DEFAULT_STROKE=m.PORTRAIT=m.LANDSCAPE=m.MIRROR=m.CLAMP=m.REPEAT=m.NEAREST=m.IMAGE=m.IMMEDIATE=m.TEXTURE=m.FILL=m.STROKE=m.CURVE=void 0;var p=Math.PI;m.VERSION="1.4.1",m.P2D="p2d",m.WEBGL="webgl",m.ARROW="default",m.CROSS="crosshair",m.HAND="pointer",m.MOVE="move",m.TEXT="text",m.WAIT="wait";var r=p/2;m.HALF_PI=r;var h=p;m.PI=h;var u=p/4;m.QUARTER_PI=u;var d=2*p;m.TAU=d;var c=2*p;m.TWO_PI=c,m.DEGREES="degrees",m.RADIANS="radians";var i=p/180;m.DEG_TO_RAD=i;var n=180/p;m.RAD_TO_DEG=n,m.CORNER="corner",m.CORNERS="corners",m.RADIUS="radius",m.RIGHT="right",m.LEFT="left",m.CENTER="center",m.TOP="top",m.BOTTOM="bottom",m.BASELINE="alphabetic",m.POINTS=0,m.LINES=1,m.LINE_STRIP=3,m.LINE_LOOP=2,m.TRIANGLES=4,m.TRIANGLE_FAN=6,m.TRIANGLE_STRIP=5,m.QUADS="quads",m.QUAD_STRIP="quad_strip",m.TESS="tess",m.CLOSE="close",m.OPEN="open",m.CHORD="chord",m.PIE="pie",m.PROJECT="square",m.SQUARE="butt",m.ROUND="round",m.BEVEL="bevel",m.MITER="miter",m.RGB="rgb",m.HSB="hsb",m.HSL="hsl",m.AUTO="auto",m.ALT=18,m.BACKSPACE=8,m.CONTROL=17,m.DELETE=46,m.DOWN_ARROW=40,m.ENTER=13,m.ESCAPE=27,m.LEFT_ARROW=37,m.OPTION=18,m.RETURN=13,m.RIGHT_ARROW=39,m.SHIFT=16,m.TAB=9,m.UP_ARROW=38,m.BLEND="source-over",m.REMOVE="destination-out",m.ADD="lighter",m.DARKEST="darken",m.LIGHTEST="lighten",m.DIFFERENCE="difference",m.SUBTRACT="subtract",m.EXCLUSION="exclusion",m.MULTIPLY="multiply",m.SCREEN="screen",m.REPLACE="copy",m.OVERLAY="overlay",m.HARD_LIGHT="hard-light",m.SOFT_LIGHT="soft-light",m.DODGE="color-dodge",m.BURN="color-burn",m.THRESHOLD="threshold",m.GRAY="gray",m.OPAQUE="opaque",m.INVERT="invert",m.POSTERIZE="posterize",m.DILATE="dilate",m.ERODE="erode",m.BLUR="blur",m.NORMAL="normal",m.ITALIC="italic",m.BOLD="bold",m.BOLDITALIC="bold italic",m.CHAR="CHAR",m.WORD="WORD",m._DEFAULT_TEXT_FILL="#000000",m._DEFAULT_LEADMULT=1.25,m._CTX_MIDDLE="middle",m.LINEAR="linear",m.QUADRATIC="quadratic",m.BEZIER="bezier",m.CURVE="curve",m.STROKE="stroke",m.FILL="fill",m.TEXTURE="texture",m.IMMEDIATE="immediate",m.IMAGE="image",m.NEAREST="nearest",m.REPEAT="repeat",m.CLAMP="clamp",m.MIRROR="mirror",m.LANDSCAPE="landscape",m.PORTRAIT="portrait",m._DEFAULT_STROKE="#000000",m._DEFAULT_FILL="#FFFFFF",m.GRID="grid",m.AXES="axes",m.LABEL="label",m.FALLBACK="fallback"},{}],254:[function(t,g,m){function p(a){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(a)}t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r,h=(r=t("./main"))&&r.__esModule?r:{default:r},u=function(a){if(a&&a.__esModule)return a;if(a===null||p(a)!=="object"&&typeof a!="function")return{default:a};var f=d();if(f&&f.has(a))return f.get(a);var v={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in a)if(Object.prototype.hasOwnProperty.call(a,_)){var w=b?Object.getOwnPropertyDescriptor(a,_):null;w&&(w.get||w.set)?Object.defineProperty(v,_,w):v[_]=a[_]}return v.default=a,f&&f.set(a,v),v}(t("./constants"));function d(){if(typeof WeakMap!="function")return null;var a=new WeakMap;return d=function(){return a},a}var c=[u.ARROW,u.CROSS,u.HAND,u.MOVE,u.TEXT,u.WAIT];h.default.prototype._frameRate=0,h.default.prototype._lastFrameTime=window.performance.now(),h.default.prototype._targetFrameRate=60;var i=window.print;function n(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function o(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}h.default.prototype.print=function(){var a;arguments.length?(a=console).log.apply(a,arguments):i()},h.default.prototype.frameCount=0,h.default.prototype.deltaTime=0,h.default.prototype.focused=document.hasFocus(),h.default.prototype.cursor=function(a,f,v){var b="auto",_=this._curElement.elt;if(c.includes(a))b=a;else if(typeof a=="string"){var w="";f&&v&&typeof f=="number"&&typeof v=="number"&&(w="".concat(f," ").concat(v)),b=a.substring(0,7)==="http://"||a.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(a)?"url(".concat(a,") ").concat(w,", auto"):a}_.style.cursor=b},h.default.prototype.frameRate=function(a){return h.default._validateParameters("frameRate",arguments),typeof a!="number"||a<0?this._frameRate:(this._setProperty("_targetFrameRate",a),a===0&&this._setProperty("_frameRate",a),this)},h.default.prototype.getFrameRate=function(){return this.frameRate()},h.default.prototype.setFrameRate=function(a){return this.frameRate(a)},h.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},h.default.prototype.displayWidth=screen.width,h.default.prototype.displayHeight=screen.height,h.default.prototype.windowWidth=n(),h.default.prototype.windowHeight=o(),h.default.prototype._onresize=function(a){this._setProperty("windowWidth",n()),this._setProperty("windowHeight",o());var f,v=this._isGlobal?window:this;typeof v.windowResized=="function"&&((f=v.windowResized(a))===void 0||f||a.preventDefault())},h.default.prototype.width=0,h.default.prototype.height=0,h.default.prototype.fullscreen=function(a){if(h.default._validateParameters("fullscreen",arguments),a===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;a?function(f){if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");f.requestFullscreen?f.requestFullscreen():f.mozRequestFullScreen?f.mozRequestFullScreen():f.webkitRequestFullscreen?f.webkitRequestFullscreen():f.msRequestFullscreen&&f.msRequestFullscreen()}(document.documentElement):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},h.default.prototype.pixelDensity=function(a){var f;return h.default._validateParameters("pixelDensity",arguments),typeof a=="number"?(a!==this._pixelDensity&&(this._pixelDensity=a),(f=this).resizeCanvas(this.width,this.height,!0)):f=this._pixelDensity,f},h.default.prototype.displayDensity=function(){return window.devicePixelRatio},h.default.prototype.getURL=function(){return location.href},h.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(a){return a!==""})},h.default.prototype.getURLParams=function(){for(var a,f=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,v={};(a=f.exec(location.search))!=null;)a.index===f.lastIndex&&f.lastIndex++,v[a[1]]=a[2];return v};var l=h.default;m.default=l},{"./constants":253,"./main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.includes":156,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191}],255:[function(t,g,m){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../main"))&&p.__esModule?p:{default:p};t("../internationalization");var h=null,u=null;r.default._friendlyError=r.default._checkForUserDefinedFunctions=r.default._fesErrorMonitor=function(){},h=null;var d="https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup";u=function(){function n(l){return Object.getOwnPropertyNames(l).filter(function(a){return a[0]!=="_"&&!(a in o)&&(o[a]=!0)}).map(function(a){var f;return f=typeof l[a]=="function"?"function":a===a.toUpperCase()?"constant":"variable",{name:a,type:f}})}var o={};(h=[].concat(n(r.default.prototype),n(t("../constants")))).sort(function(l,a){return a.name.length-l.name.length})};function c(n,o){o=o||console.log.bind(console),h||u(),h.some(function(l){if(n.message&&n.message.match("\\W?".concat(l.name,"\\W"))!==null){var a=l.type==="function"?"".concat(l.name,"()"):l.name;return o("Did you just try to use p5.js's ".concat(a," ").concat(l.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(d)),!0}})}r.default.prototype._helpForMisusedAtTopLevelCode=c,document.readyState!=="complete"&&(window.addEventListener("error",c,!1),window.addEventListener("load",function(){window.removeEventListener("error",c,!1)}));var i=r.default;m.default=i},{"../constants":253,"../internationalization":262,"../main":264,"./browser_errors":void 0,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.function.name":166,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229}],256:[function(t,g,m){Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../main"))&&p.__esModule?p:{default:p};t("../internationalization"),r.default._friendlyFileLoadError=function(){};var h=r.default;m.default=h},{"../internationalization":262,"../main":264}],257:[function(t,g,m){function p(i){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.flat-map"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.unscopables.flat-map"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r=d(t("../main"));t("../internationalization"),u(t("../constants"));function h(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return h=function(){return i},i}function u(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var n=h();if(n&&n.has(i))return n.get(i);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){var f=l?Object.getOwnPropertyDescriptor(i,a):null;f&&(f.get||f.set)?Object.defineProperty(o,a,f):o[a]=i[a]}return o.default=i,n&&n.set(i,o),o}function d(i){return i&&i.__esModule?i:{default:i}}r.default._fesCodeReader=function(){};var c=r.default;m.default=c},{"../constants":253,"../internationalization":262,"../main":264,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.flat-map":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.unscopables.flat-map":165,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229}],258:[function(t,g,m){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../main"))&&p.__esModule?p:{default:p};function h(){var d=/(^|@)\S+:\d+/,c=/^\s*at .*(\S+:\d+|\(native\))/m,i=/^(eval@)?(\[native code])?$/;return{parse:function(n){return n.stacktrace!==void 0||n["opera#sourceloc"]!==void 0?this.parseOpera(n):n.stack&&n.stack.match(c)?this.parseV8OrIE(n):n.stack?this.parseFFOrSafari(n):void 0},extractLocation:function(n){if(n.indexOf(":")===-1)return[n];var o=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(n.replace(/[()]/g,""));return[o[1],o[2]||void 0,o[3]||void 0]},parseV8OrIE:function(n){return n.stack.split(`
`).filter(function(o){return!!o.match(c)},this).map(function(o){-1<o.indexOf("(eval ")&&(o=o.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var l=o.replace(/^\s+/,"").replace(/\(eval code/g,"("),a=l.match(/ (\((.+):(\d+):(\d+)\)$)/),f=(l=a?l.replace(a[0],""):l).split(/\s+/).slice(1),v=this.extractLocation(a?a[1]:f.pop());return{functionName:f.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(v[0])?void 0:v[0],lineNumber:v[1],columnNumber:v[2],source:o}},this)},parseFFOrSafari:function(n){return n.stack.split(`
`).filter(function(o){return!o.match(i)},this).map(function(o){if(-1<o.indexOf(" > eval")&&(o=o.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),o.indexOf("@")===-1&&o.indexOf(":")===-1)return{functionName:o};var l=/((.*".+"[^@]*)?[^@]*)(?:@)/,a=o.match(l),f=a&&a[1]?a[1]:void 0,v=this.extractLocation(o.replace(l,""));return{functionName:f,fileName:v[0],lineNumber:v[1],columnNumber:v[2],source:o}},this)},parseOpera:function(n){return!n.stacktrace||-1<n.message.indexOf(`
`)&&n.message.split(`
`).length>n.stacktrace.split(`
`).length?this.parseOpera9(n):n.stack?this.parseOpera11(n):this.parseOpera10(n)},parseOpera9:function(n){for(var o=/Line (\d+).*script (?:in )?(\S+)/i,l=n.message.split(`
`),a=[],f=2,v=l.length;f<v;f+=2){var b=o.exec(l[f]);b&&a.push({fileName:b[2],lineNumber:b[1],source:l[f]})}return a},parseOpera10:function(n){for(var o=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,l=n.stacktrace.split(`
`),a=[],f=0,v=l.length;f<v;f+=2){var b=o.exec(l[f]);b&&a.push({functionName:b[3]||void 0,fileName:b[2],lineNumber:b[1],source:l[f]})}return a},parseOpera11:function(n){return n.stack.split(`
`).filter(function(o){return!!o.match(d)&&!o.match(/^Error created at/)},this).map(function(o){var l,a=o.split("@"),f=this.extractLocation(a.pop()),v=a.shift()||"",b=v.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return v.match(/\(([^)]*)\)/)&&(l=v.replace(/^[^(]+\(([^)]*)\)$/,"$1")),{functionName:b,args:l===void 0||l==="[arguments not available]"?void 0:l.split(","),fileName:f[0],lineNumber:f[1],columnNumber:f[2],source:o}},this)}}}r.default._getErrorStackParser=function(){return new h};var u=r.default;m.default=u},{"../main":264,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191}],259:[function(t,g,m){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../main"))&&p.__esModule?p:{default:p};(function(c){if(!(c&&c.__esModule)&&!(c===null||u(c)!=="object"&&typeof c!="function")){var i=h();if(i&&i.has(c))return i.get(c);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in c)if(Object.prototype.hasOwnProperty.call(c,l)){var a=o?Object.getOwnPropertyDescriptor(c,l):null;a&&(a.get||a.set)?Object.defineProperty(n,l,a):n[l]=c[l]}n.default=c,i&&i.set(c,n)}})(t("../constants")),t("../internationalization");function h(){if(typeof WeakMap!="function")return null;var c=new WeakMap;return h=function(){return c},c}function u(c){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(c)}r.default._validateParameters=r.default._clearValidateParamsCache=function(){};var d=r.default;m.default=d},{"../../../docs/parameterData.json":void 0,"../constants":253,"../internationalization":262,"../main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":166,"core-js/modules/es.map":167,"core-js/modules/es.number.constructor":170,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229}],260:[function(t,g,m){function p(d){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(d)}Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r=function(d){if(d&&d.__esModule)return d;if(d===null||p(d)!=="object"&&typeof d!="function")return{default:d};var c=h();if(c&&c.has(d))return c.get(d);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in d)if(Object.prototype.hasOwnProperty.call(d,o)){var l=n?Object.getOwnPropertyDescriptor(d,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=d[o]}return i.default=d,c&&c.set(d,i),i}(t("./constants"));function h(){if(typeof WeakMap!="function")return null;var d=new WeakMap;return h=function(){return d},d}var u={modeAdjust:function(d,c,i,n,o){return o===r.CORNER?{x:d,y:c,w:i,h:n}:o===r.CORNERS?{x:d,y:c,w:i-d,h:n-c}:o===r.RADIUS?{x:d-i,y:c-n,w:2*i,h:2*n}:o===r.CENTER?{x:d-.5*i,y:c-.5*n,w:i,h:n}:void 0}};m.default=u},{"./constants":253}],261:[function(t,g,m){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};t("./internationalization");var h=Promise.resolve();Promise.all([new Promise(function(u,d){document.readyState==="complete"?u():window.addEventListener("load",u,!1)}),h]).then(function(){window._setupDone===void 0?window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!r.default.instance&&new r.default:console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import")})},{"../core/main":264,"./internationalization":262,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/web.dom-collections.iterator":229}],262:[function(t,g,m){t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(m,"__esModule",{value:!0}),m.setTranslatorLanguage=m.currentTranslatorLanguage=m.availableTranslatorLanguages=m.initialize=m.translator=void 0;var p,r,h=d(t("i18next")),u=d(t("i18next-browser-languagedetector"));function d(o){return o&&o.__esModule?o:{default:o}}function c(o,l){for(var a=0;a<l.length;a++){var f=l[a];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(o,f.key,f)}}var i=function(){function o(f,v){(function(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")})(this,o),this.init(f,v)}var l,a;return l=o,(a=[{key:"fetchWithTimeout",value:function(f,v,b){var _=2<arguments.length&&b!==void 0?b:2e3;return Promise.race([fetch(f,v),new Promise(function(w,E){return setTimeout(function(){return E(new Error("timeout"))},_)})])}},{key:"init",value:function(f,v){var b=1<arguments.length&&v!==void 0?v:{};this.services=f,this.options=b}},{key:"read",value:function(f,v,b){var _=this.options.loadPath;if(f===this.options.fallback)b(null,p[f][v]);else if(r.includes(f)){var w=this.services.interpolator.interpolate(_,{lng:f,ns:v});this.loadUrl(w,b)}else b("Not found",!1)}},{key:"loadUrl",value:function(f,v){this.fetchWithTimeout(f).then(function(b){if(!b.ok)throw new Error("failed loading ".concat(f));return b.json()},function(){throw new Error("failed loading ".concat(f))}).then(function(b){return v(null,b)}).catch(v)}}])&&c(l.prototype,a),o}();i.type="backend";var n=function(o,l){console.debug("p5.js translator called before translations were loaded"),h.default.t(o,l)};m.translator=n,m.initialize=function(){return h.default.use(u.default).use(i).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:p}).then(function(o){m.translator=n=o},function(o){return console.debug("Translations failed to load (".concat(o,")"))})},m.availableTranslatorLanguages=function(){return h.default.languages},m.currentTranslatorLanguage=function(){return h.default.language},m.setTranslatorLanguage=function(o){return h.default.changeLanguage(o||void 0,function(l){return console.debug("Translations failed to load (".concat(l,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/web.dom-collections.iterator":229,i18next:3,"i18next-browser-languagedetector":3}],263:[function(t,g,m){Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("./main"))&&p.__esModule?p:{default:p};r.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},r.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},r.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},r.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")};var h=r.default;m.default=h},{"./main":264}],264:[function(t,g,m){function p(n){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0,t("./shim");var r=function(n){if(n&&n.__esModule)return n;if(n===null||p(n)!=="object"&&typeof n!="function")return{default:n};var o=h();if(o&&o.has(n))return o.get(n);var l={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in n)if(Object.prototype.hasOwnProperty.call(n,f)){var v=a?Object.getOwnPropertyDescriptor(n,f):null;v&&(v.get||v.set)?Object.defineProperty(l,f,v):l[f]=n[f]}return l.default=n,o&&o.set(n,l),l}(t("./constants"));function h(){if(typeof WeakMap!="function")return null;var n=new WeakMap;return h=function(){return n},n}function u(n,o){for(var l=0;l<o.length;l++){var a=o[l];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}var d=function(){function n(a,f,v){var b=this;(function(Z,ge){if(!(Z instanceof ge))throw new TypeError("Cannot call a class as a function")})(this,n),this._setupDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=f,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var _=Object.getOwnPropertyNames(n.prototype._registeredMethods),w=!0,E=!1,C=void 0;try{for(var A,L=_[Symbol.iterator]();!(w=(A=L.next()).done);w=!0){var P=A.value;this._registeredMethods[P]=n.prototype._registeredMethods[P].slice()}}catch(Z){E=!0,C=Z}finally{try{w||L.return==null||L.return()}finally{if(E)throw C}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){b._userNode&&typeof b._userNode=="string"&&(b._userNode=document.getElementById(b._userNode));var Z=b._isGlobal?window:b;if(Z.preload){var ge=document.getElementById(b._loadingScreenId);ge||((ge=document.createElement("div")).innerHTML="Loading...",ge.style.position="absolute",ge.id=b._loadingScreenId,(b._userNode||document.body).appendChild(ge));var $=b._preloadMethods;for(var se in $){$[se]=$[se]||n;var z=$[se];z!==n.prototype&&z!==n||(b._isGlobal&&(window[se]=b._wrapPreload(b,se)),z=b),b._registeredPreloadMethods[se]=z[se],z[se]=b._wrapPreload(z,se)}Z.preload(),b._runIfPreloadsAreDone()}else b._setup(),b._draw()},this._runIfPreloadsAreDone=function(){var Z=this._isGlobal?window:this;if(Z._preloadCount===0){var ge=document.getElementById(Z._loadingScreenId);ge&&ge.parentNode.removeChild(ge),this._setupDone||(this._lastFrameTime=window.performance.now(),Z._setup(),Z._draw())}},this._decrementPreload=function(){var Z=this._isGlobal?window:this;typeof Z.preload=="function"&&(Z._setProperty("_preloadCount",Z._preloadCount-1),Z._runIfPreloadsAreDone())},this._wrapPreload=function(Z,ge){var $=this;return function(){$._incrementPreload();for(var se=arguments.length,z=new Array(se),de=0;de<se;de++)z[de]=arguments[de];return $._registeredPreloadMethods[ge].apply(Z,z)}},this._incrementPreload=function(){var Z=this._isGlobal?window:this;Z._setProperty("_preloadCount",Z._preloadCount+1)},this._setup=function(){b.createCanvas(b._defaultCanvasSize.width,b._defaultCanvasSize.height,"p2d");var Z=b._isGlobal?window:b;if(typeof Z.preload=="function")for(var ge in b._preloadMethods)Z[ge]=b._preloadMethods[ge][ge],Z[ge]&&b&&(Z[ge]=Z[ge].bind(b));b._millisStart=window.performance.now(),typeof Z.setup=="function"&&Z.setup();var $=document.getElementsByTagName("canvas"),se=!0,z=!1,de=void 0;try{for(var re,ie=$[Symbol.iterator]();!(se=(re=ie.next()).done);se=!0){var j=re.value;j.dataset.hidden==="true"&&(j.style.visibility="",delete j.dataset.hidden)}}catch(B){z=!0,de=B}finally{try{se||ie.return==null||ie.return()}finally{if(z)throw de}}b._lastFrameTime=window.performance.now(),b._setupDone=!0,(b._accessibleOutputs.grid||b._accessibleOutputs.text)&&b._updateAccsOutput()},this._draw=function(){var Z=window.performance.now(),ge=Z-b._lastFrameTime,$=1e3/b._targetFrameRate;(!b._loop||$-5<=ge)&&(b.redraw(),b._frameRate=1e3/(Z-b._lastFrameTime),b.deltaTime=Z-b._lastFrameTime,b._setProperty("deltaTime",b.deltaTime),b._lastFrameTime=Z,b._updateMouseCoords!==void 0&&(b._updateMouseCoords(),b._setProperty("movedX",0),b._setProperty("movedY",0))),b._loop&&(b._requestAnimId=window.requestAnimationFrame(b._draw))},this._setProperty=function(Z,ge){b[Z]=ge,b._isGlobal&&(window[Z]=ge)},this.remove=function(){var Z=document.getElementById(b._loadingScreenId);if(Z&&(Z.parentNode.removeChild(Z),b._incrementPreload()),b._curElement){for(var ge in b._loop=!1,b._requestAnimId&&window.cancelAnimationFrame(b._requestAnimId),b._events)window.removeEventListener(ge,b._events[ge]);var $=!0,se=!1,z=void 0;try{for(var de,re=b._elements[Symbol.iterator]();!($=(de=re.next()).done);$=!0){var ie=de.value;for(var j in ie.elt&&ie.elt.parentNode&&ie.elt.parentNode.removeChild(ie.elt),ie._events)ie.elt.removeEventListener(j,ie._events[j])}}catch(Y){se=!0,z=Y}finally{try{$||re.return==null||re.return()}finally{if(se)throw z}}var B=b;b._registeredMethods.remove.forEach(function(Y){Y!==void 0&&Y.call(B)})}if(b._isGlobal){for(var G in n.prototype)try{delete window[G]}catch{window[G]=void 0}for(var ne in b)if(b.hasOwnProperty(ne))try{delete window[ne]}catch{window[ne]=void 0}n.instance=null}},this._registeredMethods.init.forEach(function(Z){Z!==void 0&&Z.call(this)},this),this._setupPromisePreloads();var R=this._createFriendlyGlobalFunctionBinder();if(a)a(this),n._checkForUserDefinedFunctions(this);else{for(var N in this._isGlobal=!0,n.instance=this,n.prototype)if(typeof n.prototype[N]=="function"){var I=N.substring(2);this._events.hasOwnProperty(I)||(Math.hasOwnProperty(N)&&Math[N]===n.prototype[N]?R(N,n.prototype[N]):R(N,n.prototype[N].bind(this)))}else R(N,n.prototype[N]);for(var O in this)this.hasOwnProperty(O)&&R(O,this[O])}for(var U in this._events){var K=this["_on".concat(U)];if(K){var ee=K.bind(this);window.addEventListener(U,ee,{passive:!1}),this._events[U]=ee}}function H(){b._setProperty("focused",!0)}function te(){b._setProperty("focused",!1)}window.addEventListener("focus",H),window.addEventListener("blur",te),this.registerMethod("remove",function(){window.removeEventListener("focus",H),window.removeEventListener("blur",te)}),document.readyState==="complete"?this._start():window.addEventListener("load",this._start.bind(this),!1)}var o,l;return o=n,(l=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=r.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(a,f){n.prototype._preloadMethods.hasOwnProperty(a)||(n.prototype._preloadMethods[a]=f)}},{key:"registerMethod",value:function(a,f){var v=this||n.prototype;v._registeredMethods.hasOwnProperty(a)||(v._registeredMethods[a]=[]),v._registeredMethods[a].push(f)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(a){var f=0<arguments.length&&a!==void 0?a:{},v=f.globalObject||window;return f.log||console.log.bind(console),function(b,_){v[b]=_}}}])&&u(o.prototype,l),n}();for(var c in d.instance=null,d.disableFriendlyErrors=!1,r)d.prototype[c]=r[c];d.VERSION=r.VERSION,d.prototype._preloadMethods={loadJSON:d.prototype,loadImage:d.prototype,loadStrings:d.prototype,loadXML:d.prototype,loadBytes:d.prototype,loadTable:d.prototype,loadFont:d.prototype,loadModel:d.prototype,loadShader:d.prototype},d.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},d.prototype._registeredPreloadMethods={};var i=d;m.default=i},{"./constants":253,"./shim":275,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229}],265:[function(t,g,m){Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("./main"))&&p.__esModule?p:{default:p};r.default.Element=function(u,d){this.elt=u,this._pInst=this._pixelsState=d,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},r.default.Element.prototype.parent=function(u){return u===void 0?this.elt.parentNode:(typeof u=="string"?(u[0]==="#"&&(u=u.substring(1)),u=document.getElementById(u)):u instanceof r.default.Element&&(u=u.elt),u.appendChild(this.elt),this)},r.default.Element.prototype.id=function(u){return u===void 0?this.elt.id:(this.elt.id=u,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},r.default.Element.prototype.class=function(u){return u===void 0?this.elt.className:(this.elt.className=u,this)},r.default.Element.prototype.mousePressed=function(u){return r.default.Element._adjustListener("mousedown",function(d){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(d),u.call(this)},this),this},r.default.Element.prototype.doubleClicked=function(u){return r.default.Element._adjustListener("dblclick",u,this),this},r.default.Element.prototype.mouseWheel=function(u){return r.default.Element._adjustListener("wheel",u,this),this},r.default.Element.prototype.mouseReleased=function(u){return r.default.Element._adjustListener("mouseup",u,this),this},r.default.Element.prototype.mouseClicked=function(u){return r.default.Element._adjustListener("click",u,this),this},r.default.Element.prototype.mouseMoved=function(u){return r.default.Element._adjustListener("mousemove",u,this),this},r.default.Element.prototype.mouseOver=function(u){return r.default.Element._adjustListener("mouseover",u,this),this},r.default.Element.prototype.mouseOut=function(u){return r.default.Element._adjustListener("mouseout",u,this),this},r.default.Element.prototype.touchStarted=function(u){return r.default.Element._adjustListener("touchstart",u,this),this},r.default.Element.prototype.touchMoved=function(u){return r.default.Element._adjustListener("touchmove",u,this),this},r.default.Element.prototype.touchEnded=function(u){return r.default.Element._adjustListener("touchend",u,this),this},r.default.Element.prototype.dragOver=function(u){return r.default.Element._adjustListener("dragover",u,this),this},r.default.Element.prototype.dragLeave=function(u){return r.default.Element._adjustListener("dragleave",u,this),this},r.default.Element._adjustListener=function(u,d,c){return d===!1?r.default.Element._detachListener(u,c):r.default.Element._attachListener(u,d,c),this},r.default.Element._attachListener=function(u,d,c){c._events[u]&&r.default.Element._detachListener(u,c);var i=d.bind(c);c.elt.addEventListener(u,i,!1),c._events[u]=i},r.default.Element._detachListener=function(u,d){var c=d._events[u];d.elt.removeEventListener(u,c,!1),d._events[u]=null},r.default.Element.prototype._setProperty=function(u,d){this[u]=d};var h=r.default.Element;m.default=h},{"./main":264}],266:[function(t,g,m){function p(i){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(i)}t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.splice"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r,h=(r=t("./main"))&&r.__esModule?r:{default:r},u=function(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var n=d();if(n&&n.has(i))return n.get(i);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){var f=l?Object.getOwnPropertyDescriptor(i,a):null;f&&(f.get||f.set)?Object.defineProperty(o,a,f):o[a]=i[a]}return o.default=i,n&&n.set(i,o),o}(t("./constants"));function d(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return d=function(){return i},i}h.default.Graphics=function(i,n,o,l){var a=o||u.P2D;this.canvas=document.createElement("canvas");var f=l._userNode||document.body;for(var v in f.appendChild(this.canvas),h.default.Element.call(this,this.canvas,l),h.default.prototype)this[v]||(typeof h.default.prototype[v]=="function"?this[v]=h.default.prototype[v].bind(this):this[v]=h.default.prototype[v]);return h.default.prototype._initializeInstanceVariables.apply(this),this.width=i,this.height=n,this._pixelDensity=l._pixelDensity,a===u.WEBGL?this._renderer=new h.default.RendererGL(this.canvas,this,!1):this._renderer=new h.default.Renderer2D(this.canvas,this,!1),l._elements.push(this),Object.defineProperty(this,"deltaTime",{get:function(){return this._pInst.deltaTime}}),this._renderer.resize(i,n),this._renderer._applyDefaults(),this},h.default.Graphics.prototype=Object.create(h.default.Element.prototype),h.default.Graphics.prototype.reset=function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()},h.default.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var i=this._pInst._elements.indexOf(this);for(var n in i!==-1&&this._pInst._elements.splice(i,1),this._events)this.elt.removeEventListener(n,this._events[n])};var c=h.default.Graphics;m.default=c},{"./constants":253,"./main":264,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.splice":164}],267:[function(t,g,m){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("./main"))&&p.__esModule?p:{default:p},h=function(n){if(n&&n.__esModule)return n;if(n===null||d(n)!=="object"&&typeof n!="function")return{default:n};var o=u();if(o&&o.has(n))return o.get(n);var l={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in n)if(Object.prototype.hasOwnProperty.call(n,f)){var v=a?Object.getOwnPropertyDescriptor(n,f):null;v&&(v.get||v.set)?Object.defineProperty(l,f,v):l[f]=n[f]}return l.default=n,o&&o.set(n,l),l}(t("../core/constants"));function u(){if(typeof WeakMap!="function")return null;var n=new WeakMap;return u=function(){return n},n}function d(n){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(n)}function c(n){var o=0,l=0;if(n.offsetParent)for(;o+=n.offsetLeft,l+=n.offsetTop,n=n.offsetParent;);else o+=n.offsetLeft,l+=n.offsetTop;return[o,l]}r.default.Renderer=function(n,o,l){r.default.Element.call(this,n,o),this.canvas=n,this._pixelsState=o,l?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=h.NORMAL,this._textAscent=null,this._textDescent=null,this._textAlign=h.LEFT,this._textBaseline=h.BASELINE,this._textWrap=h.WORD,this._rectMode=h.CORNER,this._ellipseMode=h.CENTER,this._curveTightness=0,this._imageMode=h.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._leadingSet=!1},r.default.Renderer.prototype=Object.create(r.default.Element.prototype),r.default.Renderer.prototype.push=function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}},r.default.Renderer.prototype.pop=function(n){n.properties&&Object.assign(this,n.properties)},r.default.Renderer.prototype.resize=function(n,o){this.width=n,this.height=o,this.elt.width=n*this._pInst._pixelDensity,this.elt.height=o*this._pInst._pixelDensity,this.elt.style.width="".concat(n,"px"),this.elt.style.height="".concat(o,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},r.default.Renderer.prototype.get=function(n,o,l,a){var f=this._pixelsState,v=f._pixelDensity,b=this.canvas;if(n===void 0&&o===void 0)n=o=0,l=f.width,a=f.height;else if(n*=v,o*=v,l===void 0&&a===void 0)return n<0||o<0||n>=b.width||o>=b.height?[0,0,0,0]:this._getPixel(n,o);var _=new r.default.Image(l,a);return _.canvas.getContext("2d").drawImage(b,n,o,l*v,a*v,0,0,l,a),_},r.default.Renderer.prototype.textLeading=function(n){return typeof n=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",n),this._pInst):this._textLeading},r.default.Renderer.prototype.textSize=function(n){return typeof n=="number"?(this._setProperty("_textSize",n),this._leadingSet||this._setProperty("_textLeading",n*h._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},r.default.Renderer.prototype.textStyle=function(n){return n?(n!==h.NORMAL&&n!==h.ITALIC&&n!==h.BOLD&&n!==h.BOLDITALIC||this._setProperty("_textStyle",n),this._applyTextProperties()):this._textStyle},r.default.Renderer.prototype.textAscent=function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent},r.default.Renderer.prototype.textDescent=function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent},r.default.Renderer.prototype.textAlign=function(n,o){return n!==void 0?(this._setProperty("_textAlign",n),o!==void 0&&this._setProperty("_textBaseline",o),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}},r.default.Renderer.prototype.textWrap=function(n){return this._setProperty("_textWrap",n),this._textWrap},r.default.Renderer.prototype.text=function(n,o,l,a,f){var v,b,_,w,E,C,A,L=this._pInst,P=this._textWrap,R=Number.MAX_VALUE;if((this._doFill||this._doStroke)&&n!==void 0){if(typeof n!="string"&&(n=n.toString()),v=(n=n.replace(/(\t)/g,"  ")).split(`
`),a!==void 0){switch(this._rectMode===h.CENTER&&(o-=a/2),this._textAlign){case h.CENTER:o+=a/2;break;case h.RIGHT:o+=a}var N=!1;if(f!==void 0){switch(this._rectMode===h.CENTER&&(l-=f/2),this._textBaseline){case h.BOTTOM:A=l+f,l=Math.max(A,l);break;case h.CENTER:A=l+f/2,l=Math.max(A,l);break;case h.BASELINE:N=!0,this._textBaseline=h.TOP}R=l+f-L.textAscent()}if(P===h.WORD){for(var I=[],O=0;O<v.length;O++){b="",E=v[O].split(" ");for(var U=0;U<E.length;U++)_="".concat(b+E[U])+" ",b=a<(w=this.textWidth(_))&&0<b.length?(I.push(b),"".concat(E[U])+" "):_;I.push(b)}var K=0,ee=L.textAlign().vertical;ee===h.CENTER?K=(I.length-1)*L.textLeading()/2:ee===h.BOTTOM&&(K=(I.length-1)*L.textLeading());for(var H=0;H<v.length;H++){b="",E=v[H].split(" ");for(var te=0;te<E.length;te++)_="".concat(b+E[te])+" ",a<(w=this.textWidth(_))&&0<b.length?(this._renderText(L,b.trim(),o,l-K,R),b="".concat(E[te])+" ",l+=L.textLeading()):b=_;this._renderText(L,b.trim(),o,l-K,R),l+=L.textLeading(),N&&(this._textBaseline=h.BASELINE)}}else{for(var Z=[],ge=0;ge<v.length;ge++){b="",C=v[ge].split("");for(var $=0;$<C.length;$++)_="".concat(b+C[$]),(w=this.textWidth(_))<=a?b+=C[$]:a<w&&0<b.length&&(Z.push(b),b="".concat(C[$]))}Z.push(b);var se=0,z=L.textAlign().vertical;z===h.CENTER?se=(Z.length-1)*L.textLeading()/2:z===h.BOTTOM&&(se=(Z.length-1)*L.textLeading());for(var de=0;de<v.length;de++){b="",C=v[de].split("");for(var re=0;re<C.length;re++)_="".concat(b+C[re]),(w=this.textWidth(_))<=a?b+=C[re]:a<w&&0<b.length&&(this._renderText(L,b.trim(),o,l-se,R),l+=L.textLeading(),b="".concat(C[re]))}this._renderText(L,b.trim(),o,l-se,R),l+=L.textLeading(),N&&(this._textBaseline=h.BASELINE)}}else{var ie=0,j=L.textAlign().vertical;j===h.CENTER?ie=(v.length-1)*L.textLeading()/2:j===h.BOTTOM&&(ie=(v.length-1)*L.textLeading());for(var B=0;B<v.length;B++)this._renderText(L,v[B],o,l-ie,R),l+=L.textLeading()}return L}},r.default.Renderer.prototype._applyDefaults=function(){return this},r.default.Renderer.prototype._isOpenType=function(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return d(n)==="object"&&n.font&&n.font.supported},r.default.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType())return this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent()),this;var n=document.createElement("span");n.style.fontFamily=this._textFont,n.style.fontSize="".concat(this._textSize,"px"),n.innerHTML="ABCjgq|";var o=document.createElement("div");o.style.display="inline-block",o.style.width="1px",o.style.height="0px";var l=document.createElement("div");l.appendChild(n),l.appendChild(o),l.style.height="0px",l.style.overflow="hidden",document.body.appendChild(l),o.style.verticalAlign="baseline";var a=c(o),f=c(n),v=a[1]-f[1];o.style.verticalAlign="bottom",a=c(o),f=c(n);var b=a[1]-f[1]-v;return document.body.removeChild(l),this._setProperty("_textAscent",v),this._setProperty("_textDescent",b),this};var i=r.default.Renderer;m.default=i},{"../core/constants":253,"./main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":170,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],268:[function(t,g,m){function p(o){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(o)}t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r=c(t("./main")),h=function(o){if(o&&o.__esModule)return o;if(o===null||p(o)!=="object"&&typeof o!="function")return{default:o};var l=d();if(l&&l.has(o))return l.get(o);var a={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in o)if(Object.prototype.hasOwnProperty.call(o,v)){var b=f?Object.getOwnPropertyDescriptor(o,v):null;b&&(b.get||b.set)?Object.defineProperty(a,v,b):a[v]=o[v]}return a.default=o,l&&l.set(o,a),a}(t("./constants")),u=c(t("../image/filters"));function d(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return d=function(){return o},o}function c(o){return o&&o.__esModule?o:{default:o}}t("./p5.Renderer");var i="rgba(0,0,0,0)";r.default.Renderer2D=function(o,l,a){return r.default.Renderer.call(this,o,l,a),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},r.default.Renderer2D.prototype=Object.create(r.default.Renderer.prototype),r.default.Renderer2D.prototype._applyDefaults=function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=h.BLEND,this._setFill(h._DEFAULT_FILL),this._setStroke(h._DEFAULT_STROKE),this.drawingContext.lineCap=h.ROUND,this.drawingContext.font="normal 12px sans-serif"},r.default.Renderer2D.prototype.resize=function(o,l){r.default.Renderer.prototype.resize.call(this,o,l),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},r.default.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof r.default.Image)this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height);else{var o,l=this._getFill(),a=(o=this._pInst).color.apply(o,arguments);this._pInst._addAccsOutput()&&this._pInst._accsBackground(a.levels);var f=a.toString();this._setFill(f),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(l),this._isErasing&&this._pInst.erase()}this.drawingContext.restore()},r.default.Renderer2D.prototype.clear=function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()},r.default.Renderer2D.prototype.fill=function(){var o,l=(o=this._pInst).color.apply(o,arguments);this._setFill(l.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",l.levels)},r.default.Renderer2D.prototype.stroke=function(){var o,l=(o=this._pInst).color.apply(o,arguments);this._setStroke(l.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",l.levels)},r.default.Renderer2D.prototype.erase=function(o,l){if(!this._isErasing){this._cachedFillStyle=this.drawingContext.fillStyle;var a=this._pInst.color(255,o).toString();this.drawingContext.fillStyle=a,this._cachedStrokeStyle=this.drawingContext.strokeStyle;var f=this._pInst.color(255,l).toString();this.drawingContext.strokeStyle=f;var v=this._cachedBlendMode;this.blendMode(h.REMOVE),this._cachedBlendMode=v,this._isErasing=!0}},r.default.Renderer2D.prototype.noErase=function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)},r.default.Renderer2D.prototype.image=function(o,l,a,f,v,b,_,w,E){var C;o.gifProperties&&o._animateGif(this._pInst);try{this._tint&&(r.default.MediaElement&&o instanceof r.default.MediaElement&&o.loadPixels(),o.canvas&&(C=this._getTintedImageCanvas(o))),C=C||o.canvas||o.elt;var A=1;o.width&&0<o.width&&(A=C.width/o.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(C,A*l,A*a,A*f,A*v,b,_,w,E),this._isErasing&&this._pInst.erase()}catch(L){if(L.name!=="NS_ERROR_NOT_AVAILABLE")throw L}},r.default.Renderer2D.prototype._getTintedImageCanvas=function(o){if(!o.canvas)return o;var l=u.default._toPixels(o.canvas),a=document.createElement("canvas");a.width=o.canvas.width,a.height=o.canvas.height;for(var f=a.getContext("2d"),v=f.createImageData(o.canvas.width,o.canvas.height),b=v.data,_=0;_<l.length;_+=4){var w=l[_],E=l[_+1],C=l[_+2],A=l[_+3];b[_]=w*this._tint[0]/255,b[_+1]=E*this._tint[1]/255,b[_+2]=C*this._tint[2]/255,b[_+3]=A*this._tint[3]/255}return f.putImageData(v,0,0),a},r.default.Renderer2D.prototype.blendMode=function(o){if(o===h.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(o!==h.BLEND&&o!==h.REMOVE&&o!==h.DARKEST&&o!==h.LIGHTEST&&o!==h.DIFFERENCE&&o!==h.MULTIPLY&&o!==h.EXCLUSION&&o!==h.SCREEN&&o!==h.REPLACE&&o!==h.OVERLAY&&o!==h.HARD_LIGHT&&o!==h.SOFT_LIGHT&&o!==h.DODGE&&o!==h.BURN&&o!==h.ADD)throw new Error("Mode ".concat(o," not recognized."));this._cachedBlendMode=o,this.drawingContext.globalCompositeOperation=o}},r.default.Renderer2D.prototype.blend=function(){for(var o=this.drawingContext.globalCompositeOperation,l=arguments.length,a=new Array(l),f=0;f<l;f++)a[f]=arguments[f];var v=a[a.length-1],b=Array.prototype.slice.call(a,0,a.length-1);this.drawingContext.globalCompositeOperation=v,r.default.prototype.copy.apply(this,b),this.drawingContext.globalCompositeOperation=o},r.default.Renderer2D.prototype._getPixel=function(o,l){var a;return[(a=this.drawingContext.getImageData(o,l,1,1).data)[0],a[1],a[2],a[3]]},r.default.Renderer2D.prototype.loadPixels=function(){var o=this._pixelsState,l=o._pixelDensity,a=this.width*l,f=this.height*l,v=this.drawingContext.getImageData(0,0,a,f);o._setProperty("imageData",v),o._setProperty("pixels",v.data)},r.default.Renderer2D.prototype.set=function(o,l,a){o=Math.floor(o),l=Math.floor(l);var f=this._pixelsState;if(a instanceof r.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(f._pixelDensity,f._pixelDensity),this.drawingContext.clearRect(o,l,a.width,a.height),this.drawingContext.drawImage(a.canvas,o,l),this.drawingContext.restore();else{var v=0,b=0,_=0,w=0,E=4*(l*f._pixelDensity*(this.width*f._pixelDensity)+o*f._pixelDensity);if(f.imageData||f.loadPixels.call(f),typeof a=="number")E<f.pixels.length&&(_=b=v=a,w=255);else if(a instanceof Array){if(a.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");E<f.pixels.length&&(v=a[0],b=a[1],_=a[2],w=a[3])}else a instanceof r.default.Color&&E<f.pixels.length&&(v=a.levels[0],b=a.levels[1],_=a.levels[2],w=a.levels[3]);for(var C=0;C<f._pixelDensity;C++)for(var A=0;A<f._pixelDensity;A++)E=4*((l*f._pixelDensity+A)*this.width*f._pixelDensity+(o*f._pixelDensity+C)),f.pixels[E]=v,f.pixels[E+1]=b,f.pixels[E+2]=_,f.pixels[E+3]=w}},r.default.Renderer2D.prototype.updatePixels=function(o,l,a,f){var v=this._pixelsState,b=v._pixelDensity;o===void 0&&l===void 0&&a===void 0&&f===void 0&&(l=o=0,a=this.width,f=this.height),o*=b,l*=b,a*=b,f*=b,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=v.imageData),this.drawingContext.putImageData(v.imageData,o,l,0,0,a,f)},r.default.Renderer2D.prototype._acuteArcToBezier=function(o,l){var a=l/2,f=Math.cos(a),v=Math.sin(a),b=1/Math.tan(a),_=o+a,w=Math.cos(_),E=Math.sin(_),C=(4-f)/3,A=v+(f-C)*b;return{ax:Math.cos(o).toFixed(7),ay:Math.sin(o).toFixed(7),bx:(C*w+A*E).toFixed(7),by:(C*E-A*w).toFixed(7),cx:(C*w-A*E).toFixed(7),cy:(C*E+A*w).toFixed(7),dx:Math.cos(o+l).toFixed(7),dy:Math.sin(o+l).toFixed(7)}},r.default.Renderer2D.prototype.arc=function(o,l,a,f,v,b,_){var w=this.drawingContext,E=a/2,C=f/2,A=0,L=[];for(o+=E,l+=C;1e-5<=b-v;)A=Math.min(b-v,h.HALF_PI),L.push(this._acuteArcToBezier(v,A)),v+=A;return this._doFill&&(w.beginPath(),L.forEach(function(P,R){R===0&&w.moveTo(o+P.ax*E,l+P.ay*C),w.bezierCurveTo(o+P.bx*E,l+P.by*C,o+P.cx*E,l+P.cy*C,o+P.dx*E,l+P.dy*C)}),_!==h.PIE&&_!=null||w.lineTo(o,l),w.closePath(),w.fill()),this._doStroke&&(w.beginPath(),L.forEach(function(P,R){R===0&&w.moveTo(o+P.ax*E,l+P.ay*C),w.bezierCurveTo(o+P.bx*E,l+P.by*C,o+P.cx*E,l+P.cy*C,o+P.dx*E,l+P.dy*C)}),_===h.PIE?(w.lineTo(o,l),w.closePath()):_===h.CHORD&&w.closePath(),w.stroke()),this},r.default.Renderer2D.prototype.ellipse=function(o){var l=this.drawingContext,a=this._doFill,f=this._doStroke,v=parseFloat(o[0]),b=parseFloat(o[1]),_=parseFloat(o[2]),w=parseFloat(o[3]);if(a&&!f){if(this._getFill()===i)return this}else if(!a&&f&&this._getStroke()===i)return this;var E=_/2*.5522847498,C=w/2*.5522847498,A=v+_,L=b+w,P=v+_/2,R=b+w/2;l.beginPath(),l.moveTo(v,R),l.bezierCurveTo(v,R-C,P-E,b,P,b),l.bezierCurveTo(P+E,b,A,R-C,A,R),l.bezierCurveTo(A,R+C,P+E,L,P,L),l.bezierCurveTo(P-E,L,v,R+C,v,R),a&&l.fill(),f&&l.stroke()},r.default.Renderer2D.prototype.line=function(o,l,a,f){var v=this.drawingContext;return this._doStroke&&(this._getStroke()===i||(v.beginPath(),v.moveTo(o,l),v.lineTo(a,f),v.stroke())),this},r.default.Renderer2D.prototype.point=function(o,l){var a=this.drawingContext;if(!this._doStroke)return this;if(this._getStroke()===i)return this;var f=this._getStroke(),v=this._getFill();this._setFill(f),a.beginPath(),a.arc(o,l,a.lineWidth/2,0,h.TWO_PI,!1),a.fill(),this._setFill(v)},r.default.Renderer2D.prototype.quad=function(o,l,a,f,v,b,_,w){var E=this.drawingContext,C=this._doFill,A=this._doStroke;if(C&&!A){if(this._getFill()===i)return this}else if(!C&&A&&this._getStroke()===i)return this;return E.beginPath(),E.moveTo(o,l),E.lineTo(a,f),E.lineTo(v,b),E.lineTo(_,w),E.closePath(),C&&E.fill(),A&&E.stroke(),this},r.default.Renderer2D.prototype.rect=function(o){var l=o[0],a=o[1],f=o[2],v=o[3],b=o[4],_=o[5],w=o[6],E=o[7],C=this.drawingContext,A=this._doFill,L=this._doStroke;if(A&&!L){if(this._getFill()===i)return this}else if(!A&&L&&this._getStroke()===i)return this;if(C.beginPath(),b===void 0)C.rect(l,a,f,v);else{_===void 0&&(_=b),w===void 0&&(w=_),E===void 0&&(E=w);var P=Math.abs(f),R=Math.abs(v),N=P/2,I=R/2;P<2*b&&(b=N),R<2*b&&(b=I),P<2*_&&(_=N),R<2*_&&(_=I),P<2*w&&(w=N),R<2*w&&(w=I),P<2*E&&(E=N),R<2*E&&(E=I),C.beginPath(),C.moveTo(l+b,a),C.arcTo(l+f,a,l+f,a+v,_),C.arcTo(l+f,a+v,l,a+v,w),C.arcTo(l,a+v,l,a,E),C.arcTo(l,a,l+f,a,b),C.closePath()}return this._doFill&&C.fill(),this._doStroke&&C.stroke(),this},r.default.Renderer2D.prototype.triangle=function(o){var l=this.drawingContext,a=this._doFill,f=this._doStroke,v=o[0],b=o[1],_=o[2],w=o[3],E=o[4],C=o[5];if(a&&!f){if(this._getFill()===i)return this}else if(!a&&f&&this._getStroke()===i)return this;l.beginPath(),l.moveTo(v,b),l.lineTo(_,w),l.lineTo(E,C),l.closePath(),a&&l.fill(),f&&l.stroke()},r.default.Renderer2D.prototype.endShape=function(o,l,a,f,v,b,_){if(l.length===0)return this;if(!this._doStroke&&!this._doFill)return this;var w,E,C,A=o===h.CLOSE;A&&!b&&l.push(l[0]);var L=l.length;if(!a||_!==h.POLYGON&&_!==null)if(!f||_!==h.POLYGON&&_!==null)if(!v||_!==h.POLYGON&&_!==null)if(_===h.POINTS)for(E=0;E<L;E++)w=l[E],this._doStroke&&this._pInst.stroke(w[6]),this._pInst.point(w[0],w[1]);else if(_===h.LINES)for(E=0;E+1<L;E+=2)w=l[E],this._doStroke&&this._pInst.stroke(l[E+1][6]),this._pInst.line(w[0],w[1],l[E+1][0],l[E+1][1]);else if(_===h.TRIANGLES)for(E=0;E+2<L;E+=3)w=l[E],this.drawingContext.beginPath(),this.drawingContext.moveTo(w[0],w[1]),this.drawingContext.lineTo(l[E+1][0],l[E+1][1]),this.drawingContext.lineTo(l[E+2][0],l[E+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(l[E+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(l[E+2][6]),this.drawingContext.stroke());else if(_===h.TRIANGLE_STRIP)for(E=0;E+1<L;E++)w=l[E],this.drawingContext.beginPath(),this.drawingContext.moveTo(l[E+1][0],l[E+1][1]),this.drawingContext.lineTo(w[0],w[1]),this._doStroke&&this._pInst.stroke(l[E+1][6]),this._doFill&&this._pInst.fill(l[E+1][5]),E+2<L&&(this.drawingContext.lineTo(l[E+2][0],l[E+2][1]),this._doStroke&&this._pInst.stroke(l[E+2][6]),this._doFill&&this._pInst.fill(l[E+2][5])),this._doFillStrokeClose(A);else if(_===h.TRIANGLE_FAN){if(2<L){for(this.drawingContext.beginPath(),E=2;E<L;E++)w=l[E],this.drawingContext.moveTo(l[0][0],l[0][1]),this.drawingContext.lineTo(l[E-1][0],l[E-1][1]),this.drawingContext.lineTo(w[0],w[1]),this.drawingContext.lineTo(l[0][0],l[0][1]),E<L-1&&(this._doFill&&w[5]!==l[E+1][5]||this._doStroke&&w[6]!==l[E+1][6])&&(this._doFill&&(this._pInst.fill(w[5]),this.drawingContext.fill(),this._pInst.fill(l[E+1][5])),this._doStroke&&(this._pInst.stroke(w[6]),this.drawingContext.stroke(),this._pInst.stroke(l[E+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(A)}}else if(_===h.QUADS)for(E=0;E+3<L;E+=4){for(w=l[E],this.drawingContext.beginPath(),this.drawingContext.moveTo(w[0],w[1]),C=1;C<4;C++)this.drawingContext.lineTo(l[E+C][0],l[E+C][1]);this.drawingContext.lineTo(w[0],w[1]),this._doFill&&this._pInst.fill(l[E+3][5]),this._doStroke&&this._pInst.stroke(l[E+3][6]),this._doFillStrokeClose(A)}else if(_===h.QUAD_STRIP){if(3<L)for(E=0;E+1<L;E+=2)w=l[E],this.drawingContext.beginPath(),E+3<L?(this.drawingContext.moveTo(l[E+2][0],l[E+2][1]),this.drawingContext.lineTo(w[0],w[1]),this.drawingContext.lineTo(l[E+1][0],l[E+1][1]),this.drawingContext.lineTo(l[E+3][0],l[E+3][1]),this._doFill&&this._pInst.fill(l[E+3][5]),this._doStroke&&this._pInst.stroke(l[E+3][6])):(this.drawingContext.moveTo(w[0],w[1]),this.drawingContext.lineTo(l[E+1][0],l[E+1][1])),this._doFillStrokeClose(A)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(l[0][0],l[0][1]),E=1;E<L;E++)(w=l[E]).isVert&&(w.moveTo?this.drawingContext.moveTo(w[0],w[1]):this.drawingContext.lineTo(w[0],w[1]));this._doFillStrokeClose(A)}else{for(this.drawingContext.beginPath(),E=0;E<L;E++)l[E].isVert?l[E].moveTo?this.drawingContext.moveTo(l[E][0],l[E][1]):this.drawingContext.lineTo(l[E][0],l[E][1]):this.drawingContext.quadraticCurveTo(l[E][0],l[E][1],l[E][2],l[E][3]);this._doFillStrokeClose(A)}else{for(this.drawingContext.beginPath(),E=0;E<L;E++)l[E].isVert?l[E].moveTo?this.drawingContext.moveTo(l[E][0],l[E][1]):this.drawingContext.lineTo(l[E][0],l[E][1]):this.drawingContext.bezierCurveTo(l[E][0],l[E][1],l[E][2],l[E][3],l[E][4],l[E][5]);this._doFillStrokeClose(A)}else if(3<L){var P=[],R=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(l[1][0],l[1][1]),E=1;E+2<L;E++)w=l[E],P[0]=[w[0],w[1]],P[1]=[w[0]+(R*l[E+1][0]-R*l[E-1][0])/6,w[1]+(R*l[E+1][1]-R*l[E-1][1])/6],P[2]=[l[E+1][0]+(R*l[E][0]-R*l[E+2][0])/6,l[E+1][1]+(R*l[E][1]-R*l[E+2][1])/6],P[3]=[l[E+1][0],l[E+1][1]],this.drawingContext.bezierCurveTo(P[1][0],P[1][1],P[2][0],P[2][1],P[3][0],P[3][1]);A&&this.drawingContext.lineTo(l[E+1][0],l[E+1][1]),this._doFillStrokeClose(A)}return b=v=f=a=!1,A&&l.pop(),this},r.default.Renderer2D.prototype.strokeCap=function(o){return o!==h.ROUND&&o!==h.SQUARE&&o!==h.PROJECT||(this.drawingContext.lineCap=o),this},r.default.Renderer2D.prototype.strokeJoin=function(o){return o!==h.ROUND&&o!==h.BEVEL&&o!==h.MITER||(this.drawingContext.lineJoin=o),this},r.default.Renderer2D.prototype.strokeWeight=function(o){return this.drawingContext.lineWidth=o===void 0||o===0?1e-4:o,this},r.default.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle},r.default.Renderer2D.prototype._setFill=function(o){o!==this._cachedFillStyle&&(this.drawingContext.fillStyle=o,this._cachedFillStyle=o)},r.default.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle},r.default.Renderer2D.prototype._setStroke=function(o){o!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=o,this._cachedStrokeStyle=o)},r.default.Renderer2D.prototype.bezier=function(o,l,a,f,v,b,_,w){return this._pInst.beginShape(),this._pInst.vertex(o,l),this._pInst.bezierVertex(a,f,v,b,_,w),this._pInst.endShape(),this},r.default.Renderer2D.prototype.curve=function(o,l,a,f,v,b,_,w){return this._pInst.beginShape(),this._pInst.curveVertex(o,l),this._pInst.curveVertex(a,f),this._pInst.curveVertex(v,b),this._pInst.curveVertex(_,w),this._pInst.endShape(),this},r.default.Renderer2D.prototype._doFillStrokeClose=function(o){o&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()},r.default.Renderer2D.prototype.applyMatrix=function(o,l,a,f,v,b){this.drawingContext.transform(o,l,a,f,v,b)},r.default.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},r.default.Renderer2D.prototype.rotate=function(o){this.drawingContext.rotate(o)},r.default.Renderer2D.prototype.scale=function(o,l){return this.drawingContext.scale(o,l),this},r.default.Renderer2D.prototype.translate=function(o,l){return o instanceof r.default.Vector&&(l=o.y,o=o.x),this.drawingContext.translate(o,l),this},r.default.Renderer2D.prototype.text=function(o,l,a,f,v){var b;f!==void 0&&this.drawingContext.textBaseline===h.BASELINE&&(b=!0,this.drawingContext.textBaseline=h.TOP);var _=r.default.Renderer.prototype.text.apply(this,arguments);return b&&(this.drawingContext.textBaseline=h.BASELINE),_},r.default.Renderer2D.prototype._renderText=function(o,l,a,f,v){if(!(v<=f))return o.push(),this._isOpenType()?this._textFont._renderPath(l,a,f,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(l,a,f),this._doFill&&(this._fillSet||this._setFill(h._DEFAULT_TEXT_FILL),this.drawingContext.fillText(l,a,f))),o.pop(),o},r.default.Renderer2D.prototype.textWidth=function(o){return this._isOpenType()?this._textFont._textWidth(o,this._textSize):this.drawingContext.measureText(o).width},r.default.Renderer2D.prototype._applyTextProperties=function(){var o,l=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),o=this._textFont,this._isOpenType()&&(o=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(o||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===h.CENTER?this.drawingContext.textBaseline=h._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,l},r.default.Renderer2D.prototype.push=function(){return this.drawingContext.save(),r.default.Renderer.prototype.push.apply(this)},r.default.Renderer2D.prototype.pop=function(o){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,r.default.Renderer.prototype.pop.call(this,o)};var n=r.default.Renderer2D;m.default=n},{"../image/filters":285,"./constants":253,"./main":264,"./p5.Renderer":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":166,"core-js/modules/es.number.to-fixed":172,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182}],269:[function(t,g,m){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var p,r=(p=t("./main"))&&p.__esModule?p:{default:p};r.default.prototype._promisePreloads=[];var h=!(r.default.prototype.registerPromisePreload=function(d){r.default.prototype._promisePreloads.push(d)});r.default.prototype._setupPromisePreloads=function(){var d=!0,c=!1,i=void 0;try{for(var n,o=this._promisePreloads[Symbol.iterator]();!(d=(n=o.next()).done);d=!0){var l=n.value,a=this,f=l.method,v=l.addCallbacks,b=l.legacyPreloadSetup,_=l.target||this,w=_[f].bind(_);if(_===r.default.prototype){if(h)continue;a=null,w=_[f]}_[f]=this._wrapPromisePreload(a,w,v),b&&(_[b.method]=this._legacyPreloadGenerator(a,b,_[f]))}}catch(E){c=!0,i=E}finally{try{d||o.return==null||o.return()}finally{if(c)throw i}}h=!0},r.default.prototype._wrapPromisePreload=function(d,c,i){var n=function(){var o=this;this._incrementPreload();for(var l=null,a=null,f=arguments.length,v=new Array(f),b=0;b<f;b++)v[b]=arguments[b];if(i)for(var _=v.length-1;0<=_&&!a&&typeof v[_]=="function";_--)a=l,l=v.pop();var w=Promise.resolve(c.apply(this,v));return l&&w.then(l),a&&w.catch(a),w.then(function(){return o._decrementPreload()}),w};return d&&(n=n.bind(d)),n};function u(){return{}}r.default.prototype._legacyPreloadGenerator=function(d,c,i){var n=c.createBaseObject||u,o=function(){var l=this;this._incrementPreload();var a=n.apply(this,arguments);return i.apply(this,arguments).then(function(f){Object.assign(a,f),l._decrementPreload()}),a};return d&&(o=o.bind(d)),o}},{"./main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],270:[function(t,g,m){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("./main"))&&p.__esModule?p:{default:p},h=function(n){if(n&&n.__esModule)return n;if(n===null||d(n)!=="object"&&typeof n!="function")return{default:n};var o=u();if(o&&o.has(n))return o.get(n);var l={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in n)if(Object.prototype.hasOwnProperty.call(n,f)){var v=a?Object.getOwnPropertyDescriptor(n,f):null;v&&(v.get||v.set)?Object.defineProperty(l,f,v):l[f]=n[f]}return l.default=n,o&&o.set(n,l),l}(t("./constants"));function u(){if(typeof WeakMap!="function")return null;var n=new WeakMap;return u=function(){return n},n}function d(n){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(n)}t("./p5.Graphics"),t("./p5.Renderer2D"),t("../webgl/p5.RendererGL");var c="defaultCanvas0";r.default.prototype.createCanvas=function(n,o,l){r.default._validateParameters("createCanvas",arguments);var a,f=l||h.P2D;if(f===h.WEBGL){if(a=document.getElementById(c)){a.parentNode.removeChild(a);var v=this._renderer;this._elements=this._elements.filter(function(w){return w!==v})}(a=document.createElement("canvas")).id=c,a.classList.add("p5Canvas")}else if(this._defaultGraphicsCreated)a=this.canvas;else{a=document.createElement("canvas");for(var b=0;document.getElementById("defaultCanvas".concat(b));)b++;c="defaultCanvas".concat(b),a.id=c,a.classList.add("p5Canvas")}if(this._setupDone||(a.dataset.hidden=!0,a.style.visibility="hidden"),this._userNode)this._userNode.appendChild(a);else{if(document.getElementsByTagName("main").length===0){var _=document.createElement("main");document.body.appendChild(_)}document.getElementsByTagName("main")[0].appendChild(a)}return f===h.WEBGL?(this._setProperty("_renderer",new r.default.RendererGL(a,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new r.default.Renderer2D(a,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(n,o),this._renderer._applyDefaults(),this._renderer},r.default.prototype.resizeCanvas=function(n,o,l){if(r.default._validateParameters("resizeCanvas",arguments),this._renderer){var a={};for(var f in this.drawingContext){var v=this.drawingContext[f];d(v)!=="object"&&typeof v!="function"&&(a[f]=v)}for(var b in this._renderer.resize(n,o),this.width=n,this.height=o,a)try{this.drawingContext[b]=a[b]}catch{}l||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},r.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},r.default.prototype.createGraphics=function(n,o,l){return r.default._validateParameters("createGraphics",arguments),new r.default.Graphics(n,o,l,this)},r.default.prototype.blendMode=function(n){r.default._validateParameters("blendMode",arguments),n===h.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),n=h.BLEND),this._renderer.blendMode(n)};var i=r.default;m.default=i},{"../webgl/p5.RendererGL":318,"./constants":253,"./main":264,"./p5.Graphics":266,"./p5.Renderer2D":268,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],271:[function(t,g,m){function p(n){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(n)}t("core-js/modules/es.array.slice"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r=c(t("../main")),h=function(n){if(n&&n.__esModule)return n;if(n===null||p(n)!=="object"&&typeof n!="function")return{default:n};var o=d();if(o&&o.has(n))return o.get(n);var l={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in n)if(Object.prototype.hasOwnProperty.call(n,f)){var v=a?Object.getOwnPropertyDescriptor(n,f):null;v&&(v.get||v.set)?Object.defineProperty(l,f,v):l[f]=n[f]}return l.default=n,o&&o.set(n,l),l}(t("../constants")),u=c(t("../helpers"));function d(){if(typeof WeakMap!="function")return null;var n=new WeakMap;return d=function(){return n},n}function c(n){return n&&n.__esModule?n:{default:n}}t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),r.default.prototype._normalizeArcAngles=function(n,o,l,a,f){var v;return n-=h.TWO_PI*Math.floor(n/h.TWO_PI),o-=h.TWO_PI*Math.floor(o/h.TWO_PI),v=Math.min(Math.abs(n-o),h.TWO_PI-Math.abs(n-o)),f&&(n=n<=h.HALF_PI?Math.atan(l/a*Math.tan(n)):n>h.HALF_PI&&n<=3*h.HALF_PI?Math.atan(l/a*Math.tan(n))+h.PI:Math.atan(l/a*Math.tan(n))+h.TWO_PI,o=o<=h.HALF_PI?Math.atan(l/a*Math.tan(o)):o>h.HALF_PI&&o<=3*h.HALF_PI?Math.atan(l/a*Math.tan(o))+h.PI:Math.atan(l/a*Math.tan(o))+h.TWO_PI),o<n&&(o+=h.TWO_PI),{start:n,stop:o,correspondToSamePoint:v<1e-5}},r.default.prototype.arc=function(n,o,l,a,f,v,b,_){if(r.default._validateParameters("arc",arguments),!this._renderer._doStroke&&!this._renderer._doFill)return this;if(f===v)return this;f=this._toRadians(f),v=this._toRadians(v),l=Math.abs(l),a=Math.abs(a);var w=u.default.modeAdjust(n,o,l,a,this._renderer._ellipseMode),E=this._normalizeArcAngles(f,v,w.w,w.h,!0);return E.correspondToSamePoint?this._renderer.ellipse([w.x,w.y,w.w,w.h,_]):(this._renderer.arc(w.x,w.y,w.w,w.h,E.start,E.stop,b,_),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[w.x,w.y,w.w,w.h,E.start,E.stop,b])),this},r.default.prototype.ellipse=function(n,o,l,a,f){return r.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},r.default.prototype.circle=function(){r.default._validateParameters("circle",arguments);var n=Array.prototype.slice.call(arguments,0,2);return n.push(arguments[2]),n.push(arguments[2]),this._renderEllipse.apply(this,n)},r.default.prototype._renderEllipse=function(n,o,l,a,f){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;l<0&&(l=Math.abs(l)),a===void 0?a=l:a<0&&(a=Math.abs(a));var v=u.default.modeAdjust(n,o,l,a,this._renderer._ellipseMode);return this._renderer.ellipse([v.x,v.y,v.w,v.h,f]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[v.x,v.y,v.w,v.h]),this},r.default.prototype.line=function(){for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];var a;return r.default._validateParameters("line",o),this._renderer._doStroke&&(a=this._renderer).line.apply(a,o),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",o),this},r.default.prototype.point=function(){for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];var a;return r.default._validateParameters("point",o),this._renderer._doStroke&&(o.length===1&&o[0]instanceof r.default.Vector?this._renderer.point.call(this._renderer,o[0].x,o[0].y,o[0].z):((a=this._renderer).point.apply(a,o),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",o))),this},r.default.prototype.quad=function(){for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];var a;return r.default._validateParameters("quad",o),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&o.length<=12?this._renderer.quad.call(this._renderer,o[0],o[1],0,o[2],o[3],0,o[4],o[5],0,o[6],o[7],0,o[8],o[9]):((a=this._renderer).quad.apply(a,o),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",o))),this},r.default.prototype.rect=function(){return r.default._validateParameters("rect",arguments),this._renderRect.apply(this,arguments)},r.default.prototype.square=function(n,o,l,a,f,v,b){return r.default._validateParameters("square",arguments),this._renderRect.call(this,n,o,l,l,a,f,v,b)},r.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var n=u.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),o=[n.x,n.y,n.w,n.h],l=4;l<arguments.length;l++)o[l]=arguments[l];this._renderer.rect(o),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[n.x,n.y,n.w,n.h])}return this},r.default.prototype.triangle=function(){for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return r.default._validateParameters("triangle",o),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(o),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",o),this};var i=r.default;m.default=i},{"../constants":253,"../friendly_errors/fes_core":255,"../friendly_errors/file_errors":256,"../friendly_errors/validate_params":259,"../helpers":260,"../main":264,"core-js/modules/es.array.slice":162}],272:[function(t,g,m){function p(i){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(i)}Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r,h=(r=t("../main"))&&r.__esModule?r:{default:r},u=function(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var n=d();if(n&&n.has(i))return n.get(i);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){var f=l?Object.getOwnPropertyDescriptor(i,a):null;f&&(f.get||f.set)?Object.defineProperty(o,a,f):o[a]=i[a]}return o.default=i,n&&n.set(i,o),o}(t("../constants"));function d(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return d=function(){return i},i}h.default.prototype.ellipseMode=function(i){return h.default._validateParameters("ellipseMode",arguments),i!==u.CORNER&&i!==u.CORNERS&&i!==u.RADIUS&&i!==u.CENTER||(this._renderer._ellipseMode=i),this},h.default.prototype.noSmooth=function(){return this.setAttributes("antialias",!1),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},h.default.prototype.rectMode=function(i){return h.default._validateParameters("rectMode",arguments),i!==u.CORNER&&i!==u.CORNERS&&i!==u.RADIUS&&i!==u.CENTER||(this._renderer._rectMode=i),this},h.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},h.default.prototype.strokeCap=function(i){return h.default._validateParameters("strokeCap",arguments),i!==u.ROUND&&i!==u.SQUARE&&i!==u.PROJECT||this._renderer.strokeCap(i),this},h.default.prototype.strokeJoin=function(i){return h.default._validateParameters("strokeJoin",arguments),i!==u.ROUND&&i!==u.BEVEL&&i!==u.MITER||this._renderer.strokeJoin(i),this},h.default.prototype.strokeWeight=function(i){return h.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(i),this};var c=h.default;m.default=c},{"../constants":253,"../main":264}],273:[function(t,g,m){Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../main"))&&p.__esModule?p:{default:p};t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),r.default.prototype.bezier=function(){for(var u,d=arguments.length,c=new Array(d),i=0;i<d;i++)c[i]=arguments[i];return r.default._validateParameters("bezier",c),(this._renderer._doStroke||this._renderer._doFill)&&(u=this._renderer).bezier.apply(u,c),this},r.default.prototype.bezierDetail=function(u){return r.default._validateParameters("bezierDetail",arguments),this._bezierDetail=u,this},r.default.prototype.bezierPoint=function(u,d,c,i,n){r.default._validateParameters("bezierPoint",arguments);var o=1-n;return Math.pow(o,3)*u+3*Math.pow(o,2)*n*d+3*o*Math.pow(n,2)*c+Math.pow(n,3)*i},r.default.prototype.bezierTangent=function(u,d,c,i,n){r.default._validateParameters("bezierTangent",arguments);var o=1-n;return 3*i*Math.pow(n,2)-3*c*Math.pow(n,2)+6*c*o*n-6*d*o*n+3*d*Math.pow(o,2)-3*u*Math.pow(o,2)},r.default.prototype.curve=function(){for(var u=arguments.length,d=new Array(u),c=0;c<u;c++)d[c]=arguments[c];var i;return r.default._validateParameters("curve",d),this._renderer._doStroke&&(i=this._renderer).curve.apply(i,d),this},r.default.prototype.curveDetail=function(u){return r.default._validateParameters("curveDetail",arguments),this._curveDetail=u<3?3:u,this},r.default.prototype.curveTightness=function(u){return r.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=u,this},r.default.prototype.curvePoint=function(u,d,c,i,n){r.default._validateParameters("curvePoint",arguments);var o=n*n*n,l=n*n;return u*(-.5*o+l-.5*n)+d*(1.5*o-2.5*l+1)+c*(-1.5*o+2*l+.5*n)+i*(.5*o-.5*l)},r.default.prototype.curveTangent=function(u,d,c,i,n){r.default._validateParameters("curveTangent",arguments);var o=n*n;return u*(-3*o/2+2*n-.5)+d*(9*o/2-5*n)+c*(-9*o/2+4*n+.5)+i*(3*o/2-n)};var h=r.default;m.default=h},{"../friendly_errors/fes_core":255,"../friendly_errors/file_errors":256,"../friendly_errors/validate_params":259,"../main":264}],274:[function(t,g,m){function p(_){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(_)}t("core-js/modules/es.array.slice"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r,h=(r=t("../main"))&&r.__esModule?r:{default:r},u=function(_){if(_&&_.__esModule)return _;if(_===null||p(_)!=="object"&&typeof _!="function")return{default:_};var w=d();if(w&&w.has(_))return w.get(_);var E={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in _)if(Object.prototype.hasOwnProperty.call(_,A)){var L=C?Object.getOwnPropertyDescriptor(_,A):null;L&&(L.get||L.set)?Object.defineProperty(E,A,L):E[A]=_[A]}return E.default=_,w&&w.set(_,E),E}(t("../constants"));function d(){if(typeof WeakMap!="function")return null;var _=new WeakMap;return d=function(){return _},_}var c=null,i=[],n=[],o=!1,l=!1,a=!1,f=!1,v=!0;h.default.prototype.beginContour=function(){return n=[],f=!0,this},h.default.prototype.beginShape=function(_){var w;return h.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(w=this._renderer).beginShape.apply(w,arguments):(c=_===u.POINTS||_===u.LINES||_===u.TRIANGLES||_===u.TRIANGLE_FAN||_===u.TRIANGLE_STRIP||_===u.QUADS||_===u.QUAD_STRIP?_:null,i=[],n=[]),this},h.default.prototype.bezierVertex=function(){for(var _=arguments.length,w=new Array(_),E=0;E<_;E++)w[E]=arguments[E];var C;if(h.default._validateParameters("bezierVertex",w),this._renderer.isP3D)(C=this._renderer).bezierVertex.apply(C,w);else if(i.length===0)h.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{o=!0;for(var A=[],L=0;L<w.length;L++)A[L]=w[L];A.isVert=!1,f?n.push(A):i.push(A)}return this},h.default.prototype.curveVertex=function(){for(var _=arguments.length,w=new Array(_),E=0;E<_;E++)w[E]=arguments[E];var C;return h.default._validateParameters("curveVertex",w),this._renderer.isP3D?(C=this._renderer).curveVertex.apply(C,w):(l=!0,this.vertex(w[0],w[1])),this},h.default.prototype.endContour=function(){var _=n[0].slice();_.isVert=n[0].isVert,_.moveTo=!1,n.push(_),v&&(i.push(i[0]),v=!1);for(var w=0;w<n.length;w++)i.push(n[w]);return this},h.default.prototype.endShape=function(_){if(h.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(_,l,o,a,f,c);else{if(i.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var w=_===u.CLOSE;w&&!f&&i.push(i[0]),this._renderer.endShape(_,i,l,o,a,f,c),v=!(f=a=o=l=!1),w&&i.pop()}return this},h.default.prototype.quadraticVertex=function(){for(var _=arguments.length,w=new Array(_),E=0;E<_;E++)w[E]=arguments[E];if(h.default._validateParameters("quadraticVertex",w),this._renderer.isP3D){var C;(C=this._renderer).quadraticVertex.apply(C,w)}else{if(this._contourInited){var A={};return A.x=w[0],A.y=w[1],A.x3=w[2],A.y3=w[3],A.type=u.QUADRATIC,this._contourVertices.push(A),this}if(0<i.length){a=!0;for(var L=[],P=0;P<w.length;P++)L[P]=w[P];L.isVert=!1,f?n.push(L):i.push(L)}else h.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},h.default.prototype.vertex=function(_,w,E,C,A){if(this._renderer.isP3D){var L;(L=this._renderer).vertex.apply(L,arguments)}else{var P=[];P.isVert=!0,P[0]=_,P[1]=w,P[2]=0,P[3]=0,P[4]=0,P[5]=this._renderer._getFill(),P[6]=this._renderer._getStroke(),E&&(P.moveTo=E),f?(n.length===0&&(P.moveTo=!0),n.push(P)):i.push(P)}return this},h.default.prototype.normal=function(_,w,E){var C;return this._assert3d("normal"),h.default._validateParameters("normal",arguments),(C=this._renderer).normal.apply(C,arguments),this};var b=h.default;m.default=b},{"../constants":253,"../main":264,"core-js/modules/es.array.slice":162}],275:[function(t,g,m){function p(r){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(r)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(r,h){window.setTimeout(r,1e3/60)},typeof Uint8ClampedArray=="undefined"||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),function(){if(!Object.assign){var r=Object.keys,h=Object.defineProperty,u=typeof Symbol=="function"&&p(Symbol())==="symbol",d=Object.prototype.propertyIsEnumerable,c=function(i){return function(n){return d.call(i,n)}};h(Object,"assign",{value:function(i,n){if(i==null)throw new TypeError("target must be an object");var o,l,a,f,v=Object(i);for(o=1;o<arguments.length;++o)for(l=Object(arguments[o]),f=r(l),u&&Object.getOwnPropertySymbols&&f.push.apply(f,Object.getOwnPropertySymbols(l).filter(c(l))),a=0;a<f.length;++a)v[f[a]]=l[f[a]];return v},configurable:!0,enumerable:!1,writable:!0})}}()},{"core-js/modules/es.array.filter":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-clamped-array":227,"core-js/modules/web.dom-collections.iterator":229}],276:[function(t,g,m){t("core-js/modules/es.array.for-each"),t("core-js/modules/es.object.assign"),t("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("./main"))&&p.__esModule?p:{default:p};r.default.prototype.noLoop=function(){this._loop=!1},r.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},r.default.prototype.isLooping=function(){return this._loop},r.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},r.default.prototype.pop=function(){var u=this._styles.pop();u?(this._renderer.pop(u.renderer),Object.assign(this,u.props)):console.warn("pop() was called without matching push()")},r.default.prototype.redraw=function(u){if(!this._inUserDraw&&this._setupDone){var d=parseInt(u);(isNaN(d)||d<1)&&(d=1);var c=this._isGlobal?window:this;if(typeof c.draw=="function"){c.setup===void 0&&c.scale(c._pixelDensity,c._pixelDensity);for(var i=function(o){o.call(c)},n=0;n<d;n++){c.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),c._renderer.isP3D&&c._renderer._update(),c._setProperty("frameCount",c.frameCount+1),c._registeredMethods.pre.forEach(i),this._inUserDraw=!0;try{c.draw()}finally{this._inUserDraw=!1}c._registeredMethods.post.forEach(i)}}}};var h=r.default;m.default=h},{"./main":264,"core-js/modules/es.array.for-each":154,"core-js/modules/es.object.assign":173,"core-js/modules/web.dom-collections.for-each":228}],277:[function(t,g,m){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("./main"))&&p.__esModule?p:{default:p};function h(d){return function(c){if(Array.isArray(c)){for(var i=0,n=new Array(c.length);i<c.length;i++)n[i]=c[i];return n}}(d)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.default.prototype.applyMatrix=function(){var d,c,i=arguments[0]instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments[0])||i?(d=this._renderer).applyMatrix.apply(d,h(arguments[0])):(c=this._renderer).applyMatrix.apply(c,arguments),this},r.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},r.default.prototype.rotate=function(d,c){return r.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(d),c),this},r.default.prototype.rotateX=function(d){return this._assert3d("rotateX"),r.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(d)),this},r.default.prototype.rotateY=function(d){return this._assert3d("rotateY"),r.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(d)),this},r.default.prototype.rotateZ=function(d){return this._assert3d("rotateZ"),r.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(d)),this},r.default.prototype.scale=function(d,c,i){if(r.default._validateParameters("scale",arguments),d instanceof r.default.Vector){var n=d;d=n.x,c=n.y,i=n.z}else if(d instanceof Array){var o=d;d=o[0],c=o[1],i=o[2]||1}return isNaN(c)?c=i=d:isNaN(i)&&(i=1),this._renderer.scale.call(this._renderer,d,c,i),this},r.default.prototype.shearX=function(d){r.default._validateParameters("shearX",arguments);var c=this._toRadians(d);return this._renderer.applyMatrix(1,0,Math.tan(c),1,0,0),this},r.default.prototype.shearY=function(d){r.default._validateParameters("shearY",arguments);var c=this._toRadians(d);return this._renderer.applyMatrix(1,Math.tan(c),0,1,0,0),this},r.default.prototype.translate=function(d,c,i){return r.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(d,c,i):this._renderer.translate(d,c),this};var u=r.default;m.default=u},{"./main":264,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":229}],278:[function(t,g,m){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};function h(d){return function(c){if(Array.isArray(c)){for(var i=0,n=new Array(c.length);i<c.length;i++)n[i]=c[i];return n}}(d)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(d){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(d)}r.default.prototype.storeItem=function(d,c){typeof d!="string"&&console.log("The argument that you passed to storeItem() - ".concat(d," is not a string.")),d.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(d," must not end with 'p5TypeID'.")),c===void 0&&console.log("You cannot store undefined variables using storeItem().");var i=u(c);switch(i){case"number":case"boolean":c=c.toString();break;case"object":c instanceof r.default.Color?i="p5.Color":c instanceof r.default.Vector&&(i="p5.Vector",c=[c.x,c.y,c.z]),c=JSON.stringify(c)}localStorage.setItem(d,c);var n="".concat(d,"p5TypeID");localStorage.setItem(n,i)},r.default.prototype.getItem=function(d){var c=localStorage.getItem(d),i=localStorage.getItem("".concat(d,"p5TypeID"));if(i===void 0)console.log("Unable to determine type of item stored under ".concat(d,"in local storage. Did you save the item with something other than setItem()?"));else if(c!==null)switch(i){case"number":c=parseFloat(c);break;case"boolean":c=c==="true";break;case"object":c=JSON.parse(c);break;case"p5.Color":c=JSON.parse(c),c=this.color.apply(this,h(c.levels));break;case"p5.Vector":c=JSON.parse(c),c=this.createVector.apply(this,h(c))}return c},r.default.prototype.clearStorage=function(){localStorage.clear()},r.default.prototype.removeItem=function(d){typeof d!="string"&&console.log("The argument that you passed to removeItem() - ".concat(d," is not a string.")),localStorage.removeItem(d),localStorage.removeItem("".concat(d,"p5TypeID"))}},{"../core/main":264,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],279:[function(t,g,m){t("core-js/modules/es.array.concat"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.string.sub"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};r.default.prototype.createStringDict=function(u,d){return r.default._validateParameters("createStringDict",arguments),new r.default.StringDict(u,d)},r.default.prototype.createNumberDict=function(u,d){return r.default._validateParameters("createNumberDict",arguments),new r.default.NumberDict(u,d)},r.default.TypedDict=function(u,d){return u instanceof Object?this.data=u:(this.data={},this.data[u]=d),this},r.default.TypedDict.prototype.size=function(){return Object.keys(this.data).length},r.default.TypedDict.prototype.hasKey=function(u){return this.data.hasOwnProperty(u)},r.default.TypedDict.prototype.get=function(u){if(this.data.hasOwnProperty(u))return this.data[u];console.log("".concat(u," does not exist in this Dictionary"))},r.default.TypedDict.prototype.set=function(u,d){this._validate(d)?this.data[u]=d:console.log("Those values dont work for this dictionary type.")},r.default.TypedDict.prototype._addObj=function(u){for(var d in u)this.set(d,u[d])},r.default.TypedDict.prototype.create=function(u,d){u instanceof Object&&d===void 0?this._addObj(u):u!==void 0?this.set(u,d):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")},r.default.TypedDict.prototype.clear=function(){this.data={}},r.default.TypedDict.prototype.remove=function(u){if(!this.data.hasOwnProperty(u))throw new Error("".concat(u," does not exist in this Dictionary"));delete this.data[u]},r.default.TypedDict.prototype.print=function(){for(var u in this.data)console.log("key:".concat(u," value:").concat(this.data[u]))},r.default.TypedDict.prototype.saveTable=function(u){var d="";for(var c in this.data)d+="".concat(c,",").concat(this.data[c],`
`);var i=new Blob([d],{type:"text/csv"});r.default.prototype.downloadFile(i,u||"mycsv","csv")},r.default.TypedDict.prototype.saveJSON=function(u,d){r.default.prototype.saveJSON(this.data,u,d)},r.default.TypedDict.prototype._validate=function(u){return!0},r.default.StringDict=function(){for(var u=arguments.length,d=new Array(u),c=0;c<u;c++)d[c]=arguments[c];r.default.TypedDict.apply(this,d)},r.default.StringDict.prototype=Object.create(r.default.TypedDict.prototype),r.default.StringDict.prototype._validate=function(u){return typeof u=="string"},r.default.NumberDict=function(){for(var u=arguments.length,d=new Array(u),c=0;c<u;c++)d[c]=arguments[c];r.default.TypedDict.apply(this,d)},r.default.NumberDict.prototype=Object.create(r.default.TypedDict.prototype),r.default.NumberDict.prototype._validate=function(u){return typeof u=="number"},r.default.NumberDict.prototype.add=function(u,d){this.data.hasOwnProperty(u)?this.data[u]+=d:console.log("The key - ".concat(u," does not exist in this dictionary."))},r.default.NumberDict.prototype.sub=function(u,d){this.add(u,-d)},r.default.NumberDict.prototype.mult=function(u,d){this.data.hasOwnProperty(u)?this.data[u]*=d:console.log("The key - ".concat(u," does not exist in this dictionary."))},r.default.NumberDict.prototype.div=function(u,d){this.data.hasOwnProperty(u)?this.data[u]/=d:console.log("The key - ".concat(u," does not exist in this dictionary."))},r.default.NumberDict.prototype._valueTest=function(u){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var d=this.data[Object.keys(this.data)[0]];for(var c in this.data)this.data[c]*u<d*u&&(d=this.data[c]);return d},r.default.NumberDict.prototype.minValue=function(){return this._valueTest(1)},r.default.NumberDict.prototype.maxValue=function(){return this._valueTest(-1)},r.default.NumberDict.prototype._keyTest=function(u){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var d=Object.keys(this.data)[0],c=1;c<Object.keys(this.data).length;c++)Object.keys(this.data)[c]*u<d*u&&(d=Object.keys(this.data)[c]);return d},r.default.NumberDict.prototype.minKey=function(){return this._keyTest(1)},r.default.NumberDict.prototype.maxKey=function(){return this._keyTest(-1)};var h=r.default.TypedDict;m.default=h},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.object.keys":176,"core-js/modules/es.string.sub":192}],280:[function(t,g,m){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};function h(n){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(n)}function u(n,o,l){(o._userNode?o._userNode:document.body).appendChild(n);var a=l?new r.default.MediaElement(n,o):new r.default.Element(n,o);return o._elements.push(a),a}function d(n,o,l,a){var f=document.createElement(o);typeof(l=l||"")=="string"&&(l=[l]);var v=!0,b=!1,_=void 0;try{for(var w,E=l[Symbol.iterator]();!(v=(w=E.next()).done);v=!0){var C=w.value,A=document.createElement("source");A.setAttribute("src",C),f.appendChild(A)}}catch(P){b=!0,_=P}finally{try{v||E.return==null||E.return()}finally{if(b)throw _}}typeof a=="function"&&f.addEventListener("canplaythrough",function P(){a(),f.removeEventListener("canplaythrough",P)});var L=u(f,n,!0);return L.loadedmetadata=!1,f.addEventListener("loadedmetadata",function(){L.width=f.videoWidth,L.height=f.videoHeight,L.elt.width===0&&(L.elt.width=f.videoWidth),L.elt.height===0&&(L.elt.height=f.videoHeight),L.presetPlaybackRate&&(L.elt.playbackRate=L.presetPlaybackRate,delete L.presetPlaybackRate),L.loadedmetadata=!0}),L}r.default.prototype.select=function(n,o){r.default._validateParameters("select",arguments);var l=this._getContainer(o).querySelector(n);return l?this._wrapElement(l):null},r.default.prototype.selectAll=function(n,o){r.default._validateParameters("selectAll",arguments);var l=[],a=this._getContainer(o).querySelectorAll(n);if(a)for(var f=0;f<a.length;f++){var v=this._wrapElement(a[f]);l.push(v)}return l},r.default.prototype._getContainer=function(n){var o=document;return typeof n=="string"?o=document.querySelector(n)||document:n instanceof r.default.Element?o=n.elt:n instanceof HTMLElement&&(o=n),o},r.default.prototype._wrapElement=function(n){var o=Array.prototype.slice.call(n.children);if(n.tagName!=="INPUT"||n.type!=="checkbox")return n.tagName==="VIDEO"||n.tagName==="AUDIO"?new r.default.MediaElement(n,this):n.tagName==="SELECT"?this.createSelect(new r.default.Element(n,this)):0<o.length&&o.every(function(a){return a.tagName==="INPUT"||a.tagName==="LABEL"})?this.createRadio(new r.default.Element(n,this)):new r.default.Element(n,this);var l=new r.default.Element(n,this);return l.checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!!arguments[0],this)},l},r.default.prototype.removeElements=function(n){r.default._validateParameters("removeElements",arguments),this._elements.filter(function(o){return!(o.elt instanceof HTMLCanvasElement)}).map(function(o){return o.remove()})},r.default.Element.prototype.changed=function(n){return r.default.Element._adjustListener("change",n,this),this},r.default.Element.prototype.input=function(n){return r.default.Element._adjustListener("input",n,this),this},r.default.prototype.createDiv=function(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",o=document.createElement("div");return o.innerHTML=n,u(o,this)},r.default.prototype.createP=function(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",o=document.createElement("p");return o.innerHTML=n,u(o,this)},r.default.prototype.createSpan=function(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",o=document.createElement("span");return o.innerHTML=n,u(o,this)},r.default.prototype.createImg=function(){r.default._validateParameters("createImg",arguments);var n,o=document.createElement("img"),l=arguments;return 1<l.length&&typeof l[1]=="string"&&(o.alt=l[1]),2<l.length&&typeof l[2]=="string"&&(o.crossOrigin=l[2]),o.src=l[0],n=u(o,this),o.addEventListener("load",function(){n.width=o.offsetWidth||o.width,n.height=o.offsetHeight||o.height;var a=l[l.length-1];typeof a=="function"&&a(n)}),n},r.default.prototype.createA=function(n,o,l){r.default._validateParameters("createA",arguments);var a=document.createElement("a");return a.href=n,a.innerHTML=o,l&&(a.target=l),u(a,this)},r.default.prototype.createSlider=function(n,o,l,a){r.default._validateParameters("createSlider",arguments);var f=document.createElement("input");return f.type="range",f.min=n,f.max=o,a===0?f.step=1e-18:a&&(f.step=a),typeof l=="number"&&(f.value=l),u(f,this)},r.default.prototype.createButton=function(n,o){r.default._validateParameters("createButton",arguments);var l=document.createElement("button");return l.innerHTML=n,o&&(l.value=o),u(l,this)},r.default.prototype.createCheckbox=function(){r.default._validateParameters("createCheckbox",arguments);var n=document.createElement("div"),o=document.createElement("input");o.type="checkbox";var l=document.createElement("label");l.appendChild(o),n.appendChild(l);var a=u(n,this);if(a.checked=function(){var v=a.elt.firstElementChild.getElementsByTagName("input")[0];if(v){if(arguments.length===0)return v.checked;v.checked=!!arguments[0]}return a},this.value=function(v){return a.value=v,this},arguments[0]){a.value(arguments[0]);var f=document.createElement("span");f.innerHTML=arguments[0],l.appendChild(f)}return arguments[1]&&(o.checked=!0),a},r.default.prototype.createSelect=function(){var n;r.default._validateParameters("createSelect",arguments);var o=arguments[0];if(o instanceof r.default.Element&&o.elt instanceof HTMLSelectElement)n=o,this.elt=o.elt;else if(o instanceof HTMLSelectElement)n=u(o,this),this.elt=o;else{var l=document.createElement("select");o&&typeof o=="boolean"&&l.setAttribute("multiple","true"),n=u(l,this),this.elt=l}return n.option=function(a,f){var v;if(a!==void 0){for(var b=0;b<this.elt.length;b+=1)if(this.elt[b].innerHTML===a){v=b;break}if(v!==void 0)f===!1?this.elt.remove(v):this.elt[v].value=f;else{var _=document.createElement("option");_.innerHTML=a,_.value=f===void 0?a:f,this.elt.appendChild(_),this._pInst._elements.push(_)}}},n.selected=function(a){if(a!==void 0){for(var f=0;f<this.elt.length;f+=1)this.elt[f].value.toString()===a.toString()&&(this.elt.selectedIndex=f);return this}if(this.elt.getAttribute("multiple")){var v=[],b=!0,_=!1,w=void 0;try{for(var E,C=this.elt.selectedOptions[Symbol.iterator]();!(b=(E=C.next()).done);b=!0){var A=E.value;v.push(A.value)}}catch(L){_=!0,w=L}finally{try{b||C.return==null||C.return()}finally{if(_)throw w}}return v}return this.elt.value},n.disable=function(a){if(typeof a=="string")for(var f=0;f<this.elt.length;f++)this.elt[f].value.toString()===a&&(this.elt[f].disabled=!0,this.elt[f].selected=!1);else this.elt.disabled=!0;return this},n},r.default.prototype.createRadio=function(){var n,o,l=arguments[0];l instanceof HTMLDivElement||l instanceof HTMLSpanElement?(n=l,typeof arguments[1]=="string"&&(o=arguments[1])):(typeof l=="string"&&(o=l),n=document.createElement("div"));var a=u(this.elt=n,this);a._name=o||"radioOption";function f(b){return b instanceof HTMLInputElement&&b.type==="radio"}function v(b){return b instanceof HTMLLabelElement}return a._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(b){return f(b)||v(b)&&f(b.firstElementChild)}).map(function(b){return f(b)?b:b.firstElementChild})},a.option=function(b,_){var w,E,C,A=!0,L=!1,P=void 0;try{for(var R,N=a._getOptionsArray()[Symbol.iterator]();!(A=(R=N.next()).done);A=!0){var I=R.value;if(I.value===b){w=I;break}}}catch(O){L=!0,P=O}finally{try{A||N.return==null||N.return()}finally{if(L)throw P}}return w===void 0&&((w=document.createElement("input")).setAttribute("type","radio"),w.setAttribute("value",b)),w.setAttribute("name",a._name),v(w.parentElement)?E=w.parentElement:(E=document.createElement("label")).insertAdjacentElement("afterbegin",w),E.lastElementChild instanceof HTMLSpanElement?C=E.lastElementChild:(C=document.createElement("span"),w.insertAdjacentElement("afterend",C)),C.innerHTML=_===void 0?b:_,this.elt.appendChild(E),w},a.remove=function(b){var _=!0,w=!1,E=void 0;try{for(var C,A=a._getOptionsArray()[Symbol.iterator]();!(_=(C=A.next()).done);_=!0){var L=C.value;if(L.value===b)return void(v(L.parentElement)?L.parentElement.remove():L.remove())}}catch(P){w=!0,E=P}finally{try{_||A.return==null||A.return()}finally{if(w)throw E}}},a.value=function(){var b="",_=!0,w=!1,E=void 0;try{for(var C,A=a._getOptionsArray()[Symbol.iterator]();!(_=(C=A.next()).done);_=!0){var L=C.value;if(L.checked){b=L.value;break}}}catch(P){w=!0,E=P}finally{try{_||A.return==null||A.return()}finally{if(w)throw E}}return b},a.selected=function(b){var _=null;if(b===void 0){var w=!0,E=!1,C=void 0;try{for(var A,L=a._getOptionsArray()[Symbol.iterator]();!(w=(A=L.next()).done);w=!0){var P=A.value;if(P.checked){_=P;break}}}catch(ee){E=!0,C=ee}finally{try{w||L.return==null||L.return()}finally{if(E)throw C}}}else{var R=!0,N=!1,I=void 0;try{for(var O,U=a._getOptionsArray()[Symbol.iterator]();!(R=(O=U.next()).done);R=!0){var K=O.value;K.value===b&&(K.setAttribute("checked",!0),_=K)}}catch(ee){N=!0,I=ee}finally{try{R||U.return==null||U.return()}finally{if(N)throw I}}}return _},a.disable=function(){var b=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],_=!0,w=!1,E=void 0;try{for(var C,A=a._getOptionsArray()[Symbol.iterator]();!(_=(C=A.next()).done);_=!0)C.value.setAttribute("disabled",b)}catch(L){w=!0,E=L}finally{try{_||A.return==null||A.return()}finally{if(w)throw E}}},a},r.default.prototype.createColorPicker=function(n){r.default._validateParameters("createColorPicker",arguments);var o,l=document.createElement("input");return l.type="color",n?n instanceof r.default.Color?l.value=n.toString("#rrggbb"):(r.default.prototype._colorMode="rgb",r.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},l.value=r.default.prototype.color(n).toString("#rrggbb")):l.value="#000000",(o=u(l,this)).color=function(){return n&&(n.mode&&(r.default.prototype._colorMode=n.mode),n.maxes&&(r.default.prototype._colorMaxes=n.maxes)),r.default.prototype.color(this.elt.value)},o},r.default.prototype.createInput=function(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text";r.default._validateParameters("createInput",arguments);var l=document.createElement("input");return l.setAttribute("value",n),l.setAttribute("type",o),u(l,this)},r.default.prototype.createFileInput=function(n){var o=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(r.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob){var l=document.createElement("input");return l.setAttribute("type","file"),o&&l.setAttribute("multiple",!0),l.addEventListener("change",function(a){var f=!0,v=!1,b=void 0;try{for(var _,w=a.target.files[Symbol.iterator]();!(f=(_=w.next()).done);f=!0){var E=_.value;r.default.File._load(E,n)}}catch(C){v=!0,b=C}finally{try{f||w.return==null||w.return()}finally{if(v)throw b}}},!1),u(l,this)}console.log("The File APIs are not fully supported in this browser. Cannot create element.")},r.default.prototype.createVideo=function(n,o){return r.default._validateParameters("createVideo",arguments),d(this,"video",n,o)},r.default.prototype.createAudio=function(n,o){return r.default._validateParameters("createAudio",arguments),d(this,"audio",n,o)},r.default.prototype.VIDEO="video",r.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(n){var o=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return o?new Promise(function(l,a){o.call(navigator,n,l,a)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),r.default.prototype.createCapture=function(){if(r.default._validateParameters("createCapture",arguments),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");var n,o,l=!0,a=!0,f=!0,v=!1,b=void 0;try{for(var _,w=arguments[Symbol.iterator]();!(f=(_=w.next()).done);f=!0){var E=_.value;E===r.default.prototype.VIDEO?a=!1:E===r.default.prototype.AUDIO?l=!1:h(E)==="object"?n=E:typeof E=="function"&&(o=E)}}catch(L){v=!0,b=L}finally{try{f||w.return==null||w.return()}finally{if(v)throw b}}n=n||{video:l,audio:a};var C=document.createElement("video");C.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(n).then(function(L){try{"srcObject"in C?C.srcObject=L:C.src=window.URL.createObjectURL(L)}catch{C.src=L}},console.log);var A=u(C,this,!0);return A.loadedmetadata=!1,C.addEventListener("loadedmetadata",function(){C.play(),C.width?(A.width=C.width,A.height=C.height):(A.width=A.elt.width=C.videoWidth,A.height=A.elt.height=C.videoHeight),A.loadedmetadata=!0,o&&o(C.srcObject)}),A},r.default.prototype.createElement=function(n,o){r.default._validateParameters("createElement",arguments);var l=document.createElement(n);return o!==void 0&&(l.innerHTML=o),u(l,this)},r.default.Element.prototype.addClass=function(n){return this.elt.className?this.hasClass(n)||(this.elt.className=this.elt.className+" "+n):this.elt.className=n,this},r.default.Element.prototype.removeClass=function(n){return this.elt.classList.remove(n),this},r.default.Element.prototype.hasClass=function(n){return this.elt.classList.contains(n)},r.default.Element.prototype.toggleClass=function(n){return this.elt.classList.contains(n)?this.elt.classList.remove(n):this.elt.classList.add(n),this},r.default.Element.prototype.child=function(n){return n===void 0?this.elt.childNodes:(typeof n=="string"?(n[0]==="#"&&(n=n.substring(1)),n=document.getElementById(n)):n instanceof r.default.Element&&(n=n.elt),n instanceof HTMLElement&&this.elt.appendChild(n),this)},r.default.Element.prototype.center=function(n){var o=this.elt.style.display,l=this.elt.style.display==="none",a=this.parent().style.display==="none",f={x:this.elt.offsetLeft,y:this.elt.offsetTop};l&&this.show(),a&&this.parent().show(),this.elt.style.display="block",this.position(0,0);var v=Math.abs(this.parent().offsetWidth-this.elt.offsetWidth),b=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return n==="both"||n===void 0?this.position(v/2+this.parent().offsetLeft,b/2+this.parent().offsetTop):n==="horizontal"?this.position(v/2+this.parent().offsetLeft,f.y):n==="vertical"&&this.position(f.x,b/2+this.parent().offsetTop),this.style("display",o),l&&this.hide(),a&&this.parent().hide(),this},r.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments[1]?this.elt.insertAdjacentHTML("beforeend",arguments[0]):this.elt.innerHTML=arguments[0],this)},r.default.Element.prototype.position=function(){if(arguments.length===0)return{x:this.elt.offsetLeft,y:this.elt.offsetTop};var n="absolute";return arguments[2]!=="static"&&arguments[2]!=="fixed"&&arguments[2]!=="relative"&&arguments[2]!=="sticky"&&arguments[2]!=="initial"&&arguments[2]!=="inherit"||(n=arguments[2]),this.elt.style.position=n,this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this},r.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var n="";return this.elt.style.transform&&(n=(n=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":arguments[3]+"px"),this.elt.style.transform+=n,this},r.default.Element.prototype._rotate=function(){var n="";return this.elt.style.transform&&(n=(n=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+arguments[0]+"deg)":arguments.length===2?this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)"),this.elt.style.transform+=n,this},r.default.Element.prototype.style=function(n,o){if(o instanceof r.default.Color&&(o="rgba("+o.levels[0]+","+o.levels[1]+","+o.levels[2]+","+o.levels[3]/255+")"),o===void 0){if(n.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(n);for(var l=n.split(";"),a=0;a<l.length;a++){var f=l[a].split(":");f[0]&&f[1]&&(this.elt.style[f[0].trim()]=f[1].trim())}}else if(this.elt.style[n]=o,n==="width"||n==="height"||n==="left"||n==="top"){var v=window.getComputedStyle(this.elt).getPropertyValue(n).replace(/\D+/g,"");this[n]=parseInt(v,10)}return this},r.default.Element.prototype.attribute=function(n,o){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return o===void 0?this.elt.getAttribute(n):(this.elt.setAttribute(n,o),this);if(o===void 0)return this.elt.firstChild.getAttribute(n);for(var l=0;l<this.elt.childNodes.length;l++)this.elt.childNodes[l].setAttribute(n,o)},r.default.Element.prototype.removeAttribute=function(n){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var o=0;o<this.elt.childNodes.length;o++)this.elt.childNodes[o].removeAttribute(n);return this.elt.removeAttribute(n),this},r.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},r.default.Element.prototype.show=function(){return this.elt.style.display="block",this},r.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},r.default.Element.prototype.size=function(n,o){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var l=n,a=o,f=r.default.prototype.AUTO;if(l!==f||a!==f){if(l===f?l=o*this.width/this.height:a===f&&(a=n*this.height/this.width),this.elt instanceof HTMLCanvasElement){var v,b={},_=this.elt.getContext("2d");for(v in _)b[v]=_[v];for(v in this.elt.setAttribute("width",l*this._pInst._pixelDensity),this.elt.setAttribute("height",a*this._pInst._pixelDensity),this.elt.style.width=l+"px",this.elt.style.height=a+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),b)this.elt.getContext("2d")[v]=b[v]}else this.elt.style.width=l+"px",this.elt.style.height=a+"px",this.elt.width=l,this.elt.height=a;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},r.default.Element.prototype.remove=function(){if(this instanceof r.default.MediaElement){this.stop();var n=this.elt.srcObject;n!==null&&n.getTracks().forEach(function(a){a.stop()})}var o=this._pInst._elements.indexOf(this);for(var l in o!==-1&&this._pInst._elements.splice(o,1),this._events)this.elt.removeEventListener(l,this._events[l]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},r.default.Element.prototype.drop=function(n,o){if(window.File&&window.FileReader&&window.FileList&&window.Blob){if(!this._dragDisabled){this._dragDisabled=!0;var l=function(a){a.preventDefault()};this.elt.addEventListener("dragover",l),this.elt.addEventListener("dragleave",l)}r.default.Element._attachListener("drop",function(a){a.preventDefault(),typeof o=="function"&&o.call(this,a);for(var f=a.dataTransfer.files,v=0;v<f.length;v++){var b=f[v];r.default.File._load(b,n)}},this)}else console.log("The File APIs are not fully supported in this browser.");return this},r.default.MediaElement=function(n,o){r.default.Element.call(this,n,o);var l=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],(this._pixelsState=this)._pixelDensity=1,this._modified=!1,Object.defineProperty(l,"src",{get:function(){var a=l.elt.children[0].src,f=l.elt.src===window.location.href?"":l.elt.src;return a===window.location.href?f:a},set:function(a){for(var f=0;f<l.elt.children.length;f++)l.elt.removeChild(l.elt.children[f]);var v=document.createElement("source");v.src=a,n.appendChild(v),l.elt.src=a,l.modified=!0}}),l._onended=function(){},l.elt.onended=function(){l._onended(l)}},r.default.MediaElement.prototype=Object.create(r.default.Element.prototype),r.default.MediaElement.prototype.play=function(){var n,o=this;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),(n=(1<this.elt.readyState||this.elt.load(),this.elt.play()))&&n.catch&&n.catch(function(l){l.name==="NotAllowedError"?r.default._friendlyAutoplayError(o.src):console.error("Media play method encountered an unexpected error",l)}),this},r.default.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},r.default.MediaElement.prototype.pause=function(){return this.elt.pause(),this},r.default.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},r.default.MediaElement.prototype.noLoop=function(){return this.elt.removeAttribute("loop"),this},r.default.MediaElement.prototype._setupAutoplayFailDetection=function(){var n=this,o=setTimeout(function(){return r.default._friendlyAutoplayError(n.src)},500);this.elt.addEventListener("play",function(){return clearTimeout(o)},{passive:!0,once:!0})},r.default.MediaElement.prototype.autoplay=function(n){var o=this,l=this.elt.getAttribute("autoplay");if(this.elt.setAttribute("autoplay",n),n&&!l){var a=function(){return o._setupAutoplayFailDetection()};this.elt.readyState===4?a():this.elt.addEventListener("canplay",a,{passive:!0,once:!0})}return this},r.default.MediaElement.prototype.volume=function(n){if(n===void 0)return this.elt.volume;this.elt.volume=n},r.default.MediaElement.prototype.speed=function(n){if(n===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=n:this.presetPlaybackRate=n},r.default.MediaElement.prototype.time=function(n){return n===void 0?this.elt.currentTime:(this.elt.currentTime=n,this)},r.default.MediaElement.prototype.duration=function(){return this.elt.duration},r.default.MediaElement.prototype.pixels=[],r.default.MediaElement.prototype._ensureCanvas=function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0))},r.default.MediaElement.prototype.loadPixels=function(){return this._ensureCanvas(),r.default.Renderer2D.prototype.loadPixels.apply(this,arguments)},r.default.MediaElement.prototype.updatePixels=function(n,o,l,a){return this.loadedmetadata&&(this._ensureCanvas(),r.default.Renderer2D.prototype.updatePixels.call(this,n,o,l,a)),this.setModified(!0),this},r.default.MediaElement.prototype.get=function(){return this._ensureCanvas(),r.default.Renderer2D.prototype.get.apply(this,arguments)},r.default.MediaElement.prototype._getPixel=function(){return this.loadPixels(),r.default.Renderer2D.prototype._getPixel.apply(this,arguments)},r.default.MediaElement.prototype.set=function(n,o,l){this.loadedmetadata&&(this._ensureCanvas(),r.default.Renderer2D.prototype.set.call(this,n,o,l),this.setModified(!0))},r.default.MediaElement.prototype.copy=function(){this._ensureCanvas(),r.default.prototype.copy.apply(this,arguments)},r.default.MediaElement.prototype.mask=function(){this.loadPixels(),this.setModified(!0),r.default.Image.prototype.mask.apply(this,arguments)},r.default.MediaElement.prototype.isModified=function(){return this._modified},r.default.MediaElement.prototype.setModified=function(n){this._modified=n},r.default.MediaElement.prototype.onended=function(n){return this._onended=n,this},r.default.MediaElement.prototype.connect=function(n){var o,l;if(typeof r.default.prototype.getAudioContext=="function")o=r.default.prototype.getAudioContext(),l=r.default.soundOut.input;else try{l=(o=n.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=o.createMediaElementSource(this.elt),this.audioSourceNode.connect(l)),n?n.input?this.audioSourceNode.connect(n.input):this.audioSourceNode.connect(n):this.audioSourceNode.connect(l)},r.default.MediaElement.prototype.disconnect=function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()},r.default.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0},r.default.MediaElement.prototype.hideControls=function(){this.elt.controls=!1};function c(n,o,l,a){this.callback=n,this.time=o,this.id=l,this.val=a}r.default.MediaElement.prototype.addCue=function(n,o,l){var a=this._cueIDCounter++,f=new c(o,n,a,l);return this._cues.push(f),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),a},r.default.MediaElement.prototype.removeCue=function(n){for(var o=0;o<this._cues.length;o++)this._cues[o].id===n&&(console.log(n),this._cues.splice(o,1));this._cues.length===0&&(this.elt.ontimeupdate=null)},r.default.MediaElement.prototype.clearCues=function(){this._cues=[],this.elt.ontimeupdate=null},r.default.MediaElement.prototype._onTimeUpdate=function(){for(var n=this.time(),o=0;o<this._cues.length;o++){var l=this._cues[o].time,a=this._cues[o].val;this._prevTime<l&&l<=n&&this._cues[o].callback(a)}this._prevTime=n},r.default.File=function(n,o){this.file=n,this._pInst=o;var l=n.type.split("/");this.type=l[0],this.subtype=l[1],this.name=n.name,this.size=n.size,this.data=void 0},r.default.File._createLoader=function(n,o){var l=new FileReader;return l.onload=function(a){var f=new r.default.File(n);if(f.file.type==="application/json")f.data=JSON.parse(a.target.result);else if(f.file.type==="text/xml"){var v=new DOMParser().parseFromString(a.target.result,"text/xml");f.data=new r.default.XML(v.documentElement)}else f.data=a.target.result;o(f)},l},r.default.File._load=function(n,o){if(/^text\//.test(n.type)||n.type==="application/json")r.default.File._createLoader(n,o).readAsText(n);else if(/^(video|audio)\//.test(n.type)){var l=new r.default.File(n);l.data=URL.createObjectURL(n),o(l)}else r.default.File._createLoader(n,o).readAsDataURL(n)};var i=r.default;m.default=i},{"../core/main":264,"core-js/modules/es.array.every":150,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":166,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229,"core-js/modules/web.url":231}],281:[function(t,g,m){function p(_){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(_)}Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r,h=(r=t("../core/main"))&&r.__esModule?r:{default:r},u=function(_){if(_&&_.__esModule)return _;if(_===null||p(_)!=="object"&&typeof _!="function")return{default:_};var w=d();if(w&&w.has(_))return w.get(_);var E={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in _)if(Object.prototype.hasOwnProperty.call(_,A)){var L=C?Object.getOwnPropertyDescriptor(_,A):null;L&&(L.get||L.set)?Object.defineProperty(E,A,L):E[A]=_[A]}return E.default=_,w&&w.set(_,E),E}(t("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var _=new WeakMap;return d=function(){return _},_}h.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",h.default.prototype.accelerationX=0,h.default.prototype.accelerationY=0,h.default.prototype.accelerationZ=0,h.default.prototype.pAccelerationX=0,h.default.prototype.pAccelerationY=0,h.default.prototype.pAccelerationZ=0,h.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},h.default.prototype.rotationX=0,h.default.prototype.rotationY=0,h.default.prototype.rotationZ=0,h.default.prototype.pRotationX=0,h.default.prototype.pRotationY=0;var c=h.default.prototype.pRotationZ=0,i=0,n=0,o="clockwise",l="clockwise",a="clockwise";h.default.prototype.pRotateDirectionX=void 0,h.default.prototype.pRotateDirectionY=void 0,h.default.prototype.pRotateDirectionZ=void 0,h.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},h.default.prototype.turnAxis=void 0;var f=.5,v=30;h.default.prototype.setMoveThreshold=function(_){h.default._validateParameters("setMoveThreshold",arguments),f=_},h.default.prototype.setShakeThreshold=function(_){h.default._validateParameters("setShakeThreshold",arguments),v=_},h.default.prototype._ondeviceorientation=function(_){this._updatePRotations(),this._angleMode===u.radians&&(_.beta=_.beta*(_PI/180),_.gamma=_.gamma*(_PI/180),_.alpha=_.alpha*(_PI/180)),this._setProperty("rotationX",_.beta),this._setProperty("rotationY",_.gamma),this._setProperty("rotationZ",_.alpha),this._handleMotion()},h.default.prototype._ondevicemotion=function(_){this._updatePAccelerations(),this._setProperty("accelerationX",2*_.acceleration.x),this._setProperty("accelerationY",2*_.acceleration.y),this._setProperty("accelerationZ",2*_.acceleration.z),this._handleMotion()},h.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var _,w,E=this._isGlobal?window:this;if(typeof E.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>f||Math.abs(this.accelerationY-this.pAccelerationY)>f||Math.abs(this.accelerationZ-this.pAccelerationZ)>f)&&E.deviceMoved(),typeof E.deviceTurned=="function"){var C=this.rotationX+180,A=this.pRotationX+180,L=c+180;0<C-A&&C-A<270||C-A<-270?o="clockwise":(C-A<0||270<C-A)&&(o="counter-clockwise"),o!==this.pRotateDirectionX&&(L=C),90<Math.abs(C-L)&&Math.abs(C-L)<270&&(L=C,this._setProperty("turnAxis","X"),E.deviceTurned()),this.pRotateDirectionX=o,c=L-180;var P=this.rotationY+180,R=this.pRotationY+180,N=i+180;0<P-R&&P-R<270||P-R<-270?l="clockwise":(P-R<0||270<P-this.pRotationY)&&(l="counter-clockwise"),l!==this.pRotateDirectionY&&(N=P),90<Math.abs(P-N)&&Math.abs(P-N)<270&&(N=P,this._setProperty("turnAxis","Y"),E.deviceTurned()),this.pRotateDirectionY=l,i=N-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?a="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(a="counter-clockwise"),a!==this.pRotateDirectionZ&&(n=this.rotationZ),90<Math.abs(this.rotationZ-n)&&Math.abs(this.rotationZ-n)<270&&(n=this.rotationZ,this._setProperty("turnAxis","Z"),E.deviceTurned()),this.pRotateDirectionZ=a,this._setProperty("turnAxis",void 0)}typeof E.deviceShaken=="function"&&(this.pAccelerationX!==null&&(_=Math.abs(this.accelerationX-this.pAccelerationX),w=Math.abs(this.accelerationY-this.pAccelerationY)),v<_+w&&E.deviceShaken())};var b=h.default;m.default=b},{"../core/constants":253,"../core/main":264}],282:[function(t,g,m){Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};r.default.prototype.isKeyPressed=!1,r.default.prototype.keyIsPressed=!1,r.default.prototype.key="",r.default.prototype.keyCode=0,r.default.prototype._onkeydown=function(u){if(!this._downKeys[u.which]){this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",u.which),this._downKeys[u.which]=!0,this._setProperty("key",u.key||String.fromCharCode(u.which)||u.which);var d=this._isGlobal?window:this;typeof d.keyPressed=="function"&&!u.charCode&&d.keyPressed(u)===!1&&u.preventDefault()}},r.default.prototype._onkeyup=function(u){this._downKeys[u.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",u.key||String.fromCharCode(u.which)||u.which),this._setProperty("keyCode",u.which);var d=this._isGlobal?window:this;typeof d.keyReleased=="function"&&d.keyReleased(u)===!1&&u.preventDefault()},r.default.prototype._onkeypress=function(u){if(u.which!==this._lastKeyCodeTyped){this._setProperty("_lastKeyCodeTyped",u.which),this._setProperty("key",u.key||String.fromCharCode(u.which)||u.which);var d=this._isGlobal?window:this;typeof d.keyTyped=="function"&&d.keyTyped(u)===!1&&u.preventDefault()}},r.default.prototype._onblur=function(u){this._downKeys={}},r.default.prototype.keyIsDown=function(u){return r.default._validateParameters("keyIsDown",arguments),this._downKeys[u]||!1},r.default.prototype._areDownKeys=function(){for(var u in this._downKeys)if(this._downKeys.hasOwnProperty(u)&&this._downKeys[u]===!0)return!0;return!1};var h=r.default;m.default=h},{"../core/main":264}],283:[function(t,g,m){function p(i){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(i)}t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r,h=(r=t("../core/main"))&&r.__esModule?r:{default:r},u=function(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var n=d();if(n&&n.has(i))return n.get(i);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){var f=l?Object.getOwnPropertyDescriptor(i,a):null;f&&(f.get||f.set)?Object.defineProperty(o,a,f):o[a]=i[a]}return o.default=i,n&&n.set(i,o),o}(t("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return d=function(){return i},i}h.default.prototype.movedX=0,h.default.prototype.movedY=0,h.default.prototype._hasMouseInteracted=!1,h.default.prototype.mouseX=0,h.default.prototype.mouseY=0,h.default.prototype.pmouseX=0,h.default.prototype.pmouseY=0,h.default.prototype.winMouseX=0,h.default.prototype.winMouseY=0,h.default.prototype.pwinMouseX=0,h.default.prototype.pwinMouseY=0,h.default.prototype.mouseButton=0,h.default.prototype.mouseIsPressed=!1,h.default.prototype._updateNextMouseCoords=function(i){if(this._curElement!==null&&(!i.touches||0<i.touches.length)){var n=function(o,l,a,f){f&&!f.clientX&&(f.touches?f=f.touches[0]:f.changedTouches&&(f=f.changedTouches[0]));var v=o.getBoundingClientRect(),b=o.scrollWidth/l||1,_=o.scrollHeight/a||1;return{x:(f.clientX-v.left)/b,y:(f.clientY-v.top)/_,winX:f.clientX,winY:f.clientY,id:f.identifier}}(this._curElement.elt,this.width,this.height,i);this._setProperty("movedX",i.movementX),this._setProperty("movedY",i.movementY),this._setProperty("mouseX",n.x),this._setProperty("mouseY",n.y),this._setProperty("winMouseX",n.winX),this._setProperty("winMouseY",n.winY)}this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},h.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},h.default.prototype._setMouseButton=function(i){i.button===1?this._setProperty("mouseButton",u.CENTER):i.button===2?this._setProperty("mouseButton",u.RIGHT):this._setProperty("mouseButton",u.LEFT)},h.default.prototype._onmousemove=function(i){var n=this._isGlobal?window:this;this._updateNextMouseCoords(i),this.mouseIsPressed?typeof n.mouseDragged=="function"?n.mouseDragged(i)===!1&&i.preventDefault():typeof n.touchMoved=="function"&&n.touchMoved(i)===!1&&i.preventDefault():typeof n.mouseMoved=="function"&&n.mouseMoved(i)===!1&&i.preventDefault()},h.default.prototype._onmousedown=function(i){var n=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(i),this._updateNextMouseCoords(i),typeof n.mousePressed=="function"?n.mousePressed(i)===!1&&i.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof n.touchStarted=="function"&&n.touchStarted(i)===!1&&i.preventDefault()},h.default.prototype._onmouseup=function(i){var n=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),typeof n.mouseReleased=="function"?n.mouseReleased(i)===!1&&i.preventDefault():typeof n.touchEnded=="function"&&n.touchEnded(i)===!1&&i.preventDefault()},h.default.prototype._ondragend=h.default.prototype._onmouseup,h.default.prototype._ondragover=h.default.prototype._onmousemove,h.default.prototype._onclick=function(i){var n=this._isGlobal?window:this;typeof n.mouseClicked=="function"&&n.mouseClicked(i)===!1&&i.preventDefault()},h.default.prototype._ondblclick=function(i){var n=this._isGlobal?window:this;typeof n.doubleClicked=="function"&&n.doubleClicked(i)===!1&&i.preventDefault()},h.default.prototype._mouseWheelDeltaY=0,h.default.prototype._pmouseWheelDeltaY=0,h.default.prototype._onwheel=function(i){var n=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",i.deltaY),typeof n.mouseWheel=="function"&&(i.delta=i.deltaY,n.mouseWheel(i)===!1&&i.preventDefault())},h.default.prototype.requestPointerLock=function(){var i=this._curElement.elt;return i.requestPointerLock=i.requestPointerLock||i.mozRequestPointerLock,i.requestPointerLock?(i.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},h.default.prototype.exitPointerLock=function(){document.exitPointerLock()};var c=h.default;m.default=c},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.includes":156,"core-js/modules/es.string.includes":185}],284:[function(t,g,m){t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};function h(d,c,i,n,o){var l=4<arguments.length&&o!==void 0?o:0,a=d.getBoundingClientRect(),f=d.scrollWidth/c||1,v=d.scrollHeight/i||1,b=n.touches[l]||n.changedTouches[l];return{x:(b.clientX-a.left)/f,y:(b.clientY-a.top)/v,winX:b.clientX,winY:b.clientY,id:b.identifier}}r.default.prototype.touches=[],r.default.prototype._updateTouchCoords=function(d){if(this._curElement!==null){for(var c=[],i=0;i<d.touches.length;i++)c[i]=h(this._curElement.elt,this.width,this.height,d,i);this._setProperty("touches",c)}},r.default.prototype._ontouchstart=function(d){var c=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(d),this._updateNextMouseCoords(d),this._updateMouseCoords(),typeof c.touchStarted=="function"?c.touchStarted(d)===!1&&d.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof c.mousePressed=="function"&&c.mousePressed(d)===!1&&d.preventDefault()},r.default.prototype._ontouchmove=function(d){var c=this._isGlobal?window:this;this._updateTouchCoords(d),this._updateNextMouseCoords(d),typeof c.touchMoved=="function"?c.touchMoved(d)===!1&&d.preventDefault():typeof c.mouseDragged=="function"&&c.mouseDragged(d)===!1&&d.preventDefault()},r.default.prototype._ontouchend=function(d){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(d),this._updateNextMouseCoords(d);var c=this._isGlobal?window:this;typeof c.touchEnded=="function"?c.touchEnded(d)===!1&&d.preventDefault():typeof c.mouseReleased=="function"&&c.mouseReleased(d)===!1&&d.preventDefault()};var u=r.default;m.default=u},{"../core/main":264,"core-js/modules/es.array.includes":156,"core-js/modules/es.string.includes":185}],285:[function(t,g,m){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r,h,u,d={};function c(n,o){for(var l,a,f,v,b,_,w,E,C,A,L=d._toPixels(n),P=n.width,R=n.height,N=P*R,I=new Int32Array(N),O=0;O<N;O++)I[O]=d._getARGB(L,O);var U,K,ee,H,te=new Int32Array(N),Z=new Int32Array(N),ge=new Int32Array(N),$=new Int32Array(N),se=0;for(function(de){var re=3.5*de|0;if(p!==(re=re<1?1:re<248?re:248)){r=1+(p=re)<<1,h=new Int32Array(r),u=new Array(r);for(var ie=0;ie<r;ie++)u[ie]=new Int32Array(256);for(var j,B,G,ne,Y=1,J=re-1;Y<re;Y++){h[re+Y]=h[J]=B=J*J,G=u[re+Y],ne=u[J--];for(var fe=0;fe<256;fe++)G[fe]=ne[fe]=B*fe}j=h[re]=re*re,G=u[re];for(var oe=0;oe<256;oe++)G[oe]=j*oe}}(o),K=0;K<R;K++){for(U=0;U<P;U++){if(v=f=a=b=l=0,(_=U-p)<0)A=-_,_=0;else{if(P<=_)break;A=0}for(ee=A;ee<r&&!(P<=_);ee++){var z=I[_+se];b+=(H=u[ee])[(-16777216&z)>>>24],a+=H[(16711680&z)>>16],f+=H[(65280&z)>>8],v+=H[255&z],l+=h[ee],_++}te[w=se+U]=b/l,Z[w]=a/l,ge[w]=f/l,$[w]=v/l}se+=P}for(C=(E=-p)*P,K=se=0;K<R;K++){for(U=0;U<P;U++){if(v=f=a=b=l=0,E<0)A=w=-E,_=U;else{if(R<=E)break;A=0,w=E,_=U+C}for(ee=A;ee<r&&!(R<=w);ee++)b+=(H=u[ee])[te[_]],a+=H[Z[_]],f+=H[ge[_]],v+=H[$[_]],l+=h[ee],w++,_+=P;I[U+se]=b/l<<24|a/l<<16|f/l<<8|v/l}se+=P,C+=P,E++}d._setPixels(L,I)}d._toPixels=function(n){if(n instanceof ImageData)return n.data;if(n.getContext("2d"))return n.getContext("2d").getImageData(0,0,n.width,n.height).data;if(n.getContext("webgl")){var o=n.getContext("webgl"),l=o.drawingBufferWidth*o.drawingBufferHeight*4,a=new Uint8Array(l);return o.readPixels(0,0,n.width,n.height,o.RGBA,o.UNSIGNED_BYTE,a),a}},d._getARGB=function(n,o){var l=4*o;return n[3+l]<<24&4278190080|n[l]<<16&16711680|n[1+l]<<8&65280|255&n[2+l]},d._setPixels=function(n,o){for(var l=0,a=0,f=n.length;a<f;a++)n[(l=4*a)+0]=(16711680&o[a])>>>16,n[l+1]=(65280&o[a])>>>8,n[l+2]=255&o[a],n[l+3]=(4278190080&o[a])>>>24},d._toImageData=function(n){return n instanceof ImageData?n:n.getContext("2d").getImageData(0,0,n.width,n.height)},d._createImageData=function(n,o){return d._tmpCanvas=document.createElement("canvas"),d._tmpCtx=d._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(n,o)},d.apply=function(n,o,l){var a=n.getContext("2d"),f=a.getImageData(0,0,n.width,n.height),v=o(f,l);v instanceof ImageData?a.putImageData(v,0,0,0,0,n.width,n.height):a.putImageData(f,0,0,0,0,n.width,n.height)},d.threshold=function(n,o){var l=d._toPixels(n);o===void 0&&(o=.5);for(var a=Math.floor(255*o),f=0;f<l.length;f+=4){var v=void 0;v=a<=.2126*l[f]+.7152*l[f+1]+.0722*l[f+2]?255:0,l[f]=l[f+1]=l[f+2]=v}},d.gray=function(n){for(var o=d._toPixels(n),l=0;l<o.length;l+=4){var a=.2126*o[l]+.7152*o[l+1]+.0722*o[l+2];o[l]=o[l+1]=o[l+2]=a}},d.opaque=function(n){for(var o=d._toPixels(n),l=0;l<o.length;l+=4)o[l+3]=255;return o},d.invert=function(n){for(var o=d._toPixels(n),l=0;l<o.length;l+=4)o[l]=255-o[l],o[l+1]=255-o[l+1],o[l+2]=255-o[l+2]},d.posterize=function(n,o){var l=d._toPixels(n);if(o<2||255<o)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var a=o-1,f=0;f<l.length;f+=4){var v=l[f],b=l[f+1],_=l[f+2];l[f]=255*(v*o>>8)/a,l[f+1]=255*(b*o>>8)/a,l[f+2]=255*(_*o>>8)/a}},d.dilate=function(n){for(var o,l,a,f,v,b,_,w,E,C,A,L,P,R,N,I,O,U=d._toPixels(n),K=0,ee=U.length?U.length/4:0,H=new Int32Array(ee);K<ee;)for(l=(o=K)+n.width;K<l;)a=f=d._getARGB(U,K),(_=K-1)<o&&(_=K),l<=(b=K+1)&&(b=K),(w=K-n.width)<0&&(w=0),ee<=(E=K+n.width)&&(E=K),L=d._getARGB(U,w),A=d._getARGB(U,_),P=d._getARGB(U,E),(v=77*(a>>16&255)+151*(a>>8&255)+28*(255&a))<(N=77*(A>>16&255)+151*(A>>8&255)+28*(255&A))&&(f=A,v=N),v<(R=77*((C=d._getARGB(U,b))>>16&255)+151*(C>>8&255)+28*(255&C))&&(f=C,v=R),v<(I=77*(L>>16&255)+151*(L>>8&255)+28*(255&L))&&(f=L,v=I),v<(O=77*(P>>16&255)+151*(P>>8&255)+28*(255&P))&&(f=P,v=O),H[K++]=f;d._setPixels(U,H)},d.erode=function(n){for(var o,l,a,f,v,b,_,w,E,C,A,L,P,R,N,I,O,U=d._toPixels(n),K=0,ee=U.length?U.length/4:0,H=new Int32Array(ee);K<ee;)for(l=(o=K)+n.width;K<l;)a=f=d._getARGB(U,K),(_=K-1)<o&&(_=K),l<=(b=K+1)&&(b=K),(w=K-n.width)<0&&(w=0),ee<=(E=K+n.width)&&(E=K),L=d._getARGB(U,w),A=d._getARGB(U,_),P=d._getARGB(U,E),(N=77*(A>>16&255)+151*(A>>8&255)+28*(255&A))<(v=77*(a>>16&255)+151*(a>>8&255)+28*(255&a))&&(f=A,v=N),(R=77*((C=d._getARGB(U,b))>>16&255)+151*(C>>8&255)+28*(255&C))<v&&(f=C,v=R),(I=77*(L>>16&255)+151*(L>>8&255)+28*(255&L))<v&&(f=L,v=I),(O=77*(P>>16&255)+151*(P>>8&255)+28*(255&P))<v&&(f=P,v=O),H[K++]=f;d._setPixels(U,H)},d.blur=function(n,o){c(n,o)};var i=d;m.default=i},{"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int32-array":209,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226}],286:[function(t,g,m){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p=h(t("../core/main")),r=h(t("omggif"));function h(c){return c&&c.__esModule?c:{default:c}}function u(c){return function(i){if(Array.isArray(i)){for(var n=0,o=new Array(i.length);n<i.length;n++)o[n]=i[n];return o}}(c)||function(i){if(Symbol.iterator in Object(i)||Object.prototype.toString.call(i)==="[object Arguments]")return Array.from(i)}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}p.default.prototype.createImage=function(c,i){return p.default._validateParameters("createImage",arguments),new p.default.Image(c,i)},p.default.prototype.saveCanvas=function(){p.default._validateParameters("saveCanvas",arguments);var c,i,n,o,l=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(c=arguments[0],l.shift()):arguments[0]instanceof p.default.Element?(c=arguments[0].elt,l.shift()):c=this._curElement&&this._curElement.elt,1<=l.length&&(i=l[0]),2<=l.length&&(n=l[1]),n=n||p.default.prototype._checkFileExtension(i,n)[1]||"png"){default:o="image/png";break;case"jpeg":case"jpg":o="image/jpeg"}c.toBlob(function(a){p.default.prototype.downloadFile(a,i,n)},o)},p.default.prototype.saveGif=function(c,i){var n=c.gifProperties,o=n.loopLimit;o===1?o=null:o===null&&(o=0);for(var l=new Uint8Array(c.width*c.height*n.numFrames),a=[],f={},v=0;v<n.numFrames;v++){for(var b=new Set,_=n.frames[v].image.data,w=_.length,E=new Uint32Array(c.width*c.height),C=0,A=0;C<w;C+=4,A++){var L=_[C+0]<<16|_[C+1]<<8|_[C+2]<<0;b.add(L),E[A]=L}var P=u(b).sort().toString();f[P]===void 0?f[P]={freq:1,frames:[v]}:(f[P].freq+=1,f[P].frames.push(v)),a.push(E)}var R=[],N=Object.keys(f).sort(function(ie,j){return f[j].freq-f[ie].freq}),I=N[0].split(",").map(function(ie){return parseInt(ie)});R=R.concat(f[I].frames);for(var O=new Set(I),U=1;U<N.length;U++){var K=N[U].split(",").map(function(ie){return parseInt(ie)}).filter(function(ie){return!O.has(ie)});if(I.length+K.length<=256){for(var ee=0;ee<K.length;ee++)I.push(K[ee]),O.add(K[ee]);R=R.concat(f[N[U]].frames)}}R=new Set(R);for(var H={},te=0;te<I.length;te++)H[I[te]]||(H[I[te]]=te);for(var Z=1;Z<I.length;)Z<<=1;I.length=Z;for(var ge={loop:o,palette:new Uint32Array(I)},$=new r.default.GifWriter(l,c.width,c.height,ge),se={},z=function(ie){for(var j=!R.has(ie),B=j?[]:I,G=new Uint8Array(c.width*c.height),ne={},Y=new Set,J=0;J<a[ie].length;J++){var fe=a[ie][J];j?(ne[fe]===void 0&&(ne[fe]=B.length,B.push(fe)),G[J]=ne[fe]):G[J]=H[fe],0<ie&&a[ie-1][J]!==fe&&Y.add(fe)}var oe={},X=B.filter(function(Le){return!Y.has(Le)});if(0<X.length){var W=X[0],pe=j?ne[W]:H[W];if(0<ie){for(var Se=0;Se<a[ie].length;Se++)a[ie-1][Se]===a[ie][Se]&&(G[Se]=pe);oe.transparent=pe,se.frameOpts.disposal=1}}if(oe.delay=n.frames[ie].delay/10,j){for(var Re=1;Re<B.length;)Re<<=1;B.length=Re,oe.palette=new Uint32Array(B)}0<ie&&$.addFrame(0,0,c.width,c.height,se.pixelPaletteIndex,se.frameOpts),se={pixelPaletteIndex:G,frameOpts:oe}},de=0;de<n.numFrames;de++)z(de);se.frameOpts.disposal=1,$.addFrame(0,0,c.width,c.height,se.pixelPaletteIndex,se.frameOpts);var re=new Blob([l.slice(0,$.end())],{type:"image/gif"});p.default.prototype.downloadFile(re,i,"gif")},p.default.prototype.saveFrames=function(c,i,n,o,l){p.default._validateParameters("saveFrames",arguments);var a=n||3;a=p.default.prototype.constrain(a,0,15),a*=1e3;var f=o||15;f=p.default.prototype.constrain(f,0,22);var v=0,b=p.default.prototype._makeFrame,_=this._curElement.elt,w=[],E=setInterval(function(){w.push(b(c+v,i,_)),v++},1e3/f);setTimeout(function(){if(clearInterval(E),l)l(w);else{var C=!0,A=!1,L=void 0;try{for(var P,R=w[Symbol.iterator]();!(C=(P=R.next()).done);C=!0){var N=P.value;p.default.prototype.downloadFile(N.imageData,N.filename,N.ext)}}catch(I){A=!0,L=I}finally{try{C||R.return==null||R.return()}finally{if(A)throw L}}}w=[]},a+.01)},p.default.prototype._makeFrame=function(c,i,n){var o,l;if(o=this?this._curElement.elt:n,i)switch(i.toLowerCase()){case"png":l="image/png";break;case"jpeg":case"jpg":l="image/jpeg";break;default:l="image/png"}else i="png",l="image/png";var a=o.toDataURL(l);a=a.replace(l,"image/octet-stream");var f={};return f.imageData=a,f.filename=c,f.ext=i,f};var d=p.default;m.default=d},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":229,omggif:238}],287:[function(t,g,m){function p(a){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(a)}t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r=n(t("../core/main")),h=n(t("./filters")),u=n(t("../core/helpers")),d=function(a){if(a&&a.__esModule)return a;if(a===null||p(a)!=="object"&&typeof a!="function")return{default:a};var f=i();if(f&&f.has(a))return f.get(a);var v={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in a)if(Object.prototype.hasOwnProperty.call(a,_)){var w=b?Object.getOwnPropertyDescriptor(a,_):null;w&&(w.get||w.set)?Object.defineProperty(v,_,w):v[_]=a[_]}return v.default=a,f&&f.set(a,v),v}(t("../core/constants")),c=n(t("omggif"));function i(){if(typeof WeakMap!="function")return null;var a=new WeakMap;return i=function(){return a},a}function n(a){return a&&a.__esModule?a:{default:a}}function o(a,f){return 0<a&&a<f?a:f}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),r.default.prototype.loadImage=function(a,f,v){r.default._validateParameters("loadImage",arguments);var b=new r.default.Image(1,1,this),_=this,w=new Request(a,{method:"GET",mode:"cors"});return fetch(a,w).then(function(E){var C=E.headers.get("content-type");if(C===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),C&&C.includes("image/gif"))E.arrayBuffer().then(function(L){L&&function(P,R,N,I,O){var U=new c.default.GifReader(P);R.width=R.canvas.width=U.width,R.height=R.canvas.height=U.height;var K=[],ee=U.numFrames(),H=new Uint8ClampedArray(R.width*R.height*4);if(1<ee){for(var te=function(re,ie){try{ie.decodeAndBlitFrameRGBA(re,H)}catch(j){r.default._friendlyFileLoadError(8,R.src),typeof I=="function"?I(j):console.error(j)}},Z=0;Z<ee;Z++){var ge=U.frameInfo(Z),$=R.drawingContext.getImageData(0,0,R.width,R.height);H=$.data.slice(),te(Z,U);var se=new ImageData(H,R.width,R.height);R.drawingContext.putImageData(se,0,0);var z=ge.delay;z===0&&(z=10),K.push({image:R.drawingContext.getImageData(0,0,R.width,R.height),delay:10*z}),ge.disposal===2?R.drawingContext.clearRect(ge.x,ge.y,ge.width,ge.height):ge.disposal===3&&R.drawingContext.putImageData($,0,0,ge.x,ge.y,ge.width,ge.height)}var de=U.loopCount();de===null?de=1:de===0&&(de=null),R.drawingContext.putImageData(K[0].image,0,0),R.gifProperties={displayIndex:0,loopLimit:de,loopCount:0,frames:K,numFrames:ee,playing:!0,timeDisplayed:0,lastChangeTime:0}}typeof N=="function"&&N(R),O()}(new Uint8Array(L),b,f,v,function(P){_._decrementPreload()}.bind(_))},function(L){typeof v=="function"?v(L):console.error(L)});else{var A=new Image;A.onload=function(){b.width=b.canvas.width=A.width,b.height=b.canvas.height=A.height,b.drawingContext.drawImage(A,0,0),b.modified=!0,typeof f=="function"&&f(b),_._decrementPreload()},A.onerror=function(L){r.default._friendlyFileLoadError(0,A.src),typeof v=="function"?v(L):console.error(L)},a.indexOf("data:image/")!==0&&(A.crossOrigin="Anonymous"),A.src=a}b.modified=!0}).catch(function(E){r.default._friendlyFileLoadError(0,a),typeof v=="function"?v(E):console.error(E)}),b},r.default.prototype.image=function(a,f,v,b,_,w,E,C,A){r.default._validateParameters("image",arguments);var L=a.width,P=a.height;a.elt&&a.elt.videoWidth&&!a.canvas&&(L=a.elt.videoWidth,P=a.elt.videoHeight);var R=f,N=v,I=b||L,O=_||P,U=w||0,K=E||0,ee=C||L,H=A||P;ee=o(ee,L),H=o(H,P);var te=1;a.elt&&!a.canvas&&a.elt.style.width&&(te=a.elt.videoWidth&&!b?a.elt.videoWidth:a.elt.width,te/=parseInt(a.elt.style.width,10)),U*=te,K*=te,H*=te,ee*=te;var Z=u.default.modeAdjust(R,N,I,O,this._renderer._imageMode);this._renderer.image(a,U,K,ee,H,Z.x,Z.y,Z.w,Z.h)},r.default.prototype.tint=function(){for(var a=arguments.length,f=new Array(a),v=0;v<a;v++)f[v]=arguments[v];r.default._validateParameters("tint",f);var b=this.color.apply(this,f);this._renderer._tint=b.levels},r.default.prototype.noTint=function(){this._renderer._tint=null},r.default.prototype._getTintedImageCanvas=function(a){if(!a.canvas)return a;var f=h.default._toPixels(a.canvas),v=document.createElement("canvas");v.width=a.canvas.width,v.height=a.canvas.height;for(var b=v.getContext("2d"),_=b.createImageData(a.canvas.width,a.canvas.height),w=_.data,E=0;E<f.length;E+=4){var C=f[E],A=f[E+1],L=f[E+2],P=f[E+3];w[E]=C*this._renderer._tint[0]/255,w[E+1]=A*this._renderer._tint[1]/255,w[E+2]=L*this._renderer._tint[2]/255,w[E+3]=P*this._renderer._tint[3]/255}return b.putImageData(_,0,0),v},r.default.prototype.imageMode=function(a){r.default._validateParameters("imageMode",arguments),a!==d.CORNER&&a!==d.CORNERS&&a!==d.CENTER||(this._renderer._imageMode=a)};var l=r.default;m.default=l},{"../core/constants":253,"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/helpers":260,"../core/main":264,"./filters":285,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.includes":185,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.typed-array.uint8-clamped-array":227,omggif:238}],288:[function(t,g,m){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p=h(t("../core/main")),r=h(t("./filters"));function h(d){return d&&d.__esModule?d:{default:d}}p.default.Image=function(d,c){this.width=d,this.height=c,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]},p.default.Image.prototype._animateGif=function(d){var c=this.gifProperties,i=d._lastFrameTime;if(c.lastChangeTime===0&&(c.lastChangeTime=i),c.playing){c.timeDisplayed=i-c.lastChangeTime;var n=c.frames[c.displayIndex].delay;if(c.timeDisplayed>=n){var o=Math.floor(c.timeDisplayed/n);if(c.timeDisplayed=0,c.lastChangeTime=i,c.displayIndex+=o,c.loopCount=Math.floor(c.displayIndex/c.numFrames),c.loopLimit!==null&&c.loopCount>=c.loopLimit)c.playing=!1;else{var l=c.displayIndex%c.numFrames;this.drawingContext.putImageData(c.frames[l].image,0,0),c.displayIndex=l,this.setModified(!0)}}}},p.default.Image.prototype._setProperty=function(d,c){this[d]=c,this.setModified(!0)},p.default.Image.prototype.loadPixels=function(){p.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)},p.default.Image.prototype.updatePixels=function(d,c,i,n){p.default.Renderer2D.prototype.updatePixels.call(this,d,c,i,n),this.setModified(!0)},p.default.Image.prototype.get=function(d,c,i,n){return p.default._validateParameters("p5.Image.get",arguments),p.default.Renderer2D.prototype.get.apply(this,arguments)},p.default.Image.prototype._getPixel=p.default.Renderer2D.prototype._getPixel,p.default.Image.prototype.set=function(d,c,i){p.default.Renderer2D.prototype.set.call(this,d,c,i),this.setModified(!0)},p.default.Image.prototype.resize=function(d,c){d===0&&c===0?(d=this.canvas.width,c=this.canvas.height):d===0?d=this.canvas.width*c/this.canvas.height:c===0&&(c=this.canvas.height*d/this.canvas.width),d=Math.floor(d),c=Math.floor(c);var i=document.createElement("canvas");if(i.width=d,i.height=c,this.gifProperties)for(var n=this.gifProperties,o=function(f,v){for(var b=0,_=0;_<v.height;_++)for(var w=0;w<v.width;w++){var E=Math.floor(w*f.width/v.width),C=4*(Math.floor(_*f.height/v.height)*f.width+E);v.data[b++]=f.data[C++],v.data[b++]=f.data[C++],v.data[b++]=f.data[C++],v.data[b++]=f.data[C++]}},l=0;l<n.numFrames;l++){var a=this.drawingContext.createImageData(d,c);o(n.frames[l].image,a),n.frames[l].image=a}i.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,i.width,i.height),this.canvas.width=this.width=d,this.canvas.height=this.height=c,this.drawingContext.drawImage(i,0,0,d,c,0,0,d,c),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)},p.default.Image.prototype.copy=function(){for(var d=arguments.length,c=new Array(d),i=0;i<d;i++)c[i]=arguments[i];p.default.prototype.copy.apply(this,c)},p.default.Image.prototype.mask=function(d){d===void 0&&(d=this);var c=this.drawingContext.globalCompositeOperation,i=1;d instanceof p.default.Renderer&&(i=d._pInst._pixelDensity);var n=[d,0,0,i*d.width,i*d.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in",p.default.Image.prototype.copy.apply(this,n),this.drawingContext.globalCompositeOperation=c,this.setModified(!0)},p.default.Image.prototype.filter=function(d,c){r.default.apply(this.canvas,r.default[d],c),this.setModified(!0)},p.default.Image.prototype.blend=function(){for(var d=arguments.length,c=new Array(d),i=0;i<d;i++)c[i]=arguments[i];p.default._validateParameters("p5.Image.blend",arguments),p.default.prototype.blend.apply(this,c),this.setModified(!0)},p.default.Image.prototype.setModified=function(d){this._modified=d},p.default.Image.prototype.isModified=function(){return this._modified},p.default.Image.prototype.save=function(d,c){this.gifProperties?p.default.prototype.saveGif(this,d):p.default.prototype.saveCanvas(this.canvas,d,c)},p.default.Image.prototype.reset=function(){if(this.gifProperties){var d=this.gifProperties;d.playing=!0,d.timeSinceStart=0,d.timeDisplayed=0,d.lastChangeTime=0,d.loopCount=0,d.displayIndex=0,this.drawingContext.putImageData(d.frames[0].image,0,0)}},p.default.Image.prototype.getCurrentFrame=function(){if(this.gifProperties){var d=this.gifProperties;return d.displayIndex%d.numFrames}},p.default.Image.prototype.setFrame=function(d){if(this.gifProperties){var c=this.gifProperties;d<c.numFrames&&0<=d?(c.timeDisplayed=0,c.lastChangeTime=0,c.displayIndex=d,this.drawingContext.putImageData(c.frames[d].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero.")}},p.default.Image.prototype.numFrames=function(){if(this.gifProperties)return this.gifProperties.numFrames},p.default.Image.prototype.play=function(){this.gifProperties&&(this.gifProperties.playing=!0)},p.default.Image.prototype.pause=function(){this.gifProperties&&(this.gifProperties.playing=!1)},p.default.Image.prototype.delay=function(d,c){if(this.gifProperties){var i=this.gifProperties;if(c<i.numFrames&&0<=c)i.frames[c].delay=d;else{var n=!0,o=!1,l=void 0;try{for(var a,f=i.frames[Symbol.iterator]();!(n=(a=f.next()).done);n=!0)a.value.delay=d}catch(v){o=!0,l=v}finally{try{n||f.return==null||f.return()}finally{if(o)throw l}}}}};var u=p.default.Image;m.default=u},{"../core/main":264,"./filters":285,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],289:[function(t,g,m){t("core-js/modules/es.array.filter"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p=h(t("../core/main")),r=h(t("./filters"));function h(d){return d&&d.__esModule?d:{default:d}}t("../color/p5.Color"),p.default.prototype.pixels=[],p.default.prototype.blend=function(){for(var d=arguments.length,c=new Array(d),i=0;i<d;i++)c[i]=arguments[i];var n;p.default._validateParameters("blend",c),this._renderer?(n=this._renderer).blend.apply(n,c):p.default.Renderer2D.prototype.blend.apply(this,c)},p.default.prototype.copy=function(){for(var d=arguments.length,c=new Array(d),i=0;i<d;i++)c[i]=arguments[i];var n,o,l,a,f,v,b,_,w;if(p.default._validateParameters("copy",c),c.length===9)n=c[0],o=c[1],l=c[2],a=c[3],f=c[4],v=c[5],b=c[6],_=c[7],w=c[8];else{if(c.length!==8)throw new Error("Signature not supported");n=this,o=c[0],l=c[1],a=c[2],f=c[3],v=c[4],b=c[5],_=c[6],w=c[7]}p.default.prototype._copyHelper(this,n,o,l,a,f,v,b,_,w)},p.default.prototype._copyHelper=function(d,c,i,n,o,l,a,f,v,b){c.loadPixels();var _=c.canvas.width/c.width,w=0,E=0;c._renderer&&c._renderer.isP3D&&(w=c.width/2,E=c.height/2),d._renderer&&d._renderer.isP3D?p.default.RendererGL.prototype.image.call(d._renderer,c,i+w,n+E,o,l,a,f,v,b):d.drawingContext.drawImage(c.canvas,_*(i+w),_*(n+E),_*o,_*l,a,f,v,b)},p.default.prototype.filter=function(d,c){p.default._validateParameters("filter",arguments),this.canvas!==void 0?r.default.apply(this.canvas,r.default[d],c):r.default.apply(this.elt,r.default[d],c)},p.default.prototype.get=function(d,c,i,n){var o;return p.default._validateParameters("get",arguments),(o=this._renderer).get.apply(o,arguments)},p.default.prototype.loadPixels=function(){for(var d=arguments.length,c=new Array(d),i=0;i<d;i++)c[i]=arguments[i];p.default._validateParameters("loadPixels",c),this._renderer.loadPixels()},p.default.prototype.set=function(d,c,i){this._renderer.set(d,c,i)},p.default.prototype.updatePixels=function(d,c,i,n){p.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(d,c,i,n)};var u=p.default;m.default=u},{"../color/p5.Color":251,"../core/main":264,"./filters":285,"core-js/modules/es.array.filter":152}],290:[function(t,g,m){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p=u(t("../core/main"));t("whatwg-fetch"),t("es6-promise/auto");var r=u(t("fetch-jsonp")),h=u(t("file-saver"));function u(l){return l&&l.__esModule?l:{default:l}}function d(l){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(l)}function c(l,a){var f={};if((a=a||[])===void 0)for(var v=0;v<l.length;v++)a[v.toString()]=v;for(var b=0;b<a.length;b++){var _=a[b],w=l[b];f[_]=w}return f}function i(l){return l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function n(l,a){a&&a!==!0&&a!=="true"||(a="");var f="";return(l=l||"untitled")&&l.includes(".")&&(f=l.split(".").pop()),a&&f!==a&&(f=a,l="".concat(l,".").concat(f)),[l,f]}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),p.default.prototype.loadJSON=function(){for(var l=arguments.length,a=new Array(l),f=0;f<l;f++)a[f]=arguments[f];p.default._validateParameters("loadJSON",a);for(var v,b,_,w=a[0],E={},C="json",A=1;A<a.length;A++){var L=a[A];typeof L=="string"?L!=="jsonp"&&L!=="json"||(C=L):typeof L=="function"?v?b=L:v=L:d(L)==="object"&&(L.hasOwnProperty("jsonpCallback")||L.hasOwnProperty("jsonpCallbackFunction"))&&(C="jsonp",_=L)}var P=this;return this.httpDo(w,"GET",_,C,function(R){for(var N in R)E[N]=R[N];v!==void 0&&v(R),P._decrementPreload()},function(R){if(p.default._friendlyFileLoadError(5,w),!b)throw R;b(R)}),E},p.default.prototype.loadStrings=function(){for(var l=arguments.length,a=new Array(l),f=0;f<l;f++)a[f]=arguments[f];p.default._validateParameters("loadStrings",a);for(var v,b,_=[],w=1;w<a.length;w++){var E=a[w];typeof E=="function"&&(v===void 0?v=E:b===void 0&&(b=E))}var C=this;return p.default.prototype.httpDo.call(this,a[0],"GET","text",function(A){for(var L=A.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),P=0,R=L.length;P<R;P+=32768)Array.prototype.push.apply(_,L.slice(P,Math.min(P+32768,R)));v!==void 0&&v(_),C._decrementPreload()},function(A){if(p.default._friendlyFileLoadError(3,A),!b)throw A;b(A)}),_},p.default.prototype.loadTable=function(l){var a,f,v,b=!1,_=l.substring(l.lastIndexOf(".")+1,l.length);_==="csv"?v=",":_==="ssv"?v=";":_==="tsv"&&(v="	");for(var w=1;w<arguments.length;w++)typeof arguments[w]=="function"?a===void 0?a=arguments[w]:f===void 0&&(f=arguments[w]):typeof arguments[w]=="string"&&(arguments[w]==="header"&&(b=!0),arguments[w]==="csv"?v=",":arguments[w]==="ssv"?v=";":arguments[w]==="tsv"&&(v="	"));var E=new p.default.Table,C=this;return this.httpDo(l,"GET","table",function(A){for(var L,P,R={},N=[],I=0,O=null,U=function(){R.currentState=0,R.token=""},K=function(){O.push(R.token),U()},ee=function(){R.currentState=4,N.push(O),O=null};;){if((L=A[I++])==null){if(R.escaped)throw new Error("Unclosed quote in file.");if(O){K(),ee();break}}if(O===null&&(R.escaped=!1,O=[],U()),R.currentState===0){if(L==='"'){R.escaped=!0,R.currentState=1;continue}R.currentState=1}if(R.currentState===1&&R.escaped)if(L==='"')A[I]==='"'?(R.token+='"',I++):(R.escaped=!1,R.currentState=2);else{if(L==="\r")continue;R.token+=L}else L==="\r"?(A[I]===`
`&&I++,K(),ee()):L===`
`?(K(),ee()):L===v?K():R.currentState===1&&(R.token+=L)}if(b)E.columns=N.shift();else for(var H=0;H<N[0].length;H++)E.columns[H]="null";for(var te=0;te<N.length;te++)(N[te].length!==1||N[te][0]!=="undefined"&&N[te][0]!=="")&&((P=new p.default.TableRow).arr=N[te],P.obj=c(N[te],E.columns),E.addRow(P));typeof a=="function"&&a(E),C._decrementPreload()},function(A){p.default._friendlyFileLoadError(2,l),f?f(A):console.error(A)}),E},p.default.prototype.loadXML=function(){for(var l=arguments.length,a=new Array(l),f=0;f<l;f++)a[f]=arguments[f];for(var v,b,_=new p.default.XML,w=1;w<a.length;w++){var E=a[w];typeof E=="function"&&(v===void 0?v=E:b===void 0&&(b=E))}var C=this;return this.httpDo(a[0],"GET","xml",function(A){for(var L in A)_[L]=A[L];v!==void 0&&v(_),C._decrementPreload()},function(A){if(p.default._friendlyFileLoadError(1,A),!b)throw A;b(A)}),_},p.default.prototype.loadBytes=function(l,a,f){var v={},b=this;return this.httpDo(l,"GET","arrayBuffer",function(_){v.bytes=new Uint8Array(_),typeof a=="function"&&a(v),b._decrementPreload()},function(_){if(p.default._friendlyFileLoadError(6,l),!f)throw _;f(_)}),v},p.default.prototype.httpGet=function(){p.default._validateParameters("httpGet",arguments);var l=Array.prototype.slice.call(arguments);return l.splice(1,0,"GET"),p.default.prototype.httpDo.apply(this,l)},p.default.prototype.httpPost=function(){p.default._validateParameters("httpPost",arguments);var l=Array.prototype.slice.call(arguments);return l.splice(1,0,"POST"),p.default.prototype.httpDo.apply(this,l)},p.default.prototype.httpDo=function(){for(var l,a,f,v,b,_={},w=0,E="text/plain",C=arguments.length-1;0<C&&typeof(C<0||arguments.length<=C?void 0:arguments[C])=="function";C--)w++;var A=arguments.length<=0?void 0:arguments[0];if(arguments.length-w==2&&typeof A=="string"&&d(arguments.length<=1?void 0:arguments[1])==="object")v=new Request(A,arguments.length<=1?void 0:arguments[1]),a=arguments.length<=2?void 0:arguments[2],f=arguments.length<=3?void 0:arguments[3];else{for(var L,P="GET",R=1;R<arguments.length;R++){var N=R<0||arguments.length<=R?void 0:arguments[R];if(typeof N=="string")N==="GET"||N==="POST"||N==="PUT"||N==="DELETE"?P=N:N==="json"||N==="jsonp"||N==="binary"||N==="arrayBuffer"||N==="xml"||N==="text"||N==="table"?l=N:L=N;else if(typeof N=="number")L=N.toString();else if(d(N)==="object")if(N.hasOwnProperty("jsonpCallback")||N.hasOwnProperty("jsonpCallbackFunction"))for(var I in N)_[I]=N[I];else E=N instanceof p.default.XML?(L=N.serialize(),"application/xml"):(L=JSON.stringify(N),"application/json");else typeof N=="function"&&(a?f=N:a=N)}var O=P==="GET"?new Headers:new Headers({"Content-Type":E});v=new Request(A,{method:P,mode:"cors",body:L,headers:O})}return(b=(b=(l=l||(A.includes("json")?"json":A.includes("xml")?"xml":"text"))==="jsonp"?(0,r.default)(A,_):fetch(v)).then(function(U){if(!U.ok){var K=new Error(U.body);throw K.status=U.status,K.ok=!1,K}var ee=0;switch(l!=="jsonp"&&(ee=U.headers.get("content-length")),ee&&64e6<ee&&p.default._friendlyFileLoadError(7,A),l){case"json":case"jsonp":return U.json();case"binary":return U.blob();case"arrayBuffer":return U.arrayBuffer();case"xml":return U.text().then(function(H){var te=new DOMParser().parseFromString(H,"text/xml");return new p.default.XML(te.documentElement)});default:return U.text()}})).then(a||function(){}),b.catch(f||console.error),b},window.URL=window.URL||window.webkitURL,p.default.prototype._pWriters=[],p.default.prototype.createWriter=function(l,a){var f;for(var v in p.default.prototype._pWriters)if(p.default.prototype._pWriters[v].name===l)return f=new p.default.PrintWriter(l+this.millis(),a),p.default.prototype._pWriters.push(f),f;return f=new p.default.PrintWriter(l,a),p.default.prototype._pWriters.push(f),f},p.default.PrintWriter=function(l,a){var f=this;this.name=l,this.content="",this.write=function(v){this.content+=v},this.print=function(v){this.content+="".concat(v,`
`)},this.clear=function(){this.content=""},this.close=function(){var v=[];for(var b in v.push(this.content),p.default.prototype.writeFile(v,l,a),p.default.prototype._pWriters)p.default.prototype._pWriters[b].name===this.name&&p.default.prototype._pWriters.splice(b,1);f.clear(),f={}}},p.default.prototype.save=function(l,a,f){var v=arguments,b=this._curElement?this._curElement.elt:this.elt;if(v.length!==0)if(v[0]instanceof p.default.Renderer||v[0]instanceof p.default.Graphics)p.default.prototype.saveCanvas(v[0].elt,v[1],v[2]);else if(v.length===1&&typeof v[0]=="string")p.default.prototype.saveCanvas(b,v[0]);else switch(n(v[1],v[2])[1]){case"json":return void p.default.prototype.saveJSON(v[0],v[1],v[2]);case"txt":return void p.default.prototype.saveStrings(v[0],v[1],v[2]);default:v[0]instanceof Array?p.default.prototype.saveStrings(v[0],v[1],v[2]):v[0]instanceof p.default.Table?p.default.prototype.saveTable(v[0],v[1],v[2]):v[0]instanceof p.default.Image?p.default.prototype.saveCanvas(v[0].canvas,v[1]):v[0]instanceof p.default.SoundFile&&p.default.prototype.saveSound(v[0],v[1],v[2],v[3])}else p.default.prototype.saveCanvas(b)},p.default.prototype.saveJSON=function(l,a,f){var v;p.default._validateParameters("saveJSON",arguments),v=f?JSON.stringify(l):JSON.stringify(l,void 0,2),this.saveStrings(v.split(`
`),a,"json")},p.default.prototype.saveJSONObject=p.default.prototype.saveJSON,p.default.prototype.saveJSONArray=p.default.prototype.saveJSON,p.default.prototype.saveStrings=function(l,a,f,v){p.default._validateParameters("saveStrings",arguments);for(var b=f||"txt",_=this.createWriter(a,b),w=0;w<l.length;w++)v?_.write(l[w]+`\r
`):_.write(l[w]+`
`);_.close(),_.clear()},p.default.prototype.saveTable=function(l,a,f){var v;p.default._validateParameters("saveTable",arguments),v=f===void 0?a.substring(a.lastIndexOf(".")+1,a.length):f;var b=this.createWriter(a,v),_=l.columns,w=",";if(v==="tsv"&&(w="	"),v!=="html"){if(_[0]!=="0"){for(var E=0;E<_.length;E++)E<_.length-1?b.write(_[E]+w):b.write(_[E]);b.write(`
`)}for(var C=0;C<l.rows.length;C++){var A=void 0;for(A=0;A<l.rows[C].arr.length;A++)A<l.rows[C].arr.length-1?v==="csv"&&String(l.rows[C].arr[A]).includes(",")?b.write('"'+l.rows[C].arr[A]+'"'+w):b.write(l.rows[C].arr[A]+w):v==="csv"&&String(l.rows[C].arr[A]).includes(",")?b.write('"'+l.rows[C].arr[A]+'"'):b.write(l.rows[C].arr[A]);b.write(`
`)}}else{if(b.print("<html>"),b.print("<head>"),b.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),b.print("</head>"),b.print("<body>"),b.print("  <table>"),_[0]!=="0"){b.print("    <tr>");for(var L=0;L<_.length;L++){var P=i(_[L]);b.print("      <td>".concat(P)),b.print("      </td>")}b.print("    </tr>")}for(var R=0;R<l.rows.length;R++){b.print("    <tr>");for(var N=0;N<l.columns.length;N++){var I=i(l.rows[R].getString(N));b.print("      <td>".concat(I)),b.print("      </td>")}b.print("    </tr>")}b.print("  </table>"),b.print("</body>"),b.print("</html>")}b.close(),b.clear()},p.default.prototype.writeFile=function(l,a,f){var v="application/octet-stream";p.default.prototype._isSafari()&&(v="text/plain");var b=new Blob(l,{type:v});p.default.prototype.downloadFile(b,a,f)},p.default.prototype.downloadFile=function(l,a,f){var v=n(a,f),b=v[0];if(l instanceof Blob)h.default.saveAs(l,b);else{var _=document.createElement("a");if(_.href=l,_.download=b,_.onclick=function(E){var C;C=E,document.body.removeChild(C.target),E.stopPropagation()},_.style.display="none",document.body.appendChild(_),p.default.prototype._isSafari()){var w=`Hello, Safari user! To download this file...
`;w+=`1. Go to File --> Save As.
`,w+=`2. Choose "Page Source" as the Format.
`,w+='3. Name it with this extension: ."'.concat(v[1],'"'),alert(w)}_.click()}},p.default.prototype._checkFileExtension=n,p.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")};var o=p.default;m.default=o},{"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":166,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":229,"core-js/modules/web.url":231,"es6-promise/auto":232,"fetch-jsonp":234,"file-saver":235,"whatwg-fetch":242}],291:[function(t,g,m){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.trim"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};r.default.Table=function(u){this.columns=[],this.rows=[]},r.default.Table.prototype.addRow=function(u){var d=u||new r.default.TableRow;if(d.arr===void 0||d.obj===void 0)throw new Error("invalid TableRow: ".concat(d));return(d.table=this).rows.push(d),d},r.default.Table.prototype.removeRow=function(u){this.rows[u].table=null;var d=this.rows.splice(u+1,this.rows.length);this.rows.pop(),this.rows=this.rows.concat(d)},r.default.Table.prototype.getRow=function(u){return this.rows[u]},r.default.Table.prototype.getRows=function(){return this.rows},r.default.Table.prototype.findRow=function(u,d){if(typeof d=="string"){for(var c=0;c<this.rows.length;c++)if(this.rows[c].obj[d]===u)return this.rows[c]}else for(var i=0;i<this.rows.length;i++)if(this.rows[i].arr[d]===u)return this.rows[i];return null},r.default.Table.prototype.findRows=function(u,d){var c=[];if(typeof d=="string")for(var i=0;i<this.rows.length;i++)this.rows[i].obj[d]===u&&c.push(this.rows[i]);else for(var n=0;n<this.rows.length;n++)this.rows[n].arr[d]===u&&c.push(this.rows[n]);return c},r.default.Table.prototype.matchRow=function(u,d){if(typeof d=="number"){for(var c=0;c<this.rows.length;c++)if(this.rows[c].arr[d].match(u))return this.rows[c]}else for(var i=0;i<this.rows.length;i++)if(this.rows[i].obj[d].match(u))return this.rows[i];return null},r.default.Table.prototype.matchRows=function(u,d){var c=[];if(typeof d=="number")for(var i=0;i<this.rows.length;i++)this.rows[i].arr[d].match(u)&&c.push(this.rows[i]);else for(var n=0;n<this.rows.length;n++)this.rows[n].obj[d].match(u)&&c.push(this.rows[n]);return c},r.default.Table.prototype.getColumn=function(u){var d=[];if(typeof u=="string")for(var c=0;c<this.rows.length;c++)d.push(this.rows[c].obj[u]);else for(var i=0;i<this.rows.length;i++)d.push(this.rows[i].arr[u]);return d},r.default.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},r.default.Table.prototype.addColumn=function(u){var d=u||null;this.columns.push(d)},r.default.Table.prototype.getColumnCount=function(){return this.columns.length},r.default.Table.prototype.getRowCount=function(){return this.rows.length},r.default.Table.prototype.removeTokens=function(u,d){for(var c=[],i=0;i<u.length;i++)c.push(u.charAt(i).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var n=new RegExp(c.join("|"),"g");if(d===void 0)for(var o=0;o<this.columns.length;o++)for(var l=0;l<this.rows.length;l++){var a=this.rows[l].arr[o];a=a.replace(n,""),this.rows[l].arr[o]=a,this.rows[l].obj[this.columns[o]]=a}else if(typeof d=="string")for(var f=0;f<this.rows.length;f++){var v=this.rows[f].obj[d];v=v.replace(n,""),this.rows[f].obj[d]=v;var b=this.columns.indexOf(d);this.rows[f].arr[b]=v}else for(var _=0;_<this.rows.length;_++){var w=this.rows[_].arr[d];w=w.replace(n,""),this.rows[_].arr[d]=w,this.rows[_].obj[this.columns[d]]=w}},r.default.Table.prototype.trim=function(u){var d=new RegExp(" ","g");if(u===void 0)for(var c=0;c<this.columns.length;c++)for(var i=0;i<this.rows.length;i++){var n=this.rows[i].arr[c];n=n.replace(d,""),this.rows[i].arr[c]=n,this.rows[i].obj[this.columns[c]]=n}else if(typeof u=="string")for(var o=0;o<this.rows.length;o++){var l=this.rows[o].obj[u];l=l.replace(d,""),this.rows[o].obj[u]=l;var a=this.columns.indexOf(u);this.rows[o].arr[a]=l}else for(var f=0;f<this.rows.length;f++){var v=this.rows[f].arr[u];v=v.replace(d,""),this.rows[f].arr[u]=v,this.rows[f].obj[this.columns[u]]=v}},r.default.Table.prototype.removeColumn=function(u){var d,c;typeof u=="string"?(d=u,c=this.columns.indexOf(u)):(c=u,d=this.columns[u]);var i=this.columns.splice(c+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(i);for(var n=0;n<this.rows.length;n++){var o=this.rows[n].arr,l=o.splice(c+1,o.length);o.pop(),this.rows[n].arr=o.concat(l),delete this.rows[n].obj[d]}},r.default.Table.prototype.set=function(u,d,c){this.rows[u].set(d,c)},r.default.Table.prototype.setNum=function(u,d,c){this.rows[u].setNum(d,c)},r.default.Table.prototype.setString=function(u,d,c){this.rows[u].setString(d,c)},r.default.Table.prototype.get=function(u,d){return this.rows[u].get(d)},r.default.Table.prototype.getNum=function(u,d){return this.rows[u].getNum(d)},r.default.Table.prototype.getString=function(u,d){return this.rows[u].getString(d)},r.default.Table.prototype.getObject=function(u){for(var d,c={},i=0;i<this.rows.length;i++)if(d=this.rows[i].obj,typeof u=="string"){if(!(0<=this.columns.indexOf(u)))throw new Error('This table has no column named "'.concat(u,'"'));c[d[u]]=d}else c[i]=this.rows[i].obj;return c},r.default.Table.prototype.getArray=function(){for(var u=[],d=0;d<this.rows.length;d++)u.push(this.rows[d].arr);return u};var h=r.default;m.default=h},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.splice":164,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.trim":193}],292:[function(t,g,m){t("core-js/modules/es.array.index-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};r.default.TableRow=function(u,d){var c=[],i={};u&&(d=d||",",c=u.split(d));for(var n=0;n<c.length;n++){var o=n,l=c[n];i[o]=l}this.arr=c,this.obj=i,this.table=null},r.default.TableRow.prototype.set=function(u,d){if(typeof u=="string"){var c=this.table.columns.indexOf(u);if(!(0<=c))throw new Error('This table has no column named "'.concat(u,'"'));this.obj[u]=d,this.arr[c]=d}else{if(!(u<this.table.columns.length))throw new Error("Column #".concat(u," is out of the range of this table"));this.arr[u]=d;var i=this.table.columns[u];this.obj[i]=d}},r.default.TableRow.prototype.setNum=function(u,d){var c=parseFloat(d);this.set(u,c)},r.default.TableRow.prototype.setString=function(u,d){var c=d.toString();this.set(u,c)},r.default.TableRow.prototype.get=function(u){return typeof u=="string"?this.obj[u]:this.arr[u]},r.default.TableRow.prototype.getNum=function(u){var d;if((d=parseFloat(typeof u=="string"?this.obj[u]:this.arr[u])).toString()==="NaN")throw"Error: ".concat(this.obj[u]," is NaN (Not a Number)");return d},r.default.TableRow.prototype.getString=function(u){return typeof u=="string"?this.obj[u].toString():this.arr[u].toString()};var h=r.default;m.default=h},{"../core/main":264,"core-js/modules/es.array.index-of":157,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],293:[function(t,g,m){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};function h(d){for(var c=[],i=0;i<d.length;i++)c.push(new r.default.XML(d[i]));return c}r.default.XML=function(d){if(d)this.DOM=d;else{var c=document.implementation.createDocument(null,"doc");this.DOM=c.createElement("root")}},r.default.XML.prototype.getParent=function(){return new r.default.XML(this.DOM.parentElement)},r.default.XML.prototype.getName=function(){return this.DOM.tagName},r.default.XML.prototype.setName=function(d){var c=this.DOM.innerHTML,i=this.DOM.attributes,n=document.implementation.createDocument(null,"default").createElement(d);n.innerHTML=c;for(var o=0;o<i.length;o++)n.setAttribute(i[o].nodeName,i.nodeValue);this.DOM=n},r.default.XML.prototype.hasChildren=function(){return 0<this.DOM.children.length},r.default.XML.prototype.listChildren=function(){for(var d=[],c=0;c<this.DOM.childNodes.length;c++)d.push(this.DOM.childNodes[c].nodeName);return d},r.default.XML.prototype.getChildren=function(d){return h(d?this.DOM.getElementsByTagName(d):this.DOM.children)},r.default.XML.prototype.getChild=function(d){if(typeof d!="string")return new r.default.XML(this.DOM.children[d]);var c=!0,i=!1,n=void 0;try{for(var o,l=this.DOM.children[Symbol.iterator]();!(c=(o=l.next()).done);c=!0){var a=o.value;if(a.tagName===d)return new r.default.XML(a)}}catch(f){i=!0,n=f}finally{try{c||l.return==null||l.return()}finally{if(i)throw n}}},r.default.XML.prototype.addChild=function(d){d instanceof r.default.XML&&this.DOM.appendChild(d.DOM)},r.default.XML.prototype.removeChild=function(d){var c=-1;if(typeof d=="string"){for(var i=0;i<this.DOM.children.length;i++)if(this.DOM.children[i].tagName===d){c=i;break}}else c=d;c!==-1&&this.DOM.removeChild(this.DOM.children[c])},r.default.XML.prototype.getAttributeCount=function(){return this.DOM.attributes.length},r.default.XML.prototype.listAttributes=function(){var d=[],c=!0,i=!1,n=void 0;try{for(var o,l=this.DOM.attributes[Symbol.iterator]();!(c=(o=l.next()).done);c=!0){var a=o.value;d.push(a.nodeName)}}catch(f){i=!0,n=f}finally{try{c||l.return==null||l.return()}finally{if(i)throw n}}return d},r.default.XML.prototype.hasAttribute=function(d){var c={},i=!0,n=!1,o=void 0;try{for(var l,a=this.DOM.attributes[Symbol.iterator]();!(i=(l=a.next()).done);i=!0){var f=l.value;c[f.nodeName]=f.nodeValue}}catch(v){n=!0,o=v}finally{try{i||a.return==null||a.return()}finally{if(n)throw o}}return!!c[d]},r.default.XML.prototype.getNum=function(d,c){var i={},n=!0,o=!1,l=void 0;try{for(var a,f=this.DOM.attributes[Symbol.iterator]();!(n=(a=f.next()).done);n=!0){var v=a.value;i[v.nodeName]=v.nodeValue}}catch(b){o=!0,l=b}finally{try{n||f.return==null||f.return()}finally{if(o)throw l}}return Number(i[d])||c||0},r.default.XML.prototype.getString=function(d,c){var i={},n=!0,o=!1,l=void 0;try{for(var a,f=this.DOM.attributes[Symbol.iterator]();!(n=(a=f.next()).done);n=!0){var v=a.value;i[v.nodeName]=v.nodeValue}}catch(b){o=!0,l=b}finally{try{n||f.return==null||f.return()}finally{if(o)throw l}}return i[d]?String(i[d]):c||null},r.default.XML.prototype.setAttribute=function(d,c){this.DOM.setAttribute(d,c)},r.default.XML.prototype.getContent=function(d){return this.DOM.textContent.replace(/\s\s+/g,",")||d||null},r.default.XML.prototype.setContent=function(d){this.DOM.children.length||(this.DOM.textContent=d)},r.default.XML.prototype.serialize=function(){return new XMLSerializer().serializeToString(this.DOM)};var u=r.default;m.default=u},{"../core/main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":170,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],294:[function(t,g,m){t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.string.includes"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};function h(){if(typeof Math.hypot=="function")return Math.hypot.apply(null,arguments);for(var d=arguments.length,c=[],i=0,n=0;n<d;n++){var o=arguments[n];if((o=+o)===1/0||o===-1/0)return 1/0;i<(o=Math.abs(o))&&(i=o),c[n]=o}i===0&&(i=1);for(var l=0,a=0,f=0;f<d;f++){var v=c[f]/i,b=v*v-a,_=l+b;a=_-l-b,l=_}return Math.sqrt(l)*i}r.default.prototype.abs=Math.abs,r.default.prototype.ceil=Math.ceil,r.default.prototype.constrain=function(d,c,i){return r.default._validateParameters("constrain",arguments),Math.max(Math.min(d,i),c)},r.default.prototype.dist=function(){for(var d=arguments.length,c=new Array(d),i=0;i<d;i++)c[i]=arguments[i];return r.default._validateParameters("dist",c),c.length===4?h(c[2]-c[0],c[3]-c[1]):c.length===6?h(c[3]-c[0],c[4]-c[1],c[5]-c[2]):void 0},r.default.prototype.exp=Math.exp,r.default.prototype.floor=Math.floor,r.default.prototype.lerp=function(d,c,i){return r.default._validateParameters("lerp",arguments),i*(c-d)+d},r.default.prototype.log=Math.log,r.default.prototype.mag=function(d,c){return r.default._validateParameters("mag",arguments),h(d,c)},r.default.prototype.map=function(d,c,i,n,o,l){r.default._validateParameters("map",arguments);var a=(d-c)/(i-c)*(o-n)+n;return l?n<o?this.constrain(a,n,o):this.constrain(a,o,n):a},r.default.prototype.max=function(){for(var d=arguments.length,c=new Array(d),i=0;i<d;i++)c[i]=arguments[i];return c[0]instanceof Array?Math.max.apply(null,c[0]):Math.max.apply(null,c)},r.default.prototype.min=function(){for(var d=arguments.length,c=new Array(d),i=0;i<d;i++)c[i]=arguments[i];return c[0]instanceof Array?Math.min.apply(null,c[0]):Math.min.apply(null,c)},r.default.prototype.norm=function(d,c,i){return r.default._validateParameters("norm",arguments),this.map(d,c,i,0,1)},r.default.prototype.pow=Math.pow,r.default.prototype.round=function(d,c){if(!c)return Math.round(d);var i=Math.pow(10,c);return Math.round(d*i)/i},r.default.prototype.sq=function(d){return d*d},r.default.prototype.sqrt=Math.sqrt,r.default.prototype.fract=function(d){r.default._validateParameters("fract",arguments);var c=0,i=Number(d);if(isNaN(i)||Math.abs(i)===1/0)return i;if(i<0&&(i=-i,c=1),!String(i).includes(".")||String(i).includes("e"))return i<1?Math.abs(c-i):0;var n=String(i);return n=Number("0"+n.slice(n.indexOf("."))),Math.abs(c-n)};var u=r.default;m.default=u},{"../core/main":264,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.math.hypot":168,"core-js/modules/es.number.constructor":170,"core-js/modules/es.string.includes":185}],295:[function(t,g,m){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};function h(c,i,n){return(h=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(o,l,a){var f=[null];f.push.apply(f,l);var v=new(Function.bind.apply(o,f));return a&&u(v,a.prototype),v}).apply(null,arguments)}function u(c,i){return(u=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n})(c,i)}r.default.prototype.createVector=function(c,i,n){return this instanceof r.default?h(r.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new r.default.Vector(c,i,n)};var d=r.default;m.default=d},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.to-string":182}],296:[function(t,g,m){Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};function h(o){return .5*(1-Math.cos(o*Math.PI))}var u,d=4095,c=4,i=.5;r.default.prototype.noise=function(o){var l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(u==null){u=new Array(4096);for(var f=0;f<4096;f++)u[f]=Math.random()}o<0&&(o=-o),l<0&&(l=-l),a<0&&(a=-a);for(var v,b,_,w,E,C=Math.floor(o),A=Math.floor(l),L=Math.floor(a),P=o-C,R=l-A,N=a-L,I=0,O=.5,U=0;U<c;U++){var K=C+(A<<4)+(L<<8);v=h(P),b=h(R),_=u[K&d],_+=v*(u[K+1&d]-_),w=u[K+16&d],_+=b*((w+=v*(u[K+16+1&d]-w))-_),w=u[(K+=256)&d],w+=v*(u[K+1&d]-w),E=u[K+16&d],w+=b*((E+=v*(u[K+16+1&d]-E))-w),I+=(_+=h(N)*(w-_))*O,O*=i,C<<=1,A<<=1,L<<=1,1<=(P*=2)&&(C++,P--),1<=(R*=2)&&(A++,R--),1<=(N*=2)&&(L++,N--)}return I},r.default.prototype.noiseDetail=function(o,l){0<o&&(c=o),0<l&&(i=l)},r.default.prototype.noiseSeed=function(o){var l,a,f,v=(f=4294967296,{setSeed:function(_){a=l=(_==null?Math.random()*f:_)>>>0},getSeed:function(){return l},rand:function(){return(a=(1664525*a+1013904223)%f)/f}});v.setSeed(o),u=new Array(4096);for(var b=0;b<4096;b++)u[b]=v.rand()};var n=r.default;m.default=n},{"../core/main":264}],297:[function(t,g,m){function p(o){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(o)}t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.sub"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r,h=(r=t("../core/main"))&&r.__esModule?r:{default:r},u=function(o){if(o&&o.__esModule)return o;if(o===null||p(o)!=="object"&&typeof o!="function")return{default:o};var l=d();if(l&&l.has(o))return l.get(o);var a={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in o)if(Object.prototype.hasOwnProperty.call(o,v)){var b=f?Object.getOwnPropertyDescriptor(o,v):null;b&&(b.get||b.set)?Object.defineProperty(a,v,b):a[v]=o[v]}return a.default=o,l&&l.set(o,a),a}(t("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return d=function(){return o},o}h.default.Vector=function(o,l,a,f,v){var b,_,w;w={}.toString.call(o)==="[object Function]"?(this.isPInst=!0,this._fromRadians=o,this._toRadians=l,b=a||0,_=f||0,v||0):(b=o||0,_=l||0,a||0),this.x=b,this.y=_,this.z=w},h.default.Vector.prototype.toString=function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")},h.default.Vector.prototype.set=function(o,l,a){return o instanceof h.default.Vector?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0):o instanceof Array?(this.x=o[0]||0,this.y=o[1]||0,this.z=o[2]||0):(this.x=o||0,this.y=l||0,this.z=a||0),this},h.default.Vector.prototype.copy=function(){return this.isPInst?new h.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new h.default.Vector(this.x,this.y,this.z)},h.default.Vector.prototype.add=function(o,l,a){return o instanceof h.default.Vector?(this.x+=o.x||0,this.y+=o.y||0,this.z+=o.z||0):o instanceof Array?(this.x+=o[0]||0,this.y+=o[1]||0,this.z+=o[2]||0):(this.x+=o||0,this.y+=l||0,this.z+=a||0),this};function c(o,l){return o!==0&&(this.x=this.x%o),l!==0&&(this.y=this.y%l),this}function i(o,l,a){return o!==0&&(this.x=this.x%o),l!==0&&(this.y=this.y%l),a!==0&&(this.z=this.z%a),this}h.default.Vector.prototype.rem=function(o,l,a){if(o instanceof h.default.Vector){if(Number.isFinite(o.x)&&Number.isFinite(o.y)&&Number.isFinite(o.z)){var f=parseFloat(o.x),v=parseFloat(o.y),b=parseFloat(o.z);return i.call(this,f,v,b)}}else if(o instanceof Array){if(o.every(function(E){return Number.isFinite(E)})){if(o.length===2)return c.call(this,o[0],o[1]);if(o.length===3)return i.call(this,o[0],o[1],o[2])}}else if(arguments.length===1){if(Number.isFinite(o)&&o!==0)return this.x=this.x%o,this.y=this.y%o,this.z=this.z%o,this}else if(arguments.length===2){var _=Array.prototype.slice.call(arguments);if(_.every(function(E){return Number.isFinite(E)})&&_.length===2)return c.call(this,_[0],_[1])}else if(arguments.length===3){var w=Array.prototype.slice.call(arguments);if(w.every(function(E){return Number.isFinite(E)})&&w.length===3)return i.call(this,w[0],w[1],w[2])}},h.default.Vector.prototype.sub=function(o,l,a){return o instanceof h.default.Vector?(this.x-=o.x||0,this.y-=o.y||0,this.z-=o.z||0):o instanceof Array?(this.x-=o[0]||0,this.y-=o[1]||0,this.z-=o[2]||0):(this.x-=o||0,this.y-=l||0,this.z-=a||0),this},h.default.Vector.prototype.mult=function(o,l,a){if(o instanceof h.default.Vector)return Number.isFinite(o.x)&&Number.isFinite(o.y)&&Number.isFinite(o.z)&&typeof o.x=="number"&&typeof o.y=="number"&&typeof o.z=="number"?(this.x*=o.x,this.y*=o.y,this.z*=o.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"),this;if(o instanceof Array)return o.every(function(v){return Number.isFinite(v)})&&o.every(function(v){return typeof v=="number"})?o.length===1?(this.x*=o[0],this.y*=o[0],this.z*=o[0]):o.length===2?(this.x*=o[0],this.y*=o[1]):o.length===3&&(this.x*=o[0],this.y*=o[1],this.z*=o[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"),this;var f=Array.prototype.slice.call(arguments);return f.every(function(v){return Number.isFinite(v)})&&f.every(function(v){return typeof v=="number"})?(arguments.length===1&&(this.x*=o,this.y*=o,this.z*=o),arguments.length===2&&(this.x*=o,this.y*=l),arguments.length===3&&(this.x*=o,this.y*=l,this.z*=a)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this},h.default.Vector.prototype.div=function(o,l,a){if(o instanceof h.default.Vector){if(Number.isFinite(o.x)&&Number.isFinite(o.y)&&Number.isFinite(o.z)&&typeof o.x=="number"&&typeof o.y=="number"&&typeof o.z=="number"){if(o.x===0||o.y===0||o.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=o.x,this.y/=o.y,this.z/=o.z}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");return this}if(o instanceof Array){if(o.every(function(v){return Number.isFinite(v)})&&o.every(function(v){return typeof v=="number"})){if(o.some(function(v){return v===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;o.length===1?(this.x/=o[0],this.y/=o[0],this.z/=o[0]):o.length===2?(this.x/=o[0],this.y/=o[1]):o.length===3&&(this.x/=o[0],this.y/=o[1],this.z/=o[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");return this}var f=Array.prototype.slice.call(arguments);if(f.every(function(v){return Number.isFinite(v)})&&f.every(function(v){return typeof v=="number"})){if(f.some(function(v){return v===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;arguments.length===1&&(this.x/=o,this.y/=o,this.z/=o),arguments.length===2&&(this.x/=o,this.y/=l),arguments.length===3&&(this.x/=o,this.y/=l,this.z/=a)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this},h.default.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},h.default.Vector.prototype.magSq=function(){var o=this.x,l=this.y,a=this.z;return o*o+l*l+a*a},h.default.Vector.prototype.dot=function(o,l,a){return o instanceof h.default.Vector?this.dot(o.x,o.y,o.z):this.x*(o||0)+this.y*(l||0)+this.z*(a||0)},h.default.Vector.prototype.cross=function(o){var l=this.y*o.z-this.z*o.y,a=this.z*o.x-this.x*o.z,f=this.x*o.y-this.y*o.x;return this.isPInst?new h.default.Vector(this._fromRadians,this._toRadians,l,a,f):new h.default.Vector(l,a,f)},h.default.Vector.prototype.dist=function(o){return o.copy().sub(this).mag()},h.default.Vector.prototype.normalize=function(){var o=this.mag();return o!==0&&this.mult(1/o),this},h.default.Vector.prototype.limit=function(o){var l=this.magSq();return o*o<l&&this.div(Math.sqrt(l)).mult(o),this},h.default.Vector.prototype.setMag=function(o){return this.normalize().mult(o)},h.default.Vector.prototype.heading=function(){var o=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(o):o},h.default.Vector.prototype.setHeading=function(o){var l=this.mag();return this.x=l*Math.cos(o),this.y=l*Math.sin(o),this},h.default.Vector.prototype.rotate=function(o){var l=this.heading()+o;this.isPInst&&(l=this._toRadians(l));var a=this.mag();return this.x=Math.cos(l)*a,this.y=Math.sin(l)*a,this},h.default.Vector.prototype.angleBetween=function(o){var l,a=this.dot(o)/(this.mag()*o.mag());return l=Math.acos(Math.min(1,Math.max(-1,a))),l*=Math.sign(this.cross(o).z||1),this.isPInst&&(l=this._fromRadians(l)),l},h.default.Vector.prototype.lerp=function(o,l,a,f){return o instanceof h.default.Vector?this.lerp(o.x,o.y,o.z,l):(this.x+=(o-this.x)*f||0,this.y+=(l-this.y)*f||0,this.z+=(a-this.z)*f||0,this)},h.default.Vector.prototype.reflect=function(o){return o.normalize(),this.sub(o.mult(2*this.dot(o)))},h.default.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},h.default.Vector.prototype.equals=function(o,l,a){var f,v,b;return b=o instanceof h.default.Vector?(f=o.x||0,v=o.y||0,o.z||0):o instanceof Array?(f=o[0]||0,v=o[1]||0,o[2]||0):(f=o||0,v=l||0,a||0),this.x===f&&this.y===v&&this.z===b},h.default.Vector.fromAngle=function(o,l){return l===void 0&&(l=1),new h.default.Vector(l*Math.cos(o),l*Math.sin(o),0)},h.default.Vector.fromAngles=function(o,l,a){a===void 0&&(a=1);var f=Math.cos(l),v=Math.sin(l),b=Math.cos(o),_=Math.sin(o);return new h.default.Vector(a*_*v,-a*b,a*_*f)},h.default.Vector.random2D=function(){return this.fromAngle(Math.random()*u.TWO_PI)},h.default.Vector.random3D=function(){var o=Math.random()*u.TWO_PI,l=2*Math.random()-1,a=Math.sqrt(1-l*l),f=a*Math.cos(o),v=a*Math.sin(o);return new h.default.Vector(f,v,l)},h.default.Vector.add=function(o,l,a){return a?a.set(o):(a=o.copy(),arguments.length===3&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),a.add(l),a},h.default.Vector.rem=function(o,l){if(o instanceof h.default.Vector&&l instanceof h.default.Vector){var a=o.copy();return a.rem(l),a}},h.default.Vector.sub=function(o,l,a){return a?a.set(o):(a=o.copy(),arguments.length===3&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),a.sub(l),a},h.default.Vector.mult=function(o,l,a){return a?a.set(o):(a=o.copy(),arguments.length===3&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),a.mult(l),a},h.default.Vector.rotate=function(o,l,a){return arguments.length===2?a=o.copy():(a instanceof h.default.Vector||h.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),a.set(o)),a.rotate(l),a},h.default.Vector.div=function(o,l,a){return a?a.set(o):(a=o.copy(),arguments.length===3&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),a.div(l),a},h.default.Vector.dot=function(o,l){return o.dot(l)},h.default.Vector.cross=function(o,l){return o.cross(l)},h.default.Vector.dist=function(o,l){return o.dist(l)},h.default.Vector.lerp=function(o,l,a,f){return f?f.set(o):(f=o.copy(),arguments.length===4&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),f.lerp(l,a),f},h.default.Vector.mag=function(o){var l=o.x,a=o.y,f=o.z,v=l*l+a*a+f*f;return Math.sqrt(v)},h.default.Vector.normalize=function(o,l){return arguments.length<2?l=o.copy():(l instanceof h.default.Vector||h.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),l.set(o)),l.normalize()};var n=h.default.Vector;m.default=n},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.every":150,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.math.sign":169,"core-js/modules/es.number.constructor":170,"core-js/modules/es.number.is-finite":171,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.sub":192}],298:[function(t,g,m){Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p},h="_lcg_random_state",u=4294967296,d=0;r.default.prototype._lcg=function(i){return this[i]=(1664525*this[i]+1013904223)%u,this[i]/u},r.default.prototype._lcgSetSeed=function(i,n){this[i]=(n==null?Math.random()*u:n)>>>0},r.default.prototype.randomSeed=function(i){this._lcgSetSeed(h,i),this._gaussian_previous=!1},r.default.prototype.random=function(i,n){var o;if(r.default._validateParameters("random",arguments),o=this[h]!=null?this._lcg(h):Math.random(),i===void 0)return o;if(n===void 0)return i instanceof Array?i[Math.floor(o*i.length)]:o*i;if(n<i){var l=i;i=n,n=l}return o*(n-i)+i},r.default.prototype.randomGaussian=function(i){var n,o,l,a,f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)n=d,this._gaussian_previous=!1;else{for(;1<=(a=(o=this.random(2)-1)*o+(l=this.random(2)-1)*l););n=o*(a=Math.sqrt(-2*Math.log(a)/a)),d=l*a,this._gaussian_previous=!0}return n*f+(i||0)};var c=r.default;m.default=c},{"../core/main":264}],299:[function(t,g,m){function p(i){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(i)}Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r,h=(r=t("../core/main"))&&r.__esModule?r:{default:r},u=function(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var n=d();if(n&&n.has(i))return n.get(i);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){var f=l?Object.getOwnPropertyDescriptor(i,a):null;f&&(f.get||f.set)?Object.defineProperty(o,a,f):o[a]=i[a]}return o.default=i,n&&n.set(i,o),o}(t("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return d=function(){return i},i}h.default.prototype._angleMode=u.RADIANS,h.default.prototype.acos=function(i){return this._fromRadians(Math.acos(i))},h.default.prototype.asin=function(i){return this._fromRadians(Math.asin(i))},h.default.prototype.atan=function(i){return this._fromRadians(Math.atan(i))},h.default.prototype.atan2=function(i,n){return this._fromRadians(Math.atan2(i,n))},h.default.prototype.cos=function(i){return Math.cos(this._toRadians(i))},h.default.prototype.sin=function(i){return Math.sin(this._toRadians(i))},h.default.prototype.tan=function(i){return Math.tan(this._toRadians(i))},h.default.prototype.degrees=function(i){return i*u.RAD_TO_DEG},h.default.prototype.radians=function(i){return i*u.DEG_TO_RAD},h.default.prototype.angleMode=function(i){i!==u.DEGREES&&i!==u.RADIANS||(this._angleMode=i)},h.default.prototype._toRadians=function(i){return this._angleMode===u.DEGREES?i*u.DEG_TO_RAD:i},h.default.prototype._toDegrees=function(i){return this._angleMode===u.RADIANS?i*u.RAD_TO_DEG:i},h.default.prototype._fromRadians=function(i){return this._angleMode===u.DEGREES?i*u.RAD_TO_DEG:i};var c=h.default;m.default=c},{"../core/constants":253,"../core/main":264}],300:[function(t,g,m){Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};r.default.prototype.textAlign=function(u,d){var c;return r.default._validateParameters("textAlign",arguments),(c=this._renderer).textAlign.apply(c,arguments)},r.default.prototype.textLeading=function(u){var d;return r.default._validateParameters("textLeading",arguments),(d=this._renderer).textLeading.apply(d,arguments)},r.default.prototype.textSize=function(u){var d;return r.default._validateParameters("textSize",arguments),(d=this._renderer).textSize.apply(d,arguments)},r.default.prototype.textStyle=function(u){var d;return r.default._validateParameters("textStyle",arguments),(d=this._renderer).textStyle.apply(d,arguments)},r.default.prototype.textWidth=function(){for(var u,d=arguments.length,c=new Array(d),i=0;i<d;i++)c[i]=arguments[i];return c[0]+="",r.default._validateParameters("textWidth",c),c[0].length===0?0:(u=this._renderer).textWidth.apply(u,c)},r.default.prototype.textAscent=function(){for(var u=arguments.length,d=new Array(u),c=0;c<u;c++)d[c]=arguments[c];return r.default._validateParameters("textAscent",d),this._renderer.textAscent()},r.default.prototype.textDescent=function(){for(var u=arguments.length,d=new Array(u),c=0;c<u;c++)d[c]=arguments[c];return r.default._validateParameters("textDescent",d),this._renderer.textDescent()},r.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},r.default.prototype.textWrap=function(u){if(u!=="WORD"&&u!=="CHAR")throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(u)};var h=r.default;m.default=h},{"../core/main":264}],301:[function(t,g,m){function p(o){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(o)}t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.split"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r,h=(r=t("../core/main"))&&r.__esModule?r:{default:r},u=i(t("../core/constants")),d=i(t("opentype.js"));function c(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return c=function(){return o},o}function i(o){if(o&&o.__esModule)return o;if(o===null||p(o)!=="object"&&typeof o!="function")return{default:o};var l=c();if(l&&l.has(o))return l.get(o);var a={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in o)if(Object.prototype.hasOwnProperty.call(o,v)){var b=f?Object.getOwnPropertyDescriptor(o,v):null;b&&(b.get||b.set)?Object.defineProperty(a,v,b):a[v]=o[v]}return a.default=o,l&&l.set(o,a),a}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),h.default.prototype.loadFont=function(o,l,a){h.default._validateParameters("loadFont",arguments);var f=new h.default.Font(this),v=this;return d.load(o,function(b,_){if(b)return h.default._friendlyFileLoadError(4,o),a!==void 0?a(b):void console.error(b,o);f.font=_,l!==void 0&&l(f),v._decrementPreload();var w,E,C=o.split("\\").pop().split("/").pop(),A=C.lastIndexOf("."),L=A<1?null:C.substr(A+1);["ttf","otf","woff","woff2"].includes(L)&&(w=C.substr(0,A),(E=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(w,`;
src: url(`).concat(o,`);
}
`))),document.head.appendChild(E))}),f},h.default.prototype.text=function(o,l,a,f,v){var b;return h.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(b=this._renderer).text.apply(b,arguments):this},h.default.prototype.textFont=function(o,l){if(h.default._validateParameters("textFont",arguments),arguments.length){if(!o)throw new Error("null font passed to textFont");return this._renderer._setProperty("_textFont",o),l&&(this._renderer._setProperty("_textSize",l),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",l*u._DEFAULT_LEADMULT)),this._renderer._applyTextProperties()}return this._renderer._textFont};var n=h.default;m.default=n},{"../core/constants":253,"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.split":191,"opentype.js":239}],302:[function(t,g,m){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p},h=function(P){if(P&&P.__esModule)return P;if(P===null||d(P)!=="object"&&typeof P!="function")return{default:P};var R=u();if(R&&R.has(P))return R.get(P);var N={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in P)if(Object.prototype.hasOwnProperty.call(P,O)){var U=I?Object.getOwnPropertyDescriptor(P,O):null;U&&(U.get||U.set)?Object.defineProperty(N,O,U):N[O]=P[O]}return N.default=P,R&&R.set(P,N),N}(t("../core/constants"));function u(){if(typeof WeakMap!="function")return null;var P=new WeakMap;return u=function(){return P},P}function d(P){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R})(P)}function c(P,R){for(var N=function(ee,H){if(d(ee)!=="object")ee=H;else for(var te in H)ee[te]===void 0&&(ee[te]=H[te]);return ee}(R,{sampleFactor:.1,simplifyThreshold:0}),I=v(P,0,1),O=I/(I*N.sampleFactor),U=[],K=0;K<I;K+=O)U.push(v(P,K));return N.simplifyThreshold&&function(ee){for(var H=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,te=0,Z=ee.length-1;3<ee.length&&0<=Z;--Z)l(o(ee,Z-1),o(ee,Z),o(ee,Z+1),H)&&(ee.splice(Z%ee.length,1),te++)}(U,N.simplifyThreshold),U}function i(P){for(var R,N=[],I=0;I<P.length;I++)P[I].type==="M"&&(R&&N.push(R),R=[]),R.push(n(P[I]));return N.push(R),N}function n(P){var R=[P.type];return P.type==="M"||P.type==="L"?R.push(P.x,P.y):P.type==="C"?R.push(P.x1,P.y1,P.x2,P.y2,P.x,P.y):P.type==="Q"&&R.push(P.x1,P.y1,P.x,P.y),R}function o(P,R){var N=P.length;return P[R<0?R%N+N:R%N]}function l(P,R,N,I){if(!I)return O=P,K=N,((U=R)[0]-O[0])*(K[1]-O[1])-(K[0]-O[0])*(U[1]-O[1])==0;var O,U,K;l.tmpPoint1===void 0&&(l.tmpPoint1=[],l.tmpPoint2=[]);var ee=l.tmpPoint1,H=l.tmpPoint2;ee.x=R.x-P.x,ee.y=R.y-P.y,H.x=N.x-R.x,H.y=N.y-R.y;var te=ee.x*H.x+ee.y*H.y,Z=Math.sqrt(ee.x*ee.x+ee.y*ee.y),ge=Math.sqrt(H.x*H.x+H.y*H.y);return Math.acos(te/(Z*ge))<I}function a(P,R,N,I,O,U,K,ee,H){var te=1-H,Z=Math.pow(te,3),ge=Math.pow(te,2),$=H*H,se=$*H,z=Z*P+3*ge*H*N+3*te*H*H*O+se*K,de=Z*R+3*ge*H*I+3*te*H*H*U+se*ee,re=P+2*H*(N-P)+$*(O-2*N+P),ie=R+2*H*(I-R)+$*(U-2*I+R),j=N+2*H*(O-N)+$*(K-2*O+N),B=I+2*H*(U-I)+$*(ee-2*U+I),G=te*P+H*N,ne=te*R+H*I,Y=te*O+H*K,J=te*U+H*ee,fe=90-180*Math.atan2(re-j,ie-B)/Math.PI;return(j<re||ie<B)&&(fe+=180),{x:z,y:de,m:{x:re,y:ie},n:{x:j,y:B},start:{x:G,y:ne},end:{x:Y,y:J},alpha:fe}}function f(P,R,N,I,O,U,K,ee,H){return H==null?C(P,R,N,I,O,U,K,ee):a(P,R,N,I,O,U,K,ee,function(te,Z,ge,$,se,z,de,re,ie){if(!(ie<0||C(te,Z,ge,$,se,z,de,re)<ie)){var j,B=.5,G=1-B;for(j=C(te,Z,ge,$,se,z,de,re,G);.01<Math.abs(j-ie);)j=C(te,Z,ge,$,se,z,de,re,G+=(j<ie?1:-1)*(B/=2));return G}}(P,R,N,I,O,U,K,ee,H))}function v(P,R,N){for(var I,O,U,K,ee,H=0,te=0,Z=(P=function(ge,$){function se(Re,Le,ce){var ue,Ce;if(!Re)return["C",Le.x,Le.y,Le.x,Le.y,Le.x,Le.y];switch(Re[0]in{T:1,Q:1}||(Le.qx=Le.qy=null),Re[0]){case"M":Le.X=Re[1],Le.Y=Re[2];break;case"A":Re=["C"].concat(function Ie(Ve,Pe,Oe,Ae,Ge,be,Xe,k,Q,V){var ae=Math.PI,me=120*ae/180,Me,Ee,ke,we,Je=ae/180*(+Ge||0),nt=[],ut,gt=function(wt,st,rt){var bt=wt*Math.cos(rt)-st*Math.sin(rt),lt=wt*Math.sin(rt)+st*Math.cos(rt);return{x:bt,y:lt}};if(V)Me=V[0],Ee=V[1],ke=V[2],we=V[3];else{ut=gt(Ve,Pe,-Je),Ve=ut.x,Pe=ut.y,ut=gt(k,Q,-Je),k=ut.x,Q=ut.y;var ft=(Ve-k)/2,dt=(Pe-Q)/2,At=ft*ft/(Oe*Oe)+dt*dt/(Ae*Ae);1<At&&(At=Math.sqrt(At),Oe*=At,Ae*=At);var cr=Oe*Oe,Qt=Ae*Ae,Xr=(be===Xe?-1:1)*Math.sqrt(Math.abs((cr*Qt-cr*dt*dt-Qt*ft*ft)/(cr*dt*dt+Qt*ft*ft)));ke=Xr*Oe*dt/Ae+(Ve+k)/2,we=Xr*-Ae*ft/Oe+(Pe+Q)/2,Me=Math.asin(((Pe-we)/Ae).toFixed(9)),Ee=Math.asin(((Q-we)/Ae).toFixed(9)),(Me=Ve<ke?ae-Me:Me)<0&&(Me=2*ae+Me),(Ee=k<ke?ae-Ee:Ee)<0&&(Ee=2*ae+Ee),Xe&&Ee<Me&&(Me-=2*ae),!Xe&&Me<Ee&&(Ee-=2*ae)}var Mr=Ee-Me;if(Math.abs(Mr)>me){var yr=Ee,xe=k,Fe=Q;Ee=Me+me*(Xe&&Me<Ee?1:-1),k=ke+Oe*Math.cos(Ee),Q=we+Ae*Math.sin(Ee),nt=Ie(k,Q,Oe,Ae,Ge,0,Xe,xe,Fe,[Ee,yr,ke,we])}Mr=Ee-Me;var We=Math.cos(Me),Be=Math.sin(Me),$e=Math.cos(Ee),mt=Math.sin(Ee),yt=Math.tan(Mr/4),vt=4/3*Oe*yt,ve=4/3*Ae*yt,Ue=[Ve,Pe],Ze=[Ve+vt*Be,Pe-ve*We],ze=[k+vt*mt,Q-ve*$e],et=[k,Q];Ze[0]=2*Ue[0]-Ze[0],Ze[1]=2*Ue[1]-Ze[1];{if(V)return[Ze,ze,et].concat(nt);nt=[Ze,ze,et].concat(nt).join().split(",");for(var qe=[],xt=0,St=nt.length;xt<St;xt++)qe[xt]=xt%2?gt(nt[xt-1],nt[xt],Je).y:gt(nt[xt],nt[xt+1],Je).x;return qe}}.apply(0,[Le.x,Le.y].concat(Re.slice(1))));break;case"S":Ce=ce==="C"||ce==="S"?(ue=2*Le.x-Le.bx,2*Le.y-Le.by):(ue=Le.x,Le.y),Re=["C",ue,Ce].concat(Re.slice(1));break;case"T":ce==="Q"||ce==="T"?(Le.qx=2*Le.x-Le.qx,Le.qy=2*Le.y-Le.qy):(Le.qx=Le.x,Le.qy=Le.y),Re=["C"].concat(E(Le.x,Le.y,Le.qx,Le.qy,Re[1],Re[2]));break;case"Q":Le.qx=Re[1],Le.qy=Re[2],Re=["C"].concat(E(Le.x,Le.y,Re[1],Re[2],Re[3],Re[4]));break;case"L":Re=["C"].concat(w(Le.x,Le.y,Re[1],Re[2]));break;case"H":Re=["C"].concat(w(Le.x,Le.y,Re[1],Le.y));break;case"V":Re=["C"].concat(w(Le.x,Le.y,Le.x,Re[1]));break;case"Z":Re=["C"].concat(w(Le.x,Le.y,Le.X,Le.Y))}return Re}function z(Re,Le){if(7<Re[Le].length){Re[Le].shift();for(var ce=Re[Le];ce.length;)ne[Le]="A",j&&(Y[Le]="A"),Re.splice(Le++,0,["C"].concat(ce.splice(0,6)));Re.splice(Le,1),re=Math.max(ie.length,j&&j.length||0)}}function de(Re,Le,ce,ue,Ce){Re&&Le&&Re[Ce][0]==="M"&&Le[Ce][0]!=="M"&&(Le.splice(Ce,0,["M",ue.x,ue.y]),ce.bx=0,ce.by=0,ce.x=Re[Ce][1],ce.y=Re[Ce][2],re=Math.max(ie.length,j&&j.length||0))}var re,ie=b(ge),j=$&&b($),B={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},G={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ne=[],Y=[],J="",fe="";re=Math.max(ie.length,j&&j.length||0);for(var oe=0;oe<re;oe++){ie[oe]&&(J=ie[oe][0]),J!=="C"&&(ne[oe]=J,oe&&(fe=ne[oe-1])),ie[oe]=se(ie[oe],B,fe),ne[oe]!=="A"&&J==="C"&&(ne[oe]="C"),z(ie,oe),j&&(j[oe]&&(J=j[oe][0]),J!=="C"&&(Y[oe]=J,oe&&(fe=Y[oe-1])),j[oe]=se(j[oe],G,fe),Y[oe]!=="A"&&J==="C"&&(Y[oe]="C"),z(j,oe)),de(ie,j,B,G,oe),de(j,ie,G,B,oe);var X=ie[oe],W=j&&j[oe],pe=X.length,Se=j&&W.length;B.x=X[pe-2],B.y=X[pe-1],B.bx=parseFloat(X[pe-4])||B.x,B.by=parseFloat(X[pe-3])||B.y,G.bx=j&&(parseFloat(W[Se-4])||G.x),G.by=j&&(parseFloat(W[Se-3])||G.y),G.x=j&&W[Se-2],G.y=j&&W[Se-1]}return j?[ie,j]:ie}(P)).length;te<Z;te++){if((U=P[te])[0]==="M")I=+U[1],O=+U[2];else{if(R<H+(K=f(I,O,U[1],U[2],U[3],U[4],U[5],U[6]))&&!N)return{x:(ee=f(I,O,U[1],U[2],U[3],U[4],U[5],U[6],R-H)).x,y:ee.y,alpha:ee.alpha};H+=K,I=+U[5],O=+U[6]}U.shift()+U}return(ee=N?H:a(I,O,U[0],U[1],U[2],U[3],U[4],U[5],1)).alpha&&(ee={x:ee.x,y:ee.y,alpha:ee.alpha}),ee}function b(P){var R,N=[],I=0,O=0,U=0,K=0,ee=0;if(!P)return N;P[0][0]==="M"&&(U=I=+P[0][1],K=O=+P[0][2],ee++,N[0]=["M",I,O]);for(var H,te,Z=P.length===3&&P[0][0]==="M"&&P[1][0].toUpperCase()==="R"&&P[2][0].toUpperCase()==="Z",ge=ee,$=P.length;ge<$;ge++){if(N.push(H=[]),(te=P[ge])[0]!==String.prototype.toUpperCase.call(te[0]))switch(H[0]=String.prototype.toUpperCase.call(te[0]),H[0]){case"A":H[1]=te[1],H[2]=te[2],H[3]=te[3],H[4]=te[4],H[5]=te[5],H[6]=+(te[6]+I),H[7]=+(te[7]+O);break;case"V":H[1]=+te[1]+O;break;case"H":H[1]=+te[1]+I;break;case"R":for(var se=2,z=(R=[I,O].concat(te.slice(1))).length;se<z;se++)R[se]=+R[se]+I,R[++se]=+R[se]+O;N.pop(),N=N.concat(_(R,Z));break;case"M":U=+te[1]+I,K=+te[2]+O;break;default:for(var de=1,re=te.length;de<re;de++)H[de]=+te[de]+(de%2?I:O)}else if(te[0]==="R")R=[I,O].concat(te.slice(1)),N.pop(),N=N.concat(_(R,Z)),H=["R"].concat(te.slice(-2));else for(var ie=0,j=te.length;ie<j;ie++)H[ie]=te[ie];switch(H[0]){case"Z":I=U,O=K;break;case"H":I=H[1];break;case"V":O=H[1];break;case"M":U=H[H.length-2],K=H[H.length-1];break;default:I=H[H.length-2],O=H[H.length-1]}}return N}function _(P,R){for(var N=[],I=0,O=P.length;I<O-2*!R;I+=2){var U=[{x:+P[I-2],y:+P[I-1]},{x:+P[I],y:+P[I+1]},{x:+P[I+2],y:+P[I+3]},{x:+P[I+4],y:+P[I+5]}];R?I?O-4===I?U[3]={x:+P[0],y:+P[1]}:O-2===I&&(U[2]={x:+P[0],y:+P[1]},U[3]={x:+P[2],y:+P[3]}):U[0]={x:+P[O-2],y:+P[O-1]}:O-4===I?U[3]=U[2]:I||(U[0]={x:+P[I],y:+P[I+1]}),N.push(["C",(-U[0].x+6*U[1].x+U[2].x)/6,(-U[0].y+6*U[1].y+U[2].y)/6,(U[1].x+6*U[2].x-U[3].x)/6,(U[1].y+6*U[2].y-U[3].y)/6,U[2].x,U[2].y])}return N}function w(P,R,N,I){return[P,R,N,I,N,I]}function E(P,R,N,I,O,U){return[1/3*P+2/3*N,1/3*R+2/3*I,1/3*O+2/3*N,1/3*U+2/3*I,O,U]}function C(P,R,N,I,O,U,K,ee,H){H==null&&(H=1);for(var te=(H=1<H?1:H<0?0:H)/2,Z=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ge=0,$=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],se=0;se<12;se++){var z=te*Z[se]+te,de=A(z,P,N,O,K),re=A(z,R,I,U,ee),ie=de*de+re*re;ge+=$[se]*Math.sqrt(ie)}return te*ge}function A(P,R,N,I,O){return P*(P*(-3*R+9*N-9*I+3*O)+6*R-12*N+6*I)-3*R+3*N}r.default.Font=function(P){this.parent=P,this.cache={},this.font=void 0},r.default.Font.prototype.textBounds=function(P){var R,N=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,I=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,O=3<arguments.length?arguments[3]:void 0,U=4<arguments.length?arguments[4]:void 0,K=U&&U.renderer&&U.renderer._pInst||this.parent,ee=K._renderer.drawingContext;if(ee.textAlign||h.LEFT,ee.textBaseline||h.BASELINE,O=O||K._renderer._textSize,!R){var H,te,Z=[],ge=[],$=[];$[0]=[];var se=[],z=this._scale(O),de=K._renderer.textLeading(),re=0;this.font.forEachGlyph(P,N,I,O,U,function(ne,Y,J,fe){var oe=ne.getMetrics();ne.index===0||ne.index===10?$[re+=1]=[]:($[re].push(Y+oe.xMin*z),$[re].push(Y+oe.xMax*z),se.push(J+re*de+-oe.yMin*z),se.push(J+re*de+-oe.yMax*z))}),0<$[re].length&&(Z[re]=Math.min.apply(null,$[re]),ge[re]=Math.max.apply(null,$[re]));for(var ie=0,j=0;j<=re;j++){Z[j]=Math.min.apply(null,$[j]),ge[j]=Math.max.apply(null,$[j]);var B=ge[j]-Z[j];ie<B&&(ie=B)}var G=Math.min.apply(null,Z);R={x:G,y:H=Math.min.apply(null,se),h:Math.max.apply(null,se)-H,w:ie,advance:G-N},te=this._handleAlignment(K._renderer,P,R.x,R.y,R.w+R.advance),R.x=te.x,R.y=te.y}return R},r.default.Font.prototype.textToPoints=function(P,R,N,I,O){var U,K=0,ee=[],H=this._getGlyphs(P);I=I||this.parent._renderer._textSize;for(var te=0;te<H.length;te++){if(!(H[U=te].name&&H[U].name==="space"||P.length===H.length&&P[U]===" "))for(var Z=i(H[te].getPath(R,N,I).commands),ge=0;ge<Z.length;ge++)for(var $=c(Z[ge],O),se=0;se<$.length;se++)$[se].x+=K,ee.push($[se]);K+=H[te].advanceWidth*this._scale(I)}return ee},r.default.Font.prototype._getGlyphs=function(P){return this.font.stringToGlyphs(P)},r.default.Font.prototype._getPath=function(P,R,N,I){var O=(I&&I.renderer&&I.renderer._pInst||this.parent)._renderer,U=this._handleAlignment(O,P,R,N);return this.font.getPath(P,U.x,U.y,O._textSize,I)},r.default.Font.prototype._getPathData=function(P,R,N,I){var O=3;return typeof P=="string"&&2<arguments.length?P=this._getPath(P,R,N,I):d(R)==="object"&&(I=R),I&&typeof I.decimals=="number"&&(O=I.decimals),P.toPathData(O)},r.default.Font.prototype._getSVG=function(P,R,N,I){var O=3;return typeof P=="string"&&2<arguments.length?P=this._getPath(P,R,N,I):d(R)==="object"&&(I=R),I&&(typeof I.decimals=="number"&&(O=I.decimals),typeof I.strokeWidth=="number"&&(P.strokeWidth=I.strokeWidth),I.fill!==void 0&&(P.fill=I.fill),I.stroke!==void 0&&(P.stroke=I.stroke)),P.toSVG(O)},r.default.Font.prototype._renderPath=function(P,R,N,I){var O,U=I&&I.renderer||this.parent._renderer,K=U.drawingContext;O=d(P)==="object"&&P.commands?P.commands:this._getPath(P,R,N,I).commands,K.beginPath();var ee=!0,H=!1,te=void 0;try{for(var Z,ge=O[Symbol.iterator]();!(ee=(Z=ge.next()).done);ee=!0){var $=Z.value;$.type==="M"?K.moveTo($.x,$.y):$.type==="L"?K.lineTo($.x,$.y):$.type==="C"?K.bezierCurveTo($.x1,$.y1,$.x2,$.y2,$.x,$.y):$.type==="Q"?K.quadraticCurveTo($.x1,$.y1,$.x,$.y):$.type==="Z"&&K.closePath()}}catch(se){H=!0,te=se}finally{try{ee||ge.return==null||ge.return()}finally{if(H)throw te}}return U._doStroke&&U._strokeSet&&K.stroke(),U._doFill&&(U._fillSet||U._setFill(h._DEFAULT_TEXT_FILL),K.fill()),this},r.default.Font.prototype._textWidth=function(P,R){return this.font.getAdvanceWidth(P,R)},r.default.Font.prototype._textAscent=function(P){return this.font.ascender*this._scale(P)},r.default.Font.prototype._textDescent=function(P){return-this.font.descender*this._scale(P)},r.default.Font.prototype._scale=function(P){return 1/this.font.unitsPerEm*(P||this.parent._renderer._textSize)},r.default.Font.prototype._handleAlignment=function(P,R,N,I,O){var U=P._textSize;switch(O===void 0&&(O=this._textWidth(R,U)),P._textAlign){case h.CENTER:N-=O/2;break;case h.RIGHT:N-=O}switch(P._textBaseline){case h.TOP:I+=this._textAscent(U);break;case h.CENTER:I+=this._textAscent(U)/2;break;case h.BOTTOM:I-=this._textDescent(U)}return{x:N,y:I}};var L=r.default;m.default=L},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":166,"core-js/modules/es.number.to-fixed":172,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],303:[function(t,g,m){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};r.default.prototype.append=function(u,d){return u.push(d),u},r.default.prototype.arrayCopy=function(u,d,c,i,n){var o,l;u=n!==void 0?(l=Math.min(n,u.length),o=i,u.slice(d,l+d)):(l=c!==void 0?(l=c,Math.min(l,u.length)):u.length,o=0,c=d,u.slice(0,l)),Array.prototype.splice.apply(c,[o,l].concat(u))},r.default.prototype.concat=function(u,d){return u.concat(d)},r.default.prototype.reverse=function(u){return u.reverse()},r.default.prototype.shorten=function(u){return u.pop(),u},r.default.prototype.shuffle=function(u,d){for(var c,i,n=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(u),o=(u=d||n?u:u.slice()).length;1<o;)c=this.random(0,1)*o|0,i=u[--o],u[o]=u[c],u[c]=i;return u},r.default.prototype.sort=function(u,d){var c=d?u.slice(0,Math.min(d,u.length)):u,i=d?u.slice(Math.min(d,u.length)):[];return(c=typeof c[0]=="string"?c.sort():c.sort(function(n,o){return n-o})).concat(i)},r.default.prototype.splice=function(u,d,c){return Array.prototype.splice.apply(u,[c,0].concat(d)),u},r.default.prototype.subset=function(u,d,c){return c!==void 0?u.slice(d,d+c):u.slice(d,u.length)};var h=r.default;m.default=h},{"../core/main":264,"core-js/modules/es.array-buffer.constructor":148,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177}],304:[function(t,g,m){t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};r.default.prototype.float=function(u){return u instanceof Array?u.map(parseFloat):parseFloat(u)},r.default.prototype.int=function(u){var d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return u===1/0||u==="Infinity"?1/0:u===-1/0||u==="-Infinity"?-1/0:typeof u=="string"?parseInt(u,d):typeof u=="number"?0|u:typeof u=="boolean"?u?1:0:u instanceof Array?u.map(function(c){return r.default.prototype.int(c,d)}):void 0},r.default.prototype.str=function(u){return u instanceof Array?u.map(r.default.prototype.str):String(u)},r.default.prototype.boolean=function(u){return typeof u=="number"?u!==0:typeof u=="string"?u.toLowerCase()==="true":typeof u=="boolean"?u:u instanceof Array?u.map(r.default.prototype.boolean):void 0},r.default.prototype.byte=function(u){var d=r.default.prototype.int(u,10);return typeof d=="number"?(d+128)%256-128:d instanceof Array?d.map(r.default.prototype.byte):void 0},r.default.prototype.char=function(u){return typeof u!="number"||isNaN(u)?u instanceof Array?u.map(r.default.prototype.char):typeof u=="string"?r.default.prototype.char(parseInt(u,10)):void 0:String.fromCharCode(u)},r.default.prototype.unchar=function(u){return typeof u=="string"&&u.length===1?u.charCodeAt(0):u instanceof Array?u.map(r.default.prototype.unchar):void 0},r.default.prototype.hex=function(u,d){if(d=d==null?d=8:d,u instanceof Array)return u.map(function(i){return r.default.prototype.hex(i,d)});if(u===1/0||u===-1/0)return(u===1/0?"F":"0").repeat(d);if(typeof u=="number"){u<0&&(u=4294967295+u+1);for(var c=Number(u).toString(16).toUpperCase();c.length<d;)c="0".concat(c);return c.length>=d&&(c=c.substring(c.length-d,c.length)),c}},r.default.prototype.unhex=function(u){return u instanceof Array?u.map(r.default.prototype.unhex):parseInt("0x".concat(u),16)};var h=r.default;m.default=h},{"../core/main":264,"core-js/modules/es.array.map":161,"core-js/modules/es.number.constructor":170,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.repeat":188}],305:[function(t,g,m){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};function h(n,o,l){var a=n<0,f=a?n.toString().substring(1):n.toString(),v=f.indexOf("."),b=v!==-1?f.substring(0,v):f,_=v!==-1?f.substring(v+1):"",w=a?"-":"";if(l!==void 0){var E="";(v!==-1||0<l-_.length)&&(E="."),_.length>l&&(_=_.substring(0,l));for(var C=0;C<o-b.length;C++)w+="0";w+=b,w+=E,w+=_;for(var A=0;A<l-_.length;A++)w+="0";return w}for(var L=0;L<Math.max(o-b.length,0);L++)w+="0";return w+=f}function u(n,o){var l=(n=n.toString()).indexOf("."),a=l!==-1?n.substring(l):"",f=l!==-1?n.substring(0,l):n;if(f=f.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),o===0)a="";else if(o!==void 0)if(o>a.length)for(var v=o-(a+=l===-1?".":"").length+1,b=0;b<v;b++)a+="0";else a=a.substring(0,o+1);return f+a}function d(n){return 0<parseFloat(n)?"+".concat(n.toString()):n.toString()}function c(n){return 0<=parseFloat(n)?" ".concat(n.toString()):n.toString()}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),r.default.prototype.join=function(n,o){return r.default._validateParameters("join",arguments),n.join(o)},r.default.prototype.match=function(n,o){return r.default._validateParameters("match",arguments),n.match(o)},r.default.prototype.matchAll=function(n,o){r.default._validateParameters("matchAll",arguments);for(var l=new RegExp(o,"g"),a=l.exec(n),f=[];a!==null;)f.push(a),a=l.exec(n);return f},r.default.prototype.nf=function(n,o,l){return r.default._validateParameters("nf",arguments),n instanceof Array?n.map(function(a){return h(a,o,l)}):Object.prototype.toString.call(n)==="[object Arguments]"?n.length===3?this.nf(n[0],n[1],n[2]):n.length===2?this.nf(n[0],n[1]):this.nf(n[0]):h(n,o,l)},r.default.prototype.nfc=function(n,o){return r.default._validateParameters("nfc",arguments),n instanceof Array?n.map(function(l){return u(l,o)}):u(n,o)},r.default.prototype.nfp=function(){for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];r.default._validateParameters("nfp",o);var a=r.default.prototype.nf.apply(this,o);return a instanceof Array?a.map(d):d(a)},r.default.prototype.nfs=function(){for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];r.default._validateParameters("nfs",o);var a=r.default.prototype.nf.apply(this,o);return a instanceof Array?a.map(c):c(a)},r.default.prototype.split=function(n,o){return r.default._validateParameters("split",arguments),n.split(o)},r.default.prototype.splitTokens=function(n,o){var l;if(r.default._validateParameters("splitTokens",arguments),o!==void 0){var a=o,f=/\]/g.exec(a),v=/\[/g.exec(a);l=v&&f?(a=a.slice(0,f.index)+a.slice(f.index+1),v=/\[/g.exec(a),a=a.slice(0,v.index)+a.slice(v.index+1),new RegExp("[\\[".concat(a,"\\]]"),"g")):f?(a=a.slice(0,f.index)+a.slice(f.index+1),new RegExp("[".concat(a,"\\]]"),"g")):v?(a=a.slice(0,v.index)+a.slice(v.index+1),new RegExp("[".concat(a,"\\[]"),"g")):new RegExp("[".concat(a,"]"),"g")}else l=/\s/g;return n.split(l).filter(function(b){return b})},r.default.prototype.trim=function(n){return r.default._validateParameters("trim",arguments),n instanceof Array?n.map(this.trim):n.trim()};var i=r.default;m.default=i},{"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/main":264,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],306:[function(t,g,m){Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};r.default.prototype.day=function(){return new Date().getDate()},r.default.prototype.hour=function(){return new Date().getHours()},r.default.prototype.minute=function(){return new Date().getMinutes()},r.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},r.default.prototype.month=function(){return new Date().getMonth()+1},r.default.prototype.second=function(){return new Date().getSeconds()},r.default.prototype.year=function(){return new Date().getFullYear()};var h=r.default;m.default=h},{"../core/main":264}],307:[function(t,g,m){function p(n){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(n)}t("core-js/modules/es.array.concat"),t("core-js/modules/es.number.to-fixed"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r,h=(r=t("../core/main"))&&r.__esModule?r:{default:r};t("./p5.Geometry");var u=function(n){if(n&&n.__esModule)return n;if(n===null||p(n)!=="object"&&typeof n!="function")return{default:n};var o=d();if(o&&o.has(n))return o.get(n);var l={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in n)if(Object.prototype.hasOwnProperty.call(n,f)){var v=a?Object.getOwnPropertyDescriptor(n,f):null;v&&(v.get||v.set)?Object.defineProperty(l,f,v):l[f]=n[f]}return l.default=n,o&&o.set(n,l),l}(t("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var n=new WeakMap;return d=function(){return n},n}h.default.prototype.plane=function(n,o,l,a){this._assert3d("plane"),h.default._validateParameters("plane",arguments),n===void 0&&(n=50),o===void 0&&(o=n),l===void 0&&(l=1),a===void 0&&(a=1);var f="plane|".concat(l,"|").concat(a);if(!this._renderer.geometryInHash(f)){var v=new h.default.Geometry(l,a,function(){for(var b,_,w,E=0;E<=this.detailY;E++){_=E/this.detailY;for(var C=0;C<=this.detailX;C++)b=C/this.detailX,w=new h.default.Vector(b-.5,_-.5,0),this.vertices.push(w),this.uvs.push(b,_)}});v.computeFaces().computeNormals(),l<=1&&a<=1?v._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(f,v)}return this._renderer.drawBuffersScaled(f,n,o,1),this},h.default.prototype.box=function(n,o,l,a,f){this._assert3d("box"),h.default._validateParameters("box",arguments),n===void 0&&(n=50),o===void 0&&(o=n),l===void 0&&(l=o);var v=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;a===void 0&&(a=v?1:4),f===void 0&&(f=v?1:4);var b="box|".concat(a,"|").concat(f);if(!this._renderer.geometryInHash(b)){var _=new h.default.Geometry(a,f,function(){var w=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]];this.strokeIndices=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]];for(var E=0;E<w.length;E++){for(var C=w[E],A=4*E,L=0;L<4;L++){var P=C[L],R=new h.default.Vector((2*(1&P)-1)/2,((2&P)-1)/2,((4&P)/2-1)/2);this.vertices.push(R),this.uvs.push(1&L,(2&L)/2)}this.faces.push([A,1+A,2+A]),this.faces.push([2+A,1+A,3+A])}});_.computeNormals(),a<=4&&f<=4?_._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(b,_)}return this._renderer.drawBuffersScaled(b,n,o,l),this},h.default.prototype.sphere=function(n,o,l){return this._assert3d("sphere"),h.default._validateParameters("sphere",arguments),n===void 0&&(n=50),o===void 0&&(o=24),l===void 0&&(l=16),this.ellipsoid(n,n,n,o,l),this};function c(n,o,l,a,f,v,b){n=n<=0?1:n,o=o<0?0:o,l=l<=0?n:l,a=a<3?3:a;var _,w,E,C=(v=v===void 0||v)?-2:0,A=(f=f<1?1:f)+((b=b===void 0?o!==0:b)?2:0),L=Math.atan2(n-o,l),P=Math.sin(L),R=Math.cos(L);for(_=C;_<=A;++_){var N=_/f,I=l*N,O=void 0;for(O=_<0?(N=I=0,n):f<_?(I=l,N=1,o):n+(o-n)*N,_!==-2&&_!==f+2||(O=0),I-=l/2,w=0;w<a;++w){var U=w/(a-1),K=2*Math.PI*U,ee=Math.sin(K),H=Math.cos(K);this.vertices.push(new h.default.Vector(ee*O,I,H*O));var te=void 0;te=_<0?new h.default.Vector(0,-1,0):f<_&&o?new h.default.Vector(0,1,0):new h.default.Vector(ee*R,P,H*R),this.vertexNormals.push(te),this.uvs.push(U,N)}}var Z=0;if(v){for(E=0;E<a;++E){var ge=(E+1)%a;this.faces.push([Z+E,Z+a+ge,Z+a+E])}Z+=2*a}for(_=0;_<f;++_){for(w=0;w<a;++w){var $=(w+1)%a;this.faces.push([Z+w,Z+$,Z+a+$]),this.faces.push([Z+w,Z+a+$,Z+a+w])}Z+=a}if(b)for(Z+=a,w=0;w<a;++w)this.faces.push([Z+w,Z+(w+1)%a,Z+a])}h.default.prototype.cylinder=function(n,o,l,a,f,v){this._assert3d("cylinder"),h.default._validateParameters("cylinder",arguments),n===void 0&&(n=50),o===void 0&&(o=n),l===void 0&&(l=24),a===void 0&&(a=1),v===void 0&&(v=!0),f===void 0&&(f=!0);var b="cylinder|".concat(l,"|").concat(a,"|").concat(f,"|").concat(v);if(!this._renderer.geometryInHash(b)){var _=new h.default.Geometry(l,a);c.call(_,1,1,1,l,a,f,v),l<=24&&a<=16?_._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(b,_)}return this._renderer.drawBuffersScaled(b,n,o,n),this},h.default.prototype.cone=function(n,o,l,a,f){this._assert3d("cone"),h.default._validateParameters("cone",arguments),n===void 0&&(n=50),o===void 0&&(o=n),l===void 0&&(l=24),a===void 0&&(a=1),f===void 0&&(f=!0);var v="cone|".concat(l,"|").concat(a,"|").concat(f);if(!this._renderer.geometryInHash(v)){var b=new h.default.Geometry(l,a);c.call(b,1,0,1,l,a,f,!1),l<=24&&a<=16?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(v,b)}return this._renderer.drawBuffersScaled(v,n,o,n),this},h.default.prototype.ellipsoid=function(n,o,l,a,f){this._assert3d("ellipsoid"),h.default._validateParameters("ellipsoid",arguments),n===void 0&&(n=50),o===void 0&&(o=n),l===void 0&&(l=n),a===void 0&&(a=24),f===void 0&&(f=16);var v="ellipsoid|".concat(a,"|").concat(f);if(!this._renderer.geometryInHash(v)){var b=new h.default.Geometry(a,f,function(){for(var _=0;_<=this.detailY;_++)for(var w=_/this.detailY,E=Math.PI*w-Math.PI/2,C=Math.cos(E),A=Math.sin(E),L=0;L<=this.detailX;L++){var P=L/this.detailX,R=2*Math.PI*P,N=Math.cos(R),I=Math.sin(R),O=new h.default.Vector(C*I,A,C*N);this.vertices.push(O),this.vertexNormals.push(O),this.uvs.push(P,w)}});b.computeFaces(),a<=24&&f<=24?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(v,b)}return this._renderer.drawBuffersScaled(v,n,o,l),this},h.default.prototype.torus=function(n,o,l,a){if(this._assert3d("torus"),h.default._validateParameters("torus",arguments),n===void 0)n=50;else if(!n)return;if(o===void 0)o=10;else if(!o)return;l===void 0&&(l=24),a===void 0&&(a=16);var f=(o/n).toPrecision(4),v="torus|".concat(f,"|").concat(l,"|").concat(a);if(!this._renderer.geometryInHash(v)){var b=new h.default.Geometry(l,a,function(){for(var _=0;_<=this.detailY;_++)for(var w=_/this.detailY,E=2*Math.PI*w,C=Math.cos(E),A=Math.sin(E),L=1+f*C,P=0;P<=this.detailX;P++){var R=P/this.detailX,N=2*Math.PI*R,I=Math.cos(N),O=Math.sin(N),U=new h.default.Vector(L*I,L*O,f*A),K=new h.default.Vector(C*I,C*O,A);this.vertices.push(U),this.vertexNormals.push(K),this.uvs.push(R,w)}});b.computeFaces(),l<=24&&a<=16?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(v,b)}return this._renderer.drawBuffersScaled(v,n,n,n),this},h.default.RendererGL.prototype.point=function(n,o,l){l===void 0&&(l=0);var a=[];return a.push(new h.default.Vector(n,o,l)),this._drawPoints(a,this.immediateMode.buffers.point),this},h.default.RendererGL.prototype.triangle=function(n){var o=n[0],l=n[1],a=n[2],f=n[3],v=n[4],b=n[5];if(!this.geometryInHash("tri")){var _=new h.default.Geometry(1,1,function(){var C=[];C.push(new h.default.Vector(0,0,0)),C.push(new h.default.Vector(0,1,0)),C.push(new h.default.Vector(1,0,0)),this.strokeIndices=[[0,1],[1,2],[2,0]],this.vertices=C,this.faces=[[0,1,2]],this.uvs=[0,0,0,1,1,1]});_._makeTriangleEdges()._edgesToVertices(),_.computeNormals(),this.createBuffers("tri",_)}var w=this.uMVMatrix.copy();try{var E=new h.default.Matrix([a-o,f-l,0,0,v-o,b-l,0,0,0,0,1,0,o,l,0,1]).mult(this.uMVMatrix);this.uMVMatrix=E,this.drawBuffers("tri")}finally{this.uMVMatrix=w}return this},h.default.RendererGL.prototype.ellipse=function(n){this.arc(n[0],n[1],n[2],n[3],0,u.TWO_PI,u.OPEN,n[4])},h.default.RendererGL.prototype.arc=function(n){var o,l,a=n,f=arguments[1],v=arguments[2],b=arguments[3],_=arguments[4],w=arguments[5],E=arguments[6],C=arguments[7]||25;if(l=Math.abs(w-_)>=u.TWO_PI?"".concat(o="ellipse","|").concat(C,"|"):"".concat(o="arc","|").concat(_,"|").concat(w,"|").concat(E,"|").concat(C,"|"),!this.geometryInHash(l)){var A=new h.default.Geometry(C,1,function(){if(this.strokeIndices=[],_.toFixed(10)!==w.toFixed(10)){E!==u.PIE&&E!==void 0||(this.vertices.push(new h.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var P=0;P<=C;P++){var R=(w-_)*(P/C)+_,N=.5+Math.cos(R)/2,I=.5+Math.sin(R)/2;this.vertices.push(new h.default.Vector(N,I,0)),this.uvs.push([N,I]),P<C-1&&(this.faces.push([0,P+1,P+2]),this.strokeIndices.push([P+1,P+2]))}switch(E){case u.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case u.CHORD:this.strokeIndices.push([0,1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case u.OPEN:this.strokeIndices.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1])}}});A.computeNormals(),C<=50?A._makeTriangleEdges()._edgesToVertices(A):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(o," with more than 50 detail")),this.createBuffers(l,A)}var L=this.uMVMatrix.copy();try{this.uMVMatrix.translate([a,f,0]),this.uMVMatrix.scale(v,b,1),this.drawBuffers(l)}finally{this.uMVMatrix=L}return this},h.default.RendererGL.prototype.rect=function(n){var o=this._pInst._glAttributes.perPixelLighting,l=n[0],a=n[1],f=n[2],v=n[3],b=n[4]||(o?1:24),_=n[5]||(o?1:16),w="rect|".concat(b,"|").concat(_);if(!this.geometryInHash(w)){var E=new h.default.Geometry(b,_,function(){for(var A=0;A<=this.detailY;A++)for(var L=A/this.detailY,P=0;P<=this.detailX;P++){var R=P/this.detailX,N=new h.default.Vector(R,L,0);this.vertices.push(N),this.uvs.push(R,L)}0<b&&0<_&&(this.strokeIndices=[[0,b],[b,(b+1)*(_+1)-1],[(b+1)*(_+1)-1,(b+1)*_],[(b+1)*_,0]])});E.computeFaces().computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(w,E)}var C=this.uMVMatrix.copy();try{this.uMVMatrix.translate([l,a,0]),this.uMVMatrix.scale(f,v,1),this.drawBuffers(w)}finally{this.uMVMatrix=C}return this},h.default.RendererGL.prototype.quad=function(n,o,l,a,f,v,b,_,w,E,C,A,L,P){L===void 0&&(L=2),P===void 0&&(P=2);var R="quad|".concat(n,"|").concat(o,"|").concat(l,"|").concat(a,"|").concat(f,"|").concat(v,"|").concat(b,"|").concat(_,"|").concat(w,"|").concat(E,"|").concat(C,"|").concat(A,"|").concat(L,"|").concat(P);if(!this.geometryInHash(R)){var N=new h.default.Geometry(L,P,function(){for(var te=1/(this.detailX-1),Z=1/(this.detailY-1),ge=0;ge<this.detailY;ge++)for(var $=0;$<this.detailX;$++){var se=$*te,z=ge*Z,de=(1-se)*((1-z)*n+z*E)+se*((1-z)*a+z*b),re=(1-se)*((1-z)*o+z*C)+se*((1-z)*f+z*_),ie=(1-se)*((1-z)*l+z*A)+se*((1-z)*v+z*w);this.vertices.push(new h.default.Vector(de,re,ie)),this.uvs.push([se,z])}});N.faces=[];for(var I=0;I<P-1;I++)for(var O=0;O<L-1;O++){var U=O+I*L,K=O+1+I*L,ee=O+1+(I+1)*L,H=O+(I+1)*L;N.faces.push([U,K,ee]),N.faces.push([U,ee,H])}N.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(R,N)}return this.drawBuffers(R),this},h.default.RendererGL.prototype.bezier=function(n,o,l,a,f,v,b,_,w,E,C,A){arguments.length===8&&(C=_,E=b,_=v,b=f,f=a,a=l,l=v=w=A=0);var L=this._pInst._bezierDetail||20;this.beginShape();for(var P=0;P<=L;P++){var R=Math.pow(1-P/L,3),N=P/L*3*Math.pow(1-P/L,2),I=3*Math.pow(P/L,2)*(1-P/L),O=Math.pow(P/L,3);this.vertex(n*R+a*N+b*I+E*O,o*R+f*N+_*I+C*O,l*R+v*N+w*I+A*O)}return this.endShape(),this},h.default.RendererGL.prototype.curve=function(n,o,l,a,f,v,b,_,w,E,C,A){arguments.length===8&&(E=b,C=_,b=f,_=a,f=a=l,l=v=w=A=0);var L=this._pInst._curveDetail;this.beginShape();for(var P=0;P<=L;P++){var R=.5*Math.pow(P/L,3),N=.5*Math.pow(P/L,2),I=P/L*.5,O=R*(3*a-n-3*b+E)+N*(2*n-5*a+4*b-E)+I*(-n+b)+2*a*.5,U=R*(3*f-o-3*_+C)+N*(2*o-5*f+4*_-C)+I*(-o+_)+2*f*.5,K=R*(3*v-l-3*w+A)+N*(2*l-5*v+4*w-A)+I*(-l+w)+2*v*.5;this.vertex(O,U,K)}return this.endShape(),this},h.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(u.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(u.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},h.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var n,o,l,a,f,v=[],b=[],_=[],w=arguments.length;if((n=0)===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var E=1/this._lutBezierDetail,C=0,A=1,L=0;C<1;){if(n=parseFloat(C.toFixed(6)),this._lookUpTableBezier[L]=this._bezierCoefficients(n),A.toFixed(6)===E.toFixed(6)){n=parseFloat(A.toFixed(6))+parseFloat(C.toFixed(6)),++L,this._lookUpTableBezier[L]=this._bezierCoefficients(n);break}C+=E,A-=E,++L}}var P=this._lookUpTableBezier.length;if(w===6){for(this.isBezier=!0,v=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],b=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],f=0;f<P;f++)o=v[0]*this._lookUpTableBezier[f][0]+v[1]*this._lookUpTableBezier[f][1]+v[2]*this._lookUpTableBezier[f][2]+v[3]*this._lookUpTableBezier[f][3],l=b[0]*this._lookUpTableBezier[f][0]+b[1]*this._lookUpTableBezier[f][1]+b[2]*this._lookUpTableBezier[f][2]+b[3]*this._lookUpTableBezier[f][3],this.vertex(o,l);this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(w===9){for(this.isBezier=!0,v=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],b=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]],_=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],f=0;f<P;f++)o=v[0]*this._lookUpTableBezier[f][0]+v[1]*this._lookUpTableBezier[f][1]+v[2]*this._lookUpTableBezier[f][2]+v[3]*this._lookUpTableBezier[f][3],l=b[0]*this._lookUpTableBezier[f][0]+b[1]*this._lookUpTableBezier[f][1]+b[2]*this._lookUpTableBezier[f][2]+b[3]*this._lookUpTableBezier[f][3],a=_[0]*this._lookUpTableBezier[f][0]+_[1]*this._lookUpTableBezier[f][1]+_[2]*this._lookUpTableBezier[f][2]+_[3]*this._lookUpTableBezier[f][3],this.vertex(o,l,a);this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},h.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var n,o,l,a,f,v=[],b=[],_=[],w=arguments.length;if((n=0)===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var E=1/this._lutQuadraticDetail,C=0,A=1,L=0;C<1;){if(n=parseFloat(C.toFixed(6)),this._lookUpTableQuadratic[L]=this._quadraticCoefficients(n),A.toFixed(6)===E.toFixed(6)){n=parseFloat(A.toFixed(6))+parseFloat(C.toFixed(6)),++L,this._lookUpTableQuadratic[L]=this._quadraticCoefficients(n);break}C+=E,A-=E,++L}}var P=this._lookUpTableQuadratic.length;if(w===4){for(this.isQuadratic=!0,v=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],b=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],f=0;f<P;f++)o=v[0]*this._lookUpTableQuadratic[f][0]+v[1]*this._lookUpTableQuadratic[f][1]+v[2]*this._lookUpTableQuadratic[f][2],l=b[0]*this._lookUpTableQuadratic[f][0]+b[1]*this._lookUpTableQuadratic[f][1]+b[2]*this._lookUpTableQuadratic[f][2],this.vertex(o,l);this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(w===6){for(this.isQuadratic=!0,v=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],b=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]],_=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],f=0;f<P;f++)o=v[0]*this._lookUpTableQuadratic[f][0]+v[1]*this._lookUpTableQuadratic[f][1]+v[2]*this._lookUpTableQuadratic[f][2],l=b[0]*this._lookUpTableQuadratic[f][0]+b[1]*this._lookUpTableQuadratic[f][1]+b[2]*this._lookUpTableQuadratic[f][2],a=_[0]*this._lookUpTableQuadratic[f][0]+_[1]*this._lookUpTableQuadratic[f][1]+_[2]*this._lookUpTableQuadratic[f][2],this.vertex(o,l,a);this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},h.default.RendererGL.prototype.curveVertex=function(){var n,o,l,a,f,v=[],b=[],_=[],w=arguments.length;if((n=0)===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var E=1/this._lutBezierDetail,C=0,A=1,L=0;C<1;){if(n=parseFloat(C.toFixed(6)),this._lookUpTableBezier[L]=this._bezierCoefficients(n),A.toFixed(6)===E.toFixed(6)){n=parseFloat(A.toFixed(6))+parseFloat(C.toFixed(6)),++L,this._lookUpTableBezier[L]=this._bezierCoefficients(n);break}C+=E,A-=E,++L}}var P=this._lookUpTableBezier.length;if(w===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,v=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),b=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),f=0;f<P;f++)o=v[0]*this._lookUpTableBezier[f][0]+v[1]*this._lookUpTableBezier[f][1]+v[2]*this._lookUpTableBezier[f][2]+v[3]*this._lookUpTableBezier[f][3],l=b[0]*this._lookUpTableBezier[f][0]+b[1]*this._lookUpTableBezier[f][1]+b[2]*this._lookUpTableBezier[f][2]+b[3]*this._lookUpTableBezier[f][3],this.vertex(o,l);for(f=0;f<w;f++)this.immediateMode._curveVertex.shift()}}else if(w===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,v=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),b=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),_=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),f=0;f<P;f++)o=v[0]*this._lookUpTableBezier[f][0]+v[1]*this._lookUpTableBezier[f][1]+v[2]*this._lookUpTableBezier[f][2]+v[3]*this._lookUpTableBezier[f][3],l=b[0]*this._lookUpTableBezier[f][0]+b[1]*this._lookUpTableBezier[f][1]+b[2]*this._lookUpTableBezier[f][2]+b[3]*this._lookUpTableBezier[f][3],a=_[0]*this._lookUpTableBezier[f][0]+_[1]*this._lookUpTableBezier[f][1]+_[2]*this._lookUpTableBezier[f][2]+_[3]*this._lookUpTableBezier[f][3],this.vertex(o,l,a);for(f=0;f<w;f++)this.immediateMode._curveVertex.shift()}},h.default.RendererGL.prototype.image=function(n,o,l,a,f,v,b,_,w){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.texture(n),this._pInst.textureMode(u.NORMAL);var E=0;o<=n.width&&(E=o/n.width);var C=1;o+a<=n.width&&(C=(o+a)/n.width);var A=0;l<=n.height&&(A=l/n.height);var L=1;l+f<=n.height&&(L=(l+f)/n.height),this.beginShape(),this.vertex(v,b,0,E,A),this.vertex(v+_,b,0,C,A),this.vertex(v+_,b+w,0,C,L),this.vertex(v,b+w,0,E,L),this.endShape(u.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(u.REMOVE)};var i=h.default;m.default=i},{"../core/constants":253,"../core/main":264,"./p5.Geometry":313,"core-js/modules/es.array.concat":149,"core-js/modules/es.number.to-fixed":172}],308:[function(t,g,m){function p(i){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(i)}t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r,h=(r=t("../core/main"))&&r.__esModule?r:{default:r},u=function(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var n=d();if(n&&n.has(i))return n.get(i);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){var f=l?Object.getOwnPropertyDescriptor(i,a):null;f&&(f.get||f.set)?Object.defineProperty(o,a,f):o[a]=i[a]}return o.default=i,n&&n.set(i,o),o}(t("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return d=function(){return i},i}h.default.prototype.orbitControl=function(i,n,o){if(this._assert3d("orbitControl"),h.default._validateParameters("orbitControl",arguments),this.mouseX<this.width&&0<this.mouseX&&this.mouseY<this.height&&0<this.mouseY){var l=this._renderer._curCamera;i===void 0&&(i=1),n===void 0&&(n=i),o===void 0&&(o=.5),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var a=this.height<this.width?this.height:this.width;if(this._mouseWheelDeltaY!==this._pmouseWheelDeltaY&&(0<this._mouseWheelDeltaY?this._renderer._curCamera._orbit(0,0,o*a):this._renderer._curCamera._orbit(0,0,-o*a)),this.mouseIsPressed){if(this.mouseButton===this.LEFT){var f=-i*(this.mouseX-this.pmouseX)/a,v=n*(this.mouseY-this.pmouseY)/a;this._renderer._curCamera._orbit(f,v,0)}else if(this.mouseButton===this.RIGHT){var b=l._getLocalAxes(),_=Math.sqrt(b.x[0]*b.x[0]+b.x[2]*b.x[2]);_!==0&&(b.x[0]/=_,b.x[2]/=_);var w=Math.sqrt(b.y[0]*b.y[0]+b.y[2]*b.y[2]);w!==0&&(b.y[0]/=w,b.y[2]/=w);var E=-1*i*(this.mouseX-this.pmouseX),C=-1*n*(this.mouseY-this.pmouseY);l.setPosition(l.eyeX+E*b.x[0]+C*b.z[0],l.eyeY,l.eyeZ+E*b.x[2]+C*b.z[2])}}return this}},h.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];h.default._validateParameters("debugMode",n);for(var l=this._registeredMethods.post.length-1;0<=l;l--)this._registeredMethods.post[l].toString()!==this._grid().toString()&&this._registeredMethods.post[l].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(l,1);n[0]===u.GRID?this.registerMethod("post",this._grid.call(this,n[1],n[2],n[3],n[4],n[5])):n[0]===u.AXES?this.registerMethod("post",this._axesIcon.call(this,n[1],n[2],n[3],n[4])):(this.registerMethod("post",this._grid.call(this,n[0],n[1],n[2],n[3],n[4])),this.registerMethod("post",this._axesIcon.call(this,n[5],n[6],n[7],n[8])))},h.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var i=this._registeredMethods.post.length-1;0<=i;i--)this._registeredMethods.post[i].toString()!==this._grid().toString()&&this._registeredMethods.post[i].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(i,1)},h.default.prototype._grid=function(i,n,o,l,a){i===void 0&&(i=this.width/2),n===void 0&&(n=Math.round(i/30)<4?4:Math.round(i/30)),o===void 0&&(o=0),l===void 0&&(l=0),a===void 0&&(a=0);var f=i/n,v=i/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var b=0;b<=n;b++)this.beginShape(this.LINES),this.vertex(-v+o,l,b*f-v+a),this.vertex(+v+o,l,b*f-v+a),this.endShape();for(var _=0;_<=n;_++)this.beginShape(this.LINES),this.vertex(_*f-v+o,l,-v+a),this.vertex(_*f-v+o,l,+v+a),this.endShape();this.pop()}},h.default.prototype._axesIcon=function(i,n,o,l){return i===void 0&&(i=40<this.width/20?this.width/20:40),n===void 0&&(n=-this.width/4),o===void 0&&(o=n),l===void 0&&(l=n),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(n,o,l),this.vertex(n+i,o,l),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(n,o,l),this.vertex(n,o+i,l),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(n,o,l),this.vertex(n,o,l+i),this.endShape(),this.pop()}};var c=h.default;m.default=c},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182}],309:[function(t,g,m){function p(i){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(i)}Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r,h=(r=t("../core/main"))&&r.__esModule?r:{default:r},u=function(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var n=d();if(n&&n.has(i))return n.get(i);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){var f=l?Object.getOwnPropertyDescriptor(i,a):null;f&&(f.get||f.set)?Object.defineProperty(o,a,f):o[a]=i[a]}return o.default=i,n&&n.set(i,o),o}(t("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return d=function(){return i},i}h.default.prototype.ambientLight=function(i,n,o,l){this._assert3d("ambientLight"),h.default._validateParameters("ambientLight",arguments);var a=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(a._array[0],a._array[1],a._array[2]),this._renderer._enableLighting=!0,this},h.default.prototype.specularColor=function(i,n,o){this._assert3d("specularColor"),h.default._validateParameters("specularColor",arguments);var l=this.color.apply(this,arguments);return this._renderer.specularColors=[l._array[0],l._array[1],l._array[2]],this},h.default.prototype.directionalLight=function(i,n,o,l,a,f){var v,b,_,w;this._assert3d("directionalLight"),h.default._validateParameters("directionalLight",arguments),v=i instanceof h.default.Color?i:this.color(i,n,o);var E=arguments[arguments.length-1];w=typeof E=="number"?(b=arguments[arguments.length-3],_=arguments[arguments.length-2],arguments[arguments.length-1]):(b=E.x,_=E.y,E.z);var C=Math.sqrt(b*b+_*_+w*w);return this._renderer.directionalLightDirections.push(b/C,_/C,w/C),this._renderer.directionalLightDiffuseColors.push(v._array[0],v._array[1],v._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},h.default.prototype.pointLight=function(i,n,o,l,a,f){var v,b,_,w;this._assert3d("pointLight"),h.default._validateParameters("pointLight",arguments),v=i instanceof h.default.Color?i:this.color(i,n,o);var E=arguments[arguments.length-1];return w=typeof E=="number"?(b=arguments[arguments.length-3],_=arguments[arguments.length-2],arguments[arguments.length-1]):(b=E.x,_=E.y,E.z),this._renderer.pointLightPositions.push(b,_,w),this._renderer.pointLightDiffuseColors.push(v._array[0],v._array[1],v._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},h.default.prototype.lights=function(){if(this._assert3d("lights"),this._colorMode===u.RGB)this.ambientLight(128,128,128),this.directionalLight(128,128,128,0,0,-1);else{var i=this._colorMaxes[this._colorMode][2];this.ambientLight(0,0,i),this.directionalLight(0,0,i,0,0,-1)}return this},h.default.prototype.lightFalloff=function(i,n,o){return this._assert3d("lightFalloff"),h.default._validateParameters("lightFalloff",arguments),i<0&&(i=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),n<0&&(n=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),o<0&&(o=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),i===0&&n===0&&o===0&&(i=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=i,this._renderer.linearAttenuation=n,this._renderer.quadraticAttenuation=o,this},h.default.prototype.spotLight=function(i,n,o,l,a,f,v,b,_,w,E){var C,A,L;this._assert3d("spotLight"),h.default._validateParameters("spotLight",arguments);var P=arguments.length;switch(P){case 11:case 10:C=this.color(i,n,o),A=new h.default.Vector(l,a,f),L=new h.default.Vector(v,b,_);break;case 9:i instanceof h.default.Color?(C=i,A=new h.default.Vector(n,o,l),L=new h.default.Vector(a,f,v),w=b,E=_):l instanceof h.default.Vector?(C=this.color(i,n,o),A=l,L=new h.default.Vector(a,f,v),w=b,E=_):v instanceof h.default.Vector?(C=this.color(i,n,o),A=new h.default.Vector(l,a,f),L=v,w=b,E=_):(C=this.color(i,n,o),A=new h.default.Vector(l,a,f),L=new h.default.Vector(v,b,_));break;case 8:w=(L=i instanceof h.default.Color?(C=i,A=new h.default.Vector(n,o,l),new h.default.Vector(a,f,v)):l instanceof h.default.Vector?(C=this.color(i,n,o),A=l,new h.default.Vector(a,f,v)):(C=this.color(i,n,o),A=new h.default.Vector(l,a,f),v),b);break;case 7:i instanceof h.default.Color&&n instanceof h.default.Vector?(C=i,A=n,L=new h.default.Vector(o,l,a),w=f,E=v):i instanceof h.default.Color&&a instanceof h.default.Vector?(C=i,A=new h.default.Vector(n,o,l),L=a,w=f,E=v):l instanceof h.default.Vector&&a instanceof h.default.Vector?(C=this.color(i,n,o),A=l,L=a,w=f,E=v):L=i instanceof h.default.Color?(C=i,A=new h.default.Vector(n,o,l),new h.default.Vector(a,f,v)):l instanceof h.default.Vector?(C=this.color(i,n,o),A=l,new h.default.Vector(a,f,v)):(C=this.color(i,n,o),A=new h.default.Vector(l,a,f),v);break;case 6:l instanceof h.default.Vector&&a instanceof h.default.Vector?(C=this.color(i,n,o),A=l,L=a,w=f):i instanceof h.default.Color&&a instanceof h.default.Vector?(C=i,A=new h.default.Vector(n,o,l),L=a,w=f):i instanceof h.default.Color&&n instanceof h.default.Vector&&(C=i,A=n,L=new h.default.Vector(o,l,a),w=f);break;case 5:i instanceof h.default.Color&&n instanceof h.default.Vector&&o instanceof h.default.Vector?(C=i,A=n,L=o,w=l,E=a):l instanceof h.default.Vector&&a instanceof h.default.Vector?(C=this.color(i,n,o),A=l,L=a):i instanceof h.default.Color&&a instanceof h.default.Vector?(C=i,A=new h.default.Vector(n,o,l),L=a):i instanceof h.default.Color&&n instanceof h.default.Vector&&(C=i,A=n,L=new h.default.Vector(o,l,a));break;case 4:C=i,A=n,L=o,w=l;break;case 3:C=i,A=n,L=o;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(P<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(C._array[0],C._array[1],C._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(A.x,A.y,A.z),L.normalize(),this._renderer.spotLightDirections.push(L.x,L.y,L.z),w===void 0&&(w=Math.PI/3),E!==void 0&&E<1?(E=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):E===void 0&&(E=100),w=this._renderer._pInst._toRadians(w),this._renderer.spotLightAngle.push(Math.cos(w)),this._renderer.spotLightConc.push(E),this._renderer._enableLighting=!0,this},h.default.prototype.noLights=function(){return this._assert3d("noLights"),h.default._validateParameters("noLights",arguments),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this};var c=h.default;m.default=c},{"../core/constants":253,"../core/main":264}],310:[function(t,g,m){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};function h(d,c,i){for(var n=0,o=d.length;n<o;n++)if(d[n]!==c.getUint8(i+n,!1))return!1;return!0}t("./p5.Geometry"),r.default.prototype.loadModel=function(d){var c,i,n;r.default._validateParameters("loadModel",arguments);var o=d.slice(-4);typeof arguments[1]=="boolean"?(c=arguments[1],i=arguments[2],n=arguments[3],arguments[4]!==void 0&&(o=arguments[4])):(c=!1,i=arguments[1],n=arguments[2],arguments[3]!==void 0&&(o=arguments[3]));var l=new r.default.Geometry;l.gid="".concat(d,"|").concat(c);var a=this;return o.match(/\.stl$/i)?this.httpDo(d,"GET","arrayBuffer",function(f){(function(v,b){if(function(E){for(var C=new DataView(E),A=[115,111,108,105,100],L=0;L<5;L++)if(h(A,C,L))return!1;return!0}(b))(function(E,C){for(var A,L,P,R,N,I,O,U=new DataView(C),K=U.getUint32(80,!0),ee=!1,H=0;H<70;H++)U.getUint32(H,!1)===1129270351&&U.getUint8(H+4)===82&&U.getUint8(H+5)===61&&(ee=!0,R=[],N=U.getUint8(H+6)/255,I=U.getUint8(H+7)/255,O=U.getUint8(H+8)/255);for(var te=0;te<K;te++){var Z=84+50*te,ge=U.getFloat32(Z,!0),$=U.getFloat32(4+Z,!0),se=U.getFloat32(8+Z,!0);if(ee){var z=U.getUint16(48+Z,!0);P=(32768&z)==0?(A=(31&z)/31,L=(z>>5&31)/31,(z>>10&31)/31):(A=N,L=I,O)}for(var de=new r.default.Vector(ge,$,se),re=1;re<=3;re++){var ie=Z+12*re,j=new r.default.Vector(U.getFloat32(ie,!0),U.getFloat32(4+ie,!0),U.getFloat32(8+ie,!0));E.vertices.push(j),E.vertexNormals.push(de),ee&&R.push(A,L,P)}E.faces.push([3*te,3*te+1,3*te+2]),E.uvs.push([0,0],[0,0],[0,0])}})(v,b);else{var _=new DataView(b);if(!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");var w=new TextDecoder("utf-8").decode(_).split(`
`);(function(E,C){for(var A,L,P="",R=[],N=0;N<C.length;++N){for(var I=C[N].trim(),O=I.split(" "),U=0;U<O.length;++U)O[U]===""&&O.splice(U,1);if(O.length!==0)switch(P){case"":if(O[0]!=="solid")return console.error(I),console.error('Invalid state "'.concat(O[0],'", should be "solid"'));P="solid";break;case"solid":if(O[0]!=="facet"||O[1]!=="normal")return console.error(I),console.error('Invalid state "'.concat(O[0],'", should be "facet normal"'));A=new r.default.Vector(parseFloat(O[2]),parseFloat(O[3]),parseFloat(O[4])),E.vertexNormals.push(A,A,A),P="facet normal";break;case"facet normal":if(O[0]!=="outer"||O[1]!=="loop")return console.error(I),console.error('Invalid state "'.concat(O[0],'", should be "outer loop"'));P="vertex";break;case"vertex":if(O[0]==="vertex")L=new r.default.Vector(parseFloat(O[1]),parseFloat(O[2]),parseFloat(O[3])),E.vertices.push(L),E.uvs.push([0,0]),R.push(E.vertices.indexOf(L));else{if(O[0]!=="endloop")return console.error(I),console.error('Invalid state "'.concat(O[0],'", should be "vertex" or "endloop"'));E.faces.push(R),R=[],P="endloop"}break;case"endloop":if(O[0]!=="endfacet")return console.error(I),console.error('Invalid state "'.concat(O[0],'", should be "endfacet"'));P="endfacet";break;case"endfacet":if(O[0]!=="endsolid"){if(O[0]!=="facet"||O[1]!=="normal")return console.error(I),console.error('Invalid state "'.concat(O[0],'", should be "endsolid" or "facet normal"'));A=new r.default.Vector(parseFloat(O[2]),parseFloat(O[3]),parseFloat(O[4])),E.vertexNormals.push(A,A,A),P="facet normal"}break;default:console.error('Invalid state "'.concat(P,'"'))}}})(v,w)}})(l,f),c&&l.normalize(),a._decrementPreload(),typeof i=="function"&&i(l)},n):o.match(/\.obj$/i)?this.loadStrings(d,function(f){(function(v,b){for(var _={v:[],vt:[],vn:[]},w={},E=0;E<b.length;++E){var C=b[E].trim().split(/\b\s+/);if(0<C.length){if(C[0]==="v"||C[0]==="vn"){var A=new r.default.Vector(parseFloat(C[1]),parseFloat(C[2]),parseFloat(C[3]));_[C[0]].push(A)}else if(C[0]==="vt"){var L=[parseFloat(C[1]),1-parseFloat(C[2])];_[C[0]].push(L)}else if(C[0]==="f")for(var P=3;P<C.length;++P){for(var R=[],N=[1,P-1,P],I=0;I<N.length;++I){var O=C[N[I]],U=0;if(w[O]!==void 0)U=w[O];else{for(var K=O.split("/"),ee=0;ee<K.length;ee++)K[ee]=parseInt(K[ee])-1;U=w[O]=v.vertices.length,v.vertices.push(_.v[K[0]].copy()),_.vt[K[1]]?v.uvs.push(_.vt[K[1]].slice()):v.uvs.push([0,0]),_.vn[K[2]]&&v.vertexNormals.push(_.vn[K[2]].copy())}R.push(U)}R[0]!==R[1]&&R[0]!==R[2]&&R[1]!==R[2]&&v.faces.push(R)}}}v.vertexNormals.length===0&&v.computeNormals()})(l,f),c&&l.normalize(),a._decrementPreload(),typeof i=="function"&&i(l)},n):(r.default._friendlyFileLoadError(3,d),n?n():console.error("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),l},r.default.prototype.model=function(d){this._assert3d("model"),r.default._validateParameters("model",arguments),0<d.vertices.length&&(this._renderer.geometryInHash(d.gid)||(d._makeTriangleEdges()._edgesToVertices(),this._renderer.createBuffers(d.gid,d)),this._renderer.drawBuffers(d.gid))};var u=r.default;m.default=u},{"../core/main":264,"./p5.Geometry":313,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],311:[function(t,g,m){function p(i){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(i)}t("core-js/modules/es.array.join"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r,h=(r=t("../core/main"))&&r.__esModule?r:{default:r},u=function(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var n=d();if(n&&n.has(i))return n.get(i);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){var f=l?Object.getOwnPropertyDescriptor(i,a):null;f&&(f.get||f.set)?Object.defineProperty(o,a,f):o[a]=i[a]}return o.default=i,n&&n.set(i,o),o}(t("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return d=function(){return i},i}t("./p5.Texture"),h.default.prototype.loadShader=function(i,n,o,l){h.default._validateParameters("loadShader",arguments),l=l||console.error;function a(){v._decrementPreload(),o&&o(f)}var f=new h.default.Shader,v=this,b=!1,_=!1;return this.loadStrings(i,function(w){f._vertSrc=w.join(`
`),_=!0,b&&a()},l),this.loadStrings(n,function(w){f._fragSrc=w.join(`
`),b=!0,_&&a()},l),f},h.default.prototype.createShader=function(i,n){return this._assert3d("createShader"),h.default._validateParameters("createShader",arguments),new h.default.Shader(this._renderer,i,n)},h.default.prototype.shader=function(i){return this._assert3d("shader"),h.default._validateParameters("shader",arguments),i._renderer===void 0&&(i._renderer=this._renderer),i.init(),i.isStrokeShader()?this._renderer.userStrokeShader=i:(this._renderer.userFillShader=i,this._renderer._useNormalMaterial=!1),this},h.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},h.default.prototype.texture=function(i){return this._assert3d("texture"),h.default._validateParameters("texture",arguments),i.gifProperties&&i._animateGif(this),this._renderer.drawMode=u.TEXTURE,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._tex=i,this._renderer._setProperty("_doFill",!0),this},h.default.prototype.textureMode=function(i){i!==u.IMAGE&&i!==u.NORMAL?console.warn("You tried to set ".concat(i," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=i},h.default.prototype.textureWrap=function(i){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:i;this._renderer.textureWrapX=i,this._renderer.textureWrapY=n;for(var o=this._renderer.textures,l=0;l<o.length;l++)o[l].setWrapMode(i,n)},h.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return h.default._validateParameters("normalMaterial",n),this._renderer.drawMode=u.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},h.default.prototype.ambientMaterial=function(i,n,o){this._assert3d("ambientMaterial"),h.default._validateParameters("ambientMaterial",arguments);var l=h.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=l._array,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this._renderer._setProperty("_doFill",!0),this},h.default.prototype.emissiveMaterial=function(i,n,o,l){this._assert3d("emissiveMaterial"),h.default._validateParameters("emissiveMaterial",arguments);var a=h.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=a._array,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},h.default.prototype.specularMaterial=function(i,n,o,l){this._assert3d("specularMaterial"),h.default._validateParameters("specularMaterial",arguments);var a=h.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=a._array,this._renderer._useSpecularMaterial=!0,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},h.default.prototype.shininess=function(i){return this._assert3d("shininess"),h.default._validateParameters("shininess",arguments),i<1&&(i=1),this._renderer._useShininess=i,this},h.default.RendererGL.prototype._applyColorBlend=function(i){var n=this.GL,o=this.drawMode===u.TEXTURE||i[i.length-1]<1||this._isErasing;return o!==this._isBlending&&(o||this.curBlendMode!==u.BLEND&&this.curBlendMode!==u.ADD?n.enable(n.BLEND):n.disable(n.BLEND),n.depthMask(!0),this._isBlending=o),this._applyBlendMode(),i},h.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var i=this.GL;switch(this.curBlendMode){case u.BLEND:case u.ADD:i.blendEquation(i.FUNC_ADD),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA);break;case u.REMOVE:i.blendEquation(i.FUNC_REVERSE_SUBTRACT),i.blendFunc(i.SRC_ALPHA,i.DST_ALPHA);break;case u.MULTIPLY:i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD),i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ONE,i.ONE);break;case u.SCREEN:i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD),i.blendFuncSeparate(i.ONE_MINUS_DST_COLOR,i.ONE,i.ONE,i.ONE);break;case u.EXCLUSION:i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD),i.blendFuncSeparate(i.ONE_MINUS_DST_COLOR,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE);break;case u.REPLACE:i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO);break;case u.SUBTRACT:i.blendEquationSeparate(i.FUNC_REVERSE_SUBTRACT,i.FUNC_ADD),i.blendFuncSeparate(i.SRC_ALPHA,i.ONE,i.ONE,i.ONE);break;case u.DARKEST:this.blendExt?(i.blendEquationSeparate(this.blendExt.MIN_EXT,i.FUNC_ADD),i.blendFuncSeparate(i.ONE,i.ONE,i.ONE,i.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case u.LIGHTEST:this.blendExt?(i.blendEquationSeparate(this.blendExt.MAX_EXT,i.FUNC_ADD),i.blendFuncSeparate(i.ONE,i.ONE,i.ONE,i.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var c=h.default;m.default=c},{"../core/constants":253,"../core/main":264,"./p5.Texture":320,"core-js/modules/es.array.join":159}],312:[function(t,g,m){Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};r.default.prototype.camera=function(){var u;this._assert3d("camera");for(var d=arguments.length,c=new Array(d),i=0;i<d;i++)c[i]=arguments[i];return r.default._validateParameters("camera",c),(u=this._renderer._curCamera).camera.apply(u,c),this},r.default.prototype.perspective=function(){var u;this._assert3d("perspective");for(var d=arguments.length,c=new Array(d),i=0;i<d;i++)c[i]=arguments[i];return r.default._validateParameters("perspective",c),(u=this._renderer._curCamera).perspective.apply(u,c),this},r.default.prototype.ortho=function(){var u;this._assert3d("ortho");for(var d=arguments.length,c=new Array(d),i=0;i<d;i++)c[i]=arguments[i];return r.default._validateParameters("ortho",c),(u=this._renderer._curCamera).ortho.apply(u,c),this},r.default.prototype.frustum=function(){var u;this._assert3d("frustum");for(var d=arguments.length,c=new Array(d),i=0;i<d;i++)c[i]=arguments[i];return r.default._validateParameters("frustum",c),(u=this._renderer._curCamera).frustum.apply(u,c),this},r.default.prototype.createCamera=function(){this._assert3d("createCamera");var u=new r.default.Camera(this._renderer);return u._computeCameraDefaultSettings(),u._setDefaultCamera(),this._renderer._curCamera=u},r.default.Camera=function(u){this._renderer=u,this.cameraType="default",this.cameraMatrix=new r.default.Matrix,this.projMatrix=new r.default.Matrix},r.default.Camera.prototype.perspective=function(u,d,c,i){this.cameraType=0<arguments.length?"custom":"default",u===void 0?(u=this.defaultCameraFOV,this.cameraFOV=u):this.cameraFOV=this._renderer._pInst._toRadians(u),d===void 0&&(d=this.defaultAspectRatio),c===void 0&&(c=this.defaultCameraNear),i===void 0&&(i=this.defaultCameraFar),c<=1e-4&&(c=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),i<c&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=d,this.cameraNear=c,this.cameraFar=i,this.projMatrix=r.default.Matrix.identity();var n=1/Math.tan(this.cameraFOV/2),o=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(n/d,0,0,0,0,-n,0,0,0,0,(i+c)*o,-1,0,0,2*i*c*o,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])},r.default.Camera.prototype.ortho=function(u,d,c,i,n,o){u===void 0&&(u=-this._renderer.width/2),d===void 0&&(d=this._renderer.width/2),c===void 0&&(c=-this._renderer.height/2),i===void 0&&(i=this._renderer.height/2),n===void 0&&(n=0),o===void 0&&(o=Math.max(this._renderer.width,this._renderer.height));var l=d-u,a=i-c,f=o-n,v=2/l,b=2/a,_=-2/f,w=-(d+u)/l,E=-(i+c)/a,C=-(o+n)/f;this.projMatrix=r.default.Matrix.identity(),this.projMatrix.set(v,0,0,0,0,-b,0,0,0,0,_,0,w,E,C,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},r.default.Camera.prototype.frustum=function(u,d,c,i,n,o){u===void 0&&(u=-this._renderer.width/2),d===void 0&&(d=this._renderer.width/2),c===void 0&&(c=-this._renderer.height/2),i===void 0&&(i=this._renderer.height/2),n===void 0&&(n=0),o===void 0&&(o=Math.max(this._renderer.width,this._renderer.height));var l=d-u,a=i-c,f=o-n,v=2*n/l,b=2*n/a,_=-2*o*n/f,w=(d+u)/l,E=(i+c)/a,C=-(o+n)/f;this.projMatrix=r.default.Matrix.identity(),this.projMatrix.set(v,0,0,0,0,b,0,0,w,E,C,-1,0,0,_,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},r.default.Camera.prototype._rotateView=function(u,d,c,i){var n=this.centerX,o=this.centerY,l=this.centerZ;n-=this.eyeX,o-=this.eyeY,l-=this.eyeZ;var a=r.default.Matrix.identity(this._renderer._pInst);a.rotate(this._renderer._pInst._toRadians(u),d,c,i);var f=[n*a.mat4[0]+o*a.mat4[4]+l*a.mat4[8],n*a.mat4[1]+o*a.mat4[5]+l*a.mat4[9],n*a.mat4[2]+o*a.mat4[6]+l*a.mat4[10]];f[0]+=this.eyeX,f[1]+=this.eyeY,f[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,f[0],f[1],f[2],this.upX,this.upY,this.upZ)},r.default.Camera.prototype.pan=function(u){var d=this._getLocalAxes();this._rotateView(u,d.y[0],d.y[1],d.y[2])},r.default.Camera.prototype.tilt=function(u){var d=this._getLocalAxes();this._rotateView(u,d.x[0],d.x[1],d.x[2])},r.default.Camera.prototype.lookAt=function(u,d,c){this.camera(this.eyeX,this.eyeY,this.eyeZ,u,d,c,this.upX,this.upY,this.upZ)},r.default.Camera.prototype.camera=function(u,d,c,i,n,o,l,a,f){u===void 0&&(u=this.defaultEyeX,d=this.defaultEyeY,c=this.defaultEyeZ,i=u,n=d,a=1,f=l=o=0),this.eyeX=u,this.eyeY=d,this.eyeZ=c,i!==void 0&&(this.centerX=i,this.centerY=n,this.centerZ=o),l!==void 0&&(this.upX=l,this.upY=a,this.upZ=f);var v=this._getLocalAxes();this.cameraMatrix.set(v.x[0],v.y[0],v.z[0],0,v.x[1],v.y[1],v.z[1],0,v.x[2],v.y[2],v.z[2],0,0,0,0,1);var b=-u,_=-d,w=-c;return this.cameraMatrix.translate([b,_,w]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this},r.default.Camera.prototype.move=function(u,d,c){var i=this._getLocalAxes(),n=[i.x[0]*u,i.x[1]*u,i.x[2]*u],o=[i.y[0]*d,i.y[1]*d,i.y[2]*d],l=[i.z[0]*c,i.z[1]*c,i.z[2]*c];this.camera(this.eyeX+n[0]+o[0]+l[0],this.eyeY+n[1]+o[1]+l[1],this.eyeZ+n[2]+o[2]+l[2],this.centerX+n[0]+o[0]+l[0],this.centerY+n[1]+o[1]+l[1],this.centerZ+n[2]+o[2]+l[2],0,1,0)},r.default.Camera.prototype.setPosition=function(u,d,c){var i=u-this.eyeX,n=d-this.eyeY,o=c-this.eyeZ;this.camera(u,d,c,this.centerX+i,this.centerY+n,this.centerZ+o,0,1,0)},r.default.Camera.prototype._computeCameraDefaultSettings=function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ},r.default.Camera.prototype._setDefaultCamera=function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"},r.default.Camera.prototype._resize=function(){this.cameraType==="default"?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)},r.default.Camera.prototype.copy=function(){var u=new r.default.Camera(this._renderer);return u.cameraFOV=this.cameraFOV,u.aspectRatio=this.aspectRatio,u.eyeX=this.eyeX,u.eyeY=this.eyeY,u.eyeZ=this.eyeZ,u.centerX=this.centerX,u.centerY=this.centerY,u.centerZ=this.centerZ,u.cameraNear=this.cameraNear,u.cameraFar=this.cameraFar,u.cameraType=this.cameraType,u.cameraMatrix=this.cameraMatrix.copy(),u.projMatrix=this.projMatrix.copy(),u},r.default.Camera.prototype._getLocalAxes=function(){var u=this.eyeX-this.centerX,d=this.eyeY-this.centerY,c=this.eyeZ-this.centerZ,i=Math.sqrt(u*u+d*d+c*c);i!==0&&(u/=i,d/=i,c/=i);var n=this.upX,o=this.upY,l=this.upZ,a=o*c-l*d,f=-n*c+l*u,v=n*d-o*u;n=d*v-c*f,o=-u*v+c*a,l=u*f-d*a;var b=Math.sqrt(a*a+f*f+v*v);b!==0&&(a/=b,f/=b,v/=b);var _=Math.sqrt(n*n+o*o+l*l);return _!==0&&(n/=_,o/=_,l/=_),{x:[a,f,v],y:[n,o,l],z:[u,d,c]}},r.default.Camera.prototype._orbit=function(u,d,c){var i=this.eyeX-this.centerX,n=this.eyeY-this.centerY,o=this.eyeZ-this.centerZ,l=Math.sqrt(i*i+n*n+o*o),a=Math.atan2(i,o),f=Math.acos(Math.max(-1,Math.min(1,n/l)));a+=u,(l+=c)<0&&(l=.1),(f+=d)>Math.PI?f=Math.PI:f<=0&&(f=.001);var v=Math.sin(f)*l*Math.sin(a),b=Math.cos(f)*l,_=Math.sin(f)*l*Math.cos(a);this.camera(v+this.centerX,b+this.centerY,_+this.centerZ,this.centerX,this.centerY,this.centerZ,0,1,0)},r.default.Camera.prototype._isActive=function(){return this===this._renderer._curCamera},r.default.prototype.setCamera=function(u){this._renderer._curCamera=u,this._renderer.uPMatrix.set(u.projMatrix.mat4[0],u.projMatrix.mat4[1],u.projMatrix.mat4[2],u.projMatrix.mat4[3],u.projMatrix.mat4[4],u.projMatrix.mat4[5],u.projMatrix.mat4[6],u.projMatrix.mat4[7],u.projMatrix.mat4[8],u.projMatrix.mat4[9],u.projMatrix.mat4[10],u.projMatrix.mat4[11],u.projMatrix.mat4[12],u.projMatrix.mat4[13],u.projMatrix.mat4[14],u.projMatrix.mat4[15])};var h=r.default.Camera;m.default=h},{"../core/main":264}],313:[function(t,g,m){t("core-js/modules/es.string.sub"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};r.default.Geometry=function(u,d,c){return this.vertices=[],this.lineVertices=[],this.lineNormals=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.detailX=u!==void 0?u:1,this.detailY=d!==void 0?d:1,this.dirtyFlags={},c instanceof Function&&c.call(this),this},r.default.Geometry.prototype.reset=function(){this.lineVertices.length=0,this.lineNormals.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}},r.default.Geometry.prototype.computeFaces=function(){this.faces.length=0;for(var u,d,c,i,n=this.detailX+1,o=0;o<this.detailY;o++)for(var l=0;l<this.detailX;l++)d=(u=o*n+l)+1,c=(o+1)*n+l+1,i=(o+1)*n+l,this.faces.push([u,d,i]),this.faces.push([i,d,c]);return this},r.default.Geometry.prototype._getFaceNormal=function(u){var d=this.faces[u],c=this.vertices[d[0]],i=this.vertices[d[1]],n=this.vertices[d[2]],o=r.default.Vector.sub(i,c),l=r.default.Vector.sub(n,c),a=r.default.Vector.cross(o,l),f=r.default.Vector.mag(a),v=f/(r.default.Vector.mag(o)*r.default.Vector.mag(l));return v===0||isNaN(v)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),a):(1<v&&(v=1),a.mult(Math.asin(v)/f))},r.default.Geometry.prototype.computeNormals=function(){var u,d=this.vertexNormals,c=this.vertices,i=this.faces;for(u=d.length=0;u<c.length;++u)d.push(new r.default.Vector);for(var n=0;n<i.length;++n)for(var o=i[n],l=this._getFaceNormal(n),a=0;a<3;++a)d[o[a]].add(l);for(u=0;u<c.length;++u)d[u].normalize();return this},r.default.Geometry.prototype.averageNormals=function(){for(var u=0;u<=this.detailY;u++){var d=this.detailX+1,c=r.default.Vector.add(this.vertexNormals[u*d],this.vertexNormals[u*d+this.detailX]);c=r.default.Vector.div(c,2),this.vertexNormals[u*d]=c,this.vertexNormals[u*d+this.detailX]=c}return this},r.default.Geometry.prototype.averagePoleNormals=function(){for(var u=new r.default.Vector(0,0,0),d=0;d<this.detailX;d++)u.add(this.vertexNormals[d]);u=r.default.Vector.div(u,this.detailX);for(var c=0;c<this.detailX;c++)this.vertexNormals[c]=u;u=new r.default.Vector(0,0,0);for(var i=this.vertices.length-1;i>this.vertices.length-1-this.detailX;i--)u.add(this.vertexNormals[i]);u=r.default.Vector.div(u,this.detailX);for(var n=this.vertices.length-1;n>this.vertices.length-1-this.detailX;n--)this.vertexNormals[n]=u;return this},r.default.Geometry.prototype._makeTriangleEdges=function(){if(this.edges.length=0,Array.isArray(this.strokeIndices))for(var u=0,d=this.strokeIndices.length;u<d;u++)this.edges.push(this.strokeIndices[u]);else for(var c=0;c<this.faces.length;c++)this.edges.push([this.faces[c][0],this.faces[c][1]]),this.edges.push([this.faces[c][1],this.faces[c][2]]),this.edges.push([this.faces[c][2],this.faces[c][0]]);return this},r.default.Geometry.prototype._edgesToVertices=function(){this.lineVertices.length=0;for(var u=this.lineNormals.length=0;u<this.edges.length;u++){var d=this.vertices[this.edges[u][0]],c=this.vertices[this.edges[u][1]],i=c.copy().sub(d).normalize(),n=d.array(),o=d.array(),l=c.array(),a=c.array(),f=i.array(),v=i.array();f.push(1),v.push(-1),this.lineNormals.push(f,v,f,f,v,v),this.lineVertices.push(n,o,l,l,o,a)}return this},r.default.Geometry.prototype.normalize=function(){if(0<this.vertices.length){for(var u=this.vertices[0].copy(),d=this.vertices[0].copy(),c=0;c<this.vertices.length;c++)u.x=Math.max(u.x,this.vertices[c].x),d.x=Math.min(d.x,this.vertices[c].x),u.y=Math.max(u.y,this.vertices[c].y),d.y=Math.min(d.y,this.vertices[c].y),u.z=Math.max(u.z,this.vertices[c].z),d.z=Math.min(d.z,this.vertices[c].z);for(var i=r.default.Vector.lerp(u,d,.5),n=r.default.Vector.sub(u,d),o=200/Math.max(Math.max(n.x,n.y),n.z),l=0;l<this.vertices.length;l++)this.vertices[l].sub(i),this.vertices[l].mult(o)}return this};var h=r.default.Geometry;m.default=h},{"../core/main":264,"core-js/modules/es.string.sub":192}],314:[function(t,g,m){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p},h=Array,u=function(c){return c instanceof Array};typeof Float32Array!="undefined"&&(h=Float32Array,u=function(c){return c instanceof Array||c instanceof Float32Array}),r.default.Matrix=function(){for(var c=new Array(arguments.length),i=0;i<c.length;++i)c[i]=arguments[i];return c.length&&c[c.length-1]instanceof r.default&&(this.p5=c[c.length-1]),c[0]==="mat3"?this.mat3=Array.isArray(c[1])?c[1]:new h([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(c[0])?c[0]:new h([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},r.default.Matrix.prototype.set=function(c){return c instanceof r.default.Matrix?this.mat4=c.mat4:u(c)?this.mat4=c:arguments.length===16&&(this.mat4[0]=c,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this},r.default.Matrix.prototype.get=function(){return new r.default.Matrix(this.mat4,this.p5)},r.default.Matrix.prototype.copy=function(){var c=new r.default.Matrix(this.p5);return c.mat4[0]=this.mat4[0],c.mat4[1]=this.mat4[1],c.mat4[2]=this.mat4[2],c.mat4[3]=this.mat4[3],c.mat4[4]=this.mat4[4],c.mat4[5]=this.mat4[5],c.mat4[6]=this.mat4[6],c.mat4[7]=this.mat4[7],c.mat4[8]=this.mat4[8],c.mat4[9]=this.mat4[9],c.mat4[10]=this.mat4[10],c.mat4[11]=this.mat4[11],c.mat4[12]=this.mat4[12],c.mat4[13]=this.mat4[13],c.mat4[14]=this.mat4[14],c.mat4[15]=this.mat4[15],c},r.default.Matrix.identity=function(c){return new r.default.Matrix(c)},r.default.Matrix.prototype.transpose=function(c){var i,n,o,l,a,f;return c instanceof r.default.Matrix?(i=c.mat4[1],n=c.mat4[2],o=c.mat4[3],l=c.mat4[6],a=c.mat4[7],f=c.mat4[11],this.mat4[0]=c.mat4[0],this.mat4[1]=c.mat4[4],this.mat4[2]=c.mat4[8],this.mat4[3]=c.mat4[12],this.mat4[4]=i,this.mat4[5]=c.mat4[5],this.mat4[6]=c.mat4[9],this.mat4[7]=c.mat4[13],this.mat4[8]=n,this.mat4[9]=l,this.mat4[10]=c.mat4[10],this.mat4[11]=c.mat4[14],this.mat4[12]=o,this.mat4[13]=a,this.mat4[14]=f,this.mat4[15]=c.mat4[15]):u(c)&&(i=c[1],n=c[2],o=c[3],l=c[6],a=c[7],f=c[11],this.mat4[0]=c[0],this.mat4[1]=c[4],this.mat4[2]=c[8],this.mat4[3]=c[12],this.mat4[4]=i,this.mat4[5]=c[5],this.mat4[6]=c[9],this.mat4[7]=c[13],this.mat4[8]=n,this.mat4[9]=l,this.mat4[10]=c[10],this.mat4[11]=c[14],this.mat4[12]=o,this.mat4[13]=a,this.mat4[14]=f,this.mat4[15]=c[15]),this},r.default.Matrix.prototype.invert=function(c){var i,n,o,l,a,f,v,b,_,w,E,C,A,L,P,R;c instanceof r.default.Matrix?(i=c.mat4[0],n=c.mat4[1],o=c.mat4[2],l=c.mat4[3],a=c.mat4[4],f=c.mat4[5],v=c.mat4[6],b=c.mat4[7],_=c.mat4[8],w=c.mat4[9],E=c.mat4[10],C=c.mat4[11],A=c.mat4[12],L=c.mat4[13],P=c.mat4[14],R=c.mat4[15]):u(c)&&(i=c[0],n=c[1],o=c[2],l=c[3],a=c[4],f=c[5],v=c[6],b=c[7],_=c[8],w=c[9],E=c[10],C=c[11],A=c[12],L=c[13],P=c[14],R=c[15]);var N=i*f-n*a,I=i*v-o*a,O=i*b-l*a,U=n*v-o*f,K=n*b-l*f,ee=o*b-l*v,H=_*L-w*A,te=_*P-E*A,Z=_*R-C*A,ge=w*P-E*L,$=w*R-C*L,se=E*R-C*P,z=N*se-I*$+O*ge+U*Z-K*te+ee*H;return z?(z=1/z,this.mat4[0]=(f*se-v*$+b*ge)*z,this.mat4[1]=(o*$-n*se-l*ge)*z,this.mat4[2]=(L*ee-P*K+R*U)*z,this.mat4[3]=(E*K-w*ee-C*U)*z,this.mat4[4]=(v*Z-a*se-b*te)*z,this.mat4[5]=(i*se-o*Z+l*te)*z,this.mat4[6]=(P*O-A*ee-R*I)*z,this.mat4[7]=(_*ee-E*O+C*I)*z,this.mat4[8]=(a*$-f*Z+b*H)*z,this.mat4[9]=(n*Z-i*$-l*H)*z,this.mat4[10]=(A*K-L*O+R*N)*z,this.mat4[11]=(w*O-_*K-C*N)*z,this.mat4[12]=(f*te-a*ge-v*H)*z,this.mat4[13]=(i*ge-n*te+o*H)*z,this.mat4[14]=(L*I-A*U-P*N)*z,this.mat4[15]=(_*U-w*I+E*N)*z,this):null},r.default.Matrix.prototype.invert3x3=function(){var c=this.mat3[0],i=this.mat3[1],n=this.mat3[2],o=this.mat3[3],l=this.mat3[4],a=this.mat3[5],f=this.mat3[6],v=this.mat3[7],b=this.mat3[8],_=b*l-a*v,w=-b*o+a*f,E=v*o-l*f,C=c*_+i*w+n*E;return C?(C=1/C,this.mat3[0]=_*C,this.mat3[1]=(-b*i+n*v)*C,this.mat3[2]=(a*i-n*l)*C,this.mat3[3]=w*C,this.mat3[4]=(b*c-n*f)*C,this.mat3[5]=(-a*c+n*o)*C,this.mat3[6]=E*C,this.mat3[7]=(-v*c+i*f)*C,this.mat3[8]=(l*c-i*o)*C,this):null},r.default.Matrix.prototype.transpose3x3=function(c){var i=c[1],n=c[2],o=c[5];return this.mat3[1]=c[3],this.mat3[2]=c[6],this.mat3[3]=i,this.mat3[5]=c[7],this.mat3[6]=n,this.mat3[7]=o,this},r.default.Matrix.prototype.inverseTranspose=function(c){this.mat3===void 0?console.error("sorry, this function only works with mat3"):(this.mat3[0]=c.mat4[0],this.mat3[1]=c.mat4[1],this.mat3[2]=c.mat4[2],this.mat3[3]=c.mat4[4],this.mat3[4]=c.mat4[5],this.mat3[5]=c.mat4[6],this.mat3[6]=c.mat4[8],this.mat3[7]=c.mat4[9],this.mat3[8]=c.mat4[10]);var i=this.invert3x3();if(i)i.transpose3x3(this.mat3);else for(var n=0;n<9;n++)this.mat3[n]=0;return this},r.default.Matrix.prototype.determinant=function(){var c=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],i=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],n=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],o=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],l=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],a=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],f=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],v=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],b=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],_=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],w=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return c*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-i*w+n*_+o*b-l*v+a*f},r.default.Matrix.prototype.mult=function(c){var i;if(c===this||c===this.mat4)i=this.copy().mat4;else if(c instanceof r.default.Matrix)i=c.mat4;else if(u(c))i=c;else{if(arguments.length!==16)return;i=arguments}var n=this.mat4[0],o=this.mat4[1],l=this.mat4[2],a=this.mat4[3];return this.mat4[0]=n*i[0]+o*i[4]+l*i[8]+a*i[12],this.mat4[1]=n*i[1]+o*i[5]+l*i[9]+a*i[13],this.mat4[2]=n*i[2]+o*i[6]+l*i[10]+a*i[14],this.mat4[3]=n*i[3]+o*i[7]+l*i[11]+a*i[15],n=this.mat4[4],o=this.mat4[5],l=this.mat4[6],a=this.mat4[7],this.mat4[4]=n*i[0]+o*i[4]+l*i[8]+a*i[12],this.mat4[5]=n*i[1]+o*i[5]+l*i[9]+a*i[13],this.mat4[6]=n*i[2]+o*i[6]+l*i[10]+a*i[14],this.mat4[7]=n*i[3]+o*i[7]+l*i[11]+a*i[15],n=this.mat4[8],o=this.mat4[9],l=this.mat4[10],a=this.mat4[11],this.mat4[8]=n*i[0]+o*i[4]+l*i[8]+a*i[12],this.mat4[9]=n*i[1]+o*i[5]+l*i[9]+a*i[13],this.mat4[10]=n*i[2]+o*i[6]+l*i[10]+a*i[14],this.mat4[11]=n*i[3]+o*i[7]+l*i[11]+a*i[15],n=this.mat4[12],o=this.mat4[13],l=this.mat4[14],a=this.mat4[15],this.mat4[12]=n*i[0]+o*i[4]+l*i[8]+a*i[12],this.mat4[13]=n*i[1]+o*i[5]+l*i[9]+a*i[13],this.mat4[14]=n*i[2]+o*i[6]+l*i[10]+a*i[14],this.mat4[15]=n*i[3]+o*i[7]+l*i[11]+a*i[15],this},r.default.Matrix.prototype.apply=function(c){var i;if(c===this||c===this.mat4)i=this.copy().mat4;else if(c instanceof r.default.Matrix)i=c.mat4;else if(u(c))i=c;else{if(arguments.length!==16)return;i=arguments}var n=this.mat4,o=n[0],l=n[4],a=n[8],f=n[12];n[0]=i[0]*o+i[1]*l+i[2]*a+i[3]*f,n[4]=i[4]*o+i[5]*l+i[6]*a+i[7]*f,n[8]=i[8]*o+i[9]*l+i[10]*a+i[11]*f,n[12]=i[12]*o+i[13]*l+i[14]*a+i[15]*f;var v=n[1],b=n[5],_=n[9],w=n[13];n[1]=i[0]*v+i[1]*b+i[2]*_+i[3]*w,n[5]=i[4]*v+i[5]*b+i[6]*_+i[7]*w,n[9]=i[8]*v+i[9]*b+i[10]*_+i[11]*w,n[13]=i[12]*v+i[13]*b+i[14]*_+i[15]*w;var E=n[2],C=n[6],A=n[10],L=n[14];n[2]=i[0]*E+i[1]*C+i[2]*A+i[3]*L,n[6]=i[4]*E+i[5]*C+i[6]*A+i[7]*L,n[10]=i[8]*E+i[9]*C+i[10]*A+i[11]*L,n[14]=i[12]*E+i[13]*C+i[14]*A+i[15]*L;var P=n[3],R=n[7],N=n[11],I=n[15];return n[3]=i[0]*P+i[1]*R+i[2]*N+i[3]*I,n[7]=i[4]*P+i[5]*R+i[6]*N+i[7]*I,n[11]=i[8]*P+i[9]*R+i[10]*N+i[11]*I,n[15]=i[12]*P+i[13]*R+i[14]*N+i[15]*I,this},r.default.Matrix.prototype.scale=function(c,i,n){return c instanceof r.default.Vector?(i=c.y,n=c.z,c=c.x):c instanceof Array&&(i=c[1],n=c[2],c=c[0]),this.mat4[0]*=c,this.mat4[1]*=c,this.mat4[2]*=c,this.mat4[3]*=c,this.mat4[4]*=i,this.mat4[5]*=i,this.mat4[6]*=i,this.mat4[7]*=i,this.mat4[8]*=n,this.mat4[9]*=n,this.mat4[10]*=n,this.mat4[11]*=n,this},r.default.Matrix.prototype.rotate=function(c,i,n,o){i instanceof r.default.Vector?(n=i.y,o=i.z,i=i.x):i instanceof Array&&(n=i[1],o=i[2],i=i[0]);var l=Math.sqrt(i*i+n*n+o*o);i*=1/l,n*=1/l,o*=1/l;var a=this.mat4[0],f=this.mat4[1],v=this.mat4[2],b=this.mat4[3],_=this.mat4[4],w=this.mat4[5],E=this.mat4[6],C=this.mat4[7],A=this.mat4[8],L=this.mat4[9],P=this.mat4[10],R=this.mat4[11],N=Math.sin(c),I=Math.cos(c),O=1-I,U=i*i*O+I,K=n*i*O+o*N,ee=o*i*O-n*N,H=i*n*O-o*N,te=n*n*O+I,Z=o*n*O+i*N,ge=i*o*O+n*N,$=n*o*O-i*N,se=o*o*O+I;return this.mat4[0]=a*U+_*K+A*ee,this.mat4[1]=f*U+w*K+L*ee,this.mat4[2]=v*U+E*K+P*ee,this.mat4[3]=b*U+C*K+R*ee,this.mat4[4]=a*H+_*te+A*Z,this.mat4[5]=f*H+w*te+L*Z,this.mat4[6]=v*H+E*te+P*Z,this.mat4[7]=b*H+C*te+R*Z,this.mat4[8]=a*ge+_*$+A*se,this.mat4[9]=f*ge+w*$+L*se,this.mat4[10]=v*ge+E*$+P*se,this.mat4[11]=b*ge+C*$+R*se,this},r.default.Matrix.prototype.translate=function(c){var i=c[0],n=c[1],o=c[2]||0;this.mat4[12]+=this.mat4[0]*i+this.mat4[4]*n+this.mat4[8]*o,this.mat4[13]+=this.mat4[1]*i+this.mat4[5]*n+this.mat4[9]*o,this.mat4[14]+=this.mat4[2]*i+this.mat4[6]*n+this.mat4[10]*o,this.mat4[15]+=this.mat4[3]*i+this.mat4[7]*n+this.mat4[11]*o},r.default.Matrix.prototype.rotateX=function(c){this.rotate(c,1,0,0)},r.default.Matrix.prototype.rotateY=function(c){this.rotate(c,0,1,0)},r.default.Matrix.prototype.rotateZ=function(c){this.rotate(c,0,0,1)},r.default.Matrix.prototype.perspective=function(c,i,n,o){var l=1/Math.tan(c/2),a=1/(n-o);return this.mat4[0]=l/i,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=l,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(o+n)*a,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*o*n*a,this.mat4[15]=0,this},r.default.Matrix.prototype.ortho=function(c,i,n,o,l,a){var f=1/(c-i),v=1/(n-o),b=1/(l-a);return this.mat4[0]=-2*f,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*v,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*b,this.mat4[11]=0,this.mat4[12]=(c+i)*f,this.mat4[13]=(o+n)*v,this.mat4[14]=(a+l)*b,this.mat4[15]=1,this};var d=r.default.Matrix;m.default=d},{"../core/main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223}],315:[function(t,g,m){t("core-js/modules/es.array.map"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};r.default.RenderBuffer=function(u,d,c,i,n,o){this.size=u,this.src=d,this.dst=c,this.attr=i,this._renderer=n,this.map=o},r.default.RenderBuffer.prototype._prepareBuffer=function(u,d){var c,i=d.attributes,n=this._renderer.GL;c=u.model?u.model:u;var o=i[this.attr];if(o){var l=u[this.dst],a=c[this.src];if(0<a.length){var f=!l;if(f&&(u[this.dst]=l=n.createBuffer()),n.bindBuffer(n.ARRAY_BUFFER,l),f||c.dirtyFlags[this.src]!==!1){var v=this.map,b=v?v(a):a;this._renderer._bindBuffer(l,n.ARRAY_BUFFER,b),c.dirtyFlags[this.src]=!1}d.enableAttrib(o,this.size)}}};var h=r.default.RenderBuffer;m.default=h},{"../core/main":264,"core-js/modules/es.array.map":161}],316:[function(t,g,m){function p(i){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r,h=(r=t("../core/main"))&&r.__esModule?r:{default:r},u=function(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var n=d();if(n&&n.has(i))return n.get(i);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){var f=l?Object.getOwnPropertyDescriptor(i,a):null;f&&(f.get||f.set)?Object.defineProperty(o,a,f):o[a]=i[a]}return o.default=i,n&&n.set(i,o),o}(t("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return d=function(){return i},i}t("./p5.RenderBuffer"),h.default.RendererGL.prototype.beginShape=function(i){return this.immediateMode.shapeMode=i!==void 0?i:u.TRIANGLE_FAN,this.immediateMode.geometry.reset(),this},h.default.RendererGL.prototype.vertex=function(i,n){var o,l,a;o=l=a=0,arguments.length===3?o=arguments[2]:arguments.length===4?(l=arguments[2],a=arguments[3]):arguments.length===5&&(o=arguments[2],l=arguments[3],a=arguments[4]);var f=new h.default.Vector(i,n,o);this.immediateMode.geometry.vertices.push(f),this.immediateMode.geometry.vertexNormals.push(this._currentNormal);var v=this.curFillColor||[.5,.5,.5,1];return this.immediateMode.geometry.vertexColors.push(v[0],v[1],v[2],v[3]),this.textureMode===u.IMAGE&&(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(l/=this._tex.width,a/=this._tex.height):this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(l,a),this.immediateMode._bezierVertex[0]=i,this.immediateMode._bezierVertex[1]=n,this.immediateMode._bezierVertex[2]=o,this.immediateMode._quadraticVertex[0]=i,this.immediateMode._quadraticVertex[1]=n,this.immediateMode._quadraticVertex[2]=o,this},h.default.RendererGL.prototype.normal=function(i,n,o){return i instanceof h.default.Vector?this._currentNormal=i:this._currentNormal=new h.default.Vector(i,n,o),this},h.default.RendererGL.prototype.endShape=function(i,n,o,l,a,f){return this.immediateMode.shapeMode===u.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this._processVertices.apply(this,arguments),this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},h.default.RendererGL.prototype._processVertices=function(i){if(this.immediateMode.geometry.vertices.length!==0){var n=this._doStroke&&this.drawMode!==u.TEXTURE,o=i===u.CLOSE;n&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,o),this.immediateMode.geometry._edgesToVertices());var l=this.immediateMode.shapeMode===u.TESS;(this.isBezier||this.isQuadratic||this.isCurve||l)&&this.immediateMode.shapeMode!==u.LINES&&this._tesselateShape()}},h.default.RendererGL.prototype._calculateEdges=function(i,n,o){var l=[],a=0;switch(i){case u.TRIANGLE_STRIP:for(a=0;a<n.length-2;a++)l.push([a,a+1]),l.push([a,a+2]);l.push([a,a+1]);break;case u.TRIANGLES:for(a=0;a<n.length-2;a+=3)l.push([a,a+1]),l.push([a+1,a+2]),l.push([a+2,a]);break;case u.LINES:for(a=0;a<n.length-1;a+=2)l.push([a,a+1]);break;default:for(a=0;a<n.length-1;a++)l.push([a,a+1])}return o&&l.push([n.length-1,0]),l},h.default.RendererGL.prototype._tesselateShape=function(){this.immediateMode.shapeMode=u.TRIANGLES;var i=[new Float32Array(this._vToNArray(this.immediateMode.geometry.vertices))],n=this._triangulate(i);this.immediateMode.geometry.vertices=[];for(var o=0,l=n.length;o<l;o+=3)this.vertex(n[o],n[o+1],n[o+2])},h.default.RendererGL.prototype._drawImmediateFill=function(){var i=this.GL,n=this._getImmediateFillShader();this._setFillUniforms(n);var o=!0,l=!1,a=void 0;try{for(var f,v=this.immediateMode.buffers.fill[Symbol.iterator]();!(o=(f=v.next()).done);o=!0)f.value._prepareBuffer(this.immediateMode.geometry,n)}catch(b){l=!0,a=b}finally{try{o||v.return==null||v.return()}finally{if(l)throw a}}this.immediateMode.shapeMode!==u.LINE_STRIP&&this.immediateMode.shapeMode!==u.LINES||(this.immediateMode.shapeMode=u.TRIANGLE_FAN),this._applyColorBlend(this.curFillColor),i.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),n.unbindShader()},h.default.RendererGL.prototype._drawImmediateStroke=function(){var i=this.GL,n=this._getImmediateStrokeShader();this._setStrokeUniforms(n);var o=!0,l=!1,a=void 0;try{for(var f,v=this.immediateMode.buffers.stroke[Symbol.iterator]();!(o=(f=v.next()).done);o=!0)f.value._prepareBuffer(this.immediateMode.geometry,n)}catch(b){l=!0,a=b}finally{try{o||v.return==null||v.return()}finally{if(l)throw a}}this._applyColorBlend(this.curStrokeColor),i.drawArrays(i.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),n.unbindShader()};var c=h.default.RendererGL;m.default=c},{"../core/constants":253,"../core/main":264,"./p5.RenderBuffer":315,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/web.dom-collections.iterator":229}],317:[function(t,g,m){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};t("./p5.RendererGL"),t("./p5.RenderBuffer");var h=0;r.default.RendererGL.prototype._initBufferDefaults=function(d){if(this._freeBuffers(d),1e3<++h){var c=Object.keys(this.retainedMode.geometry)[0];delete this.retainedMode.geometry[c],h--}return this.retainedMode.geometry[d]={}},r.default.RendererGL.prototype._freeBuffers=function(d){var c=this.retainedMode.geometry[d];if(c){delete this.retainedMode.geometry[d],h--;var i=this.GL;c.indexBuffer&&i.deleteBuffer(c.indexBuffer),n(this.retainedMode.buffers.stroke),n(this.retainedMode.buffers.fill)}function n(o){var l=!0,a=!1,f=void 0;try{for(var v,b=o[Symbol.iterator]();!(l=(v=b.next()).done);l=!0){var _=v.value;c[_.dst]&&(i.deleteBuffer(c[_.dst]),c[_.dst]=null)}}catch(w){a=!0,f=w}finally{try{l||b.return==null||b.return()}finally{if(a)throw f}}}},r.default.RendererGL.prototype.createBuffers=function(d,c){var i=this.GL,n=this._initBufferDefaults(d);n.model=c;var o=n.indexBuffer;if(c.faces.length){o=o||(n.indexBuffer=i.createBuffer());var l=r.default.RendererGL.prototype._flatten(c.faces),a=l.some(function(v){return 65535<v}),f=a?Uint32Array:Uint16Array;this._bindBuffer(o,i.ELEMENT_ARRAY_BUFFER,l,f),n.indexBufferType=a?i.UNSIGNED_INT:i.UNSIGNED_SHORT,n.vertexCount=3*c.faces.length}else o&&(i.deleteBuffer(o),n.indexBuffer=null),n.vertexCount=c.vertices?c.vertices.length:0;return n.lineVertexCount=c.lineVertices?c.lineVertices.length:0,n},r.default.RendererGL.prototype.drawBuffers=function(d){var c=this.GL,i=this.retainedMode.geometry[d];if(this._doStroke&&0<i.lineVertexCount){var n=this._getRetainedStrokeShader();this._setStrokeUniforms(n);var o=!0,l=!1,a=void 0;try{for(var f,v=this.retainedMode.buffers.stroke[Symbol.iterator]();!(o=(f=v.next()).done);o=!0)f.value._prepareBuffer(i,n)}catch(L){l=!0,a=L}finally{try{o||v.return==null||v.return()}finally{if(l)throw a}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(c.TRIANGLES,d),n.unbindShader()}if(this._doFill){var b=this._getRetainedFillShader();this._setFillUniforms(b);var _=!0,w=!1,E=void 0;try{for(var C,A=this.retainedMode.buffers.fill[Symbol.iterator]();!(_=(C=A.next()).done);_=!0)C.value._prepareBuffer(i,b)}catch(L){w=!0,E=L}finally{try{_||A.return==null||A.return()}finally{if(w)throw E}}i.indexBuffer&&this._bindBuffer(i.indexBuffer,c.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(c.TRIANGLES,d),b.unbindShader()}return this},r.default.RendererGL.prototype.drawBuffersScaled=function(d,c,i,n){var o=this.uMVMatrix.copy();try{this.uMVMatrix.scale(c,i,n),this.drawBuffers(d)}finally{this.uMVMatrix=o}},r.default.RendererGL.prototype._drawArrays=function(d,c){return this.GL.drawArrays(d,0,this.retainedMode.geometry[c].lineVertexCount),this},r.default.RendererGL.prototype._drawElements=function(d,c){var i=this.retainedMode.geometry[c],n=this.GL;if(i.indexBuffer){if(i.indexBufferType===n.UNSIGNED_INT&&!n.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");n.drawElements(n.TRIANGLES,i.vertexCount,i.indexBufferType,0)}else n.drawArrays(d||n.TRIANGLES,0,i.vertexCount)},r.default.RendererGL.prototype._drawPoints=function(d,c){var i=this.GL,n=this._getImmediatePointShader();this._setPointUniforms(n),this._bindBuffer(c,i.ARRAY_BUFFER,this._vToNArray(d),Float32Array,i.STATIC_DRAW),n.enableAttrib(n.attributes.aPosition,3),i.drawArrays(i.Points,0,d.length),n.unbindShader()};var u=r.default.RendererGL;m.default=u},{"../core/main":264,"./p5.RenderBuffer":315,"./p5.RendererGL":318,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.some":163,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/web.dom-collections.iterator":229}],318:[function(t,g,m){function p(a){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(a)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.float64-array"),t("core-js/modules/es.typed-array.int16-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r=c(t("../core/main")),h=function(a){if(a&&a.__esModule)return a;if(a===null||p(a)!=="object"&&typeof a!="function")return{default:a};var f=d();if(f&&f.has(a))return f.get(a);var v={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in a)if(Object.prototype.hasOwnProperty.call(a,_)){var w=b?Object.getOwnPropertyDescriptor(a,_):null;w&&(w.get||w.set)?Object.defineProperty(v,_,w):v[_]=a[_]}return v.default=a,f&&f.set(a,v),v}(t("../core/constants")),u=c(t("libtess"));t("./p5.Shader"),t("./p5.Camera"),t("../core/p5.Renderer"),t("./p5.Matrix"),t("path");function d(){if(typeof WeakMap!="function")return null;var a=new WeakMap;return d=function(){return a},a}function c(a){return a&&a.__esModule?a:{default:a}}function i(a){return function(f){if(Array.isArray(f)){for(var v=0,b=new Array(f.length);v<f.length;v++)b[v]=f[v];return b}}(a)||function(f){if(Symbol.iterator in Object(f)||Object.prototype.toString.call(f)==="[object Arguments]")return Array.from(f)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var n=`precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];

uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  if (uSpecular)
    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);
  lr.diffuse = _lambertDiffuse(lightDir, normal);
  return lr;
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`,o={immediateVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

varying vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

varying vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vColor;
}`,normalVert:`attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

varying vec3 vVertexNormal;
varying highp vec2 vVertTexCoord;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
}
`,normalFrag:`precision mediump float;
varying vec3 vVertexNormal;
void main(void) {
  gl_FragColor = vec4(vVertexNormal, 1.0);
}`,basicFrag:`precision mediump float;
uniform vec4 uMaterialColor;
void main(void) {
  gl_FragColor = uMaterialColor;
}`,lightVert:n+`// include lighting.glgl

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
}
`,lightTextureFrag:`precision highp float;

uniform vec4 uMaterialColor;
uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;

void main(void) {
  if(uEmissive && !isTexture) {
    gl_FragColor = uMaterialColor;
  }
  else {
    gl_FragColor = isTexture ? texture2D(uSampler, vVertTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;
    gl_FragColor.rgb = gl_FragColor.rgb * vDiffuseColor + vSpecularColor;
  }
}`,phongVert:`precision highp float;
precision highp int;

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
}
`,phongFrag:n+`// include lighting.glsl
precision highp float;
precision highp int;

uniform vec4 uMaterialColor;
uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  if(uEmissive && !isTexture) {
    gl_FragColor = uMaterialColor;
  }
  else {
    gl_FragColor = isTexture ? texture2D(uSampler, vTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;
    gl_FragColor.rgb = gl_FragColor.rgb * (diffuse + vAmbientColor) + specular;
  }
}`,fontVert:`precision mediump float;

attribute vec3 aPosition;
attribute vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

varying vec2 vTexCoord;
varying float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord;
  w = gl_Position.w;
}
`,fontFrag:`#extension GL_OES_standard_derivatives : enable
precision mediump float;

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

varying vec2 vTexCoord;

// some helper functions
int round(float v) { return ifloor(v + 0.5); }
ivec2 round(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = round(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return texture2D(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  gl_FragColor = uMaterialColor;
  gl_FragColor.a *= saturate(max(antialias, cover));
}`,lineVert:`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform vec4 uViewport;
uniform int uPerspective;

attribute vec4 aPosition;
attribute vec4 aDirection;
  
void main() {
  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  vec3 scale = vec3(0.9995);

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posq = uModelViewMatrix * (aPosition + vec4(aDirection.xyz, 0));

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posq.xyz = posq.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 q = uProjectionMatrix * posq;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangent = normalize((q.xy*p.w - p.xy*q.w) * uViewport.zw);

  // flip tangent to normal (it's already normalized)
  vec2 normal = vec2(-tangent.y, tangent.x);

  float thickness = aDirection.w * uStrokeWeight;
  vec2 offset = normal * thickness / 2.0;

  vec2 curPerspScale;

  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)
    // invert Y, projections in Processing invert Y
    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
}
`,lineFrag:`precision mediump float;
precision mediump int;

uniform vec4 uMaterialColor;

void main() {
  gl_FragColor = uMaterialColor;
}`,pointVert:`attribute vec3 aPosition;
uniform float uPointSize;
varying float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}`,pointFrag:`precision mediump float;
precision mediump int;
uniform vec4 uMaterialColor;
varying float vStrokeWeight;

void main(){
	float mask = 0.0;

	// make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
    // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

	mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

	// if strokeWeight is 1 or less lets just draw a square
	// this prevents weird artifacting from carving circles when our points are really small
	// if strokeWeight is larger than 1, we just use it as is

	mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

	// throw away the borders of the mask
    // otherwise we get weird alpha blending issues

	if(mask > 0.98){
      discard;
  	}

  	gl_FragColor = vec4(uMaterialColor.rgb * (1.0 - mask), uMaterialColor.a) ;
}`};r.default.RendererGL=function(a,f,v,b){return r.default.Renderer.call(this,a,f,v),this._setAttributeDefaults(f),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this._pInst._setProperty("drawingContext",this.drawingContext),this._isErasing=!1,this._enableLighting=!1,this.ambientLightColors=[],this.specularColors=[1,1,1],this.directionalLightDirections=[],this.directionalLightDiffuseColors=[],this.directionalLightSpecularColors=[],this.pointLightPositions=[],this.pointLightDiffuseColors=[],this.pointLightSpecularColors=[],this.spotLightPositions=[],this.spotLightDirections=[],this.spotLightDiffuseColors=[],this.spotLightSpecularColors=[],this.spotLightAngle=[],this.spotLightConc=[],this.drawMode=h.FILL,this.curFillColor=this._cachedFillStyle=[1,1,1,1],this.curStrokeColor=this._cachedStrokeStyle=[0,0,0,1],this.curBlendMode=h.BLEND,this._cachedBlendMode=void 0,this.blendExt=this.GL.getExtension("EXT_blend_minmax"),this._isBlending=!1,this._useSpecularMaterial=!1,this._useEmissiveMaterial=!1,this._useNormalMaterial=!1,this._useShininess=1,this._tint=[255,255,255,255],this.constantAttenuation=1,this.linearAttenuation=0,this.quadraticAttenuation=0,this.uMVMatrix=new r.default.Matrix,this.uPMatrix=new r.default.Matrix,this.uNMatrix=new r.default.Matrix("mat3"),this._currentNormal=new r.default.Vector(0,0,1),this._curCamera=new r.default.Camera(this),this._curCamera._computeCameraDefaultSettings(),this._curCamera._setDefaultCamera(),this._defaultLightShader=void 0,this._defaultImmediateModeShader=void 0,this._defaultNormalShader=void 0,this._defaultColorShader=void 0,this._defaultPointShader=void 0,this.userFillShader=void 0,this.userStrokeShader=void 0,this.userPointShader=void 0,this.retainedMode={geometry:{},buffers:{stroke:[new r.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new r.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],fill:[new r.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new r.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new r.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new r.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new r.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],text:[new r.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new r.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)]}},this.immediateMode={geometry:new r.default.Geometry,shapeMode:h.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new r.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new r.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new r.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new r.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new r.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],stroke:[new r.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new r.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],point:this.GL.createBuffer()}},this.pointSize=5,this.curStrokeWeight=1,this.textures=[],this.textureMode=h.IMAGE,this.textureWrapX=h.CLAMP,this.textureWrapY=h.CLAMP,this._tex=null,this._curveTightness=6,this._lookUpTableBezier=[],this._lookUpTableQuadratic=[],this._lutBezierDetail=0,this._lutQuadraticDetail=0,this._tessy=this._initTessy(),this.fontInfos={},this._curShader=void 0,this},r.default.RendererGL.prototype=Object.create(r.default.Renderer.prototype),r.default.RendererGL.prototype._setAttributeDefaults=function(a){var f={alpha:!1,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!1,preserveDrawingBuffer:!0,perPixelLighting:!0};a._glAttributes===null?a._glAttributes=f:a._glAttributes=Object.assign(f,a._glAttributes)},r.default.RendererGL.prototype._initContext=function(){try{if(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes),this.drawingContext===null)throw new Error("Error creating webgl context");var a=this.drawingContext;a.enable(a.DEPTH_TEST),a.depthFunc(a.LEQUAL),a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}catch(f){throw f}},r.default.RendererGL.prototype._resetContext=function(a,f){var v=this.width,b=this.height,_=this.canvas.id,w=this._pInst instanceof r.default.Graphics;if(w){var E=this._pInst;E.canvas.parentNode.removeChild(E.canvas),E.canvas=document.createElement("canvas"),(E._pInst._userNode||document.body).appendChild(E.canvas),r.default.Element.call(E,E.canvas,E._pInst),E.width=v,E.height=b}else{var C=this.canvas;C&&C.parentNode.removeChild(C),(C=document.createElement("canvas")).id=_,this._pInst._userNode?this._pInst._userNode.appendChild(C):document.body.appendChild(C),this._pInst.canvas=C}var A=new r.default.RendererGL(this._pInst.canvas,this._pInst,!w);this._pInst._setProperty("_renderer",A),A.resize(v,b),A._applyDefaults(),w||this._pInst._elements.push(A),typeof f=="function"&&setTimeout(function(){f.apply(window._renderer,a)},0)},r.default.prototype.setAttributes=function(a,f){if(this._glAttributes!==void 0){var v=!0;if(f!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[a]!==f&&(this._glAttributes[a]=f,v=!1)):a instanceof Object&&this._glAttributes!==a&&(this._glAttributes=a,v=!1),this._renderer.isP3D&&!v){if(!this._setupDone){for(var b in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(b))return void console.error("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}else console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.")},r.default.RendererGL.prototype._update=function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)},r.default.RendererGL.prototype.background=function(){var a,f=(a=this._pInst).color.apply(a,arguments),v=f.levels[0]/255,b=f.levels[1]/255,_=f.levels[2]/255,w=f.levels[3]/255;this.GL.clearColor(v,b,_,w),this.GL.clear(this.GL.COLOR_BUFFER_BIT)},r.default.RendererGL.prototype.fill=function(a,f,v,b){var _=r.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=_._array,this.drawMode=h.FILL,this._useNormalMaterial=!1,this._tex=null},r.default.RendererGL.prototype.stroke=function(a,f,v,b){arguments[3]=255;var _=r.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=_._array},r.default.RendererGL.prototype.strokeCap=function(a){console.error("Sorry, strokeCap() is not yet implemented in WEBGL mode")},r.default.RendererGL.prototype.strokeJoin=function(a){console.error("Sorry, strokeJoin() is not yet implemented in WEBGL mode")},r.default.RendererGL.prototype.filter=function(a){console.error("filter() does not work in WEBGL mode")},r.default.RendererGL.prototype.blendMode=function(a){a===h.DARKEST||a===h.LIGHTEST||a===h.ADD||a===h.BLEND||a===h.SUBTRACT||a===h.SCREEN||a===h.EXCLUSION||a===h.REPLACE||a===h.MULTIPLY||a===h.REMOVE?this.curBlendMode=a:a!==h.BURN&&a!==h.OVERLAY&&a!==h.HARD_LIGHT&&a!==h.SOFT_LIGHT&&a!==h.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")},r.default.RendererGL.prototype.erase=function(a,f){this._isErasing||(this._applyBlendMode(h.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,a/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,f/255])},r.default.RendererGL.prototype.noErase=function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))},r.default.RendererGL.prototype.strokeWeight=function(a){this.curStrokeWeight!==a&&(this.pointSize=a,this.curStrokeWeight=a)},r.default.RendererGL.prototype._getPixel=function(a,f){var v;return v=new Uint8Array(4),this.drawingContext.readPixels(a,f,1,1,this.drawingContext.RGBA,this.drawingContext.UNSIGNED_BYTE,v),[v[0],v[1],v[2],v[3]]},r.default.RendererGL.prototype.loadPixels=function(){var a=this._pixelsState;if(this._pInst._glAttributes.preserveDrawingBuffer===!0){var f=a.pixels,v=this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4;f instanceof Uint8Array&&f.length===v||(f=new Uint8Array(v),this._pixelsState._setProperty("pixels",f));var b=this._pInst._pixelDensity;this.GL.readPixels(0,0,this.width*b,this.height*b,this.GL.RGBA,this.GL.UNSIGNED_BYTE,f)}else console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true.")},r.default.RendererGL.prototype.geometryInHash=function(a){return this.retainedMode.geometry[a]!==void 0},r.default.RendererGL.prototype.resize=function(a,f){r.default.Renderer.prototype.resize.call(this,a,f),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize();var v=this._pixelsState;v.pixels!==void 0&&v._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4))},r.default.RendererGL.prototype.clear=function(){var a=(arguments.length<=0?void 0:arguments[0])||0,f=(arguments.length<=1?void 0:arguments[1])||0,v=(arguments.length<=2?void 0:arguments[2])||0,b=(arguments.length<=3?void 0:arguments[3])||0;this.GL.clearColor(a,f,v,b),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)},r.default.RendererGL.prototype.applyMatrix=function(a,f,v,b,_,w){arguments.length===16?r.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([a,f,0,0,v,b,0,0,0,0,1,0,_,w,0,1])},r.default.RendererGL.prototype.translate=function(a,f,v){return a instanceof r.default.Vector&&(v=a.z,f=a.y,a=a.x),this.uMVMatrix.translate([a,f,v]),this},r.default.RendererGL.prototype.scale=function(a,f,v){return this.uMVMatrix.scale(a,f,v),this},r.default.RendererGL.prototype.rotate=function(a,f){return f===void 0?this.rotateZ(a):(r.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)},r.default.RendererGL.prototype.rotateX=function(a){return this.rotate(a,1,0,0),this},r.default.RendererGL.prototype.rotateY=function(a){return this.rotate(a,0,1,0),this},r.default.RendererGL.prototype.rotateZ=function(a){return this.rotate(a,0,0,1),this},r.default.RendererGL.prototype.push=function(){var a=r.default.Renderer.prototype.push.apply(this),f=a.properties;return f.uMVMatrix=this.uMVMatrix.copy(),f.uPMatrix=this.uPMatrix.copy(),f._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),f.ambientLightColors=this.ambientLightColors.slice(),f.specularColors=this.specularColors.slice(),f.directionalLightDirections=this.directionalLightDirections.slice(),f.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),f.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),f.pointLightPositions=this.pointLightPositions.slice(),f.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),f.pointLightSpecularColors=this.pointLightSpecularColors.slice(),f.spotLightPositions=this.spotLightPositions.slice(),f.spotLightDirections=this.spotLightDirections.slice(),f.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),f.spotLightSpecularColors=this.spotLightSpecularColors.slice(),f.spotLightAngle=this.spotLightAngle.slice(),f.spotLightConc=this.spotLightConc.slice(),f.userFillShader=this.userFillShader,f.userStrokeShader=this.userStrokeShader,f.userPointShader=this.userPointShader,f.pointSize=this.pointSize,f.curStrokeWeight=this.curStrokeWeight,f.curStrokeColor=this.curStrokeColor,f.curFillColor=this.curFillColor,f._useSpecularMaterial=this._useSpecularMaterial,f._useEmissiveMaterial=this._useEmissiveMaterial,f._useShininess=this._useShininess,f.constantAttenuation=this.constantAttenuation,f.linearAttenuation=this.linearAttenuation,f.quadraticAttenuation=this.quadraticAttenuation,f._enableLighting=this._enableLighting,f._useNormalMaterial=this._useNormalMaterial,f._tex=this._tex,f.drawMode=this.drawMode,f._currentNormal=this._currentNormal,a},r.default.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix=r.default.Matrix.identity(this._pInst),this},r.default.RendererGL.prototype._getImmediateStrokeShader=function(){var a=this.userStrokeShader;return a&&a.isStrokeShader()?a:this._getLineShader()},r.default.RendererGL.prototype._getRetainedStrokeShader=r.default.RendererGL.prototype._getImmediateStrokeShader,r.default.RendererGL.prototype._getImmediateFillShader=function(){var a=this.userFillShader;if(this._useNormalMaterial&&(!a||!a.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!a||!a.isLightShader())return this._getLightShader()}else if(this._tex){if(!a||!a.isTextureShader())return this._getLightShader()}else if(!a)return this._getImmediateModeShader();return a},r.default.RendererGL.prototype._getRetainedFillShader=function(){if(this._useNormalMaterial)return this._getNormalShader();var a=this.userFillShader;if(this._enableLighting){if(!a||!a.isLightShader())return this._getLightShader()}else if(this._tex){if(!a||!a.isTextureShader())return this._getLightShader()}else if(!a)return this._getColorShader();return a},r.default.RendererGL.prototype._getImmediatePointShader=function(){var a=this.userPointShader;return a&&a.isPointShader()?a:this._getPointShader()},r.default.RendererGL.prototype._getRetainedLineShader=r.default.RendererGL.prototype._getImmediateLineShader,r.default.RendererGL.prototype._getLightShader=function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new r.default.Shader(this,o.phongVert,o.phongFrag):this._defaultLightShader=new r.default.Shader(this,o.lightVert,o.lightTextureFrag)),this._defaultLightShader},r.default.RendererGL.prototype._getImmediateModeShader=function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new r.default.Shader(this,o.immediateVert,o.vertexColorFrag)),this._defaultImmediateModeShader},r.default.RendererGL.prototype._getNormalShader=function(){return this._defaultNormalShader||(this._defaultNormalShader=new r.default.Shader(this,o.normalVert,o.normalFrag)),this._defaultNormalShader},r.default.RendererGL.prototype._getColorShader=function(){return this._defaultColorShader||(this._defaultColorShader=new r.default.Shader(this,o.normalVert,o.basicFrag)),this._defaultColorShader},r.default.RendererGL.prototype._getPointShader=function(){return this._defaultPointShader||(this._defaultPointShader=new r.default.Shader(this,o.pointVert,o.pointFrag)),this._defaultPointShader},r.default.RendererGL.prototype._getLineShader=function(){return this._defaultLineShader||(this._defaultLineShader=new r.default.Shader(this,o.lineVert,o.lineFrag)),this._defaultLineShader},r.default.RendererGL.prototype._getFontShader=function(){return this._defaultFontShader||(this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new r.default.Shader(this,o.fontVert,o.fontFrag)),this._defaultFontShader},r.default.RendererGL.prototype._getEmptyTexture=function(){if(!this._emptyTexture){var a=new r.default.Image(1,1);a.set(0,0,255),this._emptyTexture=new r.default.Texture(this,a)}return this._emptyTexture},r.default.RendererGL.prototype.getTexture=function(a){var f=this.textures,v=!0,b=!1,_=void 0;try{for(var w,E=f[Symbol.iterator]();!(v=(w=E.next()).done);v=!0){var C=w.value;if(C.src===a)return C}}catch(L){b=!0,_=L}finally{try{v||E.return==null||E.return()}finally{if(b)throw _}}var A=new r.default.Texture(this,a);return f.push(A),A},r.default.RendererGL.prototype._setStrokeUniforms=function(a){a.bindShader(),a.setUniform("uMaterialColor",this.curStrokeColor),a.setUniform("uStrokeWeight",this.curStrokeWeight)},r.default.RendererGL.prototype._setFillUniforms=function(a){a.bindShader(),a.setUniform("uMaterialColor",this.curFillColor),a.setUniform("isTexture",!!this._tex),this._tex&&a.setUniform("uSampler",this._tex),a.setUniform("uTint",this._tint),a.setUniform("uSpecular",this._useSpecularMaterial),a.setUniform("uEmissive",this._useEmissiveMaterial),a.setUniform("uShininess",this._useShininess),a.setUniform("uUseLighting",this._enableLighting);var f=this.pointLightDiffuseColors.length/3;a.setUniform("uPointLightCount",f),a.setUniform("uPointLightLocation",this.pointLightPositions),a.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),a.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors);var v=this.directionalLightDiffuseColors.length/3;a.setUniform("uDirectionalLightCount",v),a.setUniform("uLightingDirection",this.directionalLightDirections),a.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),a.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors);var b=this.ambientLightColors.length/3;a.setUniform("uAmbientLightCount",b),a.setUniform("uAmbientColor",this.ambientLightColors);var _=this.spotLightDiffuseColors.length/3;a.setUniform("uSpotLightCount",_),a.setUniform("uSpotLightAngle",this.spotLightAngle),a.setUniform("uSpotLightConc",this.spotLightConc),a.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),a.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),a.setUniform("uSpotLightLocation",this.spotLightPositions),a.setUniform("uSpotLightDirection",this.spotLightDirections),a.setUniform("uConstantAttenuation",this.constantAttenuation),a.setUniform("uLinearAttenuation",this.linearAttenuation),a.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),a.bindTextures()},r.default.RendererGL.prototype._setPointUniforms=function(a){a.bindShader(),a.setUniform("uMaterialColor",this.curStrokeColor),a.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)},r.default.RendererGL.prototype._bindBuffer=function(a,f,v,b,_){if(f=f||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(f,a),v!==void 0){var w=new(b||Float32Array)(v);this.GL.bufferData(f,w,_||this.GL.STATIC_DRAW)}},r.default.RendererGL.prototype._arraysEqual=function(a,f){var v=a.length;if(v!==f.length)return!1;for(var b=0;b<v;b++)if(a[b]!==f[b])return!1;return!0},r.default.RendererGL.prototype._isTypedArray=function(a){return a instanceof Uint32Array},r.default.RendererGL.prototype._flatten=function(a){if(a.length===0)return[];if(2e4<a.length){var f,v=Object.prototype.toString,b=[],_=a.slice();for(f=_.pop();v.call(f)==="[object Array]"?_.push.apply(_,i(f)):b.push(f),_.length&&(f=_.pop())!==void 0;);return b.reverse(),b}var w;return(w=[]).concat.apply(w,i(a))},r.default.RendererGL.prototype._vToNArray=function(a){var f=[],v=!0,b=!1,_=void 0;try{for(var w,E=a[Symbol.iterator]();!(v=(w=E.next()).done);v=!0){var C=w.value;f.push(C.x,C.y,C.z)}}catch(A){b=!0,_=A}finally{try{v||E.return==null||E.return()}finally{if(b)throw _}}return f},r.default.prototype._assert3d=function(a){if(!this._renderer.isP3D)throw new Error("".concat(a,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},r.default.RendererGL.prototype._initTessy=function(){var a=new u.default.GluTesselator;return a.gluTessCallback(u.default.gluEnum.GLU_TESS_VERTEX_DATA,function(f,v){v[v.length]=f[0],v[v.length]=f[1],v[v.length]=f[2]}),a.gluTessCallback(u.default.gluEnum.GLU_TESS_BEGIN,function(f){f!==u.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(f))}),a.gluTessCallback(u.default.gluEnum.GLU_TESS_ERROR,function(f){console.log("error callback"),console.log("error number: ".concat(f))}),a.gluTessCallback(u.default.gluEnum.GLU_TESS_COMBINE,function(f,v,b){return[f[0],f[1],f[2]]}),a.gluTessCallback(u.default.gluEnum.GLU_TESS_EDGE_FLAG,function(f){}),a},r.default.RendererGL.prototype._triangulate=function(a){this._tessy.gluTessNormal(0,0,1);var f=[];this._tessy.gluTessBeginPolygon(f);for(var v=0;v<a.length;v++){this._tessy.gluTessBeginContour();for(var b=a[v],_=0;_<b.length;_+=3){var w=[b[_],b[_+1],b[_+2]];this._tessy.gluTessVertex(w,w)}this._tessy.gluTessEndContour()}return this._tessy.gluTessEndPolygon(),f},r.default.RendererGL.prototype._bezierCoefficients=function(a){var f=a*a,v=1-a,b=v*v;return[b*v,3*b*a,3*v*f,f*a]},r.default.RendererGL.prototype._quadraticCoefficients=function(a){var f=1-a;return[f*f,2*f*a,a*a]},r.default.RendererGL.prototype._bezierToCatmull=function(a){return[a[1],a[1]+(a[2]-a[0])/this._curveTightness,a[2]-(a[3]-a[1])/this._curveTightness,a[2]]};var l=r.default.RendererGL;m.default=l},{"../core/constants":253,"../core/main":264,"../core/p5.Renderer":267,"./p5.Camera":312,"./p5.Matrix":314,"./p5.Shader":319,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.float64-array":204,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int16-array":208,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":229,libtess:237,path:240}],319:[function(t,g,m){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var p,r=(p=t("../core/main"))&&p.__esModule?p:{default:p};r.default.Shader=function(u,d,c){this._renderer=u,this._vertSrc=d,this._fragSrc=c,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]},r.default.Shader.prototype.init=function(){if(this._glProgram===0){var u=this._renderer.GL;if(this._vertShader=u.createShader(u.VERTEX_SHADER),u.shaderSource(this._vertShader,this._vertSrc),u.compileShader(this._vertShader),!u.getShaderParameter(this._vertShader,u.COMPILE_STATUS))return console.error("Yikes! An error occurred compiling the vertex shader:".concat(u.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=u.createShader(u.FRAGMENT_SHADER),u.shaderSource(this._fragShader,this._fragSrc),u.compileShader(this._fragShader),!u.getShaderParameter(this._fragShader,u.COMPILE_STATUS))return console.error("Darn! An error occurred compiling the fragment shader:".concat(u.getShaderInfoLog(this._fragShader))),null;this._glProgram=u.createProgram(),u.attachShader(this._glProgram,this._vertShader),u.attachShader(this._glProgram,this._fragShader),u.linkProgram(this._glProgram),u.getProgramParameter(this._glProgram,u.LINK_STATUS)||console.error("Snap! Error linking shader program: ".concat(u.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this},r.default.Shader.prototype._loadAttributes=function(){if(!this._loadedAttributes){this.attributes={};for(var u=this._renderer.GL,d=u.getProgramParameter(this._glProgram,u.ACTIVE_ATTRIBUTES),c=0;c<d;++c){var i=u.getActiveAttrib(this._glProgram,c),n=i.name,o=u.getAttribLocation(this._glProgram,n),l={};l.name=n,l.location=o,l.index=c,l.type=i.type,l.size=i.size,this.attributes[n]=l}this._loadedAttributes=!0}},r.default.Shader.prototype._loadUniforms=function(){if(!this._loadedUniforms){for(var u=this._renderer.GL,d=u.getProgramParameter(this._glProgram,u.ACTIVE_UNIFORMS),c=0,i=0;i<d;++i){var n=u.getActiveUniform(this._glProgram,i),o={};o.location=u.getUniformLocation(this._glProgram,n.name),o.size=n.size;var l=n.name;1<n.size&&(l=l.substring(0,l.indexOf("[0]"))),o.name=l,o.type=n.type,o._cachedData=void 0,o.type===u.SAMPLER_2D&&(o.samplerIndex=c,c++,this.samplers.push(o)),o.isArray=1<n.size||o.type===u.FLOAT_MAT3||o.type===u.FLOAT_MAT4||o.type===u.FLOAT_VEC2||o.type===u.FLOAT_VEC3||o.type===u.FLOAT_VEC4||o.type===u.INT_VEC2||o.type===u.INT_VEC4||o.type===u.INT_VEC3,this.uniforms[l]=o}this._loadedUniforms=!0}},r.default.Shader.prototype.compile=function(){},r.default.Shader.prototype.bindShader=function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))},r.default.Shader.prototype.unbindShader=function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this},r.default.Shader.prototype.bindTextures=function(){var u=this._renderer.GL,d=!0,c=!1,i=void 0;try{for(var n,o=this.samplers[Symbol.iterator]();!(d=(n=o.next()).done);d=!0){var l=n.value,a=l.texture;a===void 0&&(a=this._renderer._getEmptyTexture()),u.activeTexture(u.TEXTURE0+l.samplerIndex),a.bindTexture(),a.update(),u.uniform1i(l.location,l.samplerIndex)}}catch(f){c=!0,i=f}finally{try{d||o.return==null||o.return()}finally{if(c)throw i}}},r.default.Shader.prototype.updateTextures=function(){var u=!0,d=!1,c=void 0;try{for(var i,n=this.samplers[Symbol.iterator]();!(u=(i=n.next()).done);u=!0){var o=i.value.texture;o&&o.update()}}catch(l){d=!0,c=l}finally{try{u||n.return==null||n.return()}finally{if(d)throw c}}},r.default.Shader.prototype.unbindTextures=function(){},r.default.Shader.prototype._setMatrixUniforms=function(){var u=this._renderer._curCamera.cameraMatrix,d=this._renderer.uPMatrix,c=this._renderer.uMVMatrix,i=c.copy();i.mult(d),this.isStrokeShader()&&(this._renderer._curCamera.cameraType==="default"?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",u.mat4),this.setUniform("uProjectionMatrix",d.mat4),this.setUniform("uModelViewMatrix",c.mat4),this.setUniform("uModelViewProjectionMatrix",i.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))},r.default.Shader.prototype.useProgram=function(){var u=this._renderer.GL;return this._renderer._curShader!==this&&(u.useProgram(this._glProgram),this._renderer._curShader=this),this},r.default.Shader.prototype.setUniform=function(u,d){var c=this.uniforms[u];if(c){var i=this._renderer.GL;if(c.isArray){if(c._cachedData&&this._renderer._arraysEqual(c._cachedData,d))return;c._cachedData=d.slice(0)}else{if(c._cachedData&&c._cachedData===d)return;Array.isArray(d)?c._cachedData=d.slice(0):c._cachedData=d}var n=c.location;switch(this.useProgram(),c.type){case i.BOOL:d===!0?i.uniform1i(n,1):i.uniform1i(n,0);break;case i.INT:1<c.size?d.length&&i.uniform1iv(n,d):i.uniform1i(n,d);break;case i.FLOAT:1<c.size?d.length&&i.uniform1fv(n,d):i.uniform1f(n,d);break;case i.FLOAT_MAT3:i.uniformMatrix3fv(n,!1,d);break;case i.FLOAT_MAT4:i.uniformMatrix4fv(n,!1,d);break;case i.FLOAT_VEC2:1<c.size?d.length&&i.uniform2fv(n,d):i.uniform2f(n,d[0],d[1]);break;case i.FLOAT_VEC3:1<c.size?d.length&&i.uniform3fv(n,d):i.uniform3f(n,d[0],d[1],d[2]);break;case i.FLOAT_VEC4:1<c.size?d.length&&i.uniform4fv(n,d):i.uniform4f(n,d[0],d[1],d[2],d[3]);break;case i.INT_VEC2:1<c.size?d.length&&i.uniform2iv(n,d):i.uniform2i(n,d[0],d[1]);break;case i.INT_VEC3:1<c.size?d.length&&i.uniform3iv(n,d):i.uniform3i(n,d[0],d[1],d[2]);break;case i.INT_VEC4:1<c.size?d.length&&i.uniform4iv(n,d):i.uniform4i(n,d[0],d[1],d[2],d[3]);break;case i.SAMPLER_2D:i.activeTexture(i.TEXTURE0+c.samplerIndex),c.texture=d instanceof r.default.Texture?d:this._renderer.getTexture(d),i.uniform1i(n,c.samplerIndex)}return this}},r.default.Shader.prototype.isLightShader=function(){return this.attributes.aNormal!==void 0||this.uniforms.uUseLighting!==void 0||this.uniforms.uAmbientLightCount!==void 0||this.uniforms.uDirectionalLightCount!==void 0||this.uniforms.uPointLightCount!==void 0||this.uniforms.uAmbientColor!==void 0||this.uniforms.uDirectionalDiffuseColors!==void 0||this.uniforms.uDirectionalSpecularColors!==void 0||this.uniforms.uPointLightLocation!==void 0||this.uniforms.uPointLightDiffuseColors!==void 0||this.uniforms.uPointLightSpecularColors!==void 0||this.uniforms.uLightingDirection!==void 0||this.uniforms.uSpecular!==void 0},r.default.Shader.prototype.isNormalShader=function(){return this.attributes.aNormal!==void 0},r.default.Shader.prototype.isTextureShader=function(){return 0<this.samplers.length},r.default.Shader.prototype.isColorShader=function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0},r.default.Shader.prototype.isTexLightShader=function(){return this.isLightShader()&&this.isTextureShader()},r.default.Shader.prototype.isStrokeShader=function(){return this.uniforms.uStrokeWeight!==void 0},r.default.Shader.prototype.enableAttrib=function(u,d,c,i,n,o){if(u){var l=u.location;if(l!==-1){var a=this._renderer.GL;u.enabled||(a.enableVertexAttribArray(l),u.enabled=!0),this._renderer.GL.vertexAttribPointer(l,d,c||a.FLOAT,i||!1,n||0,o||0)}}return this};var h=r.default.Shader;m.default=h},{"../core/main":264,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":166,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],320:[function(t,g,m){function p(i){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(i)}t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r,h=(r=t("../core/main"))&&r.__esModule?r:{default:r},u=function(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var n=d();if(n&&n.has(i))return n.get(i);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){var f=l?Object.getOwnPropertyDescriptor(i,a):null;f&&(f.get||f.set)?Object.defineProperty(o,a,f):o[a]=i[a]}return o.default=i,n&&n.set(i,o),o}(t("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return d=function(){return i},i}h.default.Texture=function(i,n,o){this._renderer=i;var l=this._renderer.GL;(o=o||{}).dataType===l.FLOAT&&(l.getExtension("OES_texture_float")||console.log("Oh no, your device doesn't support floating point textures!"),l.getExtension("OES_texture_float_linear")||console.log("Ack! Your device doesn't support linear filtering for floating point textures")),this.src=n,this.glTex=void 0,this.glTarget=l.TEXTURE_2D,this.glFormat=o.format||l.RGBA,this.mipmaps=!1,this.glMinFilter=o.minFilter||l.LINEAR,this.glMagFilter=o.magFilter||l.LINEAR,this.glWrapS=o.wrapS||l.CLAMP_TO_EDGE,this.glWrapT=o.wrapT||l.CLAMP_TO_EDGE,this.glDataType=o.dataType||l.UNSIGNED_BYTE,this.isSrcMediaElement=h.default.MediaElement!==void 0&&n instanceof h.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=h.default.Element!==void 0&&n instanceof h.default.Element&&!(n instanceof h.default.Graphics),this.isSrcP5Image=n instanceof h.default.Image,this.isSrcP5Graphics=n instanceof h.default.Graphics,this.isImageData=typeof ImageData!="undefined"&&n instanceof ImageData;var a=this._getTextureDataFromSource();return this.width=a.width,this.height=a.height,this.init(a),this},h.default.Texture.prototype._getTextureDataFromSource=function(){var i;return this.isSrcP5Image?i=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcHTMLElement?i=this.src.elt:this.isImageData&&(i=this.src),i},h.default.Texture.prototype.init=function(i){var n=this._renderer.GL;if(this.glTex=n.createTexture(),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,this.glMagFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.glMinFilter),this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata){var o=new Uint8Array([1,1,1,1]);n.texImage2D(this.glTarget,0,n.RGBA,1,1,0,this.glFormat,this.glDataType,o)}else n.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,i)},h.default.Texture.prototype.update=function(){var i=this.src;if(i.width===0||i.height===0)return!1;var n=this._getTextureDataFromSource(),o=!1,l=this._renderer.GL;return n.width!==this.width||n.height!==this.height?(o=!0,this.width=n.width,this.height=n.height,this.isSrcP5Image?i.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&i.setModified(!0)):this.isSrcP5Image?i.isModified()&&(o=!0,i.setModified(!1)):this.isSrcMediaElement?i.isModified()?(o=!0,i.setModified(!1)):i.loadedmetadata&&this._videoPrevUpdateTime!==i.time()&&(this._videoPrevUpdateTime=i.time(),o=!0):this.isImageData?i._dirty&&(o=!(i._dirty=!1)):o=!0,o&&(this.bindTexture(),l.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,n)),o},h.default.Texture.prototype.bindTexture=function(){return this._renderer.GL.bindTexture(this.glTarget,this.glTex),this},h.default.Texture.prototype.unbindTexture=function(){this._renderer.GL.bindTexture(this.glTarget,null)},h.default.Texture.prototype.setInterpolation=function(i,n){var o=this._renderer.GL;i===u.NEAREST?this.glMinFilter=o.NEAREST:this.glMinFilter=o.LINEAR,n===u.NEAREST?this.glMagFilter=o.NEAREST:this.glMagFilter=o.LINEAR,this.bindTexture(),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,this.glMinFilter),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()},h.default.Texture.prototype.setWrapMode=function(i,n){function o(v){return(v&v-1)==0}var l=this._renderer.GL,a=o(this.width),f=o(this.height);i===u.REPEAT?a&&f?this.glWrapS=l.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=l.CLAMP_TO_EDGE):i===u.MIRROR?a&&f?this.glWrapS=l.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=l.CLAMP_TO_EDGE):this.glWrapS=l.CLAMP_TO_EDGE,n===u.REPEAT?a&&f?this.glWrapT=l.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=l.CLAMP_TO_EDGE):n===u.MIRROR?a&&f?this.glWrapT=l.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=l.CLAMP_TO_EDGE):this.glWrapT=l.CLAMP_TO_EDGE,this.bindTexture(),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,this.glWrapS),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()};var c=h.default.Texture;m.default=c},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226}],321:[function(t,g,m){function p(l){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.iterator");var r,h=(r=t("../core/main"))&&r.__esModule?r:{default:r},u=function(l){if(l&&l.__esModule)return l;if(l===null||p(l)!=="object"&&typeof l!="function")return{default:l};var a=d();if(a&&a.has(l))return a.get(l);var f={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in l)if(Object.prototype.hasOwnProperty.call(l,b)){var _=v?Object.getOwnPropertyDescriptor(l,b):null;_&&(_.get||_.set)?Object.defineProperty(f,b,_):f[b]=l[b]}return f.default=l,a&&a.set(l,f),f}(t("../core/constants"));function d(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return d=function(){return l},l}t("./p5.Shader"),t("./p5.RendererGL.Retained"),h.default.RendererGL.prototype._applyTextProperties=function(){},h.default.RendererGL.prototype.textWidth=function(l){return this._isOpenType()?this._textFont._textWidth(l,this._textSize):0};function c(l,a){this.width=l,this.height=a,this.infos=[],this.findImage=function(f){var v,b,_=this.width*this.height;if(_<f)throw new Error("font is too complex to render in 3D");for(var w=this.infos.length-1;0<=w;--w){var E=this.infos[w];if(E.index+f<_){b=(v=E).imageData;break}}if(!v){try{b=new ImageData(this.width,this.height)}catch{var C=document.getElementsByTagName("canvas")[0],A=!C;C||((C=document.createElement("canvas")).style.display="none",document.body.appendChild(C));var L=C.getContext("2d");L&&(b=L.createImageData(this.width,this.height)),A&&document.body.removeChild(C)}v={index:0,imageData:b},this.infos.push(v)}var P=v.index;return v.index+=f,b._dirty=!0,{imageData:b,index:P}}}function i(l,a,f,v,b){var _=l.imageData.data,w=4*l.index++;_[w++]=a,_[w++]=f,_[w++]=v,_[w++]=b}function n(l){this.font=l,this.strokeImageInfos=new c(64,64),this.colDimImageInfos=new c(64,64),this.rowDimImageInfos=new c(64,64),this.colCellImageInfos=new c(64,64),this.rowCellImageInfos=new c(64,64),this.glyphInfos={},this.getGlyphInfo=function(a){var f=this.glyphInfos[a.index];if(f)return f;var v,b=a.getBoundingBox(),_=b.x1,w=b.y1,E=b.x2-_,C=b.y2-w,A=a.path.commands;if(E==0||C==0||!A.length)return this.glyphInfos[a.index]={};var L,P,R,N,I=[],O=[],U=[];for(v=8;0<=v;--v)U.push([]);for(v=8;0<=v;--v)O.push([]);function K(Le,ce,ue){var Ce=I.length;function Ie(Q,V,ae){for(var me=Q.length;0<me--;){var Me=Q[me];Me<V&&(V=Me),ae<Me&&(ae=Me)}return{min:V,max:ae}}I.push(ue);for(var Ve=Ie(Le,1,0),Pe=Math.max(Math.floor(9*Ve.min),0),Oe=Math.min(Math.ceil(9*Ve.max),9),Ae=Pe;Ae<Oe;++Ae)U[Ae].push(Ce);for(var Ge=Ie(ce,1,0),be=Math.max(Math.floor(9*Ge.min),0),Xe=Math.min(Math.ceil(9*Ge.max),9),k=be;k<Xe;++k)O[k].push(Ce)}function ee(Le){return(ce=(Ce=255)*Le)<(ue=0)?ue:Ce<ce?Ce:ce;var ce,ue,Ce}function H(Le,ce,ue,Ce){this.p0=Le,this.c0=ce,this.c1=ue,this.p1=Ce,this.toQuadratic=function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}},this.quadError=function(){return h.default.Vector.sub(h.default.Vector.sub(this.p1,this.p0),h.default.Vector.mult(h.default.Vector.sub(this.c1,this.c0),3)).mag()/2},this.split=function(Ie){var Ve=h.default.Vector.lerp(this.p0,this.c0,Ie),Pe=h.default.Vector.lerp(this.c0,this.c1,Ie),Oe=h.default.Vector.lerp(Ve,Pe,Ie);this.c1=h.default.Vector.lerp(this.c1,this.p1,Ie),this.c0=h.default.Vector.lerp(Pe,this.c1,Ie);var Ae=h.default.Vector.lerp(Oe,this.c0,Ie),Ge=new H(this.p0,Ve,Oe,Ae);return this.p0=Ae,Ge},this.splitInflections=function(){var Ie=h.default.Vector.sub(this.c0,this.p0),Ve=h.default.Vector.sub(h.default.Vector.sub(this.c1,this.c0),Ie),Pe=h.default.Vector.sub(h.default.Vector.sub(h.default.Vector.sub(this.p1,this.c1),Ie),h.default.Vector.mult(Ve,2)),Oe=[],Ae=Ve.x*Pe.y-Ve.y*Pe.x;if(Ae!==0){var Ge=Ie.x*Pe.y-Ie.y*Pe.x,be=Ie.x*Ve.y-Ie.y*Ve.x,Xe=Ge*Ge-4*Ae*be;if(0<=Xe){Ae<0&&(Ae=-Ae,Ge=-Ge,be=-be);var k=Math.sqrt(Xe),Q=(-Ge-k)/(2*Ae),V=(-Ge+k)/(2*Ae);0<Q&&Q<1&&(Oe.push(this.split(Q)),V=1-(1-V)/(1-Q)),0<V&&V<1&&Oe.push(this.split(V))}}return Oe.push(this),Oe}}function te(Le,ce,ue,Ce,Ie,Ve,Pe,Oe){var Ae=new H(new h.default.Vector(Le,ce),new h.default.Vector(ue,Ce),new h.default.Vector(Ie,Ve),new h.default.Vector(Pe,Oe)).splitInflections(),Ge=[],be=30/o,Xe=!0,k=!1,Q=void 0;try{for(var V,ae=Ae[Symbol.iterator]();!(Xe=(V=ae.next()).done);Xe=!0){for(var me=V.value,Me=[],Ee=void 0;!(.125<=(Ee=be/me.quadError()));){var ke=Math.pow(Ee,.3333333333333333),we=me.split(ke),Je=me.split(1-ke/(1-ke));Ge.push(we),Me.push(me),me=Je}Ee<1&&Ge.push(me.split(.5)),Ge.push(me),Array.prototype.push.apply(Ge,Me.reverse())}}catch(nt){k=!0,Q=nt}finally{try{Xe||ae.return==null||ae.return()}finally{if(k)throw Q}}return Ge}function Z(Le,ce,ue,Ce){K([Le,ue],[ce,Ce],{x:Le,y:ce,cx:(Le+ue)/2,cy:(ce+Ce)/2})}function ge(Le,ce,ue,Ce){return Math.abs(ue-Le)<1e-5&&Math.abs(Ce-ce)<1e-5}var $=!0,se=!1,z=void 0;try{for(var de,re=A[Symbol.iterator]();!($=(de=re.next()).done);$=!0){var ie=de.value,j=(ie.x-_)/E,B=(ie.y-w)/C;if(!ge(L,P,j,B)){switch(ie.type){case"M":R=j,N=B;break;case"L":Z(L,P,j,B);break;case"Q":var G=(ie.x1-_)/E,ne=(ie.y1-w)/C;K([L,j,G],[P,B,ne],{x:L,y:P,cx:G,cy:ne});break;case"Z":ge(L,P,R,N)?I.push({x:L,y:P}):(Z(L,P,R,N),I.push({x:R,y:N}));break;case"C":for(var Y=te(L,P,(ie.x1-_)/E,(ie.y1-w)/C,(ie.x2-_)/E,(ie.y2-w)/C,j,B),J=0;J<Y.length;J++){var fe=Y[J].toQuadratic();K([fe.x,fe.x1,fe.cx],[fe.y,fe.y1,fe.cy],fe)}break;default:throw new Error("unknown command type: ".concat(ie.type))}L=j,P=B}}}catch(Le){se=!0,z=Le}finally{try{$||re.return==null||re.return()}finally{if(se)throw z}}for(var oe=I.length,X=this.strokeImageInfos.findImage(oe),W=X.index,pe=0;pe<oe;++pe){var Se=I[pe];i(X,ee(Se.x),ee(Se.y),ee(Se.cx),ee(Se.cy))}function Re(Le,ce,ue){for(var Ce=Le.length,Ie=ce.findImage(Ce),Ve=Ie.index,Pe=0,Oe=0;Oe<Ce;++Oe)Pe+=Le[Oe].length;for(var Ae=ue.findImage(Pe),Ge=0;Ge<Ce;++Ge){var be=Le[Ge],Xe=be.length,k=Ae.index;i(Ie,k>>7,127&k,Xe>>7,127&Xe);for(var Q=0;Q<Xe;++Q){var V=be[Q]+W;i(Ae,V>>7,127&V,0,0)}}return{cellImageInfo:Ae,dimOffset:Ve,dimImageInfo:Ie}}return(f=this.glyphInfos[a.index]={glyph:a,uGlyphRect:[b.x1,-b.y1,b.x2,-b.y2],strokeImageInfo:X,strokes:I,colInfo:Re(U,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Re(O,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[f.colInfo.dimOffset,f.rowInfo.dimOffset],f}}var o=Math.sqrt(3);h.default.RendererGL.prototype._renderText=function(l,a,f,v,b){if(this._textFont&&typeof this._textFont!="string"){if(!(b<=v)&&this._doFill){if(!this._isOpenType())return console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported"),l;l.push();var _=this._doStroke,w=this.drawMode;this._doStroke=!1,this.drawMode=u.TEXTURE;var E=this._textFont.font,C=this._textFont._fontInfo;C=C||(this._textFont._fontInfo=new n(E));var A=this._textFont._handleAlignment(this,a,f,v),L=this._textSize/E.unitsPerEm;this.translate(A.x,A.y,0),this.scale(L,L,1);var P=this.GL,R=!this._defaultFontShader,N=this._getFontShader();N.init(),N.bindShader(),R&&(N.setUniform("uGridImageSize",[64,64]),N.setUniform("uCellsImageSize",[64,64]),N.setUniform("uStrokeImageSize",[64,64]),N.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor);var I=this.retainedMode.geometry.glyph;if(!I){var O=this._textGeom=new h.default.Geometry(1,1,function(){for(var Y=0;Y<=1;Y++)for(var J=0;J<=1;J++)this.vertices.push(new h.default.Vector(J,Y,0)),this.uvs.push(J,Y)});O.computeFaces().computeNormals(),I=this.createBuffers("glyph",O)}var U=!0,K=!1,ee=void 0;try{for(var H,te=this.retainedMode.buffers.text[Symbol.iterator]();!(U=(H=te.next()).done);U=!0)H.value._prepareBuffer(I,N)}catch(Y){K=!0,ee=Y}finally{try{U||te.return==null||te.return()}finally{if(K)throw ee}}this._bindBuffer(I.indexBuffer,P.ELEMENT_ARRAY_BUFFER),N.setUniform("uMaterialColor",this.curFillColor);try{var Z=0,ge=null,$=E.stringToGlyphs(a),se=!0,z=!1,de=void 0;try{for(var re,ie=$[Symbol.iterator]();!(se=(re=ie.next()).done);se=!0){var j=re.value;ge&&(Z+=E.getKerningValue(ge,j));var B=C.getGlyphInfo(j);if(B.uGlyphRect){var G=B.rowInfo,ne=B.colInfo;N.setUniform("uSamplerStrokes",B.strokeImageInfo.imageData),N.setUniform("uSamplerRowStrokes",G.cellImageInfo.imageData),N.setUniform("uSamplerRows",G.dimImageInfo.imageData),N.setUniform("uSamplerColStrokes",ne.cellImageInfo.imageData),N.setUniform("uSamplerCols",ne.dimImageInfo.imageData),N.setUniform("uGridOffset",B.uGridOffset),N.setUniform("uGlyphRect",B.uGlyphRect),N.setUniform("uGlyphOffset",Z),N.bindTextures(),P.drawElements(P.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)}Z+=j.advanceWidth,ge=j}}catch(Y){z=!0,de=Y}finally{try{se||ie.return==null||ie.return()}finally{if(z)throw de}}}finally{N.unbindShader(),this._doStroke=_,this.drawMode=w,l.pop()}return l}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":253,"../core/main":264,"./p5.RendererGL.Retained":317,"./p5.Shader":319,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.string.sub":192,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}]},{},[248])(248)})})(ou);var hc=cc(ou.exports);const dc=["remove","print","cursor","frameRate","getFrameRate","setFrameRate","noCursor","fullscreen","pixelDensity","displayDensity","getURL","getURLPath","getURLParams","pushStyle","popStyle","popMatrix","pushMatrix","registerPromisePreload","camera","perspective","ortho","frustum","createCamera","setCamera","setAttributes","createCanvas","resizeCanvas","noCanvas","createGraphics","blendMode","noLoop","loop","isLooping","push","pop","redraw","applyMatrix","resetMatrix","rotate","rotateX","rotateY","rotateZ","scale","shearX","shearY","translate","arc","ellipse","circle","line","point","quad","rect","square","triangle","ellipseMode","noSmooth","rectMode","smooth","strokeCap","strokeJoin","strokeWeight","bezier","bezierDetail","bezierPoint","bezierTangent","curve","curveDetail","curveTightness","curvePoint","curveTangent","beginContour","beginShape","bezierVertex","curveVertex","endContour","endShape","quadraticVertex","vertex","alpha","blue","brightness","color","green","hue","lerpColor","lightness","red","saturation","background","clear","colorMode","fill","noFill","noStroke","stroke","erase","noErase","createStringDict","createNumberDict","storeItem","getItem","clearStorage","removeItem","select","selectAll","removeElements","createDiv","createP","createSpan","createImg","createA","createSlider","createButton","createCheckbox","createSelect","createRadio","createColorPicker","createInput","createFileInput","createVideo","createAudio","createCapture","createElement","setMoveThreshold","setShakeThreshold","keyIsDown","requestPointerLock","exitPointerLock","createImage","saveCanvas","saveGif","saveFrames","loadImage","image","tint","noTint","imageMode","blend","copy","filter","get","loadPixels","set","updatePixels","loadJSON","loadStrings","loadTable","loadXML","loadBytes","httpGet","httpPost","httpDo","createWriter","save","saveJSON","saveJSONObject","saveJSONArray","saveStrings","saveTable","writeFile","downloadFile","abs","ceil","constrain","dist","exp","floor","lerp","log","mag","map","max","min","norm","pow","round","sq","sqrt","fract","createVector","noise","noiseDetail","noiseSeed","randomSeed","random","randomGaussian","acos","asin","atan","atan2","cos","sin","tan","degrees","radians","angleMode","textAlign","textLeading","textSize","textStyle","textWidth","textAscent","textDescent","loadFont","text","textFont","append","arrayCopy","concat","reverse","shorten","shuffle","sort","splice","subset","float","int","str","boolean","byte","char","unchar","hex","unhex","join","match","matchAll","nf","nfc","nfp","nfs","split","splitTokens","trim","day","hour","minute","millis","month","second","year","plane","box","sphere","cylinder","cone","ellipsoid","torus","orbitControl","debugMode","noDebugMode","ambientLight","specularColor","directionalLight","pointLight","lights","lightFalloff","spotLight","noLights","loadModel","model","loadShader","createShader","shader","resetShader","normalMaterial","texture","textureMode","textureWrap","ambientMaterial","emissiveMaterial","specularMaterial","shininess"],Oa=["setup","draw","preload","mousePressed","mouseMoved","mouseReleased","mouseDragged","mouseClicked","doubleClicked","mouseWheel","keyPressed","keyReleased","keyReleased","deviceMoved","deviceShaken","deviceTurned","windowResized"],Fn=Math.PI,fc="p2d",pc="webgl",mc="default",gc="crosshair",yc="pointer",vc="move",bc="text",_c="wait",xc=Fn/2,wc=Fn,Sc=Fn/4,Mc=Fn*2,Ec=Fn*2,Tc="degrees",Ac="radians",Cc=Fn/180,Lc=180/Fn,Pc="corner",Rc="corners",Dc="radius",jc="right",Ic="left",Oc="center",kc="top",Nc="bottom",Fc="alphabetic",Uc=0,Bc=1,Gc=3,zc=2,Vc=4,Hc=6,Wc=5,qc="quads",Xc="quad_strip",Yc="tess",Zc="close",Jc="open",$c="chord",Kc="pie",Qc="square",eh="butt",th="round",rh="bevel",nh="miter",ih="rgb",sh="hsb",oh="hsl",ah="auto",lh=18,uh=8,ch=17,hh=46,dh=40,fh=13,ph=27,mh=37,gh=18,yh=13,vh=39,bh=16,_h=9,xh=38,wh="source-over",Sh="destination-out",Mh="lighter",Eh="darken",Th="lighten",Ah="difference",Ch="subtract",Lh="exclusion",Ph="multiply",Rh="screen",Dh="copy",jh="overlay",Ih="hard-light",Oh="soft-light",kh="color-dodge",Nh="color-burn",Fh="threshold",Uh="gray",Bh="opaque",Gh="invert",zh="posterize",Vh="dilate",Hh="erode",Wh="blur",qh="normal",Xh="italic",Yh="bold",Zh="bold italic",Jh="#000000",$h=1.25,Kh="middle",Qh="linear",ed="quadratic",td="bezier",rd="curve",nd="stroke",id="fill",sd="texture",od="immediate",ad="image",ld="nearest",ud="repeat",cd="clamp",hd="mirror",dd="landscape",fd="portrait",pd="#000000",md="#FFFFFF",gd="grid",yd="axes",vd="label",bd="fallback";var ka=Object.freeze({__proto__:null,P2D:fc,WEBGL:pc,ARROW:mc,CROSS:gc,HAND:yc,MOVE:vc,TEXT:bc,WAIT:_c,HALF_PI:xc,PI:wc,QUARTER_PI:Sc,TAU:Mc,TWO_PI:Ec,DEGREES:Tc,RADIANS:Ac,DEG_TO_RAD:Cc,RAD_TO_DEG:Lc,CORNER:Pc,CORNERS:Rc,RADIUS:Dc,RIGHT:jc,LEFT:Ic,CENTER:Oc,TOP:kc,BOTTOM:Nc,BASELINE:Fc,POINTS:Uc,LINES:Bc,LINE_STRIP:Gc,LINE_LOOP:zc,TRIANGLES:Vc,TRIANGLE_FAN:Hc,TRIANGLE_STRIP:Wc,QUADS:qc,QUAD_STRIP:Xc,TESS:Yc,CLOSE:Zc,OPEN:Jc,CHORD:$c,PIE:Kc,PROJECT:Qc,SQUARE:eh,ROUND:th,BEVEL:rh,MITER:nh,RGB:ih,HSB:sh,HSL:oh,AUTO:ah,ALT:lh,BACKSPACE:uh,CONTROL:ch,DELETE:hh,DOWN_ARROW:dh,ENTER:fh,ESCAPE:ph,LEFT_ARROW:mh,OPTION:gh,RETURN:yh,RIGHT_ARROW:vh,SHIFT:bh,TAB:_h,UP_ARROW:xh,BLEND:wh,REMOVE:Sh,ADD:Mh,DARKEST:Eh,LIGHTEST:Th,DIFFERENCE:Ah,SUBTRACT:Ch,EXCLUSION:Lh,MULTIPLY:Ph,SCREEN:Rh,REPLACE:Dh,OVERLAY:jh,HARD_LIGHT:Ih,SOFT_LIGHT:Oh,DODGE:kh,BURN:Nh,THRESHOLD:Fh,GRAY:Uh,OPAQUE:Bh,INVERT:Gh,POSTERIZE:zh,DILATE:Vh,ERODE:Hh,BLUR:Wh,NORMAL:qh,ITALIC:Xh,BOLD:Yh,BOLDITALIC:Zh,_DEFAULT_TEXT_FILL:Jh,_DEFAULT_LEADMULT:$h,_CTX_MIDDLE:Kh,LINEAR:Qh,QUADRATIC:ed,BEZIER:td,CURVE:rd,STROKE:nd,FILL:id,TEXTURE:sd,IMMEDIATE:od,IMAGE:ad,NEAREST:ld,REPEAT:ud,CLAMP:cd,MIRROR:hd,LANDSCAPE:dd,PORTRAIT:fd,_DEFAULT_STROKE:pd,_DEFAULT_FILL:md,GRID:gd,AXES:yd,LABEL:vd,FALLBACK:bd});const Na=typeof window!="undefined";function _d(S,e){let s;const t={setup(){}},g={unmount(){!Na||s&&(s.remove(),s=void 0)},mount(p,r){return Na&&(g.unmount(),new hc(h=>{s=h,S&&Object.assign(t,(typeof S=="function"?S(m):S)||{}),r&&Object.assign(t,r);for(const u of Oa)t[u]&&(s[u]=()=>{var d;return(d=t[u])===null||d===void 0?void 0:d.call(t,m)})},p)),m}},m=new Proxy(g,{get(p,r,h){const u=Reflect.get(g,r,h);if(u)return u;if(dc.includes(r))return(...d)=>{if(!s)throw new Error(`can not "${r}" access before mounting`);return s[r](...d)};if(ka[r]!=null)return ka[r];if(!s)throw new Error(`can not "${r}" access before mounting`);return Reflect.get(s,r,h)},set(p,r,h){if(Oa.includes(r))return t[r]=h,!0;if(!s)throw new Error(`can not "${r}" access before mounting`);return Reflect.set(s,r,h)}});return e&&g.mount(e),m}class Un{constructor(e,s,t){this.mount=g=>{this.sketch.mount(g,this.content(this.sketch))},this.remove=()=>{this.sketch.remove()},this.title=e,this.url=s,this.content=t,this.sketch=_d()}}const Kt=700;var Bn=({createCanvas:S,background:e,color:s})=>{S(Kt,Kt),e(s(255,255,255))},xd=new Un("Multiverse Pots","sketch",S=>{let e,s,t=.5,g=0,m=0;const{mount:p,stroke:r,frameRate:h,background:u,line:d,color:c,angleMode:i,DEGREES:n,random:o,translate:l,rotate:a,strokeWeight:f,noFill:v,ellipse:b}=S;return{setup:()=>{Bn(S),g=0,i(n),h(120),e=0,s=S.windowHeight,m=0,c(120,126,120)},draw:({windowHeight:E,mouseX:C,mouseY:A})=>{e=e+o(-5,5),s=s-4.5,s<-100&&(s=E+100,m+=200,t=o(-.5,.5)),l(e+m,s,0),a(g),f(o(.1,.8)),r(20,0,0),v(),b(0,0,A/2,C/2),g+=t}}}),wd=new Un("A Line","single-line",S=>{const{mount:e,stroke:s,background:t,translate:g,rotate:m,strokeWeight:p,noFill:r,pixelDensity:h,point:u,push:d,pop:c,arc:i,HALF_PI:n,PI:o,remove:l}=S,a=()=>{Bn(S),v(50,50,Kt-100,Kt-100)},f=({saveCanvas:b})=>{},v=(b,_,w,E)=>{s(255,0,0),s(0),p(6);for(let L=0;L<=E;L+=30){const P=L+30>E,R=30/2,N=L/30%2===0&&P?w:w-30/2;for(let I=R;I<N;I+=1)u(I+b,L+_);P||(d(),p(6),r(),L/30%2?(g(30+b-30/2,L+_+30/2,0),m(n+o*2),i(0,0,30,30,0,o)):(g(w+b-30/2,L+_+30/2,0),m(n+o),i(0,0,30,30,0,o)),c())}};return{setup:a,mouseClicked:f}}),Sd=new Un("Anxiety Tree","anxiety-tree",S=>{var e,s=!1;const{mount:t,stroke:g,background:m,strokeWeight:p,pixelDensity:r,point:h,atan2:u,cos:d,sin:c,random:i,int:n}=S,o=()=>{Bn(S),g(0),p(1),e=new f},l=()=>{s&&(e.drawStep(),e.drawStep())},a=()=>{s=!0};class f{constructor(){this.lines=[new b(new _(Kt/2,Kt),new _(Kt/2,Kt/1.5))],this.currentLine=this.lines[0]}drawStep(){this.currentLine.finishedDrawing?this.lines[this.currentLine.parent]&&this.lines[this.currentLine.parent].children<2?this.createNewLine(this.lines[this.currentLine.parent]):this.createNewLine(this.currentLine):this.currentLine.drawNextStep()}createNewLine(E){E.children+=1;let C=E.angle+i(-1,1),A=n(i(10,60)),L=A*Math.cos(C),P=A*Math.sin(C),R=new _(L,P);R.sum(E.end);let N=new b(Object.create(E.end),R);N.parent=this.lines.indexOf(E);let I=0;for(;R.x<=0||R.x>500||R.y<=0||R.y>=500||this.intersects(N)&&I<=500;)I++,C=E.angle+i(-2,2),A=n(i(10,60)),L=A*Math.cos(C),P=A*Math.sin(C),R=new _(L,P),R.sum(E.end),N=new b(Object.create(E.end),R);if(I>=500){this.currentLine=this.getLineWithLessThanTwoChildren();return}this.lines.push(N),this.currentLine=N}getLineWithLessThanTwoChildren(){return this.lines.find(E=>E.children<2)}intersects(E){var C=!1;for(let A=0;A<this.lines.filter(L=>this.lines.indexOf(L)!==E.parent).length;A++){const L=this.lines.filter(P=>this.lines.indexOf(P)!==E.parent)[A];v(E.start.x,E.start.y,E.end.x,E.end.y,L.start.x,L.start.y,L.end.x,L.end.y)&&(C=!0)}return C}}function v(w,E,C,A,L,P,R,N){if(w===C&&E===A||L===R&&P===N||w===L&&E===P)return!1;let I=(N-P)*(C-w)-(R-L)*(A-E);if(I===0)return!1;let O=((R-L)*(E-P)-(N-P)*(w-L))/I,U=((C-w)*(E-P)-(A-E)*(w-L))/I;if(O<0||O>1||U<0||U>1)return!1;let K=w+O*(C-w),ee=E+O*(A-E);return g(255,0,0),p(6),g(0),p(1),{x:K,y:ee}}class b{constructor(E,C){this.units=1,this.start=E,this.end=C,this.currentDrawPoint=Object.create(E),this.children=0,this.finishedDrawing=!1,this.parent=void 0,g(255,0,0),p(3),h(this.end.x,this.end.y),p(1),g(0),this.angle=u(this.end.y-this.start.y,this.end.x-this.start.x)}drawNextStep(){const E=new _(d(this.angle),c(this.angle));this.currentDrawPoint.round().isEqual(this.end.round())?this.finishedDrawing=!0:(this.currentDrawPoint.sum(E),h(this.currentDrawPoint.x,this.currentDrawPoint.y))}}class _{constructor(E,C){this.x=E,this.y=C}sum(E){this.x+=E.x,this.y+=E.y}isEqual(E){return this.x===E.x&&this.y===E.y}round(){return new _(Math.round(this.x),Math.round(this.y))}abs(){return new _(Math.abs(this.x),Math.abs(this.y))}}return{setup:o,draw:l,keyPressed:a}}),Md=new Un("Boyhood","boyhood",S=>{var e,s=!1;const t=4,g=14,m=1,p=2,r=-1,h=1,u=30,{mount:d,stroke:c,background:i,strokeWeight:n,pixelDensity:o,point:l,atan2:a,cos:f,sin:v,random:b,int:_,get:w}=S,E=()=>{Bn(S),c(0),n(m),e=new L},C=()=>{if(s)for(let I=0;I<u;I++)e.drawStep()},A=()=>{s=!0};class L{constructor(){this.lines=[new P(new N(Kt/2,Kt/2),new N(Kt/2,Kt/2+20))],this.currentLine=this.lines[0]}drawStep(){if(!this.currentLine.finishedDrawing)this.currentLine.drawNextStep();else if(this.lines[this.currentLine.parent]&&this.lines[this.currentLine.parent].children<p)this.createNewLine(this.lines[this.currentLine.parent]);else{if(this.currentLine=this.getLineWithLessThanTwoChildren(),!this.currentLine){s=!1,console.log("FINISHED");return}this.createNewLine(this.currentLine)}}createNewLine(O){O.children+=1;let U=O.angle+b(r,h),K=_(b(t,g)),ee=K*Math.cos(U),H=K*Math.sin(U),te=new N(ee,H);te.sum(O.end);let Z=new P(Object.create(O.end),te);Z.parent=this.lines.indexOf(O),this.lines.push(Z),this.currentLine=Z}getLineWithLessThanTwoChildren(){const O=this.lines.filter(K=>K.children<p&&!K.steril);return O[_(b(O.length-1))]}}class P{constructor(O,U){this.units=1,this.start=O,this.end=U,this.currentDrawPoint=Object.create(O),this.children=0,this.finishedDrawing=!1,this.parent=void 0,this.steril=!1,this.angle=a(this.end.y-this.start.y,this.end.x-this.start.x),this.nextPoint=new N(f(this.angle),v(this.angle))}drawNextStep(){this.checkCollision(),this.currentDrawPoint.round().isEqual(this.end.round())?this.finishedDrawing=!0:(this.currentDrawPoint.sum(this.nextPoint),l(this.currentDrawPoint.x,this.currentDrawPoint.y))}checkCollision(){let U=new N(this.currentDrawPoint.x,this.currentDrawPoint.y);for(let K=0;K<5;K++)if(U.sum(this.nextPoint),!R(w(U.x,U.y),[255,255,255,255])||U.x<0||U.x>Kt||U.y<0||U.y>Kt){this.finishedDrawing=!0,this.end=this.currentDrawPoint,this.steril=!0;return}}}const R=(I,O)=>Array.isArray(I)&&Array.isArray(O)&&I.length===O.length&&I.every((U,K)=>U===O[K]);class N{constructor(O,U){this.x=O,this.y=U}sum(O){this.x+=O.x,this.y+=O.y}isEqual(O){return this.x===O.x&&this.y===O.y}round(){return new N(Math.round(this.x),Math.round(this.y))}abs(){return new N(Math.abs(this.x),Math.abs(this.y))}}return{setup:E,draw:C,keyPressed:A}}),Ed=new Un("Synth","synth",S=>{let e=100;const{background:s,random:t,stroke:g,frameRate:m}=S;return{setup:()=>{Bn(S),g(255),m(30)},draw:({background:h,height:u,width:d,line:c,random:i})=>{h(0),e=e-1,e<0&&(e=u),c(0,e,d,e)}}}),Td=new Un("Not Art","not-art",S=>{const{background:e,random:s,loadFont:t,HALF_PI:g,createGraphics:m,image:p}=S;let r;const h=350,u=()=>{r=t("/p5-showcase/fonts/flicker.otf")};function d(){Bn(S),e(1e3),c("N",-30,0,"art"),c("O",200,0,"art"),c("T",450,0,"art"),c("A",-20,300,"not"),c("R",200,300,"not"),c("T",450,300,"not")}const c=(i,n,o,l)=>{let a=m(h,h);a.background(1e3),a.fill(0),a.textFont(r);for(let b=0;b<480;b++)a.textSize(s(4,25)),a.push(),a.translate(s(0,a.width),s(0,a.height)),a.rotate(g/2*s(-1,1)),a.text(l,0,0),a.pop();let f=m(h,h);f.fill(0),f.textSize(h),f.text(i,30,h);const v=a.get();v.mask(f),p(v,n,o)};return{setup:d,preload:u}}),Ad=new Un("Only Lines","only-lines",S=>{const{background:e,stroke:s,line:t,loadImage:g,pixelDensity:m,noFill:p,strokeWeight:r,point:h}=S;let u,d;const c=()=>{u=g("/p5-showcase/images/dua.jpeg")},i=({windowWidth:E,windowHeight:C})=>{u.resize(Kt,0),console.log("oi",d),e(1e3),m(4),Bn(S),e(1e3),n()},n=()=>{for(let E=o;E<u.width;E+=o)for(let C=o;C<u.height;C+=o)w(E,C)},o=5,l=8,a=.15,f=.0035,v=255/(a*f),b=o;let _=.6;function w(E,C){p();let A=u.get(E,C);s(0),r(_);let L=(A[0]+A[1]+A[2])/3,P=!1;for(let R=1;R<=v;R++)if(L<l+a*R){P=!0;const N=b-R*f>0?b-R*f:0;t(E,C,E+N,C+N);break}P||(s(0),h(E,C))}return{setup:i,preload:c}});/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Io="141",Cd=0,Fa=1,Ld=2,au=1,Pd=2,Ai=3,ji=0,Ir=1,hi=2,Rd=1,yn=0,li=1,Ua=2,Ba=3,Ga=4,Dd=5,si=100,jd=101,Id=102,za=103,Va=104,Od=200,kd=201,Nd=202,Fd=203,lu=204,uu=205,Ud=206,Bd=207,Gd=208,zd=209,Vd=210,Hd=0,Wd=1,qd=2,Mo=3,Xd=4,Yd=5,Zd=6,Jd=7,Ms=0,$d=1,Kd=2,sn=0,Qd=1,ef=2,tf=3,rf=4,nf=5,cu=300,di=301,fi=302,Eo=303,To=304,Es=306,Ao=1e3,Dr=1001,Co=1002,dr=1003,Ha=1004,Wa=1005,xr=1006,sf=1007,Ts=1008,kn=1009,of=1010,af=1011,hu=1012,lf=1013,Pn=1014,Rn=1015,Ii=1016,uf=1017,cf=1018,ui=1020,hf=1021,df=1022,jr=1023,ff=1024,pf=1025,jn=1026,pi=1027,mf=1028,gf=1029,yf=1030,vf=1031,bf=1033,Bs=33776,Gs=33777,zs=33778,Vs=33779,qa=35840,Xa=35841,Ya=35842,Za=35843,_f=36196,Ja=37492,$a=37496,Ka=37808,Qa=37809,el=37810,tl=37811,rl=37812,nl=37813,il=37814,sl=37815,ol=37816,al=37817,ll=37818,ul=37819,cl=37820,hl=37821,dl=36492,Nn=3e3,zt=3001,xf=3200,wf=3201,gi=0,Sf=1,nn="srgb",Dn="srgb-linear",Hs=7680,Mf=519,fl=35044,pl="300 es",Lo=1035;class yi{addEventListener(e,s){this._listeners===void 0&&(this._listeners={});const t=this._listeners;t[e]===void 0&&(t[e]=[]),t[e].indexOf(s)===-1&&t[e].push(s)}hasEventListener(e,s){if(this._listeners===void 0)return!1;const t=this._listeners;return t[e]!==void 0&&t[e].indexOf(s)!==-1}removeEventListener(e,s){if(this._listeners===void 0)return;const g=this._listeners[e];if(g!==void 0){const m=g.indexOf(s);m!==-1&&g.splice(m,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const g=t.slice(0);for(let m=0,p=g.length;m<p;m++)g[m].call(this,e);e.target=null}}}const nr=[];for(let S=0;S<256;S++)nr[S]=(S<16?"0":"")+S.toString(16);const Ws=Math.PI/180,ml=180/Math.PI;function vi(){const S=Math.random()*4294967295|0,e=Math.random()*4294967295|0,s=Math.random()*4294967295|0,t=Math.random()*4294967295|0;return(nr[S&255]+nr[S>>8&255]+nr[S>>16&255]+nr[S>>24&255]+"-"+nr[e&255]+nr[e>>8&255]+"-"+nr[e>>16&15|64]+nr[e>>24&255]+"-"+nr[s&63|128]+nr[s>>8&255]+"-"+nr[s>>16&255]+nr[s>>24&255]+nr[t&255]+nr[t>>8&255]+nr[t>>16&255]+nr[t>>24&255]).toLowerCase()}function or(S,e,s){return Math.max(e,Math.min(s,S))}function Ef(S,e){return(S%e+e)%e}function qs(S,e,s){return(1-s)*S+s*e}function gl(S){return(S&S-1)===0&&S!==0}function Po(S){return Math.pow(2,Math.floor(Math.log(S)/Math.LN2))}class Qe{constructor(e=0,s=0){this.isVector2=!0,this.x=e,this.y=s}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,s){return this.x=e,this.y=s,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,s){switch(e){case 0:this.x=s;break;case 1:this.y=s;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,s){return s!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,s)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,s){return this.x=e.x+s.x,this.y=e.y+s.y,this}addScaledVector(e,s){return this.x+=e.x*s,this.y+=e.y*s,this}sub(e,s){return s!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,s)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,s){return this.x=e.x-s.x,this.y=e.y-s.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const s=this.x,t=this.y,g=e.elements;return this.x=g[0]*s+g[3]*t+g[6],this.y=g[1]*s+g[4]*t+g[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,s){return this.x=Math.max(e.x,Math.min(s.x,this.x)),this.y=Math.max(e.y,Math.min(s.y,this.y)),this}clampScalar(e,s){return this.x=Math.max(e,Math.min(s,this.x)),this.y=Math.max(e,Math.min(s,this.y)),this}clampLength(e,s){const t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(s,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const s=this.x-e.x,t=this.y-e.y;return s*s+t*t}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,s){return this.x+=(e.x-this.x)*s,this.y+=(e.y-this.y)*s,this}lerpVectors(e,s,t){return this.x=e.x+(s.x-e.x)*t,this.y=e.y+(s.y-e.y)*t,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,s=0){return this.x=e[s],this.y=e[s+1],this}toArray(e=[],s=0){return e[s]=this.x,e[s+1]=this.y,e}fromBufferAttribute(e,s,t){return t!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(s),this.y=e.getY(s),this}rotateAround(e,s){const t=Math.cos(s),g=Math.sin(s),m=this.x-e.x,p=this.y-e.y;return this.x=m*t-p*g+e.x,this.y=m*g+p*t+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ar{constructor(){this.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,s,t,g,m,p,r,h,u){const d=this.elements;return d[0]=e,d[1]=g,d[2]=r,d[3]=s,d[4]=m,d[5]=h,d[6]=t,d[7]=p,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const s=this.elements,t=e.elements;return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],this}extractBasis(e,s,t){return e.setFromMatrix3Column(this,0),s.setFromMatrix3Column(this,1),t.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const s=e.elements;return this.set(s[0],s[4],s[8],s[1],s[5],s[9],s[2],s[6],s[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,s){const t=e.elements,g=s.elements,m=this.elements,p=t[0],r=t[3],h=t[6],u=t[1],d=t[4],c=t[7],i=t[2],n=t[5],o=t[8],l=g[0],a=g[3],f=g[6],v=g[1],b=g[4],_=g[7],w=g[2],E=g[5],C=g[8];return m[0]=p*l+r*v+h*w,m[3]=p*a+r*b+h*E,m[6]=p*f+r*_+h*C,m[1]=u*l+d*v+c*w,m[4]=u*a+d*b+c*E,m[7]=u*f+d*_+c*C,m[2]=i*l+n*v+o*w,m[5]=i*a+n*b+o*E,m[8]=i*f+n*_+o*C,this}multiplyScalar(e){const s=this.elements;return s[0]*=e,s[3]*=e,s[6]*=e,s[1]*=e,s[4]*=e,s[7]*=e,s[2]*=e,s[5]*=e,s[8]*=e,this}determinant(){const e=this.elements,s=e[0],t=e[1],g=e[2],m=e[3],p=e[4],r=e[5],h=e[6],u=e[7],d=e[8];return s*p*d-s*r*u-t*m*d+t*r*h+g*m*u-g*p*h}invert(){const e=this.elements,s=e[0],t=e[1],g=e[2],m=e[3],p=e[4],r=e[5],h=e[6],u=e[7],d=e[8],c=d*p-r*u,i=r*h-d*m,n=u*m-p*h,o=s*c+t*i+g*n;if(o===0)return this.set(0,0,0,0,0,0,0,0,0);const l=1/o;return e[0]=c*l,e[1]=(g*u-d*t)*l,e[2]=(r*t-g*p)*l,e[3]=i*l,e[4]=(d*s-g*h)*l,e[5]=(g*m-r*s)*l,e[6]=n*l,e[7]=(t*h-u*s)*l,e[8]=(p*s-t*m)*l,this}transpose(){let e;const s=this.elements;return e=s[1],s[1]=s[3],s[3]=e,e=s[2],s[2]=s[6],s[6]=e,e=s[5],s[5]=s[7],s[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const s=this.elements;return e[0]=s[0],e[1]=s[3],e[2]=s[6],e[3]=s[1],e[4]=s[4],e[5]=s[7],e[6]=s[2],e[7]=s[5],e[8]=s[8],this}setUvTransform(e,s,t,g,m,p,r){const h=Math.cos(m),u=Math.sin(m);return this.set(t*h,t*u,-t*(h*p+u*r)+p+e,-g*u,g*h,-g*(-u*p+h*r)+r+s,0,0,1),this}scale(e,s){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=s,t[4]*=s,t[7]*=s,this}rotate(e){const s=Math.cos(e),t=Math.sin(e),g=this.elements,m=g[0],p=g[3],r=g[6],h=g[1],u=g[4],d=g[7];return g[0]=s*m+t*h,g[3]=s*p+t*u,g[6]=s*r+t*d,g[1]=-t*m+s*h,g[4]=-t*p+s*u,g[7]=-t*r+s*d,this}translate(e,s){const t=this.elements;return t[0]+=e*t[2],t[3]+=e*t[5],t[6]+=e*t[8],t[1]+=s*t[2],t[4]+=s*t[5],t[7]+=s*t[8],this}equals(e){const s=this.elements,t=e.elements;for(let g=0;g<9;g++)if(s[g]!==t[g])return!1;return!0}fromArray(e,s=0){for(let t=0;t<9;t++)this.elements[t]=e[t+s];return this}toArray(e=[],s=0){const t=this.elements;return e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3],e[s+4]=t[4],e[s+5]=t[5],e[s+6]=t[6],e[s+7]=t[7],e[s+8]=t[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function du(S){for(let e=S.length-1;e>=0;--e)if(S[e]>65535)return!0;return!1}function xs(S){return document.createElementNS("http://www.w3.org/1999/xhtml",S)}function In(S){return S<.04045?S*.0773993808:Math.pow(S*.9478672986+.0521327014,2.4)}function bs(S){return S<.0031308?S*12.92:1.055*Math.pow(S,.41666)-.055}const Xs={[nn]:{[Dn]:In},[Dn]:{[nn]:bs}},Cr={legacyMode:!0,get workingColorSpace(){return Dn},set workingColorSpace(S){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(S,e,s){if(this.legacyMode||e===s||!e||!s)return S;if(Xs[e]&&Xs[e][s]!==void 0){const t=Xs[e][s];return S.r=t(S.r),S.g=t(S.g),S.b=t(S.b),S}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(S,e){return this.convert(S,this.workingColorSpace,e)},toWorkingColorSpace:function(S,e){return this.convert(S,e,this.workingColorSpace)}},fu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},$t={r:0,g:0,b:0},Lr={h:0,s:0,l:0},Ji={h:0,s:0,l:0};function Ys(S,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?S+(e-S)*6*s:s<1/2?e:s<2/3?S+(e-S)*6*(2/3-s):S}function $i(S,e){return e.r=S.r,e.g=S.g,e.b=S.b,e}class _t{constructor(e,s,t){return this.isColor=!0,this.r=1,this.g=1,this.b=1,s===void 0&&t===void 0?this.set(e):this.setRGB(e,s,t)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,s=nn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Cr.toWorkingColorSpace(this,s),this}setRGB(e,s,t,g=Dn){return this.r=e,this.g=s,this.b=t,Cr.toWorkingColorSpace(this,g),this}setHSL(e,s,t,g=Dn){if(e=Ef(e,1),s=or(s,0,1),t=or(t,0,1),s===0)this.r=this.g=this.b=t;else{const m=t<=.5?t*(1+s):t+s-t*s,p=2*t-m;this.r=Ys(p,m,e+1/3),this.g=Ys(p,m,e),this.b=Ys(p,m,e-1/3)}return Cr.toWorkingColorSpace(this,g),this}setStyle(e,s=nn){function t(m){m!==void 0&&parseFloat(m)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let g;if(g=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let m;const p=g[1],r=g[2];switch(p){case"rgb":case"rgba":if(m=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(m[1],10))/255,this.g=Math.min(255,parseInt(m[2],10))/255,this.b=Math.min(255,parseInt(m[3],10))/255,Cr.toWorkingColorSpace(this,s),t(m[4]),this;if(m=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(m[1],10))/100,this.g=Math.min(100,parseInt(m[2],10))/100,this.b=Math.min(100,parseInt(m[3],10))/100,Cr.toWorkingColorSpace(this,s),t(m[4]),this;break;case"hsl":case"hsla":if(m=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const h=parseFloat(m[1])/360,u=parseInt(m[2],10)/100,d=parseInt(m[3],10)/100;return t(m[4]),this.setHSL(h,u,d,s)}break}}else if(g=/^\#([A-Fa-f\d]+)$/.exec(e)){const m=g[1],p=m.length;if(p===3)return this.r=parseInt(m.charAt(0)+m.charAt(0),16)/255,this.g=parseInt(m.charAt(1)+m.charAt(1),16)/255,this.b=parseInt(m.charAt(2)+m.charAt(2),16)/255,Cr.toWorkingColorSpace(this,s),this;if(p===6)return this.r=parseInt(m.charAt(0)+m.charAt(1),16)/255,this.g=parseInt(m.charAt(2)+m.charAt(3),16)/255,this.b=parseInt(m.charAt(4)+m.charAt(5),16)/255,Cr.toWorkingColorSpace(this,s),this}return e&&e.length>0?this.setColorName(e,s):this}setColorName(e,s=nn){const t=fu[e.toLowerCase()];return t!==void 0?this.setHex(t,s):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=In(e.r),this.g=In(e.g),this.b=In(e.b),this}copyLinearToSRGB(e){return this.r=bs(e.r),this.g=bs(e.g),this.b=bs(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=nn){return Cr.fromWorkingColorSpace($i(this,$t),e),or($t.r*255,0,255)<<16^or($t.g*255,0,255)<<8^or($t.b*255,0,255)<<0}getHexString(e=nn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,s=Dn){Cr.fromWorkingColorSpace($i(this,$t),s);const t=$t.r,g=$t.g,m=$t.b,p=Math.max(t,g,m),r=Math.min(t,g,m);let h,u;const d=(r+p)/2;if(r===p)h=0,u=0;else{const c=p-r;switch(u=d<=.5?c/(p+r):c/(2-p-r),p){case t:h=(g-m)/c+(g<m?6:0);break;case g:h=(m-t)/c+2;break;case m:h=(t-g)/c+4;break}h/=6}return e.h=h,e.s=u,e.l=d,e}getRGB(e,s=Dn){return Cr.fromWorkingColorSpace($i(this,$t),s),e.r=$t.r,e.g=$t.g,e.b=$t.b,e}getStyle(e=nn){return Cr.fromWorkingColorSpace($i(this,$t),e),e!==nn?`color(${e} ${$t.r} ${$t.g} ${$t.b})`:`rgb(${$t.r*255|0},${$t.g*255|0},${$t.b*255|0})`}offsetHSL(e,s,t){return this.getHSL(Lr),Lr.h+=e,Lr.s+=s,Lr.l+=t,this.setHSL(Lr.h,Lr.s,Lr.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,s){return this.r=e.r+s.r,this.g=e.g+s.g,this.b=e.b+s.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,s){return this.r+=(e.r-this.r)*s,this.g+=(e.g-this.g)*s,this.b+=(e.b-this.b)*s,this}lerpColors(e,s,t){return this.r=e.r+(s.r-e.r)*t,this.g=e.g+(s.g-e.g)*t,this.b=e.b+(s.b-e.b)*t,this}lerpHSL(e,s){this.getHSL(Lr),e.getHSL(Ji);const t=qs(Lr.h,Ji.h,s),g=qs(Lr.s,Ji.s,s),m=qs(Lr.l,Ji.l,s);return this.setHSL(t,g,m),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,s=0){return this.r=e[s],this.g=e[s+1],this.b=e[s+2],this}toArray(e=[],s=0){return e[s]=this.r,e[s+1]=this.g,e[s+2]=this.b,e}fromBufferAttribute(e,s){return this.r=e.getX(s),this.g=e.getY(s),this.b=e.getZ(s),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}_t.NAMES=fu;let Wn;class pu{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let s;if(e instanceof HTMLCanvasElement)s=e;else{Wn===void 0&&(Wn=xs("canvas")),Wn.width=e.width,Wn.height=e.height;const t=Wn.getContext("2d");e instanceof ImageData?t.putImageData(e,0,0):t.drawImage(e,0,0,e.width,e.height),s=Wn}return s.width>2048||s.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),s.toDataURL("image/jpeg",.6)):s.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const s=xs("canvas");s.width=e.width,s.height=e.height;const t=s.getContext("2d");t.drawImage(e,0,0,e.width,e.height);const g=t.getImageData(0,0,e.width,e.height),m=g.data;for(let p=0;p<m.length;p++)m[p]=In(m[p]/255)*255;return t.putImageData(g,0,0),s}else if(e.data){const s=e.data.slice(0);for(let t=0;t<s.length;t++)s instanceof Uint8Array||s instanceof Uint8ClampedArray?s[t]=Math.floor(In(s[t]/255)*255):s[t]=In(s[t]);return{data:s,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class mu{constructor(e=null){this.isSource=!0,this.uuid=vi(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const s=e===void 0||typeof e=="string";if(!s&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const t={uuid:this.uuid,url:""},g=this.data;if(g!==null){let m;if(Array.isArray(g)){m=[];for(let p=0,r=g.length;p<r;p++)g[p].isDataTexture?m.push(Zs(g[p].image)):m.push(Zs(g[p]))}else m=Zs(g);t.url=m}return s||(e.images[this.uuid]=t),t}}function Zs(S){return typeof HTMLImageElement!="undefined"&&S instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&S instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&S instanceof ImageBitmap?pu.getDataURL(S):S.data?{data:Array.prototype.slice.call(S.data),width:S.width,height:S.height,type:S.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Tf=0;class Or extends yi{constructor(e=Or.DEFAULT_IMAGE,s=Or.DEFAULT_MAPPING,t=Dr,g=Dr,m=xr,p=Ts,r=jr,h=kn,u=1,d=Nn){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Tf++}),this.uuid=vi(),this.name="",this.source=new mu(e),this.mipmaps=[],this.mapping=s,this.wrapS=t,this.wrapT=g,this.magFilter=m,this.minFilter=p,this.anisotropy=u,this.format=r,this.internalFormat=null,this.type=h,this.offset=new Qe(0,0),this.repeat=new Qe(1,1),this.center=new Qe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ar,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const s=e===void 0||typeof e=="string";if(!s&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const t={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(t.userData=this.userData),s||(e.textures[this.uuid]=t),t}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==cu)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ao:e.x=e.x-Math.floor(e.x);break;case Dr:e.x=e.x<0?0:1;break;case Co:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ao:e.y=e.y-Math.floor(e.y);break;case Dr:e.y=e.y<0?0:1;break;case Co:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Or.DEFAULT_IMAGE=null;Or.DEFAULT_MAPPING=cu;class Vt{constructor(e=0,s=0,t=0,g=1){this.isVector4=!0,this.x=e,this.y=s,this.z=t,this.w=g}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,s,t,g){return this.x=e,this.y=s,this.z=t,this.w=g,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,s){switch(e){case 0:this.x=s;break;case 1:this.y=s;break;case 2:this.z=s;break;case 3:this.w=s;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,s){return s!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,s)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,s){return this.x=e.x+s.x,this.y=e.y+s.y,this.z=e.z+s.z,this.w=e.w+s.w,this}addScaledVector(e,s){return this.x+=e.x*s,this.y+=e.y*s,this.z+=e.z*s,this.w+=e.w*s,this}sub(e,s){return s!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,s)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,s){return this.x=e.x-s.x,this.y=e.y-s.y,this.z=e.z-s.z,this.w=e.w-s.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const s=this.x,t=this.y,g=this.z,m=this.w,p=e.elements;return this.x=p[0]*s+p[4]*t+p[8]*g+p[12]*m,this.y=p[1]*s+p[5]*t+p[9]*g+p[13]*m,this.z=p[2]*s+p[6]*t+p[10]*g+p[14]*m,this.w=p[3]*s+p[7]*t+p[11]*g+p[15]*m,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const s=Math.sqrt(1-e.w*e.w);return s<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/s,this.y=e.y/s,this.z=e.z/s),this}setAxisAngleFromRotationMatrix(e){let s,t,g,m;const h=e.elements,u=h[0],d=h[4],c=h[8],i=h[1],n=h[5],o=h[9],l=h[2],a=h[6],f=h[10];if(Math.abs(d-i)<.01&&Math.abs(c-l)<.01&&Math.abs(o-a)<.01){if(Math.abs(d+i)<.1&&Math.abs(c+l)<.1&&Math.abs(o+a)<.1&&Math.abs(u+n+f-3)<.1)return this.set(1,0,0,0),this;s=Math.PI;const b=(u+1)/2,_=(n+1)/2,w=(f+1)/2,E=(d+i)/4,C=(c+l)/4,A=(o+a)/4;return b>_&&b>w?b<.01?(t=0,g=.707106781,m=.707106781):(t=Math.sqrt(b),g=E/t,m=C/t):_>w?_<.01?(t=.707106781,g=0,m=.707106781):(g=Math.sqrt(_),t=E/g,m=A/g):w<.01?(t=.707106781,g=.707106781,m=0):(m=Math.sqrt(w),t=C/m,g=A/m),this.set(t,g,m,s),this}let v=Math.sqrt((a-o)*(a-o)+(c-l)*(c-l)+(i-d)*(i-d));return Math.abs(v)<.001&&(v=1),this.x=(a-o)/v,this.y=(c-l)/v,this.z=(i-d)/v,this.w=Math.acos((u+n+f-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,s){return this.x=Math.max(e.x,Math.min(s.x,this.x)),this.y=Math.max(e.y,Math.min(s.y,this.y)),this.z=Math.max(e.z,Math.min(s.z,this.z)),this.w=Math.max(e.w,Math.min(s.w,this.w)),this}clampScalar(e,s){return this.x=Math.max(e,Math.min(s,this.x)),this.y=Math.max(e,Math.min(s,this.y)),this.z=Math.max(e,Math.min(s,this.z)),this.w=Math.max(e,Math.min(s,this.w)),this}clampLength(e,s){const t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(s,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,s){return this.x+=(e.x-this.x)*s,this.y+=(e.y-this.y)*s,this.z+=(e.z-this.z)*s,this.w+=(e.w-this.w)*s,this}lerpVectors(e,s,t){return this.x=e.x+(s.x-e.x)*t,this.y=e.y+(s.y-e.y)*t,this.z=e.z+(s.z-e.z)*t,this.w=e.w+(s.w-e.w)*t,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,s=0){return this.x=e[s],this.y=e[s+1],this.z=e[s+2],this.w=e[s+3],this}toArray(e=[],s=0){return e[s]=this.x,e[s+1]=this.y,e[s+2]=this.z,e[s+3]=this.w,e}fromBufferAttribute(e,s,t){return t!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(s),this.y=e.getY(s),this.z=e.getZ(s),this.w=e.getW(s),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class vn extends yi{constructor(e,s,t={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=s,this.depth=1,this.scissor=new Vt(0,0,e,s),this.scissorTest=!1,this.viewport=new Vt(0,0,e,s);const g={width:e,height:s,depth:1};this.texture=new Or(g,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.internalFormat=t.internalFormat!==void 0?t.internalFormat:null,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:xr,this.depthBuffer=t.depthBuffer!==void 0?t.depthBuffer:!0,this.stencilBuffer=t.stencilBuffer!==void 0?t.stencilBuffer:!1,this.depthTexture=t.depthTexture!==void 0?t.depthTexture:null,this.samples=t.samples!==void 0?t.samples:0}setSize(e,s,t=1){(this.width!==e||this.height!==s||this.depth!==t)&&(this.width=e,this.height=s,this.depth=t,this.texture.image.width=e,this.texture.image.height=s,this.texture.image.depth=t,this.dispose()),this.viewport.set(0,0,e,s),this.scissor.set(0,0,e,s)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const s=Object.assign({},e.texture.image);return this.texture.source=new mu(s),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class gu extends Or{constructor(e=null,s=1,t=1,g=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:s,height:t,depth:g},this.magFilter=dr,this.minFilter=dr,this.wrapR=Dr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Af extends Or{constructor(e=null,s=1,t=1,g=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:s,height:t,depth:g},this.magFilter=dr,this.minFilter=dr,this.wrapR=Dr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Fi{constructor(e=0,s=0,t=0,g=1){this.isQuaternion=!0,this._x=e,this._y=s,this._z=t,this._w=g}static slerp(e,s,t,g){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),t.slerpQuaternions(e,s,g)}static slerpFlat(e,s,t,g,m,p,r){let h=t[g+0],u=t[g+1],d=t[g+2],c=t[g+3];const i=m[p+0],n=m[p+1],o=m[p+2],l=m[p+3];if(r===0){e[s+0]=h,e[s+1]=u,e[s+2]=d,e[s+3]=c;return}if(r===1){e[s+0]=i,e[s+1]=n,e[s+2]=o,e[s+3]=l;return}if(c!==l||h!==i||u!==n||d!==o){let a=1-r;const f=h*i+u*n+d*o+c*l,v=f>=0?1:-1,b=1-f*f;if(b>Number.EPSILON){const w=Math.sqrt(b),E=Math.atan2(w,f*v);a=Math.sin(a*E)/w,r=Math.sin(r*E)/w}const _=r*v;if(h=h*a+i*_,u=u*a+n*_,d=d*a+o*_,c=c*a+l*_,a===1-r){const w=1/Math.sqrt(h*h+u*u+d*d+c*c);h*=w,u*=w,d*=w,c*=w}}e[s]=h,e[s+1]=u,e[s+2]=d,e[s+3]=c}static multiplyQuaternionsFlat(e,s,t,g,m,p){const r=t[g],h=t[g+1],u=t[g+2],d=t[g+3],c=m[p],i=m[p+1],n=m[p+2],o=m[p+3];return e[s]=r*o+d*c+h*n-u*i,e[s+1]=h*o+d*i+u*c-r*n,e[s+2]=u*o+d*n+r*i-h*c,e[s+3]=d*o-r*c-h*i-u*n,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,s,t,g){return this._x=e,this._y=s,this._z=t,this._w=g,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,s){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const t=e._x,g=e._y,m=e._z,p=e._order,r=Math.cos,h=Math.sin,u=r(t/2),d=r(g/2),c=r(m/2),i=h(t/2),n=h(g/2),o=h(m/2);switch(p){case"XYZ":this._x=i*d*c+u*n*o,this._y=u*n*c-i*d*o,this._z=u*d*o+i*n*c,this._w=u*d*c-i*n*o;break;case"YXZ":this._x=i*d*c+u*n*o,this._y=u*n*c-i*d*o,this._z=u*d*o-i*n*c,this._w=u*d*c+i*n*o;break;case"ZXY":this._x=i*d*c-u*n*o,this._y=u*n*c+i*d*o,this._z=u*d*o+i*n*c,this._w=u*d*c-i*n*o;break;case"ZYX":this._x=i*d*c-u*n*o,this._y=u*n*c+i*d*o,this._z=u*d*o-i*n*c,this._w=u*d*c+i*n*o;break;case"YZX":this._x=i*d*c+u*n*o,this._y=u*n*c+i*d*o,this._z=u*d*o-i*n*c,this._w=u*d*c-i*n*o;break;case"XZY":this._x=i*d*c-u*n*o,this._y=u*n*c-i*d*o,this._z=u*d*o+i*n*c,this._w=u*d*c+i*n*o;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+p)}return s!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,s){const t=s/2,g=Math.sin(t);return this._x=e.x*g,this._y=e.y*g,this._z=e.z*g,this._w=Math.cos(t),this._onChangeCallback(),this}setFromRotationMatrix(e){const s=e.elements,t=s[0],g=s[4],m=s[8],p=s[1],r=s[5],h=s[9],u=s[2],d=s[6],c=s[10],i=t+r+c;if(i>0){const n=.5/Math.sqrt(i+1);this._w=.25/n,this._x=(d-h)*n,this._y=(m-u)*n,this._z=(p-g)*n}else if(t>r&&t>c){const n=2*Math.sqrt(1+t-r-c);this._w=(d-h)/n,this._x=.25*n,this._y=(g+p)/n,this._z=(m+u)/n}else if(r>c){const n=2*Math.sqrt(1+r-t-c);this._w=(m-u)/n,this._x=(g+p)/n,this._y=.25*n,this._z=(h+d)/n}else{const n=2*Math.sqrt(1+c-t-r);this._w=(p-g)/n,this._x=(m+u)/n,this._y=(h+d)/n,this._z=.25*n}return this._onChangeCallback(),this}setFromUnitVectors(e,s){let t=e.dot(s)+1;return t<Number.EPSILON?(t=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=t):(this._x=0,this._y=-e.z,this._z=e.y,this._w=t)):(this._x=e.y*s.z-e.z*s.y,this._y=e.z*s.x-e.x*s.z,this._z=e.x*s.y-e.y*s.x,this._w=t),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(or(this.dot(e),-1,1)))}rotateTowards(e,s){const t=this.angleTo(e);if(t===0)return this;const g=Math.min(1,s/t);return this.slerp(e,g),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,s){return s!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,s)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,s){const t=e._x,g=e._y,m=e._z,p=e._w,r=s._x,h=s._y,u=s._z,d=s._w;return this._x=t*d+p*r+g*u-m*h,this._y=g*d+p*h+m*r-t*u,this._z=m*d+p*u+t*h-g*r,this._w=p*d-t*r-g*h-m*u,this._onChangeCallback(),this}slerp(e,s){if(s===0)return this;if(s===1)return this.copy(e);const t=this._x,g=this._y,m=this._z,p=this._w;let r=p*e._w+t*e._x+g*e._y+m*e._z;if(r<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,r=-r):this.copy(e),r>=1)return this._w=p,this._x=t,this._y=g,this._z=m,this;const h=1-r*r;if(h<=Number.EPSILON){const n=1-s;return this._w=n*p+s*this._w,this._x=n*t+s*this._x,this._y=n*g+s*this._y,this._z=n*m+s*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(h),d=Math.atan2(u,r),c=Math.sin((1-s)*d)/u,i=Math.sin(s*d)/u;return this._w=p*c+this._w*i,this._x=t*c+this._x*i,this._y=g*c+this._y*i,this._z=m*c+this._z*i,this._onChangeCallback(),this}slerpQuaternions(e,s,t){return this.copy(e).slerp(s,t)}random(){const e=Math.random(),s=Math.sqrt(1-e),t=Math.sqrt(e),g=2*Math.PI*Math.random(),m=2*Math.PI*Math.random();return this.set(s*Math.cos(g),t*Math.sin(m),t*Math.cos(m),s*Math.sin(g))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,s=0){return this._x=e[s],this._y=e[s+1],this._z=e[s+2],this._w=e[s+3],this._onChangeCallback(),this}toArray(e=[],s=0){return e[s]=this._x,e[s+1]=this._y,e[s+2]=this._z,e[s+3]=this._w,e}fromBufferAttribute(e,s){return this._x=e.getX(s),this._y=e.getY(s),this._z=e.getZ(s),this._w=e.getW(s),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class De{constructor(e=0,s=0,t=0){this.isVector3=!0,this.x=e,this.y=s,this.z=t}set(e,s,t){return t===void 0&&(t=this.z),this.x=e,this.y=s,this.z=t,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,s){switch(e){case 0:this.x=s;break;case 1:this.y=s;break;case 2:this.z=s;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,s){return s!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,s)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,s){return this.x=e.x+s.x,this.y=e.y+s.y,this.z=e.z+s.z,this}addScaledVector(e,s){return this.x+=e.x*s,this.y+=e.y*s,this.z+=e.z*s,this}sub(e,s){return s!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,s)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,s){return this.x=e.x-s.x,this.y=e.y-s.y,this.z=e.z-s.z,this}multiply(e,s){return s!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,s)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,s){return this.x=e.x*s.x,this.y=e.y*s.y,this.z=e.z*s.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(yl.setFromEuler(e))}applyAxisAngle(e,s){return this.applyQuaternion(yl.setFromAxisAngle(e,s))}applyMatrix3(e){const s=this.x,t=this.y,g=this.z,m=e.elements;return this.x=m[0]*s+m[3]*t+m[6]*g,this.y=m[1]*s+m[4]*t+m[7]*g,this.z=m[2]*s+m[5]*t+m[8]*g,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const s=this.x,t=this.y,g=this.z,m=e.elements,p=1/(m[3]*s+m[7]*t+m[11]*g+m[15]);return this.x=(m[0]*s+m[4]*t+m[8]*g+m[12])*p,this.y=(m[1]*s+m[5]*t+m[9]*g+m[13])*p,this.z=(m[2]*s+m[6]*t+m[10]*g+m[14])*p,this}applyQuaternion(e){const s=this.x,t=this.y,g=this.z,m=e.x,p=e.y,r=e.z,h=e.w,u=h*s+p*g-r*t,d=h*t+r*s-m*g,c=h*g+m*t-p*s,i=-m*s-p*t-r*g;return this.x=u*h+i*-m+d*-r-c*-p,this.y=d*h+i*-p+c*-m-u*-r,this.z=c*h+i*-r+u*-p-d*-m,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const s=this.x,t=this.y,g=this.z,m=e.elements;return this.x=m[0]*s+m[4]*t+m[8]*g,this.y=m[1]*s+m[5]*t+m[9]*g,this.z=m[2]*s+m[6]*t+m[10]*g,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,s){return this.x=Math.max(e.x,Math.min(s.x,this.x)),this.y=Math.max(e.y,Math.min(s.y,this.y)),this.z=Math.max(e.z,Math.min(s.z,this.z)),this}clampScalar(e,s){return this.x=Math.max(e,Math.min(s,this.x)),this.y=Math.max(e,Math.min(s,this.y)),this.z=Math.max(e,Math.min(s,this.z)),this}clampLength(e,s){const t=this.length();return this.divideScalar(t||1).multiplyScalar(Math.max(e,Math.min(s,t)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,s){return this.x+=(e.x-this.x)*s,this.y+=(e.y-this.y)*s,this.z+=(e.z-this.z)*s,this}lerpVectors(e,s,t){return this.x=e.x+(s.x-e.x)*t,this.y=e.y+(s.y-e.y)*t,this.z=e.z+(s.z-e.z)*t,this}cross(e,s){return s!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,s)):this.crossVectors(this,e)}crossVectors(e,s){const t=e.x,g=e.y,m=e.z,p=s.x,r=s.y,h=s.z;return this.x=g*h-m*r,this.y=m*p-t*h,this.z=t*r-g*p,this}projectOnVector(e){const s=e.lengthSq();if(s===0)return this.set(0,0,0);const t=e.dot(this)/s;return this.copy(e).multiplyScalar(t)}projectOnPlane(e){return Js.copy(this).projectOnVector(e),this.sub(Js)}reflect(e){return this.sub(Js.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const s=Math.sqrt(this.lengthSq()*e.lengthSq());if(s===0)return Math.PI/2;const t=this.dot(e)/s;return Math.acos(or(t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const s=this.x-e.x,t=this.y-e.y,g=this.z-e.z;return s*s+t*t+g*g}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,s,t){const g=Math.sin(s)*e;return this.x=g*Math.sin(t),this.y=Math.cos(s)*e,this.z=g*Math.cos(t),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,s,t){return this.x=e*Math.sin(s),this.y=t,this.z=e*Math.cos(s),this}setFromMatrixPosition(e){const s=e.elements;return this.x=s[12],this.y=s[13],this.z=s[14],this}setFromMatrixScale(e){const s=this.setFromMatrixColumn(e,0).length(),t=this.setFromMatrixColumn(e,1).length(),g=this.setFromMatrixColumn(e,2).length();return this.x=s,this.y=t,this.z=g,this}setFromMatrixColumn(e,s){return this.fromArray(e.elements,s*4)}setFromMatrix3Column(e,s){return this.fromArray(e.elements,s*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,s=0){return this.x=e[s],this.y=e[s+1],this.z=e[s+2],this}toArray(e=[],s=0){return e[s]=this.x,e[s+1]=this.y,e[s+2]=this.z,e}fromBufferAttribute(e,s,t){return t!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(s),this.y=e.getY(s),this.z=e.getZ(s),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,s=Math.random()*Math.PI*2,t=Math.sqrt(1-e**2);return this.x=t*Math.cos(s),this.y=t*Math.sin(s),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Js=new De,yl=new Fi;class Ui{constructor(e=new De(1/0,1/0,1/0),s=new De(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=s}set(e,s){return this.min.copy(e),this.max.copy(s),this}setFromArray(e){let s=1/0,t=1/0,g=1/0,m=-1/0,p=-1/0,r=-1/0;for(let h=0,u=e.length;h<u;h+=3){const d=e[h],c=e[h+1],i=e[h+2];d<s&&(s=d),c<t&&(t=c),i<g&&(g=i),d>m&&(m=d),c>p&&(p=c),i>r&&(r=i)}return this.min.set(s,t,g),this.max.set(m,p,r),this}setFromBufferAttribute(e){let s=1/0,t=1/0,g=1/0,m=-1/0,p=-1/0,r=-1/0;for(let h=0,u=e.count;h<u;h++){const d=e.getX(h),c=e.getY(h),i=e.getZ(h);d<s&&(s=d),c<t&&(t=c),i<g&&(g=i),d>m&&(m=d),c>p&&(p=c),i>r&&(r=i)}return this.min.set(s,t,g),this.max.set(m,p,r),this}setFromPoints(e){this.makeEmpty();for(let s=0,t=e.length;s<t;s++)this.expandByPoint(e[s]);return this}setFromCenterAndSize(e,s){const t=Sn.copy(s).multiplyScalar(.5);return this.min.copy(e).sub(t),this.max.copy(e).add(t),this}setFromObject(e,s=!1){return this.makeEmpty(),this.expandByObject(e,s)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,s=!1){e.updateWorldMatrix(!1,!1);const t=e.geometry;if(t!==void 0)if(s&&t.attributes!=null&&t.attributes.position!==void 0){const m=t.attributes.position;for(let p=0,r=m.count;p<r;p++)Sn.fromBufferAttribute(m,p).applyMatrix4(e.matrixWorld),this.expandByPoint(Sn)}else t.boundingBox===null&&t.computeBoundingBox(),$s.copy(t.boundingBox),$s.applyMatrix4(e.matrixWorld),this.union($s);const g=e.children;for(let m=0,p=g.length;m<p;m++)this.expandByObject(g[m],s);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,s){return s.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Sn),Sn.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let s,t;return e.normal.x>0?(s=e.normal.x*this.min.x,t=e.normal.x*this.max.x):(s=e.normal.x*this.max.x,t=e.normal.x*this.min.x),e.normal.y>0?(s+=e.normal.y*this.min.y,t+=e.normal.y*this.max.y):(s+=e.normal.y*this.max.y,t+=e.normal.y*this.min.y),e.normal.z>0?(s+=e.normal.z*this.min.z,t+=e.normal.z*this.max.z):(s+=e.normal.z*this.max.z,t+=e.normal.z*this.min.z),s<=-e.constant&&t>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Si),Ki.subVectors(this.max,Si),qn.subVectors(e.a,Si),Xn.subVectors(e.b,Si),Yn.subVectors(e.c,Si),cn.subVectors(Xn,qn),hn.subVectors(Yn,Xn),Mn.subVectors(qn,Yn);let s=[0,-cn.z,cn.y,0,-hn.z,hn.y,0,-Mn.z,Mn.y,cn.z,0,-cn.x,hn.z,0,-hn.x,Mn.z,0,-Mn.x,-cn.y,cn.x,0,-hn.y,hn.x,0,-Mn.y,Mn.x,0];return!Ks(s,qn,Xn,Yn,Ki)||(s=[1,0,0,0,1,0,0,0,1],!Ks(s,qn,Xn,Yn,Ki))?!1:(Qi.crossVectors(cn,hn),s=[Qi.x,Qi.y,Qi.z],Ks(s,qn,Xn,Yn,Ki))}clampPoint(e,s){return s.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Sn.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Sn).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:($r[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),$r[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),$r[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),$r[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),$r[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),$r[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),$r[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),$r[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints($r),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const $r=[new De,new De,new De,new De,new De,new De,new De,new De],Sn=new De,$s=new Ui,qn=new De,Xn=new De,Yn=new De,cn=new De,hn=new De,Mn=new De,Si=new De,Ki=new De,Qi=new De,En=new De;function Ks(S,e,s,t,g){for(let m=0,p=S.length-3;m<=p;m+=3){En.fromArray(S,m);const r=g.x*Math.abs(En.x)+g.y*Math.abs(En.y)+g.z*Math.abs(En.z),h=e.dot(En),u=s.dot(En),d=t.dot(En);if(Math.max(-Math.max(h,u,d),Math.min(h,u,d))>r)return!1}return!0}const Cf=new Ui,vl=new De,es=new De,Qs=new De;class Oo{constructor(e=new De,s=-1){this.center=e,this.radius=s}set(e,s){return this.center.copy(e),this.radius=s,this}setFromPoints(e,s){const t=this.center;s!==void 0?t.copy(s):Cf.setFromPoints(e).getCenter(t);let g=0;for(let m=0,p=e.length;m<p;m++)g=Math.max(g,t.distanceToSquared(e[m]));return this.radius=Math.sqrt(g),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const s=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=s*s}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,s){const t=this.center.distanceToSquared(e);return s.copy(e),t>this.radius*this.radius&&(s.sub(this.center).normalize(),s.multiplyScalar(this.radius).add(this.center)),s}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Qs.subVectors(e,this.center);const s=Qs.lengthSq();if(s>this.radius*this.radius){const t=Math.sqrt(s),g=(t-this.radius)*.5;this.center.add(Qs.multiplyScalar(g/t)),this.radius+=g}return this}union(e){return this.center.equals(e.center)===!0?es.set(0,0,1).multiplyScalar(e.radius):es.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(vl.copy(e.center).add(es)),this.expandByPoint(vl.copy(e.center).sub(es)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Kr=new De,eo=new De,ts=new De,dn=new De,to=new De,rs=new De,ro=new De;class Lf{constructor(e=new De,s=new De(0,0,-1)){this.origin=e,this.direction=s}set(e,s){return this.origin.copy(e),this.direction.copy(s),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,s){return s.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Kr)),this}closestPointToPoint(e,s){s.subVectors(e,this.origin);const t=s.dot(this.direction);return t<0?s.copy(this.origin):s.copy(this.direction).multiplyScalar(t).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const s=Kr.subVectors(e,this.origin).dot(this.direction);return s<0?this.origin.distanceToSquared(e):(Kr.copy(this.direction).multiplyScalar(s).add(this.origin),Kr.distanceToSquared(e))}distanceSqToSegment(e,s,t,g){eo.copy(e).add(s).multiplyScalar(.5),ts.copy(s).sub(e).normalize(),dn.copy(this.origin).sub(eo);const m=e.distanceTo(s)*.5,p=-this.direction.dot(ts),r=dn.dot(this.direction),h=-dn.dot(ts),u=dn.lengthSq(),d=Math.abs(1-p*p);let c,i,n,o;if(d>0)if(c=p*h-r,i=p*r-h,o=m*d,c>=0)if(i>=-o)if(i<=o){const l=1/d;c*=l,i*=l,n=c*(c+p*i+2*r)+i*(p*c+i+2*h)+u}else i=m,c=Math.max(0,-(p*i+r)),n=-c*c+i*(i+2*h)+u;else i=-m,c=Math.max(0,-(p*i+r)),n=-c*c+i*(i+2*h)+u;else i<=-o?(c=Math.max(0,-(-p*m+r)),i=c>0?-m:Math.min(Math.max(-m,-h),m),n=-c*c+i*(i+2*h)+u):i<=o?(c=0,i=Math.min(Math.max(-m,-h),m),n=i*(i+2*h)+u):(c=Math.max(0,-(p*m+r)),i=c>0?m:Math.min(Math.max(-m,-h),m),n=-c*c+i*(i+2*h)+u);else i=p>0?-m:m,c=Math.max(0,-(p*i+r)),n=-c*c+i*(i+2*h)+u;return t&&t.copy(this.direction).multiplyScalar(c).add(this.origin),g&&g.copy(ts).multiplyScalar(i).add(eo),n}intersectSphere(e,s){Kr.subVectors(e.center,this.origin);const t=Kr.dot(this.direction),g=Kr.dot(Kr)-t*t,m=e.radius*e.radius;if(g>m)return null;const p=Math.sqrt(m-g),r=t-p,h=t+p;return r<0&&h<0?null:r<0?this.at(h,s):this.at(r,s)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const s=e.normal.dot(this.direction);if(s===0)return e.distanceToPoint(this.origin)===0?0:null;const t=-(this.origin.dot(e.normal)+e.constant)/s;return t>=0?t:null}intersectPlane(e,s){const t=this.distanceToPlane(e);return t===null?null:this.at(t,s)}intersectsPlane(e){const s=e.distanceToPoint(this.origin);return s===0||e.normal.dot(this.direction)*s<0}intersectBox(e,s){let t,g,m,p,r,h;const u=1/this.direction.x,d=1/this.direction.y,c=1/this.direction.z,i=this.origin;return u>=0?(t=(e.min.x-i.x)*u,g=(e.max.x-i.x)*u):(t=(e.max.x-i.x)*u,g=(e.min.x-i.x)*u),d>=0?(m=(e.min.y-i.y)*d,p=(e.max.y-i.y)*d):(m=(e.max.y-i.y)*d,p=(e.min.y-i.y)*d),t>p||m>g||((m>t||t!==t)&&(t=m),(p<g||g!==g)&&(g=p),c>=0?(r=(e.min.z-i.z)*c,h=(e.max.z-i.z)*c):(r=(e.max.z-i.z)*c,h=(e.min.z-i.z)*c),t>h||r>g)||((r>t||t!==t)&&(t=r),(h<g||g!==g)&&(g=h),g<0)?null:this.at(t>=0?t:g,s)}intersectsBox(e){return this.intersectBox(e,Kr)!==null}intersectTriangle(e,s,t,g,m){to.subVectors(s,e),rs.subVectors(t,e),ro.crossVectors(to,rs);let p=this.direction.dot(ro),r;if(p>0){if(g)return null;r=1}else if(p<0)r=-1,p=-p;else return null;dn.subVectors(this.origin,e);const h=r*this.direction.dot(rs.crossVectors(dn,rs));if(h<0)return null;const u=r*this.direction.dot(to.cross(dn));if(u<0||h+u>p)return null;const d=-r*dn.dot(ro);return d<0?null:this.at(d/p,m)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Jt{constructor(){this.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,s,t,g,m,p,r,h,u,d,c,i,n,o,l,a){const f=this.elements;return f[0]=e,f[4]=s,f[8]=t,f[12]=g,f[1]=m,f[5]=p,f[9]=r,f[13]=h,f[2]=u,f[6]=d,f[10]=c,f[14]=i,f[3]=n,f[7]=o,f[11]=l,f[15]=a,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Jt().fromArray(this.elements)}copy(e){const s=this.elements,t=e.elements;return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],this}copyPosition(e){const s=this.elements,t=e.elements;return s[12]=t[12],s[13]=t[13],s[14]=t[14],this}setFromMatrix3(e){const s=e.elements;return this.set(s[0],s[3],s[6],0,s[1],s[4],s[7],0,s[2],s[5],s[8],0,0,0,0,1),this}extractBasis(e,s,t){return e.setFromMatrixColumn(this,0),s.setFromMatrixColumn(this,1),t.setFromMatrixColumn(this,2),this}makeBasis(e,s,t){return this.set(e.x,s.x,t.x,0,e.y,s.y,t.y,0,e.z,s.z,t.z,0,0,0,0,1),this}extractRotation(e){const s=this.elements,t=e.elements,g=1/Zn.setFromMatrixColumn(e,0).length(),m=1/Zn.setFromMatrixColumn(e,1).length(),p=1/Zn.setFromMatrixColumn(e,2).length();return s[0]=t[0]*g,s[1]=t[1]*g,s[2]=t[2]*g,s[3]=0,s[4]=t[4]*m,s[5]=t[5]*m,s[6]=t[6]*m,s[7]=0,s[8]=t[8]*p,s[9]=t[9]*p,s[10]=t[10]*p,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const s=this.elements,t=e.x,g=e.y,m=e.z,p=Math.cos(t),r=Math.sin(t),h=Math.cos(g),u=Math.sin(g),d=Math.cos(m),c=Math.sin(m);if(e.order==="XYZ"){const i=p*d,n=p*c,o=r*d,l=r*c;s[0]=h*d,s[4]=-h*c,s[8]=u,s[1]=n+o*u,s[5]=i-l*u,s[9]=-r*h,s[2]=l-i*u,s[6]=o+n*u,s[10]=p*h}else if(e.order==="YXZ"){const i=h*d,n=h*c,o=u*d,l=u*c;s[0]=i+l*r,s[4]=o*r-n,s[8]=p*u,s[1]=p*c,s[5]=p*d,s[9]=-r,s[2]=n*r-o,s[6]=l+i*r,s[10]=p*h}else if(e.order==="ZXY"){const i=h*d,n=h*c,o=u*d,l=u*c;s[0]=i-l*r,s[4]=-p*c,s[8]=o+n*r,s[1]=n+o*r,s[5]=p*d,s[9]=l-i*r,s[2]=-p*u,s[6]=r,s[10]=p*h}else if(e.order==="ZYX"){const i=p*d,n=p*c,o=r*d,l=r*c;s[0]=h*d,s[4]=o*u-n,s[8]=i*u+l,s[1]=h*c,s[5]=l*u+i,s[9]=n*u-o,s[2]=-u,s[6]=r*h,s[10]=p*h}else if(e.order==="YZX"){const i=p*h,n=p*u,o=r*h,l=r*u;s[0]=h*d,s[4]=l-i*c,s[8]=o*c+n,s[1]=c,s[5]=p*d,s[9]=-r*d,s[2]=-u*d,s[6]=n*c+o,s[10]=i-l*c}else if(e.order==="XZY"){const i=p*h,n=p*u,o=r*h,l=r*u;s[0]=h*d,s[4]=-c,s[8]=u*d,s[1]=i*c+l,s[5]=p*d,s[9]=n*c-o,s[2]=o*c-n,s[6]=r*d,s[10]=l*c+i}return s[3]=0,s[7]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Pf,e,Rf)}lookAt(e,s,t){const g=this.elements;return mr.subVectors(e,s),mr.lengthSq()===0&&(mr.z=1),mr.normalize(),fn.crossVectors(t,mr),fn.lengthSq()===0&&(Math.abs(t.z)===1?mr.x+=1e-4:mr.z+=1e-4,mr.normalize(),fn.crossVectors(t,mr)),fn.normalize(),ns.crossVectors(mr,fn),g[0]=fn.x,g[4]=ns.x,g[8]=mr.x,g[1]=fn.y,g[5]=ns.y,g[9]=mr.y,g[2]=fn.z,g[6]=ns.z,g[10]=mr.z,this}multiply(e,s){return s!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,s)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,s){const t=e.elements,g=s.elements,m=this.elements,p=t[0],r=t[4],h=t[8],u=t[12],d=t[1],c=t[5],i=t[9],n=t[13],o=t[2],l=t[6],a=t[10],f=t[14],v=t[3],b=t[7],_=t[11],w=t[15],E=g[0],C=g[4],A=g[8],L=g[12],P=g[1],R=g[5],N=g[9],I=g[13],O=g[2],U=g[6],K=g[10],ee=g[14],H=g[3],te=g[7],Z=g[11],ge=g[15];return m[0]=p*E+r*P+h*O+u*H,m[4]=p*C+r*R+h*U+u*te,m[8]=p*A+r*N+h*K+u*Z,m[12]=p*L+r*I+h*ee+u*ge,m[1]=d*E+c*P+i*O+n*H,m[5]=d*C+c*R+i*U+n*te,m[9]=d*A+c*N+i*K+n*Z,m[13]=d*L+c*I+i*ee+n*ge,m[2]=o*E+l*P+a*O+f*H,m[6]=o*C+l*R+a*U+f*te,m[10]=o*A+l*N+a*K+f*Z,m[14]=o*L+l*I+a*ee+f*ge,m[3]=v*E+b*P+_*O+w*H,m[7]=v*C+b*R+_*U+w*te,m[11]=v*A+b*N+_*K+w*Z,m[15]=v*L+b*I+_*ee+w*ge,this}multiplyScalar(e){const s=this.elements;return s[0]*=e,s[4]*=e,s[8]*=e,s[12]*=e,s[1]*=e,s[5]*=e,s[9]*=e,s[13]*=e,s[2]*=e,s[6]*=e,s[10]*=e,s[14]*=e,s[3]*=e,s[7]*=e,s[11]*=e,s[15]*=e,this}determinant(){const e=this.elements,s=e[0],t=e[4],g=e[8],m=e[12],p=e[1],r=e[5],h=e[9],u=e[13],d=e[2],c=e[6],i=e[10],n=e[14],o=e[3],l=e[7],a=e[11],f=e[15];return o*(+m*h*c-g*u*c-m*r*i+t*u*i+g*r*n-t*h*n)+l*(+s*h*n-s*u*i+m*p*i-g*p*n+g*u*d-m*h*d)+a*(+s*u*c-s*r*n-m*p*c+t*p*n+m*r*d-t*u*d)+f*(-g*r*d-s*h*c+s*r*i+g*p*c-t*p*i+t*h*d)}transpose(){const e=this.elements;let s;return s=e[1],e[1]=e[4],e[4]=s,s=e[2],e[2]=e[8],e[8]=s,s=e[6],e[6]=e[9],e[9]=s,s=e[3],e[3]=e[12],e[12]=s,s=e[7],e[7]=e[13],e[13]=s,s=e[11],e[11]=e[14],e[14]=s,this}setPosition(e,s,t){const g=this.elements;return e.isVector3?(g[12]=e.x,g[13]=e.y,g[14]=e.z):(g[12]=e,g[13]=s,g[14]=t),this}invert(){const e=this.elements,s=e[0],t=e[1],g=e[2],m=e[3],p=e[4],r=e[5],h=e[6],u=e[7],d=e[8],c=e[9],i=e[10],n=e[11],o=e[12],l=e[13],a=e[14],f=e[15],v=c*a*u-l*i*u+l*h*n-r*a*n-c*h*f+r*i*f,b=o*i*u-d*a*u-o*h*n+p*a*n+d*h*f-p*i*f,_=d*l*u-o*c*u+o*r*n-p*l*n-d*r*f+p*c*f,w=o*c*h-d*l*h-o*r*i+p*l*i+d*r*a-p*c*a,E=s*v+t*b+g*_+m*w;if(E===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/E;return e[0]=v*C,e[1]=(l*i*m-c*a*m-l*g*n+t*a*n+c*g*f-t*i*f)*C,e[2]=(r*a*m-l*h*m+l*g*u-t*a*u-r*g*f+t*h*f)*C,e[3]=(c*h*m-r*i*m-c*g*u+t*i*u+r*g*n-t*h*n)*C,e[4]=b*C,e[5]=(d*a*m-o*i*m+o*g*n-s*a*n-d*g*f+s*i*f)*C,e[6]=(o*h*m-p*a*m-o*g*u+s*a*u+p*g*f-s*h*f)*C,e[7]=(p*i*m-d*h*m+d*g*u-s*i*u-p*g*n+s*h*n)*C,e[8]=_*C,e[9]=(o*c*m-d*l*m-o*t*n+s*l*n+d*t*f-s*c*f)*C,e[10]=(p*l*m-o*r*m+o*t*u-s*l*u-p*t*f+s*r*f)*C,e[11]=(d*r*m-p*c*m-d*t*u+s*c*u+p*t*n-s*r*n)*C,e[12]=w*C,e[13]=(d*l*g-o*c*g+o*t*i-s*l*i-d*t*a+s*c*a)*C,e[14]=(o*r*g-p*l*g-o*t*h+s*l*h+p*t*a-s*r*a)*C,e[15]=(p*c*g-d*r*g+d*t*h-s*c*h-p*t*i+s*r*i)*C,this}scale(e){const s=this.elements,t=e.x,g=e.y,m=e.z;return s[0]*=t,s[4]*=g,s[8]*=m,s[1]*=t,s[5]*=g,s[9]*=m,s[2]*=t,s[6]*=g,s[10]*=m,s[3]*=t,s[7]*=g,s[11]*=m,this}getMaxScaleOnAxis(){const e=this.elements,s=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],t=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],g=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(s,t,g))}makeTranslation(e,s,t){return this.set(1,0,0,e,0,1,0,s,0,0,1,t,0,0,0,1),this}makeRotationX(e){const s=Math.cos(e),t=Math.sin(e);return this.set(1,0,0,0,0,s,-t,0,0,t,s,0,0,0,0,1),this}makeRotationY(e){const s=Math.cos(e),t=Math.sin(e);return this.set(s,0,t,0,0,1,0,0,-t,0,s,0,0,0,0,1),this}makeRotationZ(e){const s=Math.cos(e),t=Math.sin(e);return this.set(s,-t,0,0,t,s,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,s){const t=Math.cos(s),g=Math.sin(s),m=1-t,p=e.x,r=e.y,h=e.z,u=m*p,d=m*r;return this.set(u*p+t,u*r-g*h,u*h+g*r,0,u*r+g*h,d*r+t,d*h-g*p,0,u*h-g*r,d*h+g*p,m*h*h+t,0,0,0,0,1),this}makeScale(e,s,t){return this.set(e,0,0,0,0,s,0,0,0,0,t,0,0,0,0,1),this}makeShear(e,s,t,g,m,p){return this.set(1,t,m,0,e,1,p,0,s,g,1,0,0,0,0,1),this}compose(e,s,t){const g=this.elements,m=s._x,p=s._y,r=s._z,h=s._w,u=m+m,d=p+p,c=r+r,i=m*u,n=m*d,o=m*c,l=p*d,a=p*c,f=r*c,v=h*u,b=h*d,_=h*c,w=t.x,E=t.y,C=t.z;return g[0]=(1-(l+f))*w,g[1]=(n+_)*w,g[2]=(o-b)*w,g[3]=0,g[4]=(n-_)*E,g[5]=(1-(i+f))*E,g[6]=(a+v)*E,g[7]=0,g[8]=(o+b)*C,g[9]=(a-v)*C,g[10]=(1-(i+l))*C,g[11]=0,g[12]=e.x,g[13]=e.y,g[14]=e.z,g[15]=1,this}decompose(e,s,t){const g=this.elements;let m=Zn.set(g[0],g[1],g[2]).length();const p=Zn.set(g[4],g[5],g[6]).length(),r=Zn.set(g[8],g[9],g[10]).length();this.determinant()<0&&(m=-m),e.x=g[12],e.y=g[13],e.z=g[14],Pr.copy(this);const u=1/m,d=1/p,c=1/r;return Pr.elements[0]*=u,Pr.elements[1]*=u,Pr.elements[2]*=u,Pr.elements[4]*=d,Pr.elements[5]*=d,Pr.elements[6]*=d,Pr.elements[8]*=c,Pr.elements[9]*=c,Pr.elements[10]*=c,s.setFromRotationMatrix(Pr),t.x=m,t.y=p,t.z=r,this}makePerspective(e,s,t,g,m,p){p===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const r=this.elements,h=2*m/(s-e),u=2*m/(t-g),d=(s+e)/(s-e),c=(t+g)/(t-g),i=-(p+m)/(p-m),n=-2*p*m/(p-m);return r[0]=h,r[4]=0,r[8]=d,r[12]=0,r[1]=0,r[5]=u,r[9]=c,r[13]=0,r[2]=0,r[6]=0,r[10]=i,r[14]=n,r[3]=0,r[7]=0,r[11]=-1,r[15]=0,this}makeOrthographic(e,s,t,g,m,p){const r=this.elements,h=1/(s-e),u=1/(t-g),d=1/(p-m),c=(s+e)*h,i=(t+g)*u,n=(p+m)*d;return r[0]=2*h,r[4]=0,r[8]=0,r[12]=-c,r[1]=0,r[5]=2*u,r[9]=0,r[13]=-i,r[2]=0,r[6]=0,r[10]=-2*d,r[14]=-n,r[3]=0,r[7]=0,r[11]=0,r[15]=1,this}equals(e){const s=this.elements,t=e.elements;for(let g=0;g<16;g++)if(s[g]!==t[g])return!1;return!0}fromArray(e,s=0){for(let t=0;t<16;t++)this.elements[t]=e[t+s];return this}toArray(e=[],s=0){const t=this.elements;return e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3],e[s+4]=t[4],e[s+5]=t[5],e[s+6]=t[6],e[s+7]=t[7],e[s+8]=t[8],e[s+9]=t[9],e[s+10]=t[10],e[s+11]=t[11],e[s+12]=t[12],e[s+13]=t[13],e[s+14]=t[14],e[s+15]=t[15],e}}const Zn=new De,Pr=new Jt,Pf=new De(0,0,0),Rf=new De(1,1,1),fn=new De,ns=new De,mr=new De,bl=new Jt,_l=new Fi;class Bi{constructor(e=0,s=0,t=0,g=Bi.DefaultOrder){this.isEuler=!0,this._x=e,this._y=s,this._z=t,this._order=g}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,s,t,g=this._order){return this._x=e,this._y=s,this._z=t,this._order=g,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,s=this._order,t=!0){const g=e.elements,m=g[0],p=g[4],r=g[8],h=g[1],u=g[5],d=g[9],c=g[2],i=g[6],n=g[10];switch(s){case"XYZ":this._y=Math.asin(or(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(-d,n),this._z=Math.atan2(-p,m)):(this._x=Math.atan2(i,u),this._z=0);break;case"YXZ":this._x=Math.asin(-or(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(r,n),this._z=Math.atan2(h,u)):(this._y=Math.atan2(-c,m),this._z=0);break;case"ZXY":this._x=Math.asin(or(i,-1,1)),Math.abs(i)<.9999999?(this._y=Math.atan2(-c,n),this._z=Math.atan2(-p,u)):(this._y=0,this._z=Math.atan2(h,m));break;case"ZYX":this._y=Math.asin(-or(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(i,n),this._z=Math.atan2(h,m)):(this._x=0,this._z=Math.atan2(-p,u));break;case"YZX":this._z=Math.asin(or(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-c,m)):(this._x=0,this._y=Math.atan2(r,n));break;case"XZY":this._z=Math.asin(-or(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(i,u),this._y=Math.atan2(r,m)):(this._x=Math.atan2(-d,n),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+s)}return this._order=s,t===!0&&this._onChangeCallback(),this}setFromQuaternion(e,s,t){return bl.makeRotationFromQuaternion(e),this.setFromRotationMatrix(bl,s,t)}setFromVector3(e,s=this._order){return this.set(e.x,e.y,e.z,s)}reorder(e){return _l.setFromEuler(this),this.setFromQuaternion(_l,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],s=0){return e[s]=this._x,e[s+1]=this._y,e[s+2]=this._z,e[s+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Bi.DefaultOrder="XYZ";Bi.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class yu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Df=0;const xl=new De,Jn=new Fi,Qr=new Jt,is=new De,Mi=new De,jf=new De,If=new Fi,wl=new De(1,0,0),Sl=new De(0,1,0),Ml=new De(0,0,1),Of={type:"added"},El={type:"removed"};class Sr extends yi{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Df++}),this.uuid=vi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Sr.DefaultUp.clone();const e=new De,s=new Bi,t=new Fi,g=new De(1,1,1);function m(){t.setFromEuler(s,!1)}function p(){s.setFromQuaternion(t,void 0,!1)}s._onChange(m),t._onChange(p),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:s},quaternion:{configurable:!0,enumerable:!0,value:t},scale:{configurable:!0,enumerable:!0,value:g},modelViewMatrix:{value:new Jt},normalMatrix:{value:new ar}}),this.matrix=new Jt,this.matrixWorld=new Jt,this.matrixAutoUpdate=Sr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new yu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,s){this.quaternion.setFromAxisAngle(e,s)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,s){return Jn.setFromAxisAngle(e,s),this.quaternion.multiply(Jn),this}rotateOnWorldAxis(e,s){return Jn.setFromAxisAngle(e,s),this.quaternion.premultiply(Jn),this}rotateX(e){return this.rotateOnAxis(wl,e)}rotateY(e){return this.rotateOnAxis(Sl,e)}rotateZ(e){return this.rotateOnAxis(Ml,e)}translateOnAxis(e,s){return xl.copy(e).applyQuaternion(this.quaternion),this.position.add(xl.multiplyScalar(s)),this}translateX(e){return this.translateOnAxis(wl,e)}translateY(e){return this.translateOnAxis(Sl,e)}translateZ(e){return this.translateOnAxis(Ml,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Qr.copy(this.matrixWorld).invert())}lookAt(e,s,t){e.isVector3?is.copy(e):is.set(e,s,t);const g=this.parent;this.updateWorldMatrix(!0,!1),Mi.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Qr.lookAt(Mi,is,this.up):Qr.lookAt(is,Mi,this.up),this.quaternion.setFromRotationMatrix(Qr),g&&(Qr.extractRotation(g.matrixWorld),Jn.setFromRotationMatrix(Qr),this.quaternion.premultiply(Jn.invert()))}add(e){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Of)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const s=this.children.indexOf(e);return s!==-1&&(e.parent=null,this.children.splice(s,1),e.dispatchEvent(El)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const s=this.children[e];s.parent=null,s.dispatchEvent(El)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Qr.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Qr.multiply(e.parent.matrixWorld)),e.applyMatrix4(Qr),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,s){if(this[e]===s)return this;for(let t=0,g=this.children.length;t<g;t++){const p=this.children[t].getObjectByProperty(e,s);if(p!==void 0)return p}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Mi,e,jf),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Mi,If,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const s=this.matrixWorld.elements;return e.set(s[8],s[9],s[10]).normalize()}raycast(){}traverse(e){e(this);const s=this.children;for(let t=0,g=s.length;t<g;t++)s[t].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const s=this.children;for(let t=0,g=s.length;t<g;t++)s[t].traverseVisible(e)}traverseAncestors(e){const s=this.parent;s!==null&&(e(s),s.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const s=this.children;for(let t=0,g=s.length;t<g;t++)s[t].updateMatrixWorld(e)}updateWorldMatrix(e,s){const t=this.parent;if(e===!0&&t!==null&&t.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),s===!0){const g=this.children;for(let m=0,p=g.length;m<p;m++)g[m].updateWorldMatrix(!1,!0)}}toJSON(e){const s=e===void 0||typeof e=="string",t={};s&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},t.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const g={};g.uuid=this.uuid,g.type=this.type,this.name!==""&&(g.name=this.name),this.castShadow===!0&&(g.castShadow=!0),this.receiveShadow===!0&&(g.receiveShadow=!0),this.visible===!1&&(g.visible=!1),this.frustumCulled===!1&&(g.frustumCulled=!1),this.renderOrder!==0&&(g.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(g.userData=this.userData),g.layers=this.layers.mask,g.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(g.matrixAutoUpdate=!1),this.isInstancedMesh&&(g.type="InstancedMesh",g.count=this.count,g.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(g.instanceColor=this.instanceColor.toJSON()));function m(r,h){return r[h.uuid]===void 0&&(r[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?g.background=this.background.toJSON():this.background.isTexture&&(g.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(g.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){g.geometry=m(e.geometries,this.geometry);const r=this.geometry.parameters;if(r!==void 0&&r.shapes!==void 0){const h=r.shapes;if(Array.isArray(h))for(let u=0,d=h.length;u<d;u++){const c=h[u];m(e.shapes,c)}else m(e.shapes,h)}}if(this.isSkinnedMesh&&(g.bindMode=this.bindMode,g.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(m(e.skeletons,this.skeleton),g.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const r=[];for(let h=0,u=this.material.length;h<u;h++)r.push(m(e.materials,this.material[h]));g.material=r}else g.material=m(e.materials,this.material);if(this.children.length>0){g.children=[];for(let r=0;r<this.children.length;r++)g.children.push(this.children[r].toJSON(e).object)}if(this.animations.length>0){g.animations=[];for(let r=0;r<this.animations.length;r++){const h=this.animations[r];g.animations.push(m(e.animations,h))}}if(s){const r=p(e.geometries),h=p(e.materials),u=p(e.textures),d=p(e.images),c=p(e.shapes),i=p(e.skeletons),n=p(e.animations),o=p(e.nodes);r.length>0&&(t.geometries=r),h.length>0&&(t.materials=h),u.length>0&&(t.textures=u),d.length>0&&(t.images=d),c.length>0&&(t.shapes=c),i.length>0&&(t.skeletons=i),n.length>0&&(t.animations=n),o.length>0&&(t.nodes=o)}return t.object=g,t;function p(r){const h=[];for(const u in r){const d=r[u];delete d.metadata,h.push(d)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,s=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),s===!0)for(let t=0;t<e.children.length;t++){const g=e.children[t];this.add(g.clone())}return this}}Sr.DefaultUp=new De(0,1,0);Sr.DefaultMatrixAutoUpdate=!0;const Rr=new De,en=new De,no=new De,tn=new De,$n=new De,Kn=new De,Tl=new De,io=new De,so=new De,oo=new De;class Hr{constructor(e=new De,s=new De,t=new De){this.a=e,this.b=s,this.c=t}static getNormal(e,s,t,g){g.subVectors(t,s),Rr.subVectors(e,s),g.cross(Rr);const m=g.lengthSq();return m>0?g.multiplyScalar(1/Math.sqrt(m)):g.set(0,0,0)}static getBarycoord(e,s,t,g,m){Rr.subVectors(g,s),en.subVectors(t,s),no.subVectors(e,s);const p=Rr.dot(Rr),r=Rr.dot(en),h=Rr.dot(no),u=en.dot(en),d=en.dot(no),c=p*u-r*r;if(c===0)return m.set(-2,-1,-1);const i=1/c,n=(u*h-r*d)*i,o=(p*d-r*h)*i;return m.set(1-n-o,o,n)}static containsPoint(e,s,t,g){return this.getBarycoord(e,s,t,g,tn),tn.x>=0&&tn.y>=0&&tn.x+tn.y<=1}static getUV(e,s,t,g,m,p,r,h){return this.getBarycoord(e,s,t,g,tn),h.set(0,0),h.addScaledVector(m,tn.x),h.addScaledVector(p,tn.y),h.addScaledVector(r,tn.z),h}static isFrontFacing(e,s,t,g){return Rr.subVectors(t,s),en.subVectors(e,s),Rr.cross(en).dot(g)<0}set(e,s,t){return this.a.copy(e),this.b.copy(s),this.c.copy(t),this}setFromPointsAndIndices(e,s,t,g){return this.a.copy(e[s]),this.b.copy(e[t]),this.c.copy(e[g]),this}setFromAttributeAndIndices(e,s,t,g){return this.a.fromBufferAttribute(e,s),this.b.fromBufferAttribute(e,t),this.c.fromBufferAttribute(e,g),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Rr.subVectors(this.c,this.b),en.subVectors(this.a,this.b),Rr.cross(en).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Hr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,s){return Hr.getBarycoord(e,this.a,this.b,this.c,s)}getUV(e,s,t,g,m){return Hr.getUV(e,this.a,this.b,this.c,s,t,g,m)}containsPoint(e){return Hr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Hr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,s){const t=this.a,g=this.b,m=this.c;let p,r;$n.subVectors(g,t),Kn.subVectors(m,t),io.subVectors(e,t);const h=$n.dot(io),u=Kn.dot(io);if(h<=0&&u<=0)return s.copy(t);so.subVectors(e,g);const d=$n.dot(so),c=Kn.dot(so);if(d>=0&&c<=d)return s.copy(g);const i=h*c-d*u;if(i<=0&&h>=0&&d<=0)return p=h/(h-d),s.copy(t).addScaledVector($n,p);oo.subVectors(e,m);const n=$n.dot(oo),o=Kn.dot(oo);if(o>=0&&n<=o)return s.copy(m);const l=n*u-h*o;if(l<=0&&u>=0&&o<=0)return r=u/(u-o),s.copy(t).addScaledVector(Kn,r);const a=d*o-n*c;if(a<=0&&c-d>=0&&n-o>=0)return Tl.subVectors(m,g),r=(c-d)/(c-d+(n-o)),s.copy(g).addScaledVector(Tl,r);const f=1/(a+l+i);return p=l*f,r=i*f,s.copy(t).addScaledVector($n,p).addScaledVector(Kn,r)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let kf=0;class ir extends yi{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:kf++}),this.uuid=vi(),this.name="",this.type="Material",this.blending=li,this.side=ji,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=lu,this.blendDst=uu,this.blendEquation=si,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Mo,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Mf,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Hs,this.stencilZFail=Hs,this.stencilZPass=Hs,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const s in e){const t=e[s];if(t===void 0){console.warn("THREE.Material: '"+s+"' parameter is undefined.");continue}if(s==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===Rd;continue}const g=this[s];if(g===void 0){console.warn("THREE."+this.type+": '"+s+"' is not a property of this material.");continue}g&&g.isColor?g.set(t):g&&g.isVector3&&t&&t.isVector3?g.copy(t):this[s]=t}}toJSON(e){const s=e===void 0||typeof e=="string";s&&(e={textures:{},images:{}});const t={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.color&&this.color.isColor&&(t.color=this.color.getHex()),this.roughness!==void 0&&(t.roughness=this.roughness),this.metalness!==void 0&&(t.metalness=this.metalness),this.sheen!==void 0&&(t.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(t.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(t.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(t.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(t.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(t.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(t.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(t.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(t.shininess=this.shininess),this.clearcoat!==void 0&&(t.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(t.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(t.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(t.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(t.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,t.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(t.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(t.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(t.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(t.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(t.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(t.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(t.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(t.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(t.lightMap=this.lightMap.toJSON(e).uuid,t.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(t.aoMap=this.aoMap.toJSON(e).uuid,t.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(t.bumpMap=this.bumpMap.toJSON(e).uuid,t.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(t.normalMap=this.normalMap.toJSON(e).uuid,t.normalMapType=this.normalMapType,t.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(t.displacementMap=this.displacementMap.toJSON(e).uuid,t.displacementScale=this.displacementScale,t.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(t.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(t.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(t.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(t.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(t.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(t.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(t.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(t.combine=this.combine)),this.envMapIntensity!==void 0&&(t.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(t.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(t.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(t.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(t.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(t.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(t.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(t.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(t.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(t.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(t.size=this.size),this.shadowSide!==null&&(t.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(t.sizeAttenuation=this.sizeAttenuation),this.blending!==li&&(t.blending=this.blending),this.side!==ji&&(t.side=this.side),this.vertexColors&&(t.vertexColors=!0),this.opacity<1&&(t.opacity=this.opacity),this.transparent===!0&&(t.transparent=this.transparent),t.depthFunc=this.depthFunc,t.depthTest=this.depthTest,t.depthWrite=this.depthWrite,t.colorWrite=this.colorWrite,t.stencilWrite=this.stencilWrite,t.stencilWriteMask=this.stencilWriteMask,t.stencilFunc=this.stencilFunc,t.stencilRef=this.stencilRef,t.stencilFuncMask=this.stencilFuncMask,t.stencilFail=this.stencilFail,t.stencilZFail=this.stencilZFail,t.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(t.rotation=this.rotation),this.polygonOffset===!0&&(t.polygonOffset=!0),this.polygonOffsetFactor!==0&&(t.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(t.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(t.linewidth=this.linewidth),this.dashSize!==void 0&&(t.dashSize=this.dashSize),this.gapSize!==void 0&&(t.gapSize=this.gapSize),this.scale!==void 0&&(t.scale=this.scale),this.dithering===!0&&(t.dithering=!0),this.alphaTest>0&&(t.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(t.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(t.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(t.wireframe=this.wireframe),this.wireframeLinewidth>1&&(t.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(t.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(t.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(t.flatShading=this.flatShading),this.visible===!1&&(t.visible=!1),this.toneMapped===!1&&(t.toneMapped=!1),this.fog===!1&&(t.fog=!1),JSON.stringify(this.userData)!=="{}"&&(t.userData=this.userData);function g(m){const p=[];for(const r in m){const h=m[r];delete h.metadata,p.push(h)}return p}if(s){const m=g(e.textures),p=g(e.images);m.length>0&&(t.textures=m),p.length>0&&(t.images=p)}return t}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const s=e.clippingPlanes;let t=null;if(s!==null){const g=s.length;t=new Array(g);for(let m=0;m!==g;++m)t[m]=s[m].clone()}return this.clippingPlanes=t,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}get vertexTangents(){return console.warn("THREE."+this.type+": .vertexTangents has been removed."),!1}set vertexTangents(e){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}ir.fromType=function(){return null};class ko extends ir{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new _t(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ms,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Zt=new De,ss=new Qe;class Wr{constructor(e,s,t){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=s,this.count=e!==void 0?e.length/s:0,this.normalized=t===!0,this.usage=fl,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,s,t){e*=this.itemSize,t*=s.itemSize;for(let g=0,m=this.itemSize;g<m;g++)this.array[e+g]=s.array[t+g];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const s=this.array;let t=0;for(let g=0,m=e.length;g<m;g++){let p=e[g];p===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",g),p=new _t),s[t++]=p.r,s[t++]=p.g,s[t++]=p.b}return this}copyVector2sArray(e){const s=this.array;let t=0;for(let g=0,m=e.length;g<m;g++){let p=e[g];p===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",g),p=new Qe),s[t++]=p.x,s[t++]=p.y}return this}copyVector3sArray(e){const s=this.array;let t=0;for(let g=0,m=e.length;g<m;g++){let p=e[g];p===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",g),p=new De),s[t++]=p.x,s[t++]=p.y,s[t++]=p.z}return this}copyVector4sArray(e){const s=this.array;let t=0;for(let g=0,m=e.length;g<m;g++){let p=e[g];p===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",g),p=new Vt),s[t++]=p.x,s[t++]=p.y,s[t++]=p.z,s[t++]=p.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let s=0,t=this.count;s<t;s++)ss.fromBufferAttribute(this,s),ss.applyMatrix3(e),this.setXY(s,ss.x,ss.y);else if(this.itemSize===3)for(let s=0,t=this.count;s<t;s++)Zt.fromBufferAttribute(this,s),Zt.applyMatrix3(e),this.setXYZ(s,Zt.x,Zt.y,Zt.z);return this}applyMatrix4(e){for(let s=0,t=this.count;s<t;s++)Zt.fromBufferAttribute(this,s),Zt.applyMatrix4(e),this.setXYZ(s,Zt.x,Zt.y,Zt.z);return this}applyNormalMatrix(e){for(let s=0,t=this.count;s<t;s++)Zt.fromBufferAttribute(this,s),Zt.applyNormalMatrix(e),this.setXYZ(s,Zt.x,Zt.y,Zt.z);return this}transformDirection(e){for(let s=0,t=this.count;s<t;s++)Zt.fromBufferAttribute(this,s),Zt.transformDirection(e),this.setXYZ(s,Zt.x,Zt.y,Zt.z);return this}set(e,s=0){return this.array.set(e,s),this}getX(e){return this.array[e*this.itemSize]}setX(e,s){return this.array[e*this.itemSize]=s,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,s){return this.array[e*this.itemSize+1]=s,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,s){return this.array[e*this.itemSize+2]=s,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,s){return this.array[e*this.itemSize+3]=s,this}setXY(e,s,t){return e*=this.itemSize,this.array[e+0]=s,this.array[e+1]=t,this}setXYZ(e,s,t,g){return e*=this.itemSize,this.array[e+0]=s,this.array[e+1]=t,this.array[e+2]=g,this}setXYZW(e,s,t,g,m){return e*=this.itemSize,this.array[e+0]=s,this.array[e+1]=t,this.array[e+2]=g,this.array[e+3]=m,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==fl&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class vu extends Wr{constructor(e,s,t){super(new Uint16Array(e),s,t)}}class bu extends Wr{constructor(e,s,t){super(new Uint32Array(e),s,t)}}class tr extends Wr{constructor(e,s,t){super(new Float32Array(e),s,t)}}let Nf=0;const br=new Jt,ao=new Sr,Qn=new De,gr=new Ui,Ei=new Ui,er=new De;class kr extends yi{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Nf++}),this.uuid=vi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(du(e)?bu:vu)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,s){return this.attributes[e]=s,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,s,t=0){this.groups.push({start:e,count:s,materialIndex:t})}clearGroups(){this.groups=[]}setDrawRange(e,s){this.drawRange.start=e,this.drawRange.count=s}applyMatrix4(e){const s=this.attributes.position;s!==void 0&&(s.applyMatrix4(e),s.needsUpdate=!0);const t=this.attributes.normal;if(t!==void 0){const m=new ar().getNormalMatrix(e);t.applyNormalMatrix(m),t.needsUpdate=!0}const g=this.attributes.tangent;return g!==void 0&&(g.transformDirection(e),g.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return br.makeRotationFromQuaternion(e),this.applyMatrix4(br),this}rotateX(e){return br.makeRotationX(e),this.applyMatrix4(br),this}rotateY(e){return br.makeRotationY(e),this.applyMatrix4(br),this}rotateZ(e){return br.makeRotationZ(e),this.applyMatrix4(br),this}translate(e,s,t){return br.makeTranslation(e,s,t),this.applyMatrix4(br),this}scale(e,s,t){return br.makeScale(e,s,t),this.applyMatrix4(br),this}lookAt(e){return ao.lookAt(e),ao.updateMatrix(),this.applyMatrix4(ao.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Qn).negate(),this.translate(Qn.x,Qn.y,Qn.z),this}setFromPoints(e){const s=[];for(let t=0,g=e.length;t<g;t++){const m=e[t];s.push(m.x,m.y,m.z||0)}return this.setAttribute("position",new tr(s,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ui);const e=this.attributes.position,s=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new De(-1/0,-1/0,-1/0),new De(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),s)for(let t=0,g=s.length;t<g;t++){const m=s[t];gr.setFromBufferAttribute(m),this.morphTargetsRelative?(er.addVectors(this.boundingBox.min,gr.min),this.boundingBox.expandByPoint(er),er.addVectors(this.boundingBox.max,gr.max),this.boundingBox.expandByPoint(er)):(this.boundingBox.expandByPoint(gr.min),this.boundingBox.expandByPoint(gr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Oo);const e=this.attributes.position,s=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new De,1/0);return}if(e){const t=this.boundingSphere.center;if(gr.setFromBufferAttribute(e),s)for(let m=0,p=s.length;m<p;m++){const r=s[m];Ei.setFromBufferAttribute(r),this.morphTargetsRelative?(er.addVectors(gr.min,Ei.min),gr.expandByPoint(er),er.addVectors(gr.max,Ei.max),gr.expandByPoint(er)):(gr.expandByPoint(Ei.min),gr.expandByPoint(Ei.max))}gr.getCenter(t);let g=0;for(let m=0,p=e.count;m<p;m++)er.fromBufferAttribute(e,m),g=Math.max(g,t.distanceToSquared(er));if(s)for(let m=0,p=s.length;m<p;m++){const r=s[m],h=this.morphTargetsRelative;for(let u=0,d=r.count;u<d;u++)er.fromBufferAttribute(r,u),h&&(Qn.fromBufferAttribute(e,u),er.add(Qn)),g=Math.max(g,t.distanceToSquared(er))}this.boundingSphere.radius=Math.sqrt(g),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,s=this.attributes;if(e===null||s.position===void 0||s.normal===void 0||s.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const t=e.array,g=s.position.array,m=s.normal.array,p=s.uv.array,r=g.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Wr(new Float32Array(4*r),4));const h=this.getAttribute("tangent").array,u=[],d=[];for(let P=0;P<r;P++)u[P]=new De,d[P]=new De;const c=new De,i=new De,n=new De,o=new Qe,l=new Qe,a=new Qe,f=new De,v=new De;function b(P,R,N){c.fromArray(g,P*3),i.fromArray(g,R*3),n.fromArray(g,N*3),o.fromArray(p,P*2),l.fromArray(p,R*2),a.fromArray(p,N*2),i.sub(c),n.sub(c),l.sub(o),a.sub(o);const I=1/(l.x*a.y-a.x*l.y);!isFinite(I)||(f.copy(i).multiplyScalar(a.y).addScaledVector(n,-l.y).multiplyScalar(I),v.copy(n).multiplyScalar(l.x).addScaledVector(i,-a.x).multiplyScalar(I),u[P].add(f),u[R].add(f),u[N].add(f),d[P].add(v),d[R].add(v),d[N].add(v))}let _=this.groups;_.length===0&&(_=[{start:0,count:t.length}]);for(let P=0,R=_.length;P<R;++P){const N=_[P],I=N.start,O=N.count;for(let U=I,K=I+O;U<K;U+=3)b(t[U+0],t[U+1],t[U+2])}const w=new De,E=new De,C=new De,A=new De;function L(P){C.fromArray(m,P*3),A.copy(C);const R=u[P];w.copy(R),w.sub(C.multiplyScalar(C.dot(R))).normalize(),E.crossVectors(A,R);const I=E.dot(d[P])<0?-1:1;h[P*4]=w.x,h[P*4+1]=w.y,h[P*4+2]=w.z,h[P*4+3]=I}for(let P=0,R=_.length;P<R;++P){const N=_[P],I=N.start,O=N.count;for(let U=I,K=I+O;U<K;U+=3)L(t[U+0]),L(t[U+1]),L(t[U+2])}}computeVertexNormals(){const e=this.index,s=this.getAttribute("position");if(s!==void 0){let t=this.getAttribute("normal");if(t===void 0)t=new Wr(new Float32Array(s.count*3),3),this.setAttribute("normal",t);else for(let i=0,n=t.count;i<n;i++)t.setXYZ(i,0,0,0);const g=new De,m=new De,p=new De,r=new De,h=new De,u=new De,d=new De,c=new De;if(e)for(let i=0,n=e.count;i<n;i+=3){const o=e.getX(i+0),l=e.getX(i+1),a=e.getX(i+2);g.fromBufferAttribute(s,o),m.fromBufferAttribute(s,l),p.fromBufferAttribute(s,a),d.subVectors(p,m),c.subVectors(g,m),d.cross(c),r.fromBufferAttribute(t,o),h.fromBufferAttribute(t,l),u.fromBufferAttribute(t,a),r.add(d),h.add(d),u.add(d),t.setXYZ(o,r.x,r.y,r.z),t.setXYZ(l,h.x,h.y,h.z),t.setXYZ(a,u.x,u.y,u.z)}else for(let i=0,n=s.count;i<n;i+=3)g.fromBufferAttribute(s,i+0),m.fromBufferAttribute(s,i+1),p.fromBufferAttribute(s,i+2),d.subVectors(p,m),c.subVectors(g,m),d.cross(c),t.setXYZ(i+0,d.x,d.y,d.z),t.setXYZ(i+1,d.x,d.y,d.z),t.setXYZ(i+2,d.x,d.y,d.z);this.normalizeNormals(),t.needsUpdate=!0}}merge(e,s){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}s===void 0&&(s=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const t=this.attributes;for(const g in t){if(e.attributes[g]===void 0)continue;const p=t[g].array,r=e.attributes[g],h=r.array,u=r.itemSize*s,d=Math.min(h.length,p.length-u);for(let c=0,i=u;c<d;c++,i++)p[i]=h[c]}return this}normalizeNormals(){const e=this.attributes.normal;for(let s=0,t=e.count;s<t;s++)er.fromBufferAttribute(e,s),er.normalize(),e.setXYZ(s,er.x,er.y,er.z)}toNonIndexed(){function e(r,h){const u=r.array,d=r.itemSize,c=r.normalized,i=new u.constructor(h.length*d);let n=0,o=0;for(let l=0,a=h.length;l<a;l++){r.isInterleavedBufferAttribute?n=h[l]*r.data.stride+r.offset:n=h[l]*d;for(let f=0;f<d;f++)i[o++]=u[n++]}return new Wr(i,d,c)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const s=new kr,t=this.index.array,g=this.attributes;for(const r in g){const h=g[r],u=e(h,t);s.setAttribute(r,u)}const m=this.morphAttributes;for(const r in m){const h=[],u=m[r];for(let d=0,c=u.length;d<c;d++){const i=u[d],n=e(i,t);h.push(n)}s.morphAttributes[r]=h}s.morphTargetsRelative=this.morphTargetsRelative;const p=this.groups;for(let r=0,h=p.length;r<h;r++){const u=p[r];s.addGroup(u.start,u.count,u.materialIndex)}return s}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const u in h)h[u]!==void 0&&(e[u]=h[u]);return e}e.data={attributes:{}};const s=this.index;s!==null&&(e.data.index={type:s.array.constructor.name,array:Array.prototype.slice.call(s.array)});const t=this.attributes;for(const h in t){const u=t[h];e.data.attributes[h]=u.toJSON(e.data)}const g={};let m=!1;for(const h in this.morphAttributes){const u=this.morphAttributes[h],d=[];for(let c=0,i=u.length;c<i;c++){const n=u[c];d.push(n.toJSON(e.data))}d.length>0&&(g[h]=d,m=!0)}m&&(e.data.morphAttributes=g,e.data.morphTargetsRelative=this.morphTargetsRelative);const p=this.groups;p.length>0&&(e.data.groups=JSON.parse(JSON.stringify(p)));const r=this.boundingSphere;return r!==null&&(e.data.boundingSphere={center:r.center.toArray(),radius:r.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const s={};this.name=e.name;const t=e.index;t!==null&&this.setIndex(t.clone(s));const g=e.attributes;for(const u in g){const d=g[u];this.setAttribute(u,d.clone(s))}const m=e.morphAttributes;for(const u in m){const d=[],c=m[u];for(let i=0,n=c.length;i<n;i++)d.push(c[i].clone(s));this.morphAttributes[u]=d}this.morphTargetsRelative=e.morphTargetsRelative;const p=e.groups;for(let u=0,d=p.length;u<d;u++){const c=p[u];this.addGroup(c.start,c.count,c.materialIndex)}const r=e.boundingBox;r!==null&&(this.boundingBox=r.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Al=new Jt,ei=new Lf,lo=new Oo,pn=new De,mn=new De,gn=new De,uo=new De,co=new De,ho=new De,os=new De,as=new De,ls=new De,us=new Qe,cs=new Qe,hs=new Qe,fo=new De,ds=new De;class wr extends Sr{constructor(e=new kr,s=new ko){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=s,this.updateMorphTargets()}copy(e,s){return super.copy(e,s),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const s=this.geometry.morphAttributes,t=Object.keys(s);if(t.length>0){const g=s[t[0]];if(g!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let m=0,p=g.length;m<p;m++){const r=g[m].name||String(m);this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=m}}}}raycast(e,s){const t=this.geometry,g=this.material,m=this.matrixWorld;if(g===void 0||(t.boundingSphere===null&&t.computeBoundingSphere(),lo.copy(t.boundingSphere),lo.applyMatrix4(m),e.ray.intersectsSphere(lo)===!1)||(Al.copy(m).invert(),ei.copy(e.ray).applyMatrix4(Al),t.boundingBox!==null&&ei.intersectsBox(t.boundingBox)===!1))return;let p;const r=t.index,h=t.attributes.position,u=t.morphAttributes.position,d=t.morphTargetsRelative,c=t.attributes.uv,i=t.attributes.uv2,n=t.groups,o=t.drawRange;if(r!==null)if(Array.isArray(g))for(let l=0,a=n.length;l<a;l++){const f=n[l],v=g[f.materialIndex],b=Math.max(f.start,o.start),_=Math.min(r.count,Math.min(f.start+f.count,o.start+o.count));for(let w=b,E=_;w<E;w+=3){const C=r.getX(w),A=r.getX(w+1),L=r.getX(w+2);p=fs(this,v,e,ei,h,u,d,c,i,C,A,L),p&&(p.faceIndex=Math.floor(w/3),p.face.materialIndex=f.materialIndex,s.push(p))}}else{const l=Math.max(0,o.start),a=Math.min(r.count,o.start+o.count);for(let f=l,v=a;f<v;f+=3){const b=r.getX(f),_=r.getX(f+1),w=r.getX(f+2);p=fs(this,g,e,ei,h,u,d,c,i,b,_,w),p&&(p.faceIndex=Math.floor(f/3),s.push(p))}}else if(h!==void 0)if(Array.isArray(g))for(let l=0,a=n.length;l<a;l++){const f=n[l],v=g[f.materialIndex],b=Math.max(f.start,o.start),_=Math.min(h.count,Math.min(f.start+f.count,o.start+o.count));for(let w=b,E=_;w<E;w+=3){const C=w,A=w+1,L=w+2;p=fs(this,v,e,ei,h,u,d,c,i,C,A,L),p&&(p.faceIndex=Math.floor(w/3),p.face.materialIndex=f.materialIndex,s.push(p))}}else{const l=Math.max(0,o.start),a=Math.min(h.count,o.start+o.count);for(let f=l,v=a;f<v;f+=3){const b=f,_=f+1,w=f+2;p=fs(this,g,e,ei,h,u,d,c,i,b,_,w),p&&(p.faceIndex=Math.floor(f/3),s.push(p))}}}}function Ff(S,e,s,t,g,m,p,r){let h;if(e.side===Ir?h=t.intersectTriangle(p,m,g,!0,r):h=t.intersectTriangle(g,m,p,e.side!==hi,r),h===null)return null;ds.copy(r),ds.applyMatrix4(S.matrixWorld);const u=s.ray.origin.distanceTo(ds);return u<s.near||u>s.far?null:{distance:u,point:ds.clone(),object:S}}function fs(S,e,s,t,g,m,p,r,h,u,d,c){pn.fromBufferAttribute(g,u),mn.fromBufferAttribute(g,d),gn.fromBufferAttribute(g,c);const i=S.morphTargetInfluences;if(m&&i){os.set(0,0,0),as.set(0,0,0),ls.set(0,0,0);for(let o=0,l=m.length;o<l;o++){const a=i[o],f=m[o];a!==0&&(uo.fromBufferAttribute(f,u),co.fromBufferAttribute(f,d),ho.fromBufferAttribute(f,c),p?(os.addScaledVector(uo,a),as.addScaledVector(co,a),ls.addScaledVector(ho,a)):(os.addScaledVector(uo.sub(pn),a),as.addScaledVector(co.sub(mn),a),ls.addScaledVector(ho.sub(gn),a)))}pn.add(os),mn.add(as),gn.add(ls)}S.isSkinnedMesh&&(S.boneTransform(u,pn),S.boneTransform(d,mn),S.boneTransform(c,gn));const n=Ff(S,e,s,t,pn,mn,gn,fo);if(n){r&&(us.fromBufferAttribute(r,u),cs.fromBufferAttribute(r,d),hs.fromBufferAttribute(r,c),n.uv=Hr.getUV(fo,pn,mn,gn,us,cs,hs,new Qe)),h&&(us.fromBufferAttribute(h,u),cs.fromBufferAttribute(h,d),hs.fromBufferAttribute(h,c),n.uv2=Hr.getUV(fo,pn,mn,gn,us,cs,hs,new Qe));const o={a:u,b:d,c,normal:new De,materialIndex:0};Hr.getNormal(pn,mn,gn,o.normal),n.face=o}return n}class Gi extends kr{constructor(e=1,s=1,t=1,g=1,m=1,p=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:s,depth:t,widthSegments:g,heightSegments:m,depthSegments:p};const r=this;g=Math.floor(g),m=Math.floor(m),p=Math.floor(p);const h=[],u=[],d=[],c=[];let i=0,n=0;o("z","y","x",-1,-1,t,s,e,p,m,0),o("z","y","x",1,-1,t,s,-e,p,m,1),o("x","z","y",1,1,e,t,s,g,p,2),o("x","z","y",1,-1,e,t,-s,g,p,3),o("x","y","z",1,-1,e,s,t,g,m,4),o("x","y","z",-1,-1,e,s,-t,g,m,5),this.setIndex(h),this.setAttribute("position",new tr(u,3)),this.setAttribute("normal",new tr(d,3)),this.setAttribute("uv",new tr(c,2));function o(l,a,f,v,b,_,w,E,C,A,L){const P=_/C,R=w/A,N=_/2,I=w/2,O=E/2,U=C+1,K=A+1;let ee=0,H=0;const te=new De;for(let Z=0;Z<K;Z++){const ge=Z*R-I;for(let $=0;$<U;$++){const se=$*P-N;te[l]=se*v,te[a]=ge*b,te[f]=O,u.push(te.x,te.y,te.z),te[l]=0,te[a]=0,te[f]=E>0?1:-1,d.push(te.x,te.y,te.z),c.push($/C),c.push(1-Z/A),ee+=1}}for(let Z=0;Z<A;Z++)for(let ge=0;ge<C;ge++){const $=i+ge+U*Z,se=i+ge+U*(Z+1),z=i+(ge+1)+U*(Z+1),de=i+(ge+1)+U*Z;h.push($,se,de),h.push(se,z,de),H+=6}r.addGroup(n,H,L),n+=H,i+=ee}}static fromJSON(e){return new Gi(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function mi(S){const e={};for(const s in S){e[s]={};for(const t in S[s]){const g=S[s][t];g&&(g.isColor||g.isMatrix3||g.isMatrix4||g.isVector2||g.isVector3||g.isVector4||g.isTexture||g.isQuaternion)?e[s][t]=g.clone():Array.isArray(g)?e[s][t]=g.slice():e[s][t]=g}}return e}function sr(S){const e={};for(let s=0;s<S.length;s++){const t=mi(S[s]);for(const g in t)e[g]=t[g]}return e}const Uf={clone:mi,merge:sr};var Bf=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Gf=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class on extends ir{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Bf,this.fragmentShader=Gf,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=mi(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const s=super.toJSON(e);s.glslVersion=this.glslVersion,s.uniforms={};for(const g in this.uniforms){const p=this.uniforms[g].value;p&&p.isTexture?s.uniforms[g]={type:"t",value:p.toJSON(e).uuid}:p&&p.isColor?s.uniforms[g]={type:"c",value:p.getHex()}:p&&p.isVector2?s.uniforms[g]={type:"v2",value:p.toArray()}:p&&p.isVector3?s.uniforms[g]={type:"v3",value:p.toArray()}:p&&p.isVector4?s.uniforms[g]={type:"v4",value:p.toArray()}:p&&p.isMatrix3?s.uniforms[g]={type:"m3",value:p.toArray()}:p&&p.isMatrix4?s.uniforms[g]={type:"m4",value:p.toArray()}:s.uniforms[g]={value:p}}Object.keys(this.defines).length>0&&(s.defines=this.defines),s.vertexShader=this.vertexShader,s.fragmentShader=this.fragmentShader;const t={};for(const g in this.extensions)this.extensions[g]===!0&&(t[g]=!0);return Object.keys(t).length>0&&(s.extensions=t),s}}class _u extends Sr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Jt,this.projectionMatrix=new Jt,this.projectionMatrixInverse=new Jt}copy(e,s){return super.copy(e,s),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const s=this.matrixWorld.elements;return e.set(-s[8],-s[9],-s[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,s){super.updateWorldMatrix(e,s),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class fr extends _u{constructor(e=50,s=1,t=.1,g=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=t,this.far=g,this.focus=10,this.aspect=s,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,s){return super.copy(e,s),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const s=.5*this.getFilmHeight()/e;this.fov=ml*2*Math.atan(s),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ws*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return ml*2*Math.atan(Math.tan(Ws*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,s,t,g,m,p){this.aspect=e/s,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=s,this.view.offsetX=t,this.view.offsetY=g,this.view.width=m,this.view.height=p,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let s=e*Math.tan(Ws*.5*this.fov)/this.zoom,t=2*s,g=this.aspect*t,m=-.5*g;const p=this.view;if(this.view!==null&&this.view.enabled){const h=p.fullWidth,u=p.fullHeight;m+=p.offsetX*g/h,s-=p.offsetY*t/u,g*=p.width/h,t*=p.height/u}const r=this.filmOffset;r!==0&&(m+=e*r/this.getFilmWidth()),this.projectionMatrix.makePerspective(m,m+g,s,s-t,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const s=super.toJSON(e);return s.object.fov=this.fov,s.object.zoom=this.zoom,s.object.near=this.near,s.object.far=this.far,s.object.focus=this.focus,s.object.aspect=this.aspect,this.view!==null&&(s.object.view=Object.assign({},this.view)),s.object.filmGauge=this.filmGauge,s.object.filmOffset=this.filmOffset,s}}const ti=90,ri=1;class zf extends Sr{constructor(e,s,t){if(super(),this.type="CubeCamera",t.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=t;const g=new fr(ti,ri,e,s);g.layers=this.layers,g.up.set(0,-1,0),g.lookAt(new De(1,0,0)),this.add(g);const m=new fr(ti,ri,e,s);m.layers=this.layers,m.up.set(0,-1,0),m.lookAt(new De(-1,0,0)),this.add(m);const p=new fr(ti,ri,e,s);p.layers=this.layers,p.up.set(0,0,1),p.lookAt(new De(0,1,0)),this.add(p);const r=new fr(ti,ri,e,s);r.layers=this.layers,r.up.set(0,0,-1),r.lookAt(new De(0,-1,0)),this.add(r);const h=new fr(ti,ri,e,s);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new De(0,0,1)),this.add(h);const u=new fr(ti,ri,e,s);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new De(0,0,-1)),this.add(u)}update(e,s){this.parent===null&&this.updateMatrixWorld();const t=this.renderTarget,[g,m,p,r,h,u]=this.children,d=e.getRenderTarget(),c=e.toneMapping,i=e.xr.enabled;e.toneMapping=sn,e.xr.enabled=!1;const n=t.texture.generateMipmaps;t.texture.generateMipmaps=!1,e.setRenderTarget(t,0),e.render(s,g),e.setRenderTarget(t,1),e.render(s,m),e.setRenderTarget(t,2),e.render(s,p),e.setRenderTarget(t,3),e.render(s,r),e.setRenderTarget(t,4),e.render(s,h),t.texture.generateMipmaps=n,e.setRenderTarget(t,5),e.render(s,u),e.setRenderTarget(d),e.toneMapping=c,e.xr.enabled=i,t.texture.needsPMREMUpdate=!0}}class xu extends Or{constructor(e,s,t,g,m,p,r,h,u,d){e=e!==void 0?e:[],s=s!==void 0?s:di,super(e,s,t,g,m,p,r,h,u,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Vf extends vn{constructor(e,s={}){super(e,e,s),this.isWebGLCubeRenderTarget=!0;const t={width:e,height:e,depth:1},g=[t,t,t,t,t,t];this.texture=new xu(g,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=s.generateMipmaps!==void 0?s.generateMipmaps:!1,this.texture.minFilter=s.minFilter!==void 0?s.minFilter:xr}fromEquirectangularTexture(e,s){this.texture.type=s.type,this.texture.encoding=s.encoding,this.texture.generateMipmaps=s.generateMipmaps,this.texture.minFilter=s.minFilter,this.texture.magFilter=s.magFilter;const t={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},g=new Gi(5,5,5),m=new on({name:"CubemapFromEquirect",uniforms:mi(t.uniforms),vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,side:Ir,blending:yn});m.uniforms.tEquirect.value=s;const p=new wr(g,m),r=s.minFilter;return s.minFilter===Ts&&(s.minFilter=xr),new zf(1,10,this).update(e,p),s.minFilter=r,p.geometry.dispose(),p.material.dispose(),this}clear(e,s,t,g){const m=e.getRenderTarget();for(let p=0;p<6;p++)e.setRenderTarget(this,p),e.clear(s,t,g);e.setRenderTarget(m)}}const po=new De,Hf=new De,Wf=new ar;class An{constructor(e=new De(1,0,0),s=0){this.isPlane=!0,this.normal=e,this.constant=s}set(e,s){return this.normal.copy(e),this.constant=s,this}setComponents(e,s,t,g){return this.normal.set(e,s,t),this.constant=g,this}setFromNormalAndCoplanarPoint(e,s){return this.normal.copy(e),this.constant=-s.dot(this.normal),this}setFromCoplanarPoints(e,s,t){const g=po.subVectors(t,s).cross(Hf.subVectors(e,s)).normalize();return this.setFromNormalAndCoplanarPoint(g,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,s){return s.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,s){const t=e.delta(po),g=this.normal.dot(t);if(g===0)return this.distanceToPoint(e.start)===0?s.copy(e.start):null;const m=-(e.start.dot(this.normal)+this.constant)/g;return m<0||m>1?null:s.copy(t).multiplyScalar(m).add(e.start)}intersectsLine(e){const s=this.distanceToPoint(e.start),t=this.distanceToPoint(e.end);return s<0&&t>0||t<0&&s>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,s){const t=s||Wf.getNormalMatrix(e),g=this.coplanarPoint(po).applyMatrix4(e),m=this.normal.applyMatrix3(t).normalize();return this.constant=-g.dot(m),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ni=new Oo,ps=new De;class No{constructor(e=new An,s=new An,t=new An,g=new An,m=new An,p=new An){this.planes=[e,s,t,g,m,p]}set(e,s,t,g,m,p){const r=this.planes;return r[0].copy(e),r[1].copy(s),r[2].copy(t),r[3].copy(g),r[4].copy(m),r[5].copy(p),this}copy(e){const s=this.planes;for(let t=0;t<6;t++)s[t].copy(e.planes[t]);return this}setFromProjectionMatrix(e){const s=this.planes,t=e.elements,g=t[0],m=t[1],p=t[2],r=t[3],h=t[4],u=t[5],d=t[6],c=t[7],i=t[8],n=t[9],o=t[10],l=t[11],a=t[12],f=t[13],v=t[14],b=t[15];return s[0].setComponents(r-g,c-h,l-i,b-a).normalize(),s[1].setComponents(r+g,c+h,l+i,b+a).normalize(),s[2].setComponents(r+m,c+u,l+n,b+f).normalize(),s[3].setComponents(r-m,c-u,l-n,b-f).normalize(),s[4].setComponents(r-p,c-d,l-o,b-v).normalize(),s[5].setComponents(r+p,c+d,l+o,b+v).normalize(),this}intersectsObject(e){const s=e.geometry;return s.boundingSphere===null&&s.computeBoundingSphere(),ni.copy(s.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(ni)}intersectsSprite(e){return ni.center.set(0,0,0),ni.radius=.7071067811865476,ni.applyMatrix4(e.matrixWorld),this.intersectsSphere(ni)}intersectsSphere(e){const s=this.planes,t=e.center,g=-e.radius;for(let m=0;m<6;m++)if(s[m].distanceToPoint(t)<g)return!1;return!0}intersectsBox(e){const s=this.planes;for(let t=0;t<6;t++){const g=s[t];if(ps.x=g.normal.x>0?e.max.x:e.min.x,ps.y=g.normal.y>0?e.max.y:e.min.y,ps.z=g.normal.z>0?e.max.z:e.min.z,g.distanceToPoint(ps)<0)return!1}return!0}containsPoint(e){const s=this.planes;for(let t=0;t<6;t++)if(s[t].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function wu(){let S=null,e=!1,s=null,t=null;function g(m,p){s(m,p),t=S.requestAnimationFrame(g)}return{start:function(){e!==!0&&s!==null&&(t=S.requestAnimationFrame(g),e=!0)},stop:function(){S.cancelAnimationFrame(t),e=!1},setAnimationLoop:function(m){s=m},setContext:function(m){S=m}}}function qf(S,e){const s=e.isWebGL2,t=new WeakMap;function g(u,d){const c=u.array,i=u.usage,n=S.createBuffer();S.bindBuffer(d,n),S.bufferData(d,c,i),u.onUploadCallback();let o;if(c instanceof Float32Array)o=5126;else if(c instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(s)o=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else o=5123;else if(c instanceof Int16Array)o=5122;else if(c instanceof Uint32Array)o=5125;else if(c instanceof Int32Array)o=5124;else if(c instanceof Int8Array)o=5120;else if(c instanceof Uint8Array)o=5121;else if(c instanceof Uint8ClampedArray)o=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:n,type:o,bytesPerElement:c.BYTES_PER_ELEMENT,version:u.version}}function m(u,d,c){const i=d.array,n=d.updateRange;S.bindBuffer(c,u),n.count===-1?S.bufferSubData(c,0,i):(s?S.bufferSubData(c,n.offset*i.BYTES_PER_ELEMENT,i,n.offset,n.count):S.bufferSubData(c,n.offset*i.BYTES_PER_ELEMENT,i.subarray(n.offset,n.offset+n.count)),n.count=-1)}function p(u){return u.isInterleavedBufferAttribute&&(u=u.data),t.get(u)}function r(u){u.isInterleavedBufferAttribute&&(u=u.data);const d=t.get(u);d&&(S.deleteBuffer(d.buffer),t.delete(u))}function h(u,d){if(u.isGLBufferAttribute){const i=t.get(u);(!i||i.version<u.version)&&t.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const c=t.get(u);c===void 0?t.set(u,g(u,d)):c.version<u.version&&(m(c.buffer,u,d),c.version=u.version)}return{get:p,remove:r,update:h}}class Fo extends kr{constructor(e=1,s=1,t=1,g=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:s,widthSegments:t,heightSegments:g};const m=e/2,p=s/2,r=Math.floor(t),h=Math.floor(g),u=r+1,d=h+1,c=e/r,i=s/h,n=[],o=[],l=[],a=[];for(let f=0;f<d;f++){const v=f*i-p;for(let b=0;b<u;b++){const _=b*c-m;o.push(_,-v,0),l.push(0,0,1),a.push(b/r),a.push(1-f/h)}}for(let f=0;f<h;f++)for(let v=0;v<r;v++){const b=v+u*f,_=v+u*(f+1),w=v+1+u*(f+1),E=v+1+u*f;n.push(b,_,E),n.push(_,w,E)}this.setIndex(n),this.setAttribute("position",new tr(o,3)),this.setAttribute("normal",new tr(l,3)),this.setAttribute("uv",new tr(a,2))}static fromJSON(e){return new Fo(e.width,e.height,e.widthSegments,e.heightSegments)}}var Xf=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Yf=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Zf=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Jf=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,$f=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Kf=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Qf="vec3 transformed = vec3( position );",ep=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,tp=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,rp=`#ifdef USE_IRIDESCENCE
const mat3 XYZ_TO_REC709 = mat3(
    3.2404542, -0.9692660,  0.0556434,
   -1.5371385,  1.8760108, -0.2040259,
   -0.4985314,  0.0415560,  1.0572252
);
vec3 Fresnel0ToIor( vec3 fresnel0 ) {
   vec3 sqrtF0 = sqrt( fresnel0 );
   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
}
vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
}
float IorToFresnel0( float transmittedIor, float incidentIor ) {
   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
}
vec3 evalSensitivity( float OPD, vec3 shift ) {
   float phase = 2.0 * PI * OPD * 1.0e-9;
   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );
   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );
   xyz /= 1.0685e-7;
   vec3 srgb = XYZ_TO_REC709 * xyz;
   return srgb;
}
vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
   vec3 I;
   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
   float cosTheta2Sq = 1.0 - sinTheta2Sq;
   if ( cosTheta2Sq < 0.0 ) {
       return vec3( 1.0 );
   }
   float cosTheta2 = sqrt( cosTheta2Sq );
   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
   float R12 = F_Schlick( R0, 1.0, cosTheta1 );
   float R21 = R12;
   float T121 = 1.0 - R12;
   float phi12 = 0.0;
   if ( iridescenceIOR < outsideIOR ) phi12 = PI;
   float phi21 = PI - phi12;
   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
   vec3 phi23 = vec3( 0.0 );
   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;
   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;
   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;
   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
   vec3 phi = vec3( phi21 ) + phi23;
   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
   vec3 r123 = sqrt( R123 );
   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
   vec3 C0 = R12 + Rs;
   I = C0;
   vec3 Cm = Rs - T121;
   for ( int m = 1; m <= 2; ++m ) {
       Cm *= r123;
       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
       I += Cm * Sm;
   }
   return max( I, vec3( 0.0 ) );
}
#endif`,np=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,ip=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,sp=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,op=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,ap=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,lp=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,up=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,cp=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,hp=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,dp=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,fp=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,pp=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,mp=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,gp=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,yp=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,vp=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,bp="gl_FragColor = linearToOutputTexel( gl_FragColor );",_p=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,xp=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,wp=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Sp=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Mp=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Ep=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Tp=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Ap=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Cp=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Lp=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Pp=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,Rp=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Dp=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,jp=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,Ip=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Op=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,kp=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Np=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,Fp=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Up=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,Bp=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Gp=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,zp=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
float dotNVi = saturate( dot( normal, geometry.viewDir ) );
if ( material.iridescenceThickness == 0.0 ) {
	material.iridescence = 0.0;
} else {
	material.iridescence = saturate( material.iridescence );
}
if ( material.iridescence > 0.0 ) {
	material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
	material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Vp=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Hp=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Wp=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,qp=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Xp=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Yp=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Zp=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Jp=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,$p=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Kp=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Qp=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,em=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,tm=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,rm=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,nm=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,im=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,sm=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,om=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,am=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,lm=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,um=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,cm=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,hm=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,dm=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,fm=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,pm=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,mm=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,gm=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,ym=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,vm=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,bm=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,_m=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,xm=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,wm=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Sm=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Mm=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Em=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,Tm=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Am=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Cm=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Lm=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Pm=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Rm=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Dm=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,jm=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Im=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Om=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,km=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,Nm=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Fm=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Um=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Bm=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Gm=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,zm=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Vm=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Hm=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Wm=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,qm=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Xm=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Ym=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Zm=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Jm=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,$m=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Km=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Qm=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,eg=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tg=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,rg=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,ng=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ig=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sg=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,og=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,ag=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lg=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,ug=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,cg=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hg=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dg=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fg=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pg=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mg=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gg=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,yg=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vg=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,bg=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,_g=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,xg=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Tt={alphamap_fragment:Xf,alphamap_pars_fragment:Yf,alphatest_fragment:Zf,alphatest_pars_fragment:Jf,aomap_fragment:$f,aomap_pars_fragment:Kf,begin_vertex:Qf,beginnormal_vertex:ep,bsdfs:tp,iridescence_fragment:rp,bumpmap_pars_fragment:np,clipping_planes_fragment:ip,clipping_planes_pars_fragment:sp,clipping_planes_pars_vertex:op,clipping_planes_vertex:ap,color_fragment:lp,color_pars_fragment:up,color_pars_vertex:cp,color_vertex:hp,common:dp,cube_uv_reflection_fragment:fp,defaultnormal_vertex:pp,displacementmap_pars_vertex:mp,displacementmap_vertex:gp,emissivemap_fragment:yp,emissivemap_pars_fragment:vp,encodings_fragment:bp,encodings_pars_fragment:_p,envmap_fragment:xp,envmap_common_pars_fragment:wp,envmap_pars_fragment:Sp,envmap_pars_vertex:Mp,envmap_physical_pars_fragment:Op,envmap_vertex:Ep,fog_vertex:Tp,fog_pars_vertex:Ap,fog_fragment:Cp,fog_pars_fragment:Lp,gradientmap_pars_fragment:Pp,lightmap_fragment:Rp,lightmap_pars_fragment:Dp,lights_lambert_vertex:jp,lights_pars_begin:Ip,lights_toon_fragment:kp,lights_toon_pars_fragment:Np,lights_phong_fragment:Fp,lights_phong_pars_fragment:Up,lights_physical_fragment:Bp,lights_physical_pars_fragment:Gp,lights_fragment_begin:zp,lights_fragment_maps:Vp,lights_fragment_end:Hp,logdepthbuf_fragment:Wp,logdepthbuf_pars_fragment:qp,logdepthbuf_pars_vertex:Xp,logdepthbuf_vertex:Yp,map_fragment:Zp,map_pars_fragment:Jp,map_particle_fragment:$p,map_particle_pars_fragment:Kp,metalnessmap_fragment:Qp,metalnessmap_pars_fragment:em,morphcolor_vertex:tm,morphnormal_vertex:rm,morphtarget_pars_vertex:nm,morphtarget_vertex:im,normal_fragment_begin:sm,normal_fragment_maps:om,normal_pars_fragment:am,normal_pars_vertex:lm,normal_vertex:um,normalmap_pars_fragment:cm,clearcoat_normal_fragment_begin:hm,clearcoat_normal_fragment_maps:dm,clearcoat_pars_fragment:fm,iridescence_pars_fragment:pm,output_fragment:mm,packing:gm,premultiplied_alpha_fragment:ym,project_vertex:vm,dithering_fragment:bm,dithering_pars_fragment:_m,roughnessmap_fragment:xm,roughnessmap_pars_fragment:wm,shadowmap_pars_fragment:Sm,shadowmap_pars_vertex:Mm,shadowmap_vertex:Em,shadowmask_pars_fragment:Tm,skinbase_vertex:Am,skinning_pars_vertex:Cm,skinning_vertex:Lm,skinnormal_vertex:Pm,specularmap_fragment:Rm,specularmap_pars_fragment:Dm,tonemapping_fragment:jm,tonemapping_pars_fragment:Im,transmission_fragment:Om,transmission_pars_fragment:km,uv_pars_fragment:Nm,uv_pars_vertex:Fm,uv_vertex:Um,uv2_pars_fragment:Bm,uv2_pars_vertex:Gm,uv2_vertex:zm,worldpos_vertex:Vm,background_vert:Hm,background_frag:Wm,cube_vert:qm,cube_frag:Xm,depth_vert:Ym,depth_frag:Zm,distanceRGBA_vert:Jm,distanceRGBA_frag:$m,equirect_vert:Km,equirect_frag:Qm,linedashed_vert:eg,linedashed_frag:tg,meshbasic_vert:rg,meshbasic_frag:ng,meshlambert_vert:ig,meshlambert_frag:sg,meshmatcap_vert:og,meshmatcap_frag:ag,meshnormal_vert:lg,meshnormal_frag:ug,meshphong_vert:cg,meshphong_frag:hg,meshphysical_vert:dg,meshphysical_frag:fg,meshtoon_vert:pg,meshtoon_frag:mg,points_vert:gg,points_frag:yg,shadow_vert:vg,shadow_frag:bg,sprite_vert:_g,sprite_frag:xg},it={common:{diffuse:{value:new _t(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ar},uv2Transform:{value:new ar},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Qe(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _t(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new _t(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ar}},sprite:{diffuse:{value:new _t(16777215)},opacity:{value:1},center:{value:new Qe(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ar}}},Vr={basic:{uniforms:sr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.fog]),vertexShader:Tt.meshbasic_vert,fragmentShader:Tt.meshbasic_frag},lambert:{uniforms:sr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.fog,it.lights,{emissive:{value:new _t(0)}}]),vertexShader:Tt.meshlambert_vert,fragmentShader:Tt.meshlambert_frag},phong:{uniforms:sr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new _t(0)},specular:{value:new _t(1118481)},shininess:{value:30}}]),vertexShader:Tt.meshphong_vert,fragmentShader:Tt.meshphong_frag},standard:{uniforms:sr([it.common,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.roughnessmap,it.metalnessmap,it.fog,it.lights,{emissive:{value:new _t(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Tt.meshphysical_vert,fragmentShader:Tt.meshphysical_frag},toon:{uniforms:sr([it.common,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.gradientmap,it.fog,it.lights,{emissive:{value:new _t(0)}}]),vertexShader:Tt.meshtoon_vert,fragmentShader:Tt.meshtoon_frag},matcap:{uniforms:sr([it.common,it.bumpmap,it.normalmap,it.displacementmap,it.fog,{matcap:{value:null}}]),vertexShader:Tt.meshmatcap_vert,fragmentShader:Tt.meshmatcap_frag},points:{uniforms:sr([it.points,it.fog]),vertexShader:Tt.points_vert,fragmentShader:Tt.points_frag},dashed:{uniforms:sr([it.common,it.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Tt.linedashed_vert,fragmentShader:Tt.linedashed_frag},depth:{uniforms:sr([it.common,it.displacementmap]),vertexShader:Tt.depth_vert,fragmentShader:Tt.depth_frag},normal:{uniforms:sr([it.common,it.bumpmap,it.normalmap,it.displacementmap,{opacity:{value:1}}]),vertexShader:Tt.meshnormal_vert,fragmentShader:Tt.meshnormal_frag},sprite:{uniforms:sr([it.sprite,it.fog]),vertexShader:Tt.sprite_vert,fragmentShader:Tt.sprite_frag},background:{uniforms:{uvTransform:{value:new ar},t2D:{value:null}},vertexShader:Tt.background_vert,fragmentShader:Tt.background_frag},cube:{uniforms:sr([it.envmap,{opacity:{value:1}}]),vertexShader:Tt.cube_vert,fragmentShader:Tt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Tt.equirect_vert,fragmentShader:Tt.equirect_frag},distanceRGBA:{uniforms:sr([it.common,it.displacementmap,{referencePosition:{value:new De},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Tt.distanceRGBA_vert,fragmentShader:Tt.distanceRGBA_frag},shadow:{uniforms:sr([it.lights,it.fog,{color:{value:new _t(0)},opacity:{value:1}}]),vertexShader:Tt.shadow_vert,fragmentShader:Tt.shadow_frag}};Vr.physical={uniforms:sr([Vr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Qe(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new _t(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Qe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new _t(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new _t(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Tt.meshphysical_vert,fragmentShader:Tt.meshphysical_frag};function wg(S,e,s,t,g,m){const p=new _t(0);let r=g===!0?0:1,h,u,d=null,c=0,i=null;function n(l,a){let f=!1,v=a.isScene===!0?a.background:null;v&&v.isTexture&&(v=e.get(v));const b=S.xr,_=b.getSession&&b.getSession();_&&_.environmentBlendMode==="additive"&&(v=null),v===null?o(p,r):v&&v.isColor&&(o(v,1),f=!0),(S.autoClear||f)&&S.clear(S.autoClearColor,S.autoClearDepth,S.autoClearStencil),v&&(v.isCubeTexture||v.mapping===Es)?(u===void 0&&(u=new wr(new Gi(1,1,1),new on({name:"BackgroundCubeMaterial",uniforms:mi(Vr.cube.uniforms),vertexShader:Vr.cube.vertexShader,fragmentShader:Vr.cube.fragmentShader,side:Ir,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(w,E,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),t.update(u)),u.material.uniforms.envMap.value=v,u.material.uniforms.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,(d!==v||c!==v.version||i!==S.toneMapping)&&(u.material.needsUpdate=!0,d=v,c=v.version,i=S.toneMapping),u.layers.enableAll(),l.unshift(u,u.geometry,u.material,0,0,null)):v&&v.isTexture&&(h===void 0&&(h=new wr(new Fo(2,2),new on({name:"BackgroundMaterial",uniforms:mi(Vr.background.uniforms),vertexShader:Vr.background.vertexShader,fragmentShader:Vr.background.fragmentShader,side:ji,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),t.update(h)),h.material.uniforms.t2D.value=v,v.matrixAutoUpdate===!0&&v.updateMatrix(),h.material.uniforms.uvTransform.value.copy(v.matrix),(d!==v||c!==v.version||i!==S.toneMapping)&&(h.material.needsUpdate=!0,d=v,c=v.version,i=S.toneMapping),h.layers.enableAll(),l.unshift(h,h.geometry,h.material,0,0,null))}function o(l,a){s.buffers.color.setClear(l.r,l.g,l.b,a,m)}return{getClearColor:function(){return p},setClearColor:function(l,a=1){p.set(l),r=a,o(p,r)},getClearAlpha:function(){return r},setClearAlpha:function(l){r=l,o(p,r)},render:n}}function Sg(S,e,s,t){const g=S.getParameter(34921),m=t.isWebGL2?null:e.get("OES_vertex_array_object"),p=t.isWebGL2||m!==null,r={},h=a(null);let u=h,d=!1;function c(O,U,K,ee,H){let te=!1;if(p){const Z=l(ee,K,U);u!==Z&&(u=Z,n(u.object)),te=f(O,ee,K,H),te&&v(O,ee,K,H)}else{const Z=U.wireframe===!0;(u.geometry!==ee.id||u.program!==K.id||u.wireframe!==Z)&&(u.geometry=ee.id,u.program=K.id,u.wireframe=Z,te=!0)}H!==null&&s.update(H,34963),(te||d)&&(d=!1,A(O,U,K,ee),H!==null&&S.bindBuffer(34963,s.get(H).buffer))}function i(){return t.isWebGL2?S.createVertexArray():m.createVertexArrayOES()}function n(O){return t.isWebGL2?S.bindVertexArray(O):m.bindVertexArrayOES(O)}function o(O){return t.isWebGL2?S.deleteVertexArray(O):m.deleteVertexArrayOES(O)}function l(O,U,K){const ee=K.wireframe===!0;let H=r[O.id];H===void 0&&(H={},r[O.id]=H);let te=H[U.id];te===void 0&&(te={},H[U.id]=te);let Z=te[ee];return Z===void 0&&(Z=a(i()),te[ee]=Z),Z}function a(O){const U=[],K=[],ee=[];for(let H=0;H<g;H++)U[H]=0,K[H]=0,ee[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:K,attributeDivisors:ee,object:O,attributes:{},index:null}}function f(O,U,K,ee){const H=u.attributes,te=U.attributes;let Z=0;const ge=K.getAttributes();for(const $ in ge)if(ge[$].location>=0){const z=H[$];let de=te[$];if(de===void 0&&($==="instanceMatrix"&&O.instanceMatrix&&(de=O.instanceMatrix),$==="instanceColor"&&O.instanceColor&&(de=O.instanceColor)),z===void 0||z.attribute!==de||de&&z.data!==de.data)return!0;Z++}return u.attributesNum!==Z||u.index!==ee}function v(O,U,K,ee){const H={},te=U.attributes;let Z=0;const ge=K.getAttributes();for(const $ in ge)if(ge[$].location>=0){let z=te[$];z===void 0&&($==="instanceMatrix"&&O.instanceMatrix&&(z=O.instanceMatrix),$==="instanceColor"&&O.instanceColor&&(z=O.instanceColor));const de={};de.attribute=z,z&&z.data&&(de.data=z.data),H[$]=de,Z++}u.attributes=H,u.attributesNum=Z,u.index=ee}function b(){const O=u.newAttributes;for(let U=0,K=O.length;U<K;U++)O[U]=0}function _(O){w(O,0)}function w(O,U){const K=u.newAttributes,ee=u.enabledAttributes,H=u.attributeDivisors;K[O]=1,ee[O]===0&&(S.enableVertexAttribArray(O),ee[O]=1),H[O]!==U&&((t.isWebGL2?S:e.get("ANGLE_instanced_arrays"))[t.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](O,U),H[O]=U)}function E(){const O=u.newAttributes,U=u.enabledAttributes;for(let K=0,ee=U.length;K<ee;K++)U[K]!==O[K]&&(S.disableVertexAttribArray(K),U[K]=0)}function C(O,U,K,ee,H,te){t.isWebGL2===!0&&(K===5124||K===5125)?S.vertexAttribIPointer(O,U,K,H,te):S.vertexAttribPointer(O,U,K,ee,H,te)}function A(O,U,K,ee){if(t.isWebGL2===!1&&(O.isInstancedMesh||ee.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();const H=ee.attributes,te=K.getAttributes(),Z=U.defaultAttributeValues;for(const ge in te){const $=te[ge];if($.location>=0){let se=H[ge];if(se===void 0&&(ge==="instanceMatrix"&&O.instanceMatrix&&(se=O.instanceMatrix),ge==="instanceColor"&&O.instanceColor&&(se=O.instanceColor)),se!==void 0){const z=se.normalized,de=se.itemSize,re=s.get(se);if(re===void 0)continue;const ie=re.buffer,j=re.type,B=re.bytesPerElement;if(se.isInterleavedBufferAttribute){const G=se.data,ne=G.stride,Y=se.offset;if(G.isInstancedInterleavedBuffer){for(let J=0;J<$.locationSize;J++)w($.location+J,G.meshPerAttribute);O.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=G.meshPerAttribute*G.count)}else for(let J=0;J<$.locationSize;J++)_($.location+J);S.bindBuffer(34962,ie);for(let J=0;J<$.locationSize;J++)C($.location+J,de/$.locationSize,j,z,ne*B,(Y+de/$.locationSize*J)*B)}else{if(se.isInstancedBufferAttribute){for(let G=0;G<$.locationSize;G++)w($.location+G,se.meshPerAttribute);O.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let G=0;G<$.locationSize;G++)_($.location+G);S.bindBuffer(34962,ie);for(let G=0;G<$.locationSize;G++)C($.location+G,de/$.locationSize,j,z,de*B,de/$.locationSize*G*B)}}else if(Z!==void 0){const z=Z[ge];if(z!==void 0)switch(z.length){case 2:S.vertexAttrib2fv($.location,z);break;case 3:S.vertexAttrib3fv($.location,z);break;case 4:S.vertexAttrib4fv($.location,z);break;default:S.vertexAttrib1fv($.location,z)}}}}E()}function L(){N();for(const O in r){const U=r[O];for(const K in U){const ee=U[K];for(const H in ee)o(ee[H].object),delete ee[H];delete U[K]}delete r[O]}}function P(O){if(r[O.id]===void 0)return;const U=r[O.id];for(const K in U){const ee=U[K];for(const H in ee)o(ee[H].object),delete ee[H];delete U[K]}delete r[O.id]}function R(O){for(const U in r){const K=r[U];if(K[O.id]===void 0)continue;const ee=K[O.id];for(const H in ee)o(ee[H].object),delete ee[H];delete K[O.id]}}function N(){I(),d=!0,u!==h&&(u=h,n(u.object))}function I(){h.geometry=null,h.program=null,h.wireframe=!1}return{setup:c,reset:N,resetDefaultState:I,dispose:L,releaseStatesOfGeometry:P,releaseStatesOfProgram:R,initAttributes:b,enableAttribute:_,disableUnusedAttributes:E}}function Mg(S,e,s,t){const g=t.isWebGL2;let m;function p(u){m=u}function r(u,d){S.drawArrays(m,u,d),s.update(d,m,1)}function h(u,d,c){if(c===0)return;let i,n;if(g)i=S,n="drawArraysInstanced";else if(i=e.get("ANGLE_instanced_arrays"),n="drawArraysInstancedANGLE",i===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}i[n](m,u,d,c),s.update(d,m,c)}this.setMode=p,this.render=r,this.renderInstances=h}function Eg(S,e,s){let t;function g(){if(t!==void 0)return t;if(e.has("EXT_texture_filter_anisotropic")===!0){const C=e.get("EXT_texture_filter_anisotropic");t=S.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else t=0;return t}function m(C){if(C==="highp"){if(S.getShaderPrecisionFormat(35633,36338).precision>0&&S.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";C="mediump"}return C==="mediump"&&S.getShaderPrecisionFormat(35633,36337).precision>0&&S.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const p=typeof WebGL2RenderingContext!="undefined"&&S instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&S instanceof WebGL2ComputeRenderingContext;let r=s.precision!==void 0?s.precision:"highp";const h=m(r);h!==r&&(console.warn("THREE.WebGLRenderer:",r,"not supported, using",h,"instead."),r=h);const u=p||e.has("WEBGL_draw_buffers"),d=s.logarithmicDepthBuffer===!0,c=S.getParameter(34930),i=S.getParameter(35660),n=S.getParameter(3379),o=S.getParameter(34076),l=S.getParameter(34921),a=S.getParameter(36347),f=S.getParameter(36348),v=S.getParameter(36349),b=i>0,_=p||e.has("OES_texture_float"),w=b&&_,E=p?S.getParameter(36183):0;return{isWebGL2:p,drawBuffers:u,getMaxAnisotropy:g,getMaxPrecision:m,precision:r,logarithmicDepthBuffer:d,maxTextures:c,maxVertexTextures:i,maxTextureSize:n,maxCubemapSize:o,maxAttributes:l,maxVertexUniforms:a,maxVaryings:f,maxFragmentUniforms:v,vertexTextures:b,floatFragmentTextures:_,floatVertexTextures:w,maxSamples:E}}function Tg(S){const e=this;let s=null,t=0,g=!1,m=!1;const p=new An,r=new ar,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(c,i,n){const o=c.length!==0||i||t!==0||g;return g=i,s=d(c,n,0),t=c.length,o},this.beginShadows=function(){m=!0,d(null)},this.endShadows=function(){m=!1,u()},this.setState=function(c,i,n){const o=c.clippingPlanes,l=c.clipIntersection,a=c.clipShadows,f=S.get(c);if(!g||o===null||o.length===0||m&&!a)m?d(null):u();else{const v=m?0:t,b=v*4;let _=f.clippingState||null;h.value=_,_=d(o,i,b,n);for(let w=0;w!==b;++w)_[w]=s[w];f.clippingState=_,this.numIntersection=l?this.numPlanes:0,this.numPlanes+=v}};function u(){h.value!==s&&(h.value=s,h.needsUpdate=t>0),e.numPlanes=t,e.numIntersection=0}function d(c,i,n,o){const l=c!==null?c.length:0;let a=null;if(l!==0){if(a=h.value,o!==!0||a===null){const f=n+l*4,v=i.matrixWorldInverse;r.getNormalMatrix(v),(a===null||a.length<f)&&(a=new Float32Array(f));for(let b=0,_=n;b!==l;++b,_+=4)p.copy(c[b]).applyMatrix4(v,r),p.normal.toArray(a,_),a[_+3]=p.constant}h.value=a,h.needsUpdate=!0}return e.numPlanes=l,e.numIntersection=0,a}}function Ag(S){let e=new WeakMap;function s(p,r){return r===Eo?p.mapping=di:r===To&&(p.mapping=fi),p}function t(p){if(p&&p.isTexture&&p.isRenderTargetTexture===!1){const r=p.mapping;if(r===Eo||r===To)if(e.has(p)){const h=e.get(p).texture;return s(h,p.mapping)}else{const h=p.image;if(h&&h.height>0){const u=new Vf(h.height/2);return u.fromEquirectangularTexture(S,p),e.set(p,u),p.addEventListener("dispose",g),s(u.texture,p.mapping)}else return null}}return p}function g(p){const r=p.target;r.removeEventListener("dispose",g);const h=e.get(r);h!==void 0&&(e.delete(r),h.dispose())}function m(){e=new WeakMap}return{get:t,dispose:m}}class Cg extends _u{constructor(e=-1,s=1,t=1,g=-1,m=.1,p=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=s,this.top=t,this.bottom=g,this.near=m,this.far=p,this.updateProjectionMatrix()}copy(e,s){return super.copy(e,s),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,s,t,g,m,p){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=s,this.view.offsetX=t,this.view.offsetY=g,this.view.width=m,this.view.height=p,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),s=(this.top-this.bottom)/(2*this.zoom),t=(this.right+this.left)/2,g=(this.top+this.bottom)/2;let m=t-e,p=t+e,r=g+s,h=g-s;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;m+=u*this.view.offsetX,p=m+u*this.view.width,r-=d*this.view.offsetY,h=r-d*this.view.height}this.projectionMatrix.makeOrthographic(m,p,r,h,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const s=super.toJSON(e);return s.object.zoom=this.zoom,s.object.left=this.left,s.object.right=this.right,s.object.top=this.top,s.object.bottom=this.bottom,s.object.near=this.near,s.object.far=this.far,this.view!==null&&(s.object.view=Object.assign({},this.view)),s}}const oi=4,Cl=[.125,.215,.35,.446,.526,.582],Ln=20,mo=new Cg,Ll=new _t;let go=null;const Cn=(1+Math.sqrt(5))/2,ii=1/Cn,Pl=[new De(1,1,1),new De(-1,1,1),new De(1,1,-1),new De(-1,1,-1),new De(0,Cn,ii),new De(0,Cn,-ii),new De(ii,0,Cn),new De(-ii,0,Cn),new De(Cn,ii,0),new De(-Cn,ii,0)];class Rl{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,s=0,t=.1,g=100){go=this._renderer.getRenderTarget(),this._setSize(256);const m=this._allocateTargets();return m.depthBuffer=!0,this._sceneToCubeUV(e,t,g,m),s>0&&this._blur(m,0,0,s),this._applyPMREM(m),this._cleanup(m),m}fromEquirectangular(e,s=null){return this._fromTexture(e,s)}fromCubemap(e,s=null){return this._fromTexture(e,s)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Il(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=jl(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(go),e.scissorTest=!1,ms(e,0,0,e.width,e.height)}_fromTexture(e,s){e.mapping===di||e.mapping===fi?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),go=this._renderer.getRenderTarget();const t=s||this._allocateTargets();return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),s=4*this._cubeSize,t={magFilter:xr,minFilter:xr,generateMipmaps:!1,type:Ii,format:jr,encoding:Nn,depthBuffer:!1},g=Dl(e,s,t);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Dl(e,s,t);const{_lodMax:m}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Lg(m)),this._blurMaterial=Pg(m,e,s)}return g}_compileMaterial(e){const s=new wr(this._lodPlanes[0],e);this._renderer.compile(s,mo)}_sceneToCubeUV(e,s,t,g){const r=new fr(90,1,s,t),h=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,c=d.autoClear,i=d.toneMapping;d.getClearColor(Ll),d.toneMapping=sn,d.autoClear=!1;const n=new ko({name:"PMREM.Background",side:Ir,depthWrite:!1,depthTest:!1}),o=new wr(new Gi,n);let l=!1;const a=e.background;a?a.isColor&&(n.color.copy(a),e.background=null,l=!0):(n.color.copy(Ll),l=!0);for(let f=0;f<6;f++){const v=f%3;v===0?(r.up.set(0,h[f],0),r.lookAt(u[f],0,0)):v===1?(r.up.set(0,0,h[f]),r.lookAt(0,u[f],0)):(r.up.set(0,h[f],0),r.lookAt(0,0,u[f]));const b=this._cubeSize;ms(g,v*b,f>2?b:0,b,b),d.setRenderTarget(g),l&&d.render(o,r),d.render(e,r)}o.geometry.dispose(),o.material.dispose(),d.toneMapping=i,d.autoClear=c,e.background=a}_textureToCubeUV(e,s){const t=this._renderer,g=e.mapping===di||e.mapping===fi;g?(this._cubemapMaterial===null&&(this._cubemapMaterial=Il()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=jl());const m=g?this._cubemapMaterial:this._equirectMaterial,p=new wr(this._lodPlanes[0],m),r=m.uniforms;r.envMap.value=e;const h=this._cubeSize;ms(s,0,0,3*h,2*h),t.setRenderTarget(s),t.render(p,mo)}_applyPMREM(e){const s=this._renderer,t=s.autoClear;s.autoClear=!1;for(let g=1;g<this._lodPlanes.length;g++){const m=Math.sqrt(this._sigmas[g]*this._sigmas[g]-this._sigmas[g-1]*this._sigmas[g-1]),p=Pl[(g-1)%Pl.length];this._blur(e,g-1,g,m,p)}s.autoClear=t}_blur(e,s,t,g,m){const p=this._pingPongRenderTarget;this._halfBlur(e,p,s,t,g,"latitudinal",m),this._halfBlur(p,e,t,t,g,"longitudinal",m)}_halfBlur(e,s,t,g,m,p,r){const h=this._renderer,u=this._blurMaterial;p!=="latitudinal"&&p!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,c=new wr(this._lodPlanes[g],u),i=u.uniforms,n=this._sizeLods[t]-1,o=isFinite(m)?Math.PI/(2*n):2*Math.PI/(2*Ln-1),l=m/o,a=isFinite(m)?1+Math.floor(d*l):Ln;a>Ln&&console.warn(`sigmaRadians, ${m}, is too large and will clip, as it requested ${a} samples when the maximum is set to ${Ln}`);const f=[];let v=0;for(let C=0;C<Ln;++C){const A=C/l,L=Math.exp(-A*A/2);f.push(L),C===0?v+=L:C<a&&(v+=2*L)}for(let C=0;C<f.length;C++)f[C]=f[C]/v;i.envMap.value=e.texture,i.samples.value=a,i.weights.value=f,i.latitudinal.value=p==="latitudinal",r&&(i.poleAxis.value=r);const{_lodMax:b}=this;i.dTheta.value=o,i.mipInt.value=b-t;const _=this._sizeLods[g],w=3*_*(g>b-oi?g-b+oi:0),E=4*(this._cubeSize-_);ms(s,w,E,3*_,2*_),h.setRenderTarget(s),h.render(c,mo)}}function Lg(S){const e=[],s=[],t=[];let g=S;const m=S-oi+1+Cl.length;for(let p=0;p<m;p++){const r=Math.pow(2,g);s.push(r);let h=1/r;p>S-oi?h=Cl[p-S+oi-1]:p===0&&(h=0),t.push(h);const u=1/(r-2),d=-u,c=1+u,i=[d,d,c,d,c,c,d,d,c,c,d,c],n=6,o=6,l=3,a=2,f=1,v=new Float32Array(l*o*n),b=new Float32Array(a*o*n),_=new Float32Array(f*o*n);for(let E=0;E<n;E++){const C=E%3*2/3-1,A=E>2?0:-1,L=[C,A,0,C+2/3,A,0,C+2/3,A+1,0,C,A,0,C+2/3,A+1,0,C,A+1,0];v.set(L,l*o*E),b.set(i,a*o*E);const P=[E,E,E,E,E,E];_.set(P,f*o*E)}const w=new kr;w.setAttribute("position",new Wr(v,l)),w.setAttribute("uv",new Wr(b,a)),w.setAttribute("faceIndex",new Wr(_,f)),e.push(w),g>oi&&g--}return{lodPlanes:e,sizeLods:s,sigmas:t}}function Dl(S,e,s){const t=new vn(S,e,s);return t.texture.mapping=Es,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function ms(S,e,s,t,g){S.viewport.set(e,s,t,g),S.scissor.set(e,s,t,g)}function Pg(S,e,s){const t=new Float32Array(Ln),g=new De(0,1,0);return new on({name:"SphericalGaussianBlur",defines:{n:Ln,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/s,CUBEUV_MAX_MIP:`${S}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:g}},vertexShader:Uo(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:yn,depthTest:!1,depthWrite:!1})}function jl(){return new on({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Uo(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:yn,depthTest:!1,depthWrite:!1})}function Il(){return new on({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Uo(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:yn,depthTest:!1,depthWrite:!1})}function Uo(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Rg(S){let e=new WeakMap,s=null;function t(r){if(r&&r.isTexture){const h=r.mapping,u=h===Eo||h===To,d=h===di||h===fi;if(u||d)if(r.isRenderTargetTexture&&r.needsPMREMUpdate===!0){r.needsPMREMUpdate=!1;let c=e.get(r);return s===null&&(s=new Rl(S)),c=u?s.fromEquirectangular(r,c):s.fromCubemap(r,c),e.set(r,c),c.texture}else{if(e.has(r))return e.get(r).texture;{const c=r.image;if(u&&c&&c.height>0||d&&c&&g(c)){s===null&&(s=new Rl(S));const i=u?s.fromEquirectangular(r):s.fromCubemap(r);return e.set(r,i),r.addEventListener("dispose",m),i.texture}else return null}}}return r}function g(r){let h=0;const u=6;for(let d=0;d<u;d++)r[d]!==void 0&&h++;return h===u}function m(r){const h=r.target;h.removeEventListener("dispose",m);const u=e.get(h);u!==void 0&&(e.delete(h),u.dispose())}function p(){e=new WeakMap,s!==null&&(s.dispose(),s=null)}return{get:t,dispose:p}}function Dg(S){const e={};function s(t){if(e[t]!==void 0)return e[t];let g;switch(t){case"WEBGL_depth_texture":g=S.getExtension("WEBGL_depth_texture")||S.getExtension("MOZ_WEBGL_depth_texture")||S.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":g=S.getExtension("EXT_texture_filter_anisotropic")||S.getExtension("MOZ_EXT_texture_filter_anisotropic")||S.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":g=S.getExtension("WEBGL_compressed_texture_s3tc")||S.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||S.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":g=S.getExtension("WEBGL_compressed_texture_pvrtc")||S.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:g=S.getExtension(t)}return e[t]=g,g}return{has:function(t){return s(t)!==null},init:function(t){t.isWebGL2?s("EXT_color_buffer_float"):(s("WEBGL_depth_texture"),s("OES_texture_float"),s("OES_texture_half_float"),s("OES_texture_half_float_linear"),s("OES_standard_derivatives"),s("OES_element_index_uint"),s("OES_vertex_array_object"),s("ANGLE_instanced_arrays")),s("OES_texture_float_linear"),s("EXT_color_buffer_half_float"),s("WEBGL_multisampled_render_to_texture")},get:function(t){const g=s(t);return g===null&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),g}}}function jg(S,e,s,t){const g={},m=new WeakMap;function p(c){const i=c.target;i.index!==null&&e.remove(i.index);for(const o in i.attributes)e.remove(i.attributes[o]);i.removeEventListener("dispose",p),delete g[i.id];const n=m.get(i);n&&(e.remove(n),m.delete(i)),t.releaseStatesOfGeometry(i),i.isInstancedBufferGeometry===!0&&delete i._maxInstanceCount,s.memory.geometries--}function r(c,i){return g[i.id]===!0||(i.addEventListener("dispose",p),g[i.id]=!0,s.memory.geometries++),i}function h(c){const i=c.attributes;for(const o in i)e.update(i[o],34962);const n=c.morphAttributes;for(const o in n){const l=n[o];for(let a=0,f=l.length;a<f;a++)e.update(l[a],34962)}}function u(c){const i=[],n=c.index,o=c.attributes.position;let l=0;if(n!==null){const v=n.array;l=n.version;for(let b=0,_=v.length;b<_;b+=3){const w=v[b+0],E=v[b+1],C=v[b+2];i.push(w,E,E,C,C,w)}}else{const v=o.array;l=o.version;for(let b=0,_=v.length/3-1;b<_;b+=3){const w=b+0,E=b+1,C=b+2;i.push(w,E,E,C,C,w)}}const a=new(du(i)?bu:vu)(i,1);a.version=l;const f=m.get(c);f&&e.remove(f),m.set(c,a)}function d(c){const i=m.get(c);if(i){const n=c.index;n!==null&&i.version<n.version&&u(c)}else u(c);return m.get(c)}return{get:r,update:h,getWireframeAttribute:d}}function Ig(S,e,s,t){const g=t.isWebGL2;let m;function p(i){m=i}let r,h;function u(i){r=i.type,h=i.bytesPerElement}function d(i,n){S.drawElements(m,n,r,i*h),s.update(n,m,1)}function c(i,n,o){if(o===0)return;let l,a;if(g)l=S,a="drawElementsInstanced";else if(l=e.get("ANGLE_instanced_arrays"),a="drawElementsInstancedANGLE",l===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}l[a](m,n,r,i*h,o),s.update(n,m,o)}this.setMode=p,this.setIndex=u,this.render=d,this.renderInstances=c}function Og(S){const e={geometries:0,textures:0},s={frame:0,calls:0,triangles:0,points:0,lines:0};function t(m,p,r){switch(s.calls++,p){case 4:s.triangles+=r*(m/3);break;case 1:s.lines+=r*(m/2);break;case 3:s.lines+=r*(m-1);break;case 2:s.lines+=r*m;break;case 0:s.points+=r*m;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",p);break}}function g(){s.frame++,s.calls=0,s.triangles=0,s.points=0,s.lines=0}return{memory:e,render:s,programs:null,autoReset:!0,reset:g,update:t}}function kg(S,e){return S[0]-e[0]}function Ng(S,e){return Math.abs(e[1])-Math.abs(S[1])}function yo(S,e){let s=1;const t=e.isInterleavedBufferAttribute?e.data.array:e.array;t instanceof Int8Array?s=127:t instanceof Int16Array?s=32767:t instanceof Int32Array?s=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",t),S.divideScalar(s)}function Fg(S,e,s){const t={},g=new Float32Array(8),m=new WeakMap,p=new Vt,r=[];for(let u=0;u<8;u++)r[u]=[u,0];function h(u,d,c,i){const n=u.morphTargetInfluences;if(e.isWebGL2===!0){const o=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,l=o!==void 0?o.length:0;let a=m.get(d);if(a===void 0||a.count!==l){let U=function(){I.dispose(),m.delete(d),d.removeEventListener("dispose",U)};a!==void 0&&a.texture.dispose();const b=d.morphAttributes.position!==void 0,_=d.morphAttributes.normal!==void 0,w=d.morphAttributes.color!==void 0,E=d.morphAttributes.position||[],C=d.morphAttributes.normal||[],A=d.morphAttributes.color||[];let L=0;b===!0&&(L=1),_===!0&&(L=2),w===!0&&(L=3);let P=d.attributes.position.count*L,R=1;P>e.maxTextureSize&&(R=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const N=new Float32Array(P*R*4*l),I=new gu(N,P,R,l);I.type=Rn,I.needsUpdate=!0;const O=L*4;for(let K=0;K<l;K++){const ee=E[K],H=C[K],te=A[K],Z=P*R*4*K;for(let ge=0;ge<ee.count;ge++){const $=ge*O;b===!0&&(p.fromBufferAttribute(ee,ge),ee.normalized===!0&&yo(p,ee),N[Z+$+0]=p.x,N[Z+$+1]=p.y,N[Z+$+2]=p.z,N[Z+$+3]=0),_===!0&&(p.fromBufferAttribute(H,ge),H.normalized===!0&&yo(p,H),N[Z+$+4]=p.x,N[Z+$+5]=p.y,N[Z+$+6]=p.z,N[Z+$+7]=0),w===!0&&(p.fromBufferAttribute(te,ge),te.normalized===!0&&yo(p,te),N[Z+$+8]=p.x,N[Z+$+9]=p.y,N[Z+$+10]=p.z,N[Z+$+11]=te.itemSize===4?p.w:1)}}a={count:l,texture:I,size:new Qe(P,R)},m.set(d,a),d.addEventListener("dispose",U)}let f=0;for(let b=0;b<n.length;b++)f+=n[b];const v=d.morphTargetsRelative?1:1-f;i.getUniforms().setValue(S,"morphTargetBaseInfluence",v),i.getUniforms().setValue(S,"morphTargetInfluences",n),i.getUniforms().setValue(S,"morphTargetsTexture",a.texture,s),i.getUniforms().setValue(S,"morphTargetsTextureSize",a.size)}else{const o=n===void 0?0:n.length;let l=t[d.id];if(l===void 0||l.length!==o){l=[];for(let _=0;_<o;_++)l[_]=[_,0];t[d.id]=l}for(let _=0;_<o;_++){const w=l[_];w[0]=_,w[1]=n[_]}l.sort(Ng);for(let _=0;_<8;_++)_<o&&l[_][1]?(r[_][0]=l[_][0],r[_][1]=l[_][1]):(r[_][0]=Number.MAX_SAFE_INTEGER,r[_][1]=0);r.sort(kg);const a=d.morphAttributes.position,f=d.morphAttributes.normal;let v=0;for(let _=0;_<8;_++){const w=r[_],E=w[0],C=w[1];E!==Number.MAX_SAFE_INTEGER&&C?(a&&d.getAttribute("morphTarget"+_)!==a[E]&&d.setAttribute("morphTarget"+_,a[E]),f&&d.getAttribute("morphNormal"+_)!==f[E]&&d.setAttribute("morphNormal"+_,f[E]),g[_]=C,v+=C):(a&&d.hasAttribute("morphTarget"+_)===!0&&d.deleteAttribute("morphTarget"+_),f&&d.hasAttribute("morphNormal"+_)===!0&&d.deleteAttribute("morphNormal"+_),g[_]=0)}const b=d.morphTargetsRelative?1:1-v;i.getUniforms().setValue(S,"morphTargetBaseInfluence",b),i.getUniforms().setValue(S,"morphTargetInfluences",g)}}return{update:h}}function Ug(S,e,s,t){let g=new WeakMap;function m(h){const u=t.render.frame,d=h.geometry,c=e.get(h,d);return g.get(c)!==u&&(e.update(c),g.set(c,u)),h.isInstancedMesh&&(h.hasEventListener("dispose",r)===!1&&h.addEventListener("dispose",r),s.update(h.instanceMatrix,34962),h.instanceColor!==null&&s.update(h.instanceColor,34962)),c}function p(){g=new WeakMap}function r(h){const u=h.target;u.removeEventListener("dispose",r),s.remove(u.instanceMatrix),u.instanceColor!==null&&s.remove(u.instanceColor)}return{update:m,dispose:p}}const Su=new Or,Mu=new gu,Eu=new Af,Tu=new xu,Ol=[],kl=[],Nl=new Float32Array(16),Fl=new Float32Array(9),Ul=new Float32Array(4);function bi(S,e,s){const t=S[0];if(t<=0||t>0)return S;const g=e*s;let m=Ol[g];if(m===void 0&&(m=new Float32Array(g),Ol[g]=m),e!==0){t.toArray(m,0);for(let p=1,r=0;p!==e;++p)r+=s,S[p].toArray(m,r)}return m}function lr(S,e){if(S.length!==e.length)return!1;for(let s=0,t=S.length;s<t;s++)if(S[s]!==e[s])return!1;return!0}function ur(S,e){for(let s=0,t=e.length;s<t;s++)S[s]=e[s]}function As(S,e){let s=kl[e];s===void 0&&(s=new Int32Array(e),kl[e]=s);for(let t=0;t!==e;++t)s[t]=S.allocateTextureUnit();return s}function Bg(S,e){const s=this.cache;s[0]!==e&&(S.uniform1f(this.addr,e),s[0]=e)}function Gg(S,e){const s=this.cache;if(e.x!==void 0)(s[0]!==e.x||s[1]!==e.y)&&(S.uniform2f(this.addr,e.x,e.y),s[0]=e.x,s[1]=e.y);else{if(lr(s,e))return;S.uniform2fv(this.addr,e),ur(s,e)}}function zg(S,e){const s=this.cache;if(e.x!==void 0)(s[0]!==e.x||s[1]!==e.y||s[2]!==e.z)&&(S.uniform3f(this.addr,e.x,e.y,e.z),s[0]=e.x,s[1]=e.y,s[2]=e.z);else if(e.r!==void 0)(s[0]!==e.r||s[1]!==e.g||s[2]!==e.b)&&(S.uniform3f(this.addr,e.r,e.g,e.b),s[0]=e.r,s[1]=e.g,s[2]=e.b);else{if(lr(s,e))return;S.uniform3fv(this.addr,e),ur(s,e)}}function Vg(S,e){const s=this.cache;if(e.x!==void 0)(s[0]!==e.x||s[1]!==e.y||s[2]!==e.z||s[3]!==e.w)&&(S.uniform4f(this.addr,e.x,e.y,e.z,e.w),s[0]=e.x,s[1]=e.y,s[2]=e.z,s[3]=e.w);else{if(lr(s,e))return;S.uniform4fv(this.addr,e),ur(s,e)}}function Hg(S,e){const s=this.cache,t=e.elements;if(t===void 0){if(lr(s,e))return;S.uniformMatrix2fv(this.addr,!1,e),ur(s,e)}else{if(lr(s,t))return;Ul.set(t),S.uniformMatrix2fv(this.addr,!1,Ul),ur(s,t)}}function Wg(S,e){const s=this.cache,t=e.elements;if(t===void 0){if(lr(s,e))return;S.uniformMatrix3fv(this.addr,!1,e),ur(s,e)}else{if(lr(s,t))return;Fl.set(t),S.uniformMatrix3fv(this.addr,!1,Fl),ur(s,t)}}function qg(S,e){const s=this.cache,t=e.elements;if(t===void 0){if(lr(s,e))return;S.uniformMatrix4fv(this.addr,!1,e),ur(s,e)}else{if(lr(s,t))return;Nl.set(t),S.uniformMatrix4fv(this.addr,!1,Nl),ur(s,t)}}function Xg(S,e){const s=this.cache;s[0]!==e&&(S.uniform1i(this.addr,e),s[0]=e)}function Yg(S,e){const s=this.cache;lr(s,e)||(S.uniform2iv(this.addr,e),ur(s,e))}function Zg(S,e){const s=this.cache;lr(s,e)||(S.uniform3iv(this.addr,e),ur(s,e))}function Jg(S,e){const s=this.cache;lr(s,e)||(S.uniform4iv(this.addr,e),ur(s,e))}function $g(S,e){const s=this.cache;s[0]!==e&&(S.uniform1ui(this.addr,e),s[0]=e)}function Kg(S,e){const s=this.cache;lr(s,e)||(S.uniform2uiv(this.addr,e),ur(s,e))}function Qg(S,e){const s=this.cache;lr(s,e)||(S.uniform3uiv(this.addr,e),ur(s,e))}function ey(S,e){const s=this.cache;lr(s,e)||(S.uniform4uiv(this.addr,e),ur(s,e))}function ty(S,e,s){const t=this.cache,g=s.allocateTextureUnit();t[0]!==g&&(S.uniform1i(this.addr,g),t[0]=g),s.setTexture2D(e||Su,g)}function ry(S,e,s){const t=this.cache,g=s.allocateTextureUnit();t[0]!==g&&(S.uniform1i(this.addr,g),t[0]=g),s.setTexture3D(e||Eu,g)}function ny(S,e,s){const t=this.cache,g=s.allocateTextureUnit();t[0]!==g&&(S.uniform1i(this.addr,g),t[0]=g),s.setTextureCube(e||Tu,g)}function iy(S,e,s){const t=this.cache,g=s.allocateTextureUnit();t[0]!==g&&(S.uniform1i(this.addr,g),t[0]=g),s.setTexture2DArray(e||Mu,g)}function sy(S){switch(S){case 5126:return Bg;case 35664:return Gg;case 35665:return zg;case 35666:return Vg;case 35674:return Hg;case 35675:return Wg;case 35676:return qg;case 5124:case 35670:return Xg;case 35667:case 35671:return Yg;case 35668:case 35672:return Zg;case 35669:case 35673:return Jg;case 5125:return $g;case 36294:return Kg;case 36295:return Qg;case 36296:return ey;case 35678:case 36198:case 36298:case 36306:case 35682:return ty;case 35679:case 36299:case 36307:return ry;case 35680:case 36300:case 36308:case 36293:return ny;case 36289:case 36303:case 36311:case 36292:return iy}}function oy(S,e){S.uniform1fv(this.addr,e)}function ay(S,e){const s=bi(e,this.size,2);S.uniform2fv(this.addr,s)}function ly(S,e){const s=bi(e,this.size,3);S.uniform3fv(this.addr,s)}function uy(S,e){const s=bi(e,this.size,4);S.uniform4fv(this.addr,s)}function cy(S,e){const s=bi(e,this.size,4);S.uniformMatrix2fv(this.addr,!1,s)}function hy(S,e){const s=bi(e,this.size,9);S.uniformMatrix3fv(this.addr,!1,s)}function dy(S,e){const s=bi(e,this.size,16);S.uniformMatrix4fv(this.addr,!1,s)}function fy(S,e){S.uniform1iv(this.addr,e)}function py(S,e){S.uniform2iv(this.addr,e)}function my(S,e){S.uniform3iv(this.addr,e)}function gy(S,e){S.uniform4iv(this.addr,e)}function yy(S,e){S.uniform1uiv(this.addr,e)}function vy(S,e){S.uniform2uiv(this.addr,e)}function by(S,e){S.uniform3uiv(this.addr,e)}function _y(S,e){S.uniform4uiv(this.addr,e)}function xy(S,e,s){const t=e.length,g=As(s,t);S.uniform1iv(this.addr,g);for(let m=0;m!==t;++m)s.setTexture2D(e[m]||Su,g[m])}function wy(S,e,s){const t=e.length,g=As(s,t);S.uniform1iv(this.addr,g);for(let m=0;m!==t;++m)s.setTexture3D(e[m]||Eu,g[m])}function Sy(S,e,s){const t=e.length,g=As(s,t);S.uniform1iv(this.addr,g);for(let m=0;m!==t;++m)s.setTextureCube(e[m]||Tu,g[m])}function My(S,e,s){const t=e.length,g=As(s,t);S.uniform1iv(this.addr,g);for(let m=0;m!==t;++m)s.setTexture2DArray(e[m]||Mu,g[m])}function Ey(S){switch(S){case 5126:return oy;case 35664:return ay;case 35665:return ly;case 35666:return uy;case 35674:return cy;case 35675:return hy;case 35676:return dy;case 5124:case 35670:return fy;case 35667:case 35671:return py;case 35668:case 35672:return my;case 35669:case 35673:return gy;case 5125:return yy;case 36294:return vy;case 36295:return by;case 36296:return _y;case 35678:case 36198:case 36298:case 36306:case 35682:return xy;case 35679:case 36299:case 36307:return wy;case 35680:case 36300:case 36308:case 36293:return Sy;case 36289:case 36303:case 36311:case 36292:return My}}class Ty{constructor(e,s,t){this.id=e,this.addr=t,this.cache=[],this.setValue=sy(s.type)}}class Ay{constructor(e,s,t){this.id=e,this.addr=t,this.cache=[],this.size=s.size,this.setValue=Ey(s.type)}}class Cy{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,s,t){const g=this.seq;for(let m=0,p=g.length;m!==p;++m){const r=g[m];r.setValue(e,s[r.id],t)}}}const vo=/(\w+)(\])?(\[|\.)?/g;function Bl(S,e){S.seq.push(e),S.map[e.id]=e}function Ly(S,e,s){const t=S.name,g=t.length;for(vo.lastIndex=0;;){const m=vo.exec(t),p=vo.lastIndex;let r=m[1];const h=m[2]==="]",u=m[3];if(h&&(r=r|0),u===void 0||u==="["&&p+2===g){Bl(s,u===void 0?new Ty(r,S,e):new Ay(r,S,e));break}else{let c=s.map[r];c===void 0&&(c=new Cy(r),Bl(s,c)),s=c}}}class _s{constructor(e,s){this.seq=[],this.map={};const t=e.getProgramParameter(s,35718);for(let g=0;g<t;++g){const m=e.getActiveUniform(s,g),p=e.getUniformLocation(s,m.name);Ly(m,p,this)}}setValue(e,s,t,g){const m=this.map[s];m!==void 0&&m.setValue(e,t,g)}setOptional(e,s,t){const g=s[t];g!==void 0&&this.setValue(e,t,g)}static upload(e,s,t,g){for(let m=0,p=s.length;m!==p;++m){const r=s[m],h=t[r.id];h.needsUpdate!==!1&&r.setValue(e,h.value,g)}}static seqWithValue(e,s){const t=[];for(let g=0,m=e.length;g!==m;++g){const p=e[g];p.id in s&&t.push(p)}return t}}function Gl(S,e,s){const t=S.createShader(e);return S.shaderSource(t,s),S.compileShader(t),t}let Py=0;function Ry(S,e){const s=S.split(`
`),t=[],g=Math.max(e-6,0),m=Math.min(e+6,s.length);for(let p=g;p<m;p++){const r=p+1;t.push(`${r===e?">":" "} ${r}: ${s[p]}`)}return t.join(`
`)}function Dy(S){switch(S){case Nn:return["Linear","( value )"];case zt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",S),["Linear","( value )"]}}function zl(S,e,s){const t=S.getShaderParameter(e,35713),g=S.getShaderInfoLog(e).trim();if(t&&g==="")return"";const m=/ERROR: 0:(\d+)/.exec(g);if(m){const p=parseInt(m[1]);return s.toUpperCase()+`

`+g+`

`+Ry(S.getShaderSource(e),p)}else return g}function jy(S,e){const s=Dy(e);return"vec4 "+S+"( vec4 value ) { return LinearTo"+s[0]+s[1]+"; }"}function Iy(S,e){let s;switch(e){case Qd:s="Linear";break;case ef:s="Reinhard";break;case tf:s="OptimizedCineon";break;case rf:s="ACESFilmic";break;case nf:s="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),s="Linear"}return"vec3 "+S+"( vec3 color ) { return "+s+"ToneMapping( color ); }"}function Oy(S){return[S.extensionDerivatives||!!S.envMapCubeUVHeight||S.bumpMap||S.tangentSpaceNormalMap||S.clearcoatNormalMap||S.flatShading||S.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(S.extensionFragDepth||S.logarithmicDepthBuffer)&&S.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",S.extensionDrawBuffers&&S.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(S.extensionShaderTextureLOD||S.envMap||S.transmission)&&S.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ci).join(`
`)}function ky(S){const e=[];for(const s in S){const t=S[s];t!==!1&&e.push("#define "+s+" "+t)}return e.join(`
`)}function Ny(S,e){const s={},t=S.getProgramParameter(e,35721);for(let g=0;g<t;g++){const m=S.getActiveAttrib(e,g),p=m.name;let r=1;m.type===35674&&(r=2),m.type===35675&&(r=3),m.type===35676&&(r=4),s[p]={type:m.type,location:S.getAttribLocation(e,p),locationSize:r}}return s}function Ci(S){return S!==""}function Vl(S,e){return S.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Hl(S,e){return S.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Fy=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ro(S){return S.replace(Fy,Uy)}function Uy(S,e){const s=Tt[e];if(s===void 0)throw new Error("Can not resolve #include <"+e+">");return Ro(s)}const By=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Gy=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Wl(S){return S.replace(Gy,Au).replace(By,zy)}function zy(S,e,s,t){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Au(S,e,s,t)}function Au(S,e,s,t){let g="";for(let m=parseInt(e);m<parseInt(s);m++)g+=t.replace(/\[\s*i\s*\]/g,"[ "+m+" ]").replace(/UNROLLED_LOOP_INDEX/g,m);return g}function ql(S){let e="precision "+S.precision+` float;
precision `+S.precision+" int;";return S.precision==="highp"?e+=`
#define HIGH_PRECISION`:S.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:S.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Vy(S){let e="SHADOWMAP_TYPE_BASIC";return S.shadowMapType===au?e="SHADOWMAP_TYPE_PCF":S.shadowMapType===Pd?e="SHADOWMAP_TYPE_PCF_SOFT":S.shadowMapType===Ai&&(e="SHADOWMAP_TYPE_VSM"),e}function Hy(S){let e="ENVMAP_TYPE_CUBE";if(S.envMap)switch(S.envMapMode){case di:case fi:e="ENVMAP_TYPE_CUBE";break;case Es:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Wy(S){let e="ENVMAP_MODE_REFLECTION";if(S.envMap)switch(S.envMapMode){case fi:e="ENVMAP_MODE_REFRACTION";break}return e}function qy(S){let e="ENVMAP_BLENDING_NONE";if(S.envMap)switch(S.combine){case Ms:e="ENVMAP_BLENDING_MULTIPLY";break;case $d:e="ENVMAP_BLENDING_MIX";break;case Kd:e="ENVMAP_BLENDING_ADD";break}return e}function Xy(S){const e=S.envMapCubeUVHeight;if(e===null)return null;const s=Math.log2(e)-2,t=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,s),7*16)),texelHeight:t,maxMip:s}}function Yy(S,e,s,t){const g=S.getContext(),m=s.defines;let p=s.vertexShader,r=s.fragmentShader;const h=Vy(s),u=Hy(s),d=Wy(s),c=qy(s),i=Xy(s),n=s.isWebGL2?"":Oy(s),o=ky(m),l=g.createProgram();let a,f,v=s.glslVersion?"#version "+s.glslVersion+`
`:"";s.isRawShaderMaterial?(a=[o].filter(Ci).join(`
`),a.length>0&&(a+=`
`),f=[n,o].filter(Ci).join(`
`),f.length>0&&(f+=`
`)):(a=[ql(s),"#define SHADER_NAME "+s.shaderName,o,s.instancing?"#define USE_INSTANCING":"",s.instancingColor?"#define USE_INSTANCING_COLOR":"",s.supportsVertexTextures?"#define VERTEX_TEXTURES":"",s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+d:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.normalMap&&s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",s.clearcoatMap?"#define USE_CLEARCOATMAP":"",s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",s.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",s.displacementMap&&s.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",s.specularColorMap?"#define USE_SPECULARCOLORMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.transmission?"#define USE_TRANSMISSION":"",s.transmissionMap?"#define USE_TRANSMISSIONMAP":"",s.thicknessMap?"#define USE_THICKNESSMAP":"",s.sheenColorMap?"#define USE_SHEENCOLORMAP":"",s.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors?"#define USE_COLOR":"",s.vertexAlphas?"#define USE_COLOR_ALPHA":"",s.vertexUvs?"#define USE_UV":"",s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",s.flatShading?"#define FLAT_SHADED":"",s.skinning?"#define USE_SKINNING":"",s.morphTargets?"#define USE_MORPHTARGETS":"",s.morphNormals&&s.flatShading===!1?"#define USE_MORPHNORMALS":"",s.morphColors&&s.isWebGL2?"#define USE_MORPHCOLORS":"",s.morphTargetsCount>0&&s.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",s.morphTargetsCount>0&&s.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+s.morphTextureStride:"",s.morphTargetsCount>0&&s.isWebGL2?"#define MORPHTARGETS_COUNT "+s.morphTargetsCount:"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+h:"",s.sizeAttenuation?"#define USE_SIZEATTENUATION":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&s.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ci).join(`
`),f=[n,ql(s),"#define SHADER_NAME "+s.shaderName,o,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.matcap?"#define USE_MATCAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+u:"",s.envMap?"#define "+d:"",s.envMap?"#define "+c:"",i?"#define CUBEUV_TEXEL_WIDTH "+i.texelWidth:"",i?"#define CUBEUV_TEXEL_HEIGHT "+i.texelHeight:"",i?"#define CUBEUV_MAX_MIP "+i.maxMip+".0":"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.normalMap&&s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",s.clearcoat?"#define USE_CLEARCOAT":"",s.clearcoatMap?"#define USE_CLEARCOATMAP":"",s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.iridescence?"#define USE_IRIDESCENCE":"",s.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",s.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",s.specularColorMap?"#define USE_SPECULARCOLORMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.alphaTest?"#define USE_ALPHATEST":"",s.sheen?"#define USE_SHEEN":"",s.sheenColorMap?"#define USE_SHEENCOLORMAP":"",s.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",s.transmission?"#define USE_TRANSMISSION":"",s.transmissionMap?"#define USE_TRANSMISSIONMAP":"",s.thicknessMap?"#define USE_THICKNESSMAP":"",s.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors||s.instancingColor?"#define USE_COLOR":"",s.vertexAlphas?"#define USE_COLOR_ALPHA":"",s.vertexUvs?"#define USE_UV":"",s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",s.gradientMap?"#define USE_GRADIENTMAP":"",s.flatShading?"#define FLAT_SHADED":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+h:"",s.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",s.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&s.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",s.toneMapping!==sn?"#define TONE_MAPPING":"",s.toneMapping!==sn?Tt.tonemapping_pars_fragment:"",s.toneMapping!==sn?Iy("toneMapping",s.toneMapping):"",s.dithering?"#define DITHERING":"",s.opaque?"#define OPAQUE":"",Tt.encodings_pars_fragment,jy("linearToOutputTexel",s.outputEncoding),s.useDepthPacking?"#define DEPTH_PACKING "+s.depthPacking:"",`
`].filter(Ci).join(`
`)),p=Ro(p),p=Vl(p,s),p=Hl(p,s),r=Ro(r),r=Vl(r,s),r=Hl(r,s),p=Wl(p),r=Wl(r),s.isWebGL2&&s.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,a=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+a,f=["#define varying in",s.glslVersion===pl?"":"layout(location = 0) out highp vec4 pc_fragColor;",s.glslVersion===pl?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+f);const b=v+a+p,_=v+f+r,w=Gl(g,35633,b),E=Gl(g,35632,_);if(g.attachShader(l,w),g.attachShader(l,E),s.index0AttributeName!==void 0?g.bindAttribLocation(l,0,s.index0AttributeName):s.morphTargets===!0&&g.bindAttribLocation(l,0,"position"),g.linkProgram(l),S.debug.checkShaderErrors){const L=g.getProgramInfoLog(l).trim(),P=g.getShaderInfoLog(w).trim(),R=g.getShaderInfoLog(E).trim();let N=!0,I=!0;if(g.getProgramParameter(l,35714)===!1){N=!1;const O=zl(g,w,"vertex"),U=zl(g,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+g.getError()+" - VALIDATE_STATUS "+g.getProgramParameter(l,35715)+`

Program Info Log: `+L+`
`+O+`
`+U)}else L!==""?console.warn("THREE.WebGLProgram: Program Info Log:",L):(P===""||R==="")&&(I=!1);I&&(this.diagnostics={runnable:N,programLog:L,vertexShader:{log:P,prefix:a},fragmentShader:{log:R,prefix:f}})}g.deleteShader(w),g.deleteShader(E);let C;this.getUniforms=function(){return C===void 0&&(C=new _s(g,l)),C};let A;return this.getAttributes=function(){return A===void 0&&(A=Ny(g,l)),A},this.destroy=function(){t.releaseStatesOfProgram(this),g.deleteProgram(l),this.program=void 0},this.name=s.shaderName,this.id=Py++,this.cacheKey=e,this.usedTimes=1,this.program=l,this.vertexShader=w,this.fragmentShader=E,this}let Zy=0;class Jy{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const s=e.vertexShader,t=e.fragmentShader,g=this._getShaderStage(s),m=this._getShaderStage(t),p=this._getShaderCacheForMaterial(e);return p.has(g)===!1&&(p.add(g),g.usedTimes++),p.has(m)===!1&&(p.add(m),m.usedTimes++),this}remove(e){const s=this.materialCache.get(e);for(const t of s)t.usedTimes--,t.usedTimes===0&&this.shaderCache.delete(t.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const s=this.materialCache;return s.has(e)===!1&&s.set(e,new Set),s.get(e)}_getShaderStage(e){const s=this.shaderCache;if(s.has(e)===!1){const t=new $y(e);s.set(e,t)}return s.get(e)}}class $y{constructor(e){this.id=Zy++,this.code=e,this.usedTimes=0}}function Ky(S,e,s,t,g,m,p){const r=new yu,h=new Jy,u=[],d=g.isWebGL2,c=g.logarithmicDepthBuffer,i=g.vertexTextures;let n=g.precision;const o={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function l(A,L,P,R,N){const I=R.fog,O=N.geometry,U=A.isMeshStandardMaterial?R.environment:null,K=(A.isMeshStandardMaterial?s:e).get(A.envMap||U),ee=!!K&&K.mapping===Es?K.image.height:null,H=o[A.type];A.precision!==null&&(n=g.getMaxPrecision(A.precision),n!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",n,"instead."));const te=O.morphAttributes.position||O.morphAttributes.normal||O.morphAttributes.color,Z=te!==void 0?te.length:0;let ge=0;O.morphAttributes.position!==void 0&&(ge=1),O.morphAttributes.normal!==void 0&&(ge=2),O.morphAttributes.color!==void 0&&(ge=3);let $,se,z,de;if(H){const ne=Vr[H];$=ne.vertexShader,se=ne.fragmentShader}else $=A.vertexShader,se=A.fragmentShader,h.update(A),z=h.getVertexShaderID(A),de=h.getFragmentShaderID(A);const re=S.getRenderTarget(),ie=A.alphaTest>0,j=A.clearcoat>0,B=A.iridescence>0;return{isWebGL2:d,shaderID:H,shaderName:A.type,vertexShader:$,fragmentShader:se,defines:A.defines,customVertexShaderID:z,customFragmentShaderID:de,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:n,instancing:N.isInstancedMesh===!0,instancingColor:N.isInstancedMesh===!0&&N.instanceColor!==null,supportsVertexTextures:i,outputEncoding:re===null?S.outputEncoding:re.isXRRenderTarget===!0?re.texture.encoding:Nn,map:!!A.map,matcap:!!A.matcap,envMap:!!K,envMapMode:K&&K.mapping,envMapCubeUVHeight:ee,lightMap:!!A.lightMap,aoMap:!!A.aoMap,emissiveMap:!!A.emissiveMap,bumpMap:!!A.bumpMap,normalMap:!!A.normalMap,objectSpaceNormalMap:A.normalMapType===Sf,tangentSpaceNormalMap:A.normalMapType===gi,decodeVideoTexture:!!A.map&&A.map.isVideoTexture===!0&&A.map.encoding===zt,clearcoat:j,clearcoatMap:j&&!!A.clearcoatMap,clearcoatRoughnessMap:j&&!!A.clearcoatRoughnessMap,clearcoatNormalMap:j&&!!A.clearcoatNormalMap,iridescence:B,iridescenceMap:B&&!!A.iridescenceMap,iridescenceThicknessMap:B&&!!A.iridescenceThicknessMap,displacementMap:!!A.displacementMap,roughnessMap:!!A.roughnessMap,metalnessMap:!!A.metalnessMap,specularMap:!!A.specularMap,specularIntensityMap:!!A.specularIntensityMap,specularColorMap:!!A.specularColorMap,opaque:A.transparent===!1&&A.blending===li,alphaMap:!!A.alphaMap,alphaTest:ie,gradientMap:!!A.gradientMap,sheen:A.sheen>0,sheenColorMap:!!A.sheenColorMap,sheenRoughnessMap:!!A.sheenRoughnessMap,transmission:A.transmission>0,transmissionMap:!!A.transmissionMap,thicknessMap:!!A.thicknessMap,combine:A.combine,vertexTangents:!!A.normalMap&&!!O.attributes.tangent,vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!O.attributes.color&&O.attributes.color.itemSize===4,vertexUvs:!!A.map||!!A.bumpMap||!!A.normalMap||!!A.specularMap||!!A.alphaMap||!!A.emissiveMap||!!A.roughnessMap||!!A.metalnessMap||!!A.clearcoatMap||!!A.clearcoatRoughnessMap||!!A.clearcoatNormalMap||!!A.iridescenceMap||!!A.iridescenceThicknessMap||!!A.displacementMap||!!A.transmissionMap||!!A.thicknessMap||!!A.specularIntensityMap||!!A.specularColorMap||!!A.sheenColorMap||!!A.sheenRoughnessMap,uvsVertexOnly:!(!!A.map||!!A.bumpMap||!!A.normalMap||!!A.specularMap||!!A.alphaMap||!!A.emissiveMap||!!A.roughnessMap||!!A.metalnessMap||!!A.clearcoatNormalMap||!!A.iridescenceMap||!!A.iridescenceThicknessMap||A.transmission>0||!!A.transmissionMap||!!A.thicknessMap||!!A.specularIntensityMap||!!A.specularColorMap||A.sheen>0||!!A.sheenColorMap||!!A.sheenRoughnessMap)&&!!A.displacementMap,fog:!!I,useFog:A.fog===!0,fogExp2:I&&I.isFogExp2,flatShading:!!A.flatShading,sizeAttenuation:A.sizeAttenuation,logarithmicDepthBuffer:c,skinning:N.isSkinnedMesh===!0,morphTargets:O.morphAttributes.position!==void 0,morphNormals:O.morphAttributes.normal!==void 0,morphColors:O.morphAttributes.color!==void 0,morphTargetsCount:Z,morphTextureStride:ge,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numClippingPlanes:p.numPlanes,numClipIntersection:p.numIntersection,dithering:A.dithering,shadowMapEnabled:S.shadowMap.enabled&&P.length>0,shadowMapType:S.shadowMap.type,toneMapping:A.toneMapped?S.toneMapping:sn,physicallyCorrectLights:S.physicallyCorrectLights,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===hi,flipSided:A.side===Ir,useDepthPacking:!!A.depthPacking,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionDerivatives:A.extensions&&A.extensions.derivatives,extensionFragDepth:A.extensions&&A.extensions.fragDepth,extensionDrawBuffers:A.extensions&&A.extensions.drawBuffers,extensionShaderTextureLOD:A.extensions&&A.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||t.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||t.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||t.has("EXT_shader_texture_lod"),customProgramCacheKey:A.customProgramCacheKey()}}function a(A){const L=[];if(A.shaderID?L.push(A.shaderID):(L.push(A.customVertexShaderID),L.push(A.customFragmentShaderID)),A.defines!==void 0)for(const P in A.defines)L.push(P),L.push(A.defines[P]);return A.isRawShaderMaterial===!1&&(f(L,A),v(L,A),L.push(S.outputEncoding)),L.push(A.customProgramCacheKey),L.join()}function f(A,L){A.push(L.precision),A.push(L.outputEncoding),A.push(L.envMapMode),A.push(L.envMapCubeUVHeight),A.push(L.combine),A.push(L.vertexUvs),A.push(L.fogExp2),A.push(L.sizeAttenuation),A.push(L.morphTargetsCount),A.push(L.morphAttributeCount),A.push(L.numDirLights),A.push(L.numPointLights),A.push(L.numSpotLights),A.push(L.numHemiLights),A.push(L.numRectAreaLights),A.push(L.numDirLightShadows),A.push(L.numPointLightShadows),A.push(L.numSpotLightShadows),A.push(L.shadowMapType),A.push(L.toneMapping),A.push(L.numClippingPlanes),A.push(L.numClipIntersection),A.push(L.depthPacking)}function v(A,L){r.disableAll(),L.isWebGL2&&r.enable(0),L.supportsVertexTextures&&r.enable(1),L.instancing&&r.enable(2),L.instancingColor&&r.enable(3),L.map&&r.enable(4),L.matcap&&r.enable(5),L.envMap&&r.enable(6),L.lightMap&&r.enable(7),L.aoMap&&r.enable(8),L.emissiveMap&&r.enable(9),L.bumpMap&&r.enable(10),L.normalMap&&r.enable(11),L.objectSpaceNormalMap&&r.enable(12),L.tangentSpaceNormalMap&&r.enable(13),L.clearcoat&&r.enable(14),L.clearcoatMap&&r.enable(15),L.clearcoatRoughnessMap&&r.enable(16),L.clearcoatNormalMap&&r.enable(17),L.iridescence&&r.enable(18),L.iridescenceMap&&r.enable(19),L.iridescenceThicknessMap&&r.enable(20),L.displacementMap&&r.enable(21),L.specularMap&&r.enable(22),L.roughnessMap&&r.enable(23),L.metalnessMap&&r.enable(24),L.gradientMap&&r.enable(25),L.alphaMap&&r.enable(26),L.alphaTest&&r.enable(27),L.vertexColors&&r.enable(28),L.vertexAlphas&&r.enable(29),L.vertexUvs&&r.enable(30),L.vertexTangents&&r.enable(31),L.uvsVertexOnly&&r.enable(32),L.fog&&r.enable(33),A.push(r.mask),r.disableAll(),L.useFog&&r.enable(0),L.flatShading&&r.enable(1),L.logarithmicDepthBuffer&&r.enable(2),L.skinning&&r.enable(3),L.morphTargets&&r.enable(4),L.morphNormals&&r.enable(5),L.morphColors&&r.enable(6),L.premultipliedAlpha&&r.enable(7),L.shadowMapEnabled&&r.enable(8),L.physicallyCorrectLights&&r.enable(9),L.doubleSided&&r.enable(10),L.flipSided&&r.enable(11),L.useDepthPacking&&r.enable(12),L.dithering&&r.enable(13),L.specularIntensityMap&&r.enable(14),L.specularColorMap&&r.enable(15),L.transmission&&r.enable(16),L.transmissionMap&&r.enable(17),L.thicknessMap&&r.enable(18),L.sheen&&r.enable(19),L.sheenColorMap&&r.enable(20),L.sheenRoughnessMap&&r.enable(21),L.decodeVideoTexture&&r.enable(22),L.opaque&&r.enable(23),A.push(r.mask)}function b(A){const L=o[A.type];let P;if(L){const R=Vr[L];P=Uf.clone(R.uniforms)}else P=A.uniforms;return P}function _(A,L){let P;for(let R=0,N=u.length;R<N;R++){const I=u[R];if(I.cacheKey===L){P=I,++P.usedTimes;break}}return P===void 0&&(P=new Yy(S,L,A,m),u.push(P)),P}function w(A){if(--A.usedTimes===0){const L=u.indexOf(A);u[L]=u[u.length-1],u.pop(),A.destroy()}}function E(A){h.remove(A)}function C(){h.dispose()}return{getParameters:l,getProgramCacheKey:a,getUniforms:b,acquireProgram:_,releaseProgram:w,releaseShaderCache:E,programs:u,dispose:C}}function Qy(){let S=new WeakMap;function e(m){let p=S.get(m);return p===void 0&&(p={},S.set(m,p)),p}function s(m){S.delete(m)}function t(m,p,r){S.get(m)[p]=r}function g(){S=new WeakMap}return{get:e,remove:s,update:t,dispose:g}}function e0(S,e){return S.groupOrder!==e.groupOrder?S.groupOrder-e.groupOrder:S.renderOrder!==e.renderOrder?S.renderOrder-e.renderOrder:S.material.id!==e.material.id?S.material.id-e.material.id:S.z!==e.z?S.z-e.z:S.id-e.id}function Xl(S,e){return S.groupOrder!==e.groupOrder?S.groupOrder-e.groupOrder:S.renderOrder!==e.renderOrder?S.renderOrder-e.renderOrder:S.z!==e.z?e.z-S.z:S.id-e.id}function Yl(){const S=[];let e=0;const s=[],t=[],g=[];function m(){e=0,s.length=0,t.length=0,g.length=0}function p(c,i,n,o,l,a){let f=S[e];return f===void 0?(f={id:c.id,object:c,geometry:i,material:n,groupOrder:o,renderOrder:c.renderOrder,z:l,group:a},S[e]=f):(f.id=c.id,f.object=c,f.geometry=i,f.material=n,f.groupOrder=o,f.renderOrder=c.renderOrder,f.z=l,f.group=a),e++,f}function r(c,i,n,o,l,a){const f=p(c,i,n,o,l,a);n.transmission>0?t.push(f):n.transparent===!0?g.push(f):s.push(f)}function h(c,i,n,o,l,a){const f=p(c,i,n,o,l,a);n.transmission>0?t.unshift(f):n.transparent===!0?g.unshift(f):s.unshift(f)}function u(c,i){s.length>1&&s.sort(c||e0),t.length>1&&t.sort(i||Xl),g.length>1&&g.sort(i||Xl)}function d(){for(let c=e,i=S.length;c<i;c++){const n=S[c];if(n.id===null)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.group=null}}return{opaque:s,transmissive:t,transparent:g,init:m,push:r,unshift:h,finish:d,sort:u}}function t0(){let S=new WeakMap;function e(t,g){let m;return S.has(t)===!1?(m=new Yl,S.set(t,[m])):g>=S.get(t).length?(m=new Yl,S.get(t).push(m)):m=S.get(t)[g],m}function s(){S=new WeakMap}return{get:e,dispose:s}}function r0(){const S={};return{get:function(e){if(S[e.id]!==void 0)return S[e.id];let s;switch(e.type){case"DirectionalLight":s={direction:new De,color:new _t};break;case"SpotLight":s={position:new De,direction:new De,color:new _t,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":s={position:new De,color:new _t,distance:0,decay:0};break;case"HemisphereLight":s={direction:new De,skyColor:new _t,groundColor:new _t};break;case"RectAreaLight":s={color:new _t,position:new De,halfWidth:new De,halfHeight:new De};break}return S[e.id]=s,s}}}function n0(){const S={};return{get:function(e){if(S[e.id]!==void 0)return S[e.id];let s;switch(e.type){case"DirectionalLight":s={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qe};break;case"SpotLight":s={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qe};break;case"PointLight":s={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qe,shadowCameraNear:1,shadowCameraFar:1e3};break}return S[e.id]=s,s}}}let i0=0;function s0(S,e){return(e.castShadow?1:0)-(S.castShadow?1:0)}function o0(S,e){const s=new r0,t=n0(),g={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let d=0;d<9;d++)g.probe.push(new De);const m=new De,p=new Jt,r=new Jt;function h(d,c){let i=0,n=0,o=0;for(let L=0;L<9;L++)g.probe[L].set(0,0,0);let l=0,a=0,f=0,v=0,b=0,_=0,w=0,E=0;d.sort(s0);const C=c!==!0?Math.PI:1;for(let L=0,P=d.length;L<P;L++){const R=d[L],N=R.color,I=R.intensity,O=R.distance,U=R.shadow&&R.shadow.map?R.shadow.map.texture:null;if(R.isAmbientLight)i+=N.r*I*C,n+=N.g*I*C,o+=N.b*I*C;else if(R.isLightProbe)for(let K=0;K<9;K++)g.probe[K].addScaledVector(R.sh.coefficients[K],I);else if(R.isDirectionalLight){const K=s.get(R);if(K.color.copy(R.color).multiplyScalar(R.intensity*C),R.castShadow){const ee=R.shadow,H=t.get(R);H.shadowBias=ee.bias,H.shadowNormalBias=ee.normalBias,H.shadowRadius=ee.radius,H.shadowMapSize=ee.mapSize,g.directionalShadow[l]=H,g.directionalShadowMap[l]=U,g.directionalShadowMatrix[l]=R.shadow.matrix,_++}g.directional[l]=K,l++}else if(R.isSpotLight){const K=s.get(R);if(K.position.setFromMatrixPosition(R.matrixWorld),K.color.copy(N).multiplyScalar(I*C),K.distance=O,K.coneCos=Math.cos(R.angle),K.penumbraCos=Math.cos(R.angle*(1-R.penumbra)),K.decay=R.decay,R.castShadow){const ee=R.shadow,H=t.get(R);H.shadowBias=ee.bias,H.shadowNormalBias=ee.normalBias,H.shadowRadius=ee.radius,H.shadowMapSize=ee.mapSize,g.spotShadow[f]=H,g.spotShadowMap[f]=U,g.spotShadowMatrix[f]=R.shadow.matrix,E++}g.spot[f]=K,f++}else if(R.isRectAreaLight){const K=s.get(R);K.color.copy(N).multiplyScalar(I),K.halfWidth.set(R.width*.5,0,0),K.halfHeight.set(0,R.height*.5,0),g.rectArea[v]=K,v++}else if(R.isPointLight){const K=s.get(R);if(K.color.copy(R.color).multiplyScalar(R.intensity*C),K.distance=R.distance,K.decay=R.decay,R.castShadow){const ee=R.shadow,H=t.get(R);H.shadowBias=ee.bias,H.shadowNormalBias=ee.normalBias,H.shadowRadius=ee.radius,H.shadowMapSize=ee.mapSize,H.shadowCameraNear=ee.camera.near,H.shadowCameraFar=ee.camera.far,g.pointShadow[a]=H,g.pointShadowMap[a]=U,g.pointShadowMatrix[a]=R.shadow.matrix,w++}g.point[a]=K,a++}else if(R.isHemisphereLight){const K=s.get(R);K.skyColor.copy(R.color).multiplyScalar(I*C),K.groundColor.copy(R.groundColor).multiplyScalar(I*C),g.hemi[b]=K,b++}}v>0&&(e.isWebGL2||S.has("OES_texture_float_linear")===!0?(g.rectAreaLTC1=it.LTC_FLOAT_1,g.rectAreaLTC2=it.LTC_FLOAT_2):S.has("OES_texture_half_float_linear")===!0?(g.rectAreaLTC1=it.LTC_HALF_1,g.rectAreaLTC2=it.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),g.ambient[0]=i,g.ambient[1]=n,g.ambient[2]=o;const A=g.hash;(A.directionalLength!==l||A.pointLength!==a||A.spotLength!==f||A.rectAreaLength!==v||A.hemiLength!==b||A.numDirectionalShadows!==_||A.numPointShadows!==w||A.numSpotShadows!==E)&&(g.directional.length=l,g.spot.length=f,g.rectArea.length=v,g.point.length=a,g.hemi.length=b,g.directionalShadow.length=_,g.directionalShadowMap.length=_,g.pointShadow.length=w,g.pointShadowMap.length=w,g.spotShadow.length=E,g.spotShadowMap.length=E,g.directionalShadowMatrix.length=_,g.pointShadowMatrix.length=w,g.spotShadowMatrix.length=E,A.directionalLength=l,A.pointLength=a,A.spotLength=f,A.rectAreaLength=v,A.hemiLength=b,A.numDirectionalShadows=_,A.numPointShadows=w,A.numSpotShadows=E,g.version=i0++)}function u(d,c){let i=0,n=0,o=0,l=0,a=0;const f=c.matrixWorldInverse;for(let v=0,b=d.length;v<b;v++){const _=d[v];if(_.isDirectionalLight){const w=g.directional[i];w.direction.setFromMatrixPosition(_.matrixWorld),m.setFromMatrixPosition(_.target.matrixWorld),w.direction.sub(m),w.direction.transformDirection(f),i++}else if(_.isSpotLight){const w=g.spot[o];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(f),w.direction.setFromMatrixPosition(_.matrixWorld),m.setFromMatrixPosition(_.target.matrixWorld),w.direction.sub(m),w.direction.transformDirection(f),o++}else if(_.isRectAreaLight){const w=g.rectArea[l];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(f),r.identity(),p.copy(_.matrixWorld),p.premultiply(f),r.extractRotation(p),w.halfWidth.set(_.width*.5,0,0),w.halfHeight.set(0,_.height*.5,0),w.halfWidth.applyMatrix4(r),w.halfHeight.applyMatrix4(r),l++}else if(_.isPointLight){const w=g.point[n];w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(f),n++}else if(_.isHemisphereLight){const w=g.hemi[a];w.direction.setFromMatrixPosition(_.matrixWorld),w.direction.transformDirection(f),a++}}}return{setup:h,setupView:u,state:g}}function Zl(S,e){const s=new o0(S,e),t=[],g=[];function m(){t.length=0,g.length=0}function p(c){t.push(c)}function r(c){g.push(c)}function h(c){s.setup(t,c)}function u(c){s.setupView(t,c)}return{init:m,state:{lightsArray:t,shadowsArray:g,lights:s},setupLights:h,setupLightsView:u,pushLight:p,pushShadow:r}}function a0(S,e){let s=new WeakMap;function t(m,p=0){let r;return s.has(m)===!1?(r=new Zl(S,e),s.set(m,[r])):p>=s.get(m).length?(r=new Zl(S,e),s.get(m).push(r)):r=s.get(m)[p],r}function g(){s=new WeakMap}return{get:t,dispose:g}}class Cu extends ir{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=xf,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Lu extends ir{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new De,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const l0=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,u0=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function c0(S,e,s){let t=new No;const g=new Qe,m=new Qe,p=new Vt,r=new Cu({depthPacking:wf}),h=new Lu,u={},d=s.maxTextureSize,c={0:Ir,1:ji,2:hi},i=new on({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Qe},radius:{value:4}},vertexShader:l0,fragmentShader:u0}),n=i.clone();n.defines.HORIZONTAL_PASS=1;const o=new kr;o.setAttribute("position",new Wr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const l=new wr(o,i),a=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=au,this.render=function(_,w,E){if(a.enabled===!1||a.autoUpdate===!1&&a.needsUpdate===!1||_.length===0)return;const C=S.getRenderTarget(),A=S.getActiveCubeFace(),L=S.getActiveMipmapLevel(),P=S.state;P.setBlending(yn),P.buffers.color.setClear(1,1,1,1),P.buffers.depth.setTest(!0),P.setScissorTest(!1);for(let R=0,N=_.length;R<N;R++){const I=_[R],O=I.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",I,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;g.copy(O.mapSize);const U=O.getFrameExtents();if(g.multiply(U),m.copy(O.mapSize),(g.x>d||g.y>d)&&(g.x>d&&(m.x=Math.floor(d/U.x),g.x=m.x*U.x,O.mapSize.x=m.x),g.y>d&&(m.y=Math.floor(d/U.y),g.y=m.y*U.y,O.mapSize.y=m.y)),O.map===null&&!O.isPointLightShadow&&this.type===Ai&&(O.map=new vn(g.x,g.y),O.map.texture.name=I.name+".shadowMap",O.mapPass=new vn(g.x,g.y),O.camera.updateProjectionMatrix()),O.map===null){const ee={minFilter:dr,magFilter:dr,format:jr};O.map=new vn(g.x,g.y,ee),O.map.texture.name=I.name+".shadowMap",O.camera.updateProjectionMatrix()}S.setRenderTarget(O.map),S.clear();const K=O.getViewportCount();for(let ee=0;ee<K;ee++){const H=O.getViewport(ee);p.set(m.x*H.x,m.y*H.y,m.x*H.z,m.y*H.w),P.viewport(p),O.updateMatrices(I,ee),t=O.getFrustum(),b(w,E,O.camera,I,this.type)}!O.isPointLightShadow&&this.type===Ai&&f(O,E),O.needsUpdate=!1}a.needsUpdate=!1,S.setRenderTarget(C,A,L)};function f(_,w){const E=e.update(l);i.defines.VSM_SAMPLES!==_.blurSamples&&(i.defines.VSM_SAMPLES=_.blurSamples,n.defines.VSM_SAMPLES=_.blurSamples,i.needsUpdate=!0,n.needsUpdate=!0),i.uniforms.shadow_pass.value=_.map.texture,i.uniforms.resolution.value=_.mapSize,i.uniforms.radius.value=_.radius,S.setRenderTarget(_.mapPass),S.clear(),S.renderBufferDirect(w,null,E,i,l,null),n.uniforms.shadow_pass.value=_.mapPass.texture,n.uniforms.resolution.value=_.mapSize,n.uniforms.radius.value=_.radius,S.setRenderTarget(_.map),S.clear(),S.renderBufferDirect(w,null,E,n,l,null)}function v(_,w,E,C,A,L){let P=null;const R=E.isPointLight===!0?_.customDistanceMaterial:_.customDepthMaterial;if(R!==void 0?P=R:P=E.isPointLight===!0?h:r,S.localClippingEnabled&&w.clipShadows===!0&&w.clippingPlanes.length!==0||w.displacementMap&&w.displacementScale!==0||w.alphaMap&&w.alphaTest>0){const N=P.uuid,I=w.uuid;let O=u[N];O===void 0&&(O={},u[N]=O);let U=O[I];U===void 0&&(U=P.clone(),O[I]=U),P=U}return P.visible=w.visible,P.wireframe=w.wireframe,L===Ai?P.side=w.shadowSide!==null?w.shadowSide:w.side:P.side=w.shadowSide!==null?w.shadowSide:c[w.side],P.alphaMap=w.alphaMap,P.alphaTest=w.alphaTest,P.clipShadows=w.clipShadows,P.clippingPlanes=w.clippingPlanes,P.clipIntersection=w.clipIntersection,P.displacementMap=w.displacementMap,P.displacementScale=w.displacementScale,P.displacementBias=w.displacementBias,P.wireframeLinewidth=w.wireframeLinewidth,P.linewidth=w.linewidth,E.isPointLight===!0&&P.isMeshDistanceMaterial===!0&&(P.referencePosition.setFromMatrixPosition(E.matrixWorld),P.nearDistance=C,P.farDistance=A),P}function b(_,w,E,C,A){if(_.visible===!1)return;if(_.layers.test(w.layers)&&(_.isMesh||_.isLine||_.isPoints)&&(_.castShadow||_.receiveShadow&&A===Ai)&&(!_.frustumCulled||t.intersectsObject(_))){_.modelViewMatrix.multiplyMatrices(E.matrixWorldInverse,_.matrixWorld);const R=e.update(_),N=_.material;if(Array.isArray(N)){const I=R.groups;for(let O=0,U=I.length;O<U;O++){const K=I[O],ee=N[K.materialIndex];if(ee&&ee.visible){const H=v(_,ee,C,E.near,E.far,A);S.renderBufferDirect(E,null,R,H,_,K)}}}else if(N.visible){const I=v(_,N,C,E.near,E.far,A);S.renderBufferDirect(E,null,R,I,_,null)}}const P=_.children;for(let R=0,N=P.length;R<N;R++)b(P[R],w,E,C,A)}}function h0(S,e,s){const t=s.isWebGL2;function g(){let k=!1;const Q=new Vt;let V=null;const ae=new Vt(0,0,0,0);return{setMask:function(me){V!==me&&!k&&(S.colorMask(me,me,me,me),V=me)},setLocked:function(me){k=me},setClear:function(me,Me,Ee,ke,we){we===!0&&(me*=ke,Me*=ke,Ee*=ke),Q.set(me,Me,Ee,ke),ae.equals(Q)===!1&&(S.clearColor(me,Me,Ee,ke),ae.copy(Q))},reset:function(){k=!1,V=null,ae.set(-1,0,0,0)}}}function m(){let k=!1,Q=null,V=null,ae=null;return{setTest:function(me){me?de(2929):re(2929)},setMask:function(me){Q!==me&&!k&&(S.depthMask(me),Q=me)},setFunc:function(me){if(V!==me){if(me)switch(me){case Hd:S.depthFunc(512);break;case Wd:S.depthFunc(519);break;case qd:S.depthFunc(513);break;case Mo:S.depthFunc(515);break;case Xd:S.depthFunc(514);break;case Yd:S.depthFunc(518);break;case Zd:S.depthFunc(516);break;case Jd:S.depthFunc(517);break;default:S.depthFunc(515)}else S.depthFunc(515);V=me}},setLocked:function(me){k=me},setClear:function(me){ae!==me&&(S.clearDepth(me),ae=me)},reset:function(){k=!1,Q=null,V=null,ae=null}}}function p(){let k=!1,Q=null,V=null,ae=null,me=null,Me=null,Ee=null,ke=null,we=null;return{setTest:function(Je){k||(Je?de(2960):re(2960))},setMask:function(Je){Q!==Je&&!k&&(S.stencilMask(Je),Q=Je)},setFunc:function(Je,nt,ut){(V!==Je||ae!==nt||me!==ut)&&(S.stencilFunc(Je,nt,ut),V=Je,ae=nt,me=ut)},setOp:function(Je,nt,ut){(Me!==Je||Ee!==nt||ke!==ut)&&(S.stencilOp(Je,nt,ut),Me=Je,Ee=nt,ke=ut)},setLocked:function(Je){k=Je},setClear:function(Je){we!==Je&&(S.clearStencil(Je),we=Je)},reset:function(){k=!1,Q=null,V=null,ae=null,me=null,Me=null,Ee=null,ke=null,we=null}}}const r=new g,h=new m,u=new p;let d={},c={},i=new WeakMap,n=[],o=null,l=!1,a=null,f=null,v=null,b=null,_=null,w=null,E=null,C=!1,A=null,L=null,P=null,R=null,N=null;const I=S.getParameter(35661);let O=!1,U=0;const K=S.getParameter(7938);K.indexOf("WebGL")!==-1?(U=parseFloat(/^WebGL (\d)/.exec(K)[1]),O=U>=1):K.indexOf("OpenGL ES")!==-1&&(U=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),O=U>=2);let ee=null,H={};const te=S.getParameter(3088),Z=S.getParameter(2978),ge=new Vt().fromArray(te),$=new Vt().fromArray(Z);function se(k,Q,V){const ae=new Uint8Array(4),me=S.createTexture();S.bindTexture(k,me),S.texParameteri(k,10241,9728),S.texParameteri(k,10240,9728);for(let Me=0;Me<V;Me++)S.texImage2D(Q+Me,0,6408,1,1,0,6408,5121,ae);return me}const z={};z[3553]=se(3553,3553,1),z[34067]=se(34067,34069,6),r.setClear(0,0,0,1),h.setClear(1),u.setClear(0),de(2929),h.setFunc(Mo),fe(!1),oe(Fa),de(2884),Y(yn);function de(k){d[k]!==!0&&(S.enable(k),d[k]=!0)}function re(k){d[k]!==!1&&(S.disable(k),d[k]=!1)}function ie(k,Q){return c[k]!==Q?(S.bindFramebuffer(k,Q),c[k]=Q,t&&(k===36009&&(c[36160]=Q),k===36160&&(c[36009]=Q)),!0):!1}function j(k,Q){let V=n,ae=!1;if(k)if(V=i.get(Q),V===void 0&&(V=[],i.set(Q,V)),k.isWebGLMultipleRenderTargets){const me=k.texture;if(V.length!==me.length||V[0]!==36064){for(let Me=0,Ee=me.length;Me<Ee;Me++)V[Me]=36064+Me;V.length=me.length,ae=!0}}else V[0]!==36064&&(V[0]=36064,ae=!0);else V[0]!==1029&&(V[0]=1029,ae=!0);ae&&(s.isWebGL2?S.drawBuffers(V):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(V))}function B(k){return o!==k?(S.useProgram(k),o=k,!0):!1}const G={[si]:32774,[jd]:32778,[Id]:32779};if(t)G[za]=32775,G[Va]=32776;else{const k=e.get("EXT_blend_minmax");k!==null&&(G[za]=k.MIN_EXT,G[Va]=k.MAX_EXT)}const ne={[Od]:0,[kd]:1,[Nd]:768,[lu]:770,[Vd]:776,[Gd]:774,[Ud]:772,[Fd]:769,[uu]:771,[zd]:775,[Bd]:773};function Y(k,Q,V,ae,me,Me,Ee,ke){if(k===yn){l===!0&&(re(3042),l=!1);return}if(l===!1&&(de(3042),l=!0),k!==Dd){if(k!==a||ke!==C){if((f!==si||_!==si)&&(S.blendEquation(32774),f=si,_=si),ke)switch(k){case li:S.blendFuncSeparate(1,771,1,771);break;case Ua:S.blendFunc(1,1);break;case Ba:S.blendFuncSeparate(0,769,0,1);break;case Ga:S.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",k);break}else switch(k){case li:S.blendFuncSeparate(770,771,1,771);break;case Ua:S.blendFunc(770,1);break;case Ba:S.blendFuncSeparate(0,769,0,1);break;case Ga:S.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",k);break}v=null,b=null,w=null,E=null,a=k,C=ke}return}me=me||Q,Me=Me||V,Ee=Ee||ae,(Q!==f||me!==_)&&(S.blendEquationSeparate(G[Q],G[me]),f=Q,_=me),(V!==v||ae!==b||Me!==w||Ee!==E)&&(S.blendFuncSeparate(ne[V],ne[ae],ne[Me],ne[Ee]),v=V,b=ae,w=Me,E=Ee),a=k,C=null}function J(k,Q){k.side===hi?re(2884):de(2884);let V=k.side===Ir;Q&&(V=!V),fe(V),k.blending===li&&k.transparent===!1?Y(yn):Y(k.blending,k.blendEquation,k.blendSrc,k.blendDst,k.blendEquationAlpha,k.blendSrcAlpha,k.blendDstAlpha,k.premultipliedAlpha),h.setFunc(k.depthFunc),h.setTest(k.depthTest),h.setMask(k.depthWrite),r.setMask(k.colorWrite);const ae=k.stencilWrite;u.setTest(ae),ae&&(u.setMask(k.stencilWriteMask),u.setFunc(k.stencilFunc,k.stencilRef,k.stencilFuncMask),u.setOp(k.stencilFail,k.stencilZFail,k.stencilZPass)),W(k.polygonOffset,k.polygonOffsetFactor,k.polygonOffsetUnits),k.alphaToCoverage===!0?de(32926):re(32926)}function fe(k){A!==k&&(k?S.frontFace(2304):S.frontFace(2305),A=k)}function oe(k){k!==Cd?(de(2884),k!==L&&(k===Fa?S.cullFace(1029):k===Ld?S.cullFace(1028):S.cullFace(1032))):re(2884),L=k}function X(k){k!==P&&(O&&S.lineWidth(k),P=k)}function W(k,Q,V){k?(de(32823),(R!==Q||N!==V)&&(S.polygonOffset(Q,V),R=Q,N=V)):re(32823)}function pe(k){k?de(3089):re(3089)}function Se(k){k===void 0&&(k=33984+I-1),ee!==k&&(S.activeTexture(k),ee=k)}function Re(k,Q){ee===null&&Se();let V=H[ee];V===void 0&&(V={type:void 0,texture:void 0},H[ee]=V),(V.type!==k||V.texture!==Q)&&(S.bindTexture(k,Q||z[k]),V.type=k,V.texture=Q)}function Le(){const k=H[ee];k!==void 0&&k.type!==void 0&&(S.bindTexture(k.type,null),k.type=void 0,k.texture=void 0)}function ce(){try{S.compressedTexImage2D.apply(S,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function ue(){try{S.texSubImage2D.apply(S,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function Ce(){try{S.texSubImage3D.apply(S,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function Ie(){try{S.compressedTexSubImage2D.apply(S,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function Ve(){try{S.texStorage2D.apply(S,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function Pe(){try{S.texStorage3D.apply(S,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function Oe(){try{S.texImage2D.apply(S,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function Ae(){try{S.texImage3D.apply(S,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function Ge(k){ge.equals(k)===!1&&(S.scissor(k.x,k.y,k.z,k.w),ge.copy(k))}function be(k){$.equals(k)===!1&&(S.viewport(k.x,k.y,k.z,k.w),$.copy(k))}function Xe(){S.disable(3042),S.disable(2884),S.disable(2929),S.disable(32823),S.disable(3089),S.disable(2960),S.disable(32926),S.blendEquation(32774),S.blendFunc(1,0),S.blendFuncSeparate(1,0,1,0),S.colorMask(!0,!0,!0,!0),S.clearColor(0,0,0,0),S.depthMask(!0),S.depthFunc(513),S.clearDepth(1),S.stencilMask(4294967295),S.stencilFunc(519,0,4294967295),S.stencilOp(7680,7680,7680),S.clearStencil(0),S.cullFace(1029),S.frontFace(2305),S.polygonOffset(0,0),S.activeTexture(33984),S.bindFramebuffer(36160,null),t===!0&&(S.bindFramebuffer(36009,null),S.bindFramebuffer(36008,null)),S.useProgram(null),S.lineWidth(1),S.scissor(0,0,S.canvas.width,S.canvas.height),S.viewport(0,0,S.canvas.width,S.canvas.height),d={},ee=null,H={},c={},i=new WeakMap,n=[],o=null,l=!1,a=null,f=null,v=null,b=null,_=null,w=null,E=null,C=!1,A=null,L=null,P=null,R=null,N=null,ge.set(0,0,S.canvas.width,S.canvas.height),$.set(0,0,S.canvas.width,S.canvas.height),r.reset(),h.reset(),u.reset()}return{buffers:{color:r,depth:h,stencil:u},enable:de,disable:re,bindFramebuffer:ie,drawBuffers:j,useProgram:B,setBlending:Y,setMaterial:J,setFlipSided:fe,setCullFace:oe,setLineWidth:X,setPolygonOffset:W,setScissorTest:pe,activeTexture:Se,bindTexture:Re,unbindTexture:Le,compressedTexImage2D:ce,texImage2D:Oe,texImage3D:Ae,texStorage2D:Ve,texStorage3D:Pe,texSubImage2D:ue,texSubImage3D:Ce,compressedTexSubImage2D:Ie,scissor:Ge,viewport:be,reset:Xe}}function d0(S,e,s,t,g,m,p){const r=g.isWebGL2,h=g.maxTextures,u=g.maxCubemapSize,d=g.maxTextureSize,c=g.maxSamples,i=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,n=/OculusBrowser/g.test(navigator.userAgent),o=new WeakMap;let l;const a=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(ce,ue){return f?new OffscreenCanvas(ce,ue):xs("canvas")}function b(ce,ue,Ce,Ie){let Ve=1;if((ce.width>Ie||ce.height>Ie)&&(Ve=Ie/Math.max(ce.width,ce.height)),Ve<1||ue===!0)if(typeof HTMLImageElement!="undefined"&&ce instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&ce instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&ce instanceof ImageBitmap){const Pe=ue?Po:Math.floor,Oe=Pe(Ve*ce.width),Ae=Pe(Ve*ce.height);l===void 0&&(l=v(Oe,Ae));const Ge=Ce?v(Oe,Ae):l;return Ge.width=Oe,Ge.height=Ae,Ge.getContext("2d").drawImage(ce,0,0,Oe,Ae),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ce.width+"x"+ce.height+") to ("+Oe+"x"+Ae+")."),Ge}else return"data"in ce&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ce.width+"x"+ce.height+")."),ce;return ce}function _(ce){return gl(ce.width)&&gl(ce.height)}function w(ce){return r?!1:ce.wrapS!==Dr||ce.wrapT!==Dr||ce.minFilter!==dr&&ce.minFilter!==xr}function E(ce,ue){return ce.generateMipmaps&&ue&&ce.minFilter!==dr&&ce.minFilter!==xr}function C(ce){S.generateMipmap(ce)}function A(ce,ue,Ce,Ie,Ve=!1){if(r===!1)return ue;if(ce!==null){if(S[ce]!==void 0)return S[ce];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ce+"'")}let Pe=ue;return ue===6403&&(Ce===5126&&(Pe=33326),Ce===5131&&(Pe=33325),Ce===5121&&(Pe=33321)),ue===33319&&(Ce===5126&&(Pe=33328),Ce===5131&&(Pe=33327),Ce===5121&&(Pe=33323)),ue===6408&&(Ce===5126&&(Pe=34836),Ce===5131&&(Pe=34842),Ce===5121&&(Pe=Ie===zt&&Ve===!1?35907:32856),Ce===32819&&(Pe=32854),Ce===32820&&(Pe=32855)),(Pe===33325||Pe===33326||Pe===33327||Pe===33328||Pe===34842||Pe===34836)&&e.get("EXT_color_buffer_float"),Pe}function L(ce,ue,Ce){return E(ce,Ce)===!0||ce.isFramebufferTexture&&ce.minFilter!==dr&&ce.minFilter!==xr?Math.log2(Math.max(ue.width,ue.height))+1:ce.mipmaps!==void 0&&ce.mipmaps.length>0?ce.mipmaps.length:ce.isCompressedTexture&&Array.isArray(ce.image)?ue.mipmaps.length:1}function P(ce){return ce===dr||ce===Ha||ce===Wa?9728:9729}function R(ce){const ue=ce.target;ue.removeEventListener("dispose",R),I(ue),ue.isVideoTexture&&o.delete(ue)}function N(ce){const ue=ce.target;ue.removeEventListener("dispose",N),U(ue)}function I(ce){const ue=t.get(ce);if(ue.__webglInit===void 0)return;const Ce=ce.source,Ie=a.get(Ce);if(Ie){const Ve=Ie[ue.__cacheKey];Ve.usedTimes--,Ve.usedTimes===0&&O(ce),Object.keys(Ie).length===0&&a.delete(Ce)}t.remove(ce)}function O(ce){const ue=t.get(ce);S.deleteTexture(ue.__webglTexture);const Ce=ce.source,Ie=a.get(Ce);delete Ie[ue.__cacheKey],p.memory.textures--}function U(ce){const ue=ce.texture,Ce=t.get(ce),Ie=t.get(ue);if(Ie.__webglTexture!==void 0&&(S.deleteTexture(Ie.__webglTexture),p.memory.textures--),ce.depthTexture&&ce.depthTexture.dispose(),ce.isWebGLCubeRenderTarget)for(let Ve=0;Ve<6;Ve++)S.deleteFramebuffer(Ce.__webglFramebuffer[Ve]),Ce.__webglDepthbuffer&&S.deleteRenderbuffer(Ce.__webglDepthbuffer[Ve]);else{if(S.deleteFramebuffer(Ce.__webglFramebuffer),Ce.__webglDepthbuffer&&S.deleteRenderbuffer(Ce.__webglDepthbuffer),Ce.__webglMultisampledFramebuffer&&S.deleteFramebuffer(Ce.__webglMultisampledFramebuffer),Ce.__webglColorRenderbuffer)for(let Ve=0;Ve<Ce.__webglColorRenderbuffer.length;Ve++)Ce.__webglColorRenderbuffer[Ve]&&S.deleteRenderbuffer(Ce.__webglColorRenderbuffer[Ve]);Ce.__webglDepthRenderbuffer&&S.deleteRenderbuffer(Ce.__webglDepthRenderbuffer)}if(ce.isWebGLMultipleRenderTargets)for(let Ve=0,Pe=ue.length;Ve<Pe;Ve++){const Oe=t.get(ue[Ve]);Oe.__webglTexture&&(S.deleteTexture(Oe.__webglTexture),p.memory.textures--),t.remove(ue[Ve])}t.remove(ue),t.remove(ce)}let K=0;function ee(){K=0}function H(){const ce=K;return ce>=h&&console.warn("THREE.WebGLTextures: Trying to use "+ce+" texture units while this GPU supports only "+h),K+=1,ce}function te(ce){const ue=[];return ue.push(ce.wrapS),ue.push(ce.wrapT),ue.push(ce.magFilter),ue.push(ce.minFilter),ue.push(ce.anisotropy),ue.push(ce.internalFormat),ue.push(ce.format),ue.push(ce.type),ue.push(ce.generateMipmaps),ue.push(ce.premultiplyAlpha),ue.push(ce.flipY),ue.push(ce.unpackAlignment),ue.push(ce.encoding),ue.join()}function Z(ce,ue){const Ce=t.get(ce);if(ce.isVideoTexture&&Re(ce),ce.isRenderTargetTexture===!1&&ce.version>0&&Ce.__version!==ce.version){const Ie=ce.image;if(Ie===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ie.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{j(Ce,ce,ue);return}}s.activeTexture(33984+ue),s.bindTexture(3553,Ce.__webglTexture)}function ge(ce,ue){const Ce=t.get(ce);if(ce.version>0&&Ce.__version!==ce.version){j(Ce,ce,ue);return}s.activeTexture(33984+ue),s.bindTexture(35866,Ce.__webglTexture)}function $(ce,ue){const Ce=t.get(ce);if(ce.version>0&&Ce.__version!==ce.version){j(Ce,ce,ue);return}s.activeTexture(33984+ue),s.bindTexture(32879,Ce.__webglTexture)}function se(ce,ue){const Ce=t.get(ce);if(ce.version>0&&Ce.__version!==ce.version){B(Ce,ce,ue);return}s.activeTexture(33984+ue),s.bindTexture(34067,Ce.__webglTexture)}const z={[Ao]:10497,[Dr]:33071,[Co]:33648},de={[dr]:9728,[Ha]:9984,[Wa]:9986,[xr]:9729,[sf]:9985,[Ts]:9987};function re(ce,ue,Ce){if(Ce?(S.texParameteri(ce,10242,z[ue.wrapS]),S.texParameteri(ce,10243,z[ue.wrapT]),(ce===32879||ce===35866)&&S.texParameteri(ce,32882,z[ue.wrapR]),S.texParameteri(ce,10240,de[ue.magFilter]),S.texParameteri(ce,10241,de[ue.minFilter])):(S.texParameteri(ce,10242,33071),S.texParameteri(ce,10243,33071),(ce===32879||ce===35866)&&S.texParameteri(ce,32882,33071),(ue.wrapS!==Dr||ue.wrapT!==Dr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),S.texParameteri(ce,10240,P(ue.magFilter)),S.texParameteri(ce,10241,P(ue.minFilter)),ue.minFilter!==dr&&ue.minFilter!==xr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Ie=e.get("EXT_texture_filter_anisotropic");if(ue.type===Rn&&e.has("OES_texture_float_linear")===!1||r===!1&&ue.type===Ii&&e.has("OES_texture_half_float_linear")===!1)return;(ue.anisotropy>1||t.get(ue).__currentAnisotropy)&&(S.texParameterf(ce,Ie.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ue.anisotropy,g.getMaxAnisotropy())),t.get(ue).__currentAnisotropy=ue.anisotropy)}}function ie(ce,ue){let Ce=!1;ce.__webglInit===void 0&&(ce.__webglInit=!0,ue.addEventListener("dispose",R));const Ie=ue.source;let Ve=a.get(Ie);Ve===void 0&&(Ve={},a.set(Ie,Ve));const Pe=te(ue);if(Pe!==ce.__cacheKey){Ve[Pe]===void 0&&(Ve[Pe]={texture:S.createTexture(),usedTimes:0},p.memory.textures++,Ce=!0),Ve[Pe].usedTimes++;const Oe=Ve[ce.__cacheKey];Oe!==void 0&&(Ve[ce.__cacheKey].usedTimes--,Oe.usedTimes===0&&O(ue)),ce.__cacheKey=Pe,ce.__webglTexture=Ve[Pe].texture}return Ce}function j(ce,ue,Ce){let Ie=3553;ue.isDataArrayTexture&&(Ie=35866),ue.isData3DTexture&&(Ie=32879);const Ve=ie(ce,ue),Pe=ue.source;if(s.activeTexture(33984+Ce),s.bindTexture(Ie,ce.__webglTexture),Pe.version!==Pe.__currentVersion||Ve===!0){S.pixelStorei(37440,ue.flipY),S.pixelStorei(37441,ue.premultiplyAlpha),S.pixelStorei(3317,ue.unpackAlignment),S.pixelStorei(37443,0);const Oe=w(ue)&&_(ue.image)===!1;let Ae=b(ue.image,Oe,!1,d);Ae=Le(ue,Ae);const Ge=_(Ae)||r,be=m.convert(ue.format,ue.encoding);let Xe=m.convert(ue.type),k=A(ue.internalFormat,be,Xe,ue.encoding,ue.isVideoTexture);re(Ie,ue,Ge);let Q;const V=ue.mipmaps,ae=r&&ue.isVideoTexture!==!0,me=Pe.__currentVersion===void 0||Ve===!0,Me=L(ue,Ae,Ge);if(ue.isDepthTexture)k=6402,r?ue.type===Rn?k=36012:ue.type===Pn?k=33190:ue.type===ui?k=35056:k=33189:ue.type===Rn&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ue.format===jn&&k===6402&&ue.type!==hu&&ue.type!==Pn&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ue.type=Pn,Xe=m.convert(ue.type)),ue.format===pi&&k===6402&&(k=34041,ue.type!==ui&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ue.type=ui,Xe=m.convert(ue.type))),me&&(ae?s.texStorage2D(3553,1,k,Ae.width,Ae.height):s.texImage2D(3553,0,k,Ae.width,Ae.height,0,be,Xe,null));else if(ue.isDataTexture)if(V.length>0&&Ge){ae&&me&&s.texStorage2D(3553,Me,k,V[0].width,V[0].height);for(let Ee=0,ke=V.length;Ee<ke;Ee++)Q=V[Ee],ae?s.texSubImage2D(3553,Ee,0,0,Q.width,Q.height,be,Xe,Q.data):s.texImage2D(3553,Ee,k,Q.width,Q.height,0,be,Xe,Q.data);ue.generateMipmaps=!1}else ae?(me&&s.texStorage2D(3553,Me,k,Ae.width,Ae.height),s.texSubImage2D(3553,0,0,0,Ae.width,Ae.height,be,Xe,Ae.data)):s.texImage2D(3553,0,k,Ae.width,Ae.height,0,be,Xe,Ae.data);else if(ue.isCompressedTexture){ae&&me&&s.texStorage2D(3553,Me,k,V[0].width,V[0].height);for(let Ee=0,ke=V.length;Ee<ke;Ee++)Q=V[Ee],ue.format!==jr?be!==null?ae?s.compressedTexSubImage2D(3553,Ee,0,0,Q.width,Q.height,be,Q.data):s.compressedTexImage2D(3553,Ee,k,Q.width,Q.height,0,Q.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ae?s.texSubImage2D(3553,Ee,0,0,Q.width,Q.height,be,Xe,Q.data):s.texImage2D(3553,Ee,k,Q.width,Q.height,0,be,Xe,Q.data)}else if(ue.isDataArrayTexture)ae?(me&&s.texStorage3D(35866,Me,k,Ae.width,Ae.height,Ae.depth),s.texSubImage3D(35866,0,0,0,0,Ae.width,Ae.height,Ae.depth,be,Xe,Ae.data)):s.texImage3D(35866,0,k,Ae.width,Ae.height,Ae.depth,0,be,Xe,Ae.data);else if(ue.isData3DTexture)ae?(me&&s.texStorage3D(32879,Me,k,Ae.width,Ae.height,Ae.depth),s.texSubImage3D(32879,0,0,0,0,Ae.width,Ae.height,Ae.depth,be,Xe,Ae.data)):s.texImage3D(32879,0,k,Ae.width,Ae.height,Ae.depth,0,be,Xe,Ae.data);else if(ue.isFramebufferTexture){if(me)if(ae)s.texStorage2D(3553,Me,k,Ae.width,Ae.height);else{let Ee=Ae.width,ke=Ae.height;for(let we=0;we<Me;we++)s.texImage2D(3553,we,k,Ee,ke,0,be,Xe,null),Ee>>=1,ke>>=1}}else if(V.length>0&&Ge){ae&&me&&s.texStorage2D(3553,Me,k,V[0].width,V[0].height);for(let Ee=0,ke=V.length;Ee<ke;Ee++)Q=V[Ee],ae?s.texSubImage2D(3553,Ee,0,0,be,Xe,Q):s.texImage2D(3553,Ee,k,be,Xe,Q);ue.generateMipmaps=!1}else ae?(me&&s.texStorage2D(3553,Me,k,Ae.width,Ae.height),s.texSubImage2D(3553,0,0,0,be,Xe,Ae)):s.texImage2D(3553,0,k,be,Xe,Ae);E(ue,Ge)&&C(Ie),Pe.__currentVersion=Pe.version,ue.onUpdate&&ue.onUpdate(ue)}ce.__version=ue.version}function B(ce,ue,Ce){if(ue.image.length!==6)return;const Ie=ie(ce,ue),Ve=ue.source;if(s.activeTexture(33984+Ce),s.bindTexture(34067,ce.__webglTexture),Ve.version!==Ve.__currentVersion||Ie===!0){S.pixelStorei(37440,ue.flipY),S.pixelStorei(37441,ue.premultiplyAlpha),S.pixelStorei(3317,ue.unpackAlignment),S.pixelStorei(37443,0);const Pe=ue.isCompressedTexture||ue.image[0].isCompressedTexture,Oe=ue.image[0]&&ue.image[0].isDataTexture,Ae=[];for(let Ee=0;Ee<6;Ee++)!Pe&&!Oe?Ae[Ee]=b(ue.image[Ee],!1,!0,u):Ae[Ee]=Oe?ue.image[Ee].image:ue.image[Ee],Ae[Ee]=Le(ue,Ae[Ee]);const Ge=Ae[0],be=_(Ge)||r,Xe=m.convert(ue.format,ue.encoding),k=m.convert(ue.type),Q=A(ue.internalFormat,Xe,k,ue.encoding),V=r&&ue.isVideoTexture!==!0,ae=Ve.__currentVersion===void 0||Ie===!0;let me=L(ue,Ge,be);re(34067,ue,be);let Me;if(Pe){V&&ae&&s.texStorage2D(34067,me,Q,Ge.width,Ge.height);for(let Ee=0;Ee<6;Ee++){Me=Ae[Ee].mipmaps;for(let ke=0;ke<Me.length;ke++){const we=Me[ke];ue.format!==jr?Xe!==null?V?s.compressedTexSubImage2D(34069+Ee,ke,0,0,we.width,we.height,Xe,we.data):s.compressedTexImage2D(34069+Ee,ke,Q,we.width,we.height,0,we.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):V?s.texSubImage2D(34069+Ee,ke,0,0,we.width,we.height,Xe,k,we.data):s.texImage2D(34069+Ee,ke,Q,we.width,we.height,0,Xe,k,we.data)}}}else{Me=ue.mipmaps,V&&ae&&(Me.length>0&&me++,s.texStorage2D(34067,me,Q,Ae[0].width,Ae[0].height));for(let Ee=0;Ee<6;Ee++)if(Oe){V?s.texSubImage2D(34069+Ee,0,0,0,Ae[Ee].width,Ae[Ee].height,Xe,k,Ae[Ee].data):s.texImage2D(34069+Ee,0,Q,Ae[Ee].width,Ae[Ee].height,0,Xe,k,Ae[Ee].data);for(let ke=0;ke<Me.length;ke++){const Je=Me[ke].image[Ee].image;V?s.texSubImage2D(34069+Ee,ke+1,0,0,Je.width,Je.height,Xe,k,Je.data):s.texImage2D(34069+Ee,ke+1,Q,Je.width,Je.height,0,Xe,k,Je.data)}}else{V?s.texSubImage2D(34069+Ee,0,0,0,Xe,k,Ae[Ee]):s.texImage2D(34069+Ee,0,Q,Xe,k,Ae[Ee]);for(let ke=0;ke<Me.length;ke++){const we=Me[ke];V?s.texSubImage2D(34069+Ee,ke+1,0,0,Xe,k,we.image[Ee]):s.texImage2D(34069+Ee,ke+1,Q,Xe,k,we.image[Ee])}}}E(ue,be)&&C(34067),Ve.__currentVersion=Ve.version,ue.onUpdate&&ue.onUpdate(ue)}ce.__version=ue.version}function G(ce,ue,Ce,Ie,Ve){const Pe=m.convert(Ce.format,Ce.encoding),Oe=m.convert(Ce.type),Ae=A(Ce.internalFormat,Pe,Oe,Ce.encoding);t.get(ue).__hasExternalTextures||(Ve===32879||Ve===35866?s.texImage3D(Ve,0,Ae,ue.width,ue.height,ue.depth,0,Pe,Oe,null):s.texImage2D(Ve,0,Ae,ue.width,ue.height,0,Pe,Oe,null)),s.bindFramebuffer(36160,ce),Se(ue)?i.framebufferTexture2DMultisampleEXT(36160,Ie,Ve,t.get(Ce).__webglTexture,0,pe(ue)):S.framebufferTexture2D(36160,Ie,Ve,t.get(Ce).__webglTexture,0),s.bindFramebuffer(36160,null)}function ne(ce,ue,Ce){if(S.bindRenderbuffer(36161,ce),ue.depthBuffer&&!ue.stencilBuffer){let Ie=33189;if(Ce||Se(ue)){const Ve=ue.depthTexture;Ve&&Ve.isDepthTexture&&(Ve.type===Rn?Ie=36012:Ve.type===Pn&&(Ie=33190));const Pe=pe(ue);Se(ue)?i.renderbufferStorageMultisampleEXT(36161,Pe,Ie,ue.width,ue.height):S.renderbufferStorageMultisample(36161,Pe,Ie,ue.width,ue.height)}else S.renderbufferStorage(36161,Ie,ue.width,ue.height);S.framebufferRenderbuffer(36160,36096,36161,ce)}else if(ue.depthBuffer&&ue.stencilBuffer){const Ie=pe(ue);Ce&&Se(ue)===!1?S.renderbufferStorageMultisample(36161,Ie,35056,ue.width,ue.height):Se(ue)?i.renderbufferStorageMultisampleEXT(36161,Ie,35056,ue.width,ue.height):S.renderbufferStorage(36161,34041,ue.width,ue.height),S.framebufferRenderbuffer(36160,33306,36161,ce)}else{const Ie=ue.isWebGLMultipleRenderTargets===!0?ue.texture:[ue.texture];for(let Ve=0;Ve<Ie.length;Ve++){const Pe=Ie[Ve],Oe=m.convert(Pe.format,Pe.encoding),Ae=m.convert(Pe.type),Ge=A(Pe.internalFormat,Oe,Ae,Pe.encoding),be=pe(ue);Ce&&Se(ue)===!1?S.renderbufferStorageMultisample(36161,be,Ge,ue.width,ue.height):Se(ue)?i.renderbufferStorageMultisampleEXT(36161,be,Ge,ue.width,ue.height):S.renderbufferStorage(36161,Ge,ue.width,ue.height)}}S.bindRenderbuffer(36161,null)}function Y(ce,ue){if(ue&&ue.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(s.bindFramebuffer(36160,ce),!(ue.depthTexture&&ue.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!t.get(ue.depthTexture).__webglTexture||ue.depthTexture.image.width!==ue.width||ue.depthTexture.image.height!==ue.height)&&(ue.depthTexture.image.width=ue.width,ue.depthTexture.image.height=ue.height,ue.depthTexture.needsUpdate=!0),Z(ue.depthTexture,0);const Ie=t.get(ue.depthTexture).__webglTexture,Ve=pe(ue);if(ue.depthTexture.format===jn)Se(ue)?i.framebufferTexture2DMultisampleEXT(36160,36096,3553,Ie,0,Ve):S.framebufferTexture2D(36160,36096,3553,Ie,0);else if(ue.depthTexture.format===pi)Se(ue)?i.framebufferTexture2DMultisampleEXT(36160,33306,3553,Ie,0,Ve):S.framebufferTexture2D(36160,33306,3553,Ie,0);else throw new Error("Unknown depthTexture format")}function J(ce){const ue=t.get(ce),Ce=ce.isWebGLCubeRenderTarget===!0;if(ce.depthTexture&&!ue.__autoAllocateDepthBuffer){if(Ce)throw new Error("target.depthTexture not supported in Cube render targets");Y(ue.__webglFramebuffer,ce)}else if(Ce){ue.__webglDepthbuffer=[];for(let Ie=0;Ie<6;Ie++)s.bindFramebuffer(36160,ue.__webglFramebuffer[Ie]),ue.__webglDepthbuffer[Ie]=S.createRenderbuffer(),ne(ue.__webglDepthbuffer[Ie],ce,!1)}else s.bindFramebuffer(36160,ue.__webglFramebuffer),ue.__webglDepthbuffer=S.createRenderbuffer(),ne(ue.__webglDepthbuffer,ce,!1);s.bindFramebuffer(36160,null)}function fe(ce,ue,Ce){const Ie=t.get(ce);ue!==void 0&&G(Ie.__webglFramebuffer,ce,ce.texture,36064,3553),Ce!==void 0&&J(ce)}function oe(ce){const ue=ce.texture,Ce=t.get(ce),Ie=t.get(ue);ce.addEventListener("dispose",N),ce.isWebGLMultipleRenderTargets!==!0&&(Ie.__webglTexture===void 0&&(Ie.__webglTexture=S.createTexture()),Ie.__version=ue.version,p.memory.textures++);const Ve=ce.isWebGLCubeRenderTarget===!0,Pe=ce.isWebGLMultipleRenderTargets===!0,Oe=_(ce)||r;if(Ve){Ce.__webglFramebuffer=[];for(let Ae=0;Ae<6;Ae++)Ce.__webglFramebuffer[Ae]=S.createFramebuffer()}else{if(Ce.__webglFramebuffer=S.createFramebuffer(),Pe)if(g.drawBuffers){const Ae=ce.texture;for(let Ge=0,be=Ae.length;Ge<be;Ge++){const Xe=t.get(Ae[Ge]);Xe.__webglTexture===void 0&&(Xe.__webglTexture=S.createTexture(),p.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(r&&ce.samples>0&&Se(ce)===!1){const Ae=Pe?ue:[ue];Ce.__webglMultisampledFramebuffer=S.createFramebuffer(),Ce.__webglColorRenderbuffer=[],s.bindFramebuffer(36160,Ce.__webglMultisampledFramebuffer);for(let Ge=0;Ge<Ae.length;Ge++){const be=Ae[Ge];Ce.__webglColorRenderbuffer[Ge]=S.createRenderbuffer(),S.bindRenderbuffer(36161,Ce.__webglColorRenderbuffer[Ge]);const Xe=m.convert(be.format,be.encoding),k=m.convert(be.type),Q=A(be.internalFormat,Xe,k,be.encoding),V=pe(ce);S.renderbufferStorageMultisample(36161,V,Q,ce.width,ce.height),S.framebufferRenderbuffer(36160,36064+Ge,36161,Ce.__webglColorRenderbuffer[Ge])}S.bindRenderbuffer(36161,null),ce.depthBuffer&&(Ce.__webglDepthRenderbuffer=S.createRenderbuffer(),ne(Ce.__webglDepthRenderbuffer,ce,!0)),s.bindFramebuffer(36160,null)}}if(Ve){s.bindTexture(34067,Ie.__webglTexture),re(34067,ue,Oe);for(let Ae=0;Ae<6;Ae++)G(Ce.__webglFramebuffer[Ae],ce,ue,36064,34069+Ae);E(ue,Oe)&&C(34067),s.unbindTexture()}else if(Pe){const Ae=ce.texture;for(let Ge=0,be=Ae.length;Ge<be;Ge++){const Xe=Ae[Ge],k=t.get(Xe);s.bindTexture(3553,k.__webglTexture),re(3553,Xe,Oe),G(Ce.__webglFramebuffer,ce,Xe,36064+Ge,3553),E(Xe,Oe)&&C(3553)}s.unbindTexture()}else{let Ae=3553;(ce.isWebGL3DRenderTarget||ce.isWebGLArrayRenderTarget)&&(r?Ae=ce.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),s.bindTexture(Ae,Ie.__webglTexture),re(Ae,ue,Oe),G(Ce.__webglFramebuffer,ce,ue,36064,Ae),E(ue,Oe)&&C(Ae),s.unbindTexture()}ce.depthBuffer&&J(ce)}function X(ce){const ue=_(ce)||r,Ce=ce.isWebGLMultipleRenderTargets===!0?ce.texture:[ce.texture];for(let Ie=0,Ve=Ce.length;Ie<Ve;Ie++){const Pe=Ce[Ie];if(E(Pe,ue)){const Oe=ce.isWebGLCubeRenderTarget?34067:3553,Ae=t.get(Pe).__webglTexture;s.bindTexture(Oe,Ae),C(Oe),s.unbindTexture()}}}function W(ce){if(r&&ce.samples>0&&Se(ce)===!1){const ue=ce.isWebGLMultipleRenderTargets?ce.texture:[ce.texture],Ce=ce.width,Ie=ce.height;let Ve=16384;const Pe=[],Oe=ce.stencilBuffer?33306:36096,Ae=t.get(ce),Ge=ce.isWebGLMultipleRenderTargets===!0;if(Ge)for(let be=0;be<ue.length;be++)s.bindFramebuffer(36160,Ae.__webglMultisampledFramebuffer),S.framebufferRenderbuffer(36160,36064+be,36161,null),s.bindFramebuffer(36160,Ae.__webglFramebuffer),S.framebufferTexture2D(36009,36064+be,3553,null,0);s.bindFramebuffer(36008,Ae.__webglMultisampledFramebuffer),s.bindFramebuffer(36009,Ae.__webglFramebuffer);for(let be=0;be<ue.length;be++){Pe.push(36064+be),ce.depthBuffer&&Pe.push(Oe);const Xe=Ae.__ignoreDepthValues!==void 0?Ae.__ignoreDepthValues:!1;if(Xe===!1&&(ce.depthBuffer&&(Ve|=256),ce.stencilBuffer&&(Ve|=1024)),Ge&&S.framebufferRenderbuffer(36008,36064,36161,Ae.__webglColorRenderbuffer[be]),Xe===!0&&(S.invalidateFramebuffer(36008,[Oe]),S.invalidateFramebuffer(36009,[Oe])),Ge){const k=t.get(ue[be]).__webglTexture;S.framebufferTexture2D(36009,36064,3553,k,0)}S.blitFramebuffer(0,0,Ce,Ie,0,0,Ce,Ie,Ve,9728),n&&S.invalidateFramebuffer(36008,Pe)}if(s.bindFramebuffer(36008,null),s.bindFramebuffer(36009,null),Ge)for(let be=0;be<ue.length;be++){s.bindFramebuffer(36160,Ae.__webglMultisampledFramebuffer),S.framebufferRenderbuffer(36160,36064+be,36161,Ae.__webglColorRenderbuffer[be]);const Xe=t.get(ue[be]).__webglTexture;s.bindFramebuffer(36160,Ae.__webglFramebuffer),S.framebufferTexture2D(36009,36064+be,3553,Xe,0)}s.bindFramebuffer(36009,Ae.__webglMultisampledFramebuffer)}}function pe(ce){return Math.min(c,ce.samples)}function Se(ce){const ue=t.get(ce);return r&&ce.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&ue.__useRenderToTexture!==!1}function Re(ce){const ue=p.render.frame;o.get(ce)!==ue&&(o.set(ce,ue),ce.update())}function Le(ce,ue){const Ce=ce.encoding,Ie=ce.format,Ve=ce.type;return ce.isCompressedTexture===!0||ce.isVideoTexture===!0||ce.format===Lo||Ce!==Nn&&(Ce===zt?r===!1?e.has("EXT_sRGB")===!0&&Ie===jr?(ce.format=Lo,ce.minFilter=xr,ce.generateMipmaps=!1):ue=pu.sRGBToLinear(ue):(Ie!==jr||Ve!==kn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Ce)),ue}this.allocateTextureUnit=H,this.resetTextureUnits=ee,this.setTexture2D=Z,this.setTexture2DArray=ge,this.setTexture3D=$,this.setTextureCube=se,this.rebindTextures=fe,this.setupRenderTarget=oe,this.updateRenderTargetMipmap=X,this.updateMultisampleRenderTarget=W,this.setupDepthRenderbuffer=J,this.setupFrameBufferTexture=G,this.useMultisampledRTT=Se}function f0(S,e,s){const t=s.isWebGL2;function g(m,p=null){let r;if(m===kn)return 5121;if(m===uf)return 32819;if(m===cf)return 32820;if(m===of)return 5120;if(m===af)return 5122;if(m===hu)return 5123;if(m===lf)return 5124;if(m===Pn)return 5125;if(m===Rn)return 5126;if(m===Ii)return t?5131:(r=e.get("OES_texture_half_float"),r!==null?r.HALF_FLOAT_OES:null);if(m===hf)return 6406;if(m===jr)return 6408;if(m===ff)return 6409;if(m===pf)return 6410;if(m===jn)return 6402;if(m===pi)return 34041;if(m===mf)return 6403;if(m===df)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(m===Lo)return r=e.get("EXT_sRGB"),r!==null?r.SRGB_ALPHA_EXT:null;if(m===gf)return 36244;if(m===yf)return 33319;if(m===vf)return 33320;if(m===bf)return 36249;if(m===Bs||m===Gs||m===zs||m===Vs)if(p===zt)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(m===Bs)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(m===Gs)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(m===zs)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(m===Vs)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(m===Bs)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(m===Gs)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(m===zs)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(m===Vs)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(m===qa||m===Xa||m===Ya||m===Za)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(m===qa)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(m===Xa)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(m===Ya)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(m===Za)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(m===_f)return r=e.get("WEBGL_compressed_texture_etc1"),r!==null?r.COMPRESSED_RGB_ETC1_WEBGL:null;if(m===Ja||m===$a)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(m===Ja)return p===zt?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(m===$a)return p===zt?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(m===Ka||m===Qa||m===el||m===tl||m===rl||m===nl||m===il||m===sl||m===ol||m===al||m===ll||m===ul||m===cl||m===hl)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(m===Ka)return p===zt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(m===Qa)return p===zt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(m===el)return p===zt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(m===tl)return p===zt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(m===rl)return p===zt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(m===nl)return p===zt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(m===il)return p===zt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(m===sl)return p===zt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(m===ol)return p===zt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(m===al)return p===zt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(m===ll)return p===zt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(m===ul)return p===zt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(m===cl)return p===zt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(m===hl)return p===zt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(m===dl)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(m===dl)return p===zt?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return m===ui?t?34042:(r=e.get("WEBGL_depth_texture"),r!==null?r.UNSIGNED_INT_24_8_WEBGL:null):S[m]!==void 0?S[m]:null}return{convert:g}}class p0 extends fr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Li extends Sr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const m0={type:"move"};class bo{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Li,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Li,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new De,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new De),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Li,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new De,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new De),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,s,t){let g=null,m=null,p=null;const r=this._targetRay,h=this._grip,u=this._hand;if(e&&s.session.visibilityState!=="visible-blurred")if(r!==null&&(g=s.getPose(e.targetRaySpace,t),g!==null&&(r.matrix.fromArray(g.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),g.linearVelocity?(r.hasLinearVelocity=!0,r.linearVelocity.copy(g.linearVelocity)):r.hasLinearVelocity=!1,g.angularVelocity?(r.hasAngularVelocity=!0,r.angularVelocity.copy(g.angularVelocity)):r.hasAngularVelocity=!1,this.dispatchEvent(m0))),u&&e.hand){p=!0;for(const l of e.hand.values()){const a=s.getJointPose(l,t);if(u.joints[l.jointName]===void 0){const v=new Li;v.matrixAutoUpdate=!1,v.visible=!1,u.joints[l.jointName]=v,u.add(v)}const f=u.joints[l.jointName];a!==null&&(f.matrix.fromArray(a.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.jointRadius=a.radius),f.visible=a!==null}const d=u.joints["index-finger-tip"],c=u.joints["thumb-tip"],i=d.position.distanceTo(c.position),n=.02,o=.005;u.inputState.pinching&&i>n+o?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&i<=n-o&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else h!==null&&e.gripSpace&&(m=s.getPose(e.gripSpace,t),m!==null&&(h.matrix.fromArray(m.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),m.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(m.linearVelocity)):h.hasLinearVelocity=!1,m.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(m.angularVelocity)):h.hasAngularVelocity=!1));return r!==null&&(r.visible=g!==null),h!==null&&(h.visible=m!==null),u!==null&&(u.visible=p!==null),this}}class g0 extends Or{constructor(e,s,t,g,m,p,r,h,u,d){if(d=d!==void 0?d:jn,d!==jn&&d!==pi)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");t===void 0&&d===jn&&(t=Pn),t===void 0&&d===pi&&(t=ui),super(null,g,m,p,r,h,d,t,u),this.isDepthTexture=!0,this.image={width:e,height:s},this.magFilter=r!==void 0?r:dr,this.minFilter=h!==void 0?h:dr,this.flipY=!1,this.generateMipmaps=!1}}class y0 extends yi{constructor(e,s){super();const t=this;let g=null,m=1,p=null,r="local-floor",h=null,u=null,d=null,c=null,i=null,n=null;const o=s.getContextAttributes();let l=null,a=null;const f=[],v=new Map,b=new fr;b.layers.enable(1),b.viewport=new Vt;const _=new fr;_.layers.enable(2),_.viewport=new Vt;const w=[b,_],E=new p0;E.layers.enable(1),E.layers.enable(2);let C=null,A=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(te){let Z=f[te];return Z===void 0&&(Z=new bo,f[te]=Z),Z.getTargetRaySpace()},this.getControllerGrip=function(te){let Z=f[te];return Z===void 0&&(Z=new bo,f[te]=Z),Z.getGripSpace()},this.getHand=function(te){let Z=f[te];return Z===void 0&&(Z=new bo,f[te]=Z),Z.getHandSpace()};function L(te){const Z=v.get(te.inputSource);Z!==void 0&&Z.dispatchEvent({type:te.type,data:te.inputSource})}function P(){g.removeEventListener("select",L),g.removeEventListener("selectstart",L),g.removeEventListener("selectend",L),g.removeEventListener("squeeze",L),g.removeEventListener("squeezestart",L),g.removeEventListener("squeezeend",L),g.removeEventListener("end",P),g.removeEventListener("inputsourceschange",R),v.forEach(function(te,Z){te!==void 0&&te.disconnect(Z)}),v.clear(),C=null,A=null,e.setRenderTarget(l),i=null,c=null,d=null,g=null,a=null,H.stop(),t.isPresenting=!1,t.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(te){m=te,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(te){r=te,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||p},this.setReferenceSpace=function(te){h=te},this.getBaseLayer=function(){return c!==null?c:i},this.getBinding=function(){return d},this.getFrame=function(){return n},this.getSession=function(){return g},this.setSession=async function(te){if(g=te,g!==null){if(l=e.getRenderTarget(),g.addEventListener("select",L),g.addEventListener("selectstart",L),g.addEventListener("selectend",L),g.addEventListener("squeeze",L),g.addEventListener("squeezestart",L),g.addEventListener("squeezeend",L),g.addEventListener("end",P),g.addEventListener("inputsourceschange",R),o.xrCompatible!==!0&&await s.makeXRCompatible(),g.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Z={antialias:g.renderState.layers===void 0?o.antialias:!0,alpha:o.alpha,depth:o.depth,stencil:o.stencil,framebufferScaleFactor:m};i=new XRWebGLLayer(g,s,Z),g.updateRenderState({baseLayer:i}),a=new vn(i.framebufferWidth,i.framebufferHeight,{format:jr,type:kn,encoding:e.outputEncoding})}else{let Z=null,ge=null,$=null;o.depth&&($=o.stencil?35056:33190,Z=o.stencil?pi:jn,ge=o.stencil?ui:Pn);const se={colorFormat:e.outputEncoding===zt?35907:32856,depthFormat:$,scaleFactor:m};d=new XRWebGLBinding(g,s),c=d.createProjectionLayer(se),g.updateRenderState({layers:[c]}),a=new vn(c.textureWidth,c.textureHeight,{format:jr,type:kn,depthTexture:new g0(c.textureWidth,c.textureHeight,ge,void 0,void 0,void 0,void 0,void 0,void 0,Z),stencilBuffer:o.stencil,encoding:e.outputEncoding,samples:o.antialias?4:0});const z=e.properties.get(a);z.__ignoreDepthValues=c.ignoreDepthValues}a.isXRRenderTarget=!0,this.setFoveation(1),h=null,p=await g.requestReferenceSpace(r),H.setContext(g),H.start(),t.isPresenting=!0,t.dispatchEvent({type:"sessionstart"})}};function R(te){const Z=g.inputSources;for(let ge=0;ge<Z.length;ge++){const $=Z[ge].handedness==="right"?1:0;v.set(Z[ge],f[$])}for(let ge=0;ge<te.removed.length;ge++){const $=te.removed[ge],se=v.get($);se&&(se.dispatchEvent({type:"disconnected",data:$}),v.delete($))}for(let ge=0;ge<te.added.length;ge++){const $=te.added[ge],se=v.get($);se&&se.dispatchEvent({type:"connected",data:$})}}const N=new De,I=new De;function O(te,Z,ge){N.setFromMatrixPosition(Z.matrixWorld),I.setFromMatrixPosition(ge.matrixWorld);const $=N.distanceTo(I),se=Z.projectionMatrix.elements,z=ge.projectionMatrix.elements,de=se[14]/(se[10]-1),re=se[14]/(se[10]+1),ie=(se[9]+1)/se[5],j=(se[9]-1)/se[5],B=(se[8]-1)/se[0],G=(z[8]+1)/z[0],ne=de*B,Y=de*G,J=$/(-B+G),fe=J*-B;Z.matrixWorld.decompose(te.position,te.quaternion,te.scale),te.translateX(fe),te.translateZ(J),te.matrixWorld.compose(te.position,te.quaternion,te.scale),te.matrixWorldInverse.copy(te.matrixWorld).invert();const oe=de+J,X=re+J,W=ne-fe,pe=Y+($-fe),Se=ie*re/X*oe,Re=j*re/X*oe;te.projectionMatrix.makePerspective(W,pe,Se,Re,oe,X)}function U(te,Z){Z===null?te.matrixWorld.copy(te.matrix):te.matrixWorld.multiplyMatrices(Z.matrixWorld,te.matrix),te.matrixWorldInverse.copy(te.matrixWorld).invert()}this.updateCamera=function(te){if(g===null)return;E.near=_.near=b.near=te.near,E.far=_.far=b.far=te.far,(C!==E.near||A!==E.far)&&(g.updateRenderState({depthNear:E.near,depthFar:E.far}),C=E.near,A=E.far);const Z=te.parent,ge=E.cameras;U(E,Z);for(let se=0;se<ge.length;se++)U(ge[se],Z);E.matrixWorld.decompose(E.position,E.quaternion,E.scale),te.position.copy(E.position),te.quaternion.copy(E.quaternion),te.scale.copy(E.scale),te.matrix.copy(E.matrix),te.matrixWorld.copy(E.matrixWorld);const $=te.children;for(let se=0,z=$.length;se<z;se++)$[se].updateMatrixWorld(!0);ge.length===2?O(E,b,_):E.projectionMatrix.copy(b.projectionMatrix)},this.getCamera=function(){return E},this.getFoveation=function(){if(c!==null)return c.fixedFoveation;if(i!==null)return i.fixedFoveation},this.setFoveation=function(te){c!==null&&(c.fixedFoveation=te),i!==null&&i.fixedFoveation!==void 0&&(i.fixedFoveation=te)};let K=null;function ee(te,Z){if(u=Z.getViewerPose(h||p),n=Z,u!==null){const $=u.views;i!==null&&(e.setRenderTargetFramebuffer(a,i.framebuffer),e.setRenderTarget(a));let se=!1;$.length!==E.cameras.length&&(E.cameras.length=0,se=!0);for(let z=0;z<$.length;z++){const de=$[z];let re=null;if(i!==null)re=i.getViewport(de);else{const j=d.getViewSubImage(c,de);re=j.viewport,z===0&&(e.setRenderTargetTextures(a,j.colorTexture,c.ignoreDepthValues?void 0:j.depthStencilTexture),e.setRenderTarget(a))}let ie=w[z];ie===void 0&&(ie=new fr,ie.layers.enable(z),ie.viewport=new Vt,w[z]=ie),ie.matrix.fromArray(de.transform.matrix),ie.projectionMatrix.fromArray(de.projectionMatrix),ie.viewport.set(re.x,re.y,re.width,re.height),z===0&&E.matrix.copy(ie.matrix),se===!0&&E.cameras.push(ie)}}const ge=g.inputSources;for(let $=0;$<f.length;$++){const se=ge[$],z=v.get(se);z!==void 0&&z.update(se,Z,h||p)}K&&K(te,Z),n=null}const H=new wu;H.setAnimationLoop(ee),this.setAnimationLoop=function(te){K=te},this.dispose=function(){}}}function v0(S,e){function s(l,a){l.fogColor.value.copy(a.color),a.isFog?(l.fogNear.value=a.near,l.fogFar.value=a.far):a.isFogExp2&&(l.fogDensity.value=a.density)}function t(l,a,f,v,b){a.isMeshBasicMaterial||a.isMeshLambertMaterial?g(l,a):a.isMeshToonMaterial?(g(l,a),d(l,a)):a.isMeshPhongMaterial?(g(l,a),u(l,a)):a.isMeshStandardMaterial?(g(l,a),c(l,a),a.isMeshPhysicalMaterial&&i(l,a,b)):a.isMeshMatcapMaterial?(g(l,a),n(l,a)):a.isMeshDepthMaterial?g(l,a):a.isMeshDistanceMaterial?(g(l,a),o(l,a)):a.isMeshNormalMaterial?g(l,a):a.isLineBasicMaterial?(m(l,a),a.isLineDashedMaterial&&p(l,a)):a.isPointsMaterial?r(l,a,f,v):a.isSpriteMaterial?h(l,a):a.isShadowMaterial?(l.color.value.copy(a.color),l.opacity.value=a.opacity):a.isShaderMaterial&&(a.uniformsNeedUpdate=!1)}function g(l,a){l.opacity.value=a.opacity,a.color&&l.diffuse.value.copy(a.color),a.emissive&&l.emissive.value.copy(a.emissive).multiplyScalar(a.emissiveIntensity),a.map&&(l.map.value=a.map),a.alphaMap&&(l.alphaMap.value=a.alphaMap),a.bumpMap&&(l.bumpMap.value=a.bumpMap,l.bumpScale.value=a.bumpScale,a.side===Ir&&(l.bumpScale.value*=-1)),a.displacementMap&&(l.displacementMap.value=a.displacementMap,l.displacementScale.value=a.displacementScale,l.displacementBias.value=a.displacementBias),a.emissiveMap&&(l.emissiveMap.value=a.emissiveMap),a.normalMap&&(l.normalMap.value=a.normalMap,l.normalScale.value.copy(a.normalScale),a.side===Ir&&l.normalScale.value.negate()),a.specularMap&&(l.specularMap.value=a.specularMap),a.alphaTest>0&&(l.alphaTest.value=a.alphaTest);const f=e.get(a).envMap;if(f&&(l.envMap.value=f,l.flipEnvMap.value=f.isCubeTexture&&f.isRenderTargetTexture===!1?-1:1,l.reflectivity.value=a.reflectivity,l.ior.value=a.ior,l.refractionRatio.value=a.refractionRatio),a.lightMap){l.lightMap.value=a.lightMap;const _=S.physicallyCorrectLights!==!0?Math.PI:1;l.lightMapIntensity.value=a.lightMapIntensity*_}a.aoMap&&(l.aoMap.value=a.aoMap,l.aoMapIntensity.value=a.aoMapIntensity);let v;a.map?v=a.map:a.specularMap?v=a.specularMap:a.displacementMap?v=a.displacementMap:a.normalMap?v=a.normalMap:a.bumpMap?v=a.bumpMap:a.roughnessMap?v=a.roughnessMap:a.metalnessMap?v=a.metalnessMap:a.alphaMap?v=a.alphaMap:a.emissiveMap?v=a.emissiveMap:a.clearcoatMap?v=a.clearcoatMap:a.clearcoatNormalMap?v=a.clearcoatNormalMap:a.clearcoatRoughnessMap?v=a.clearcoatRoughnessMap:a.iridescenceMap?v=a.iridescenceMap:a.iridescenceThicknessMap?v=a.iridescenceThicknessMap:a.specularIntensityMap?v=a.specularIntensityMap:a.specularColorMap?v=a.specularColorMap:a.transmissionMap?v=a.transmissionMap:a.thicknessMap?v=a.thicknessMap:a.sheenColorMap?v=a.sheenColorMap:a.sheenRoughnessMap&&(v=a.sheenRoughnessMap),v!==void 0&&(v.isWebGLRenderTarget&&(v=v.texture),v.matrixAutoUpdate===!0&&v.updateMatrix(),l.uvTransform.value.copy(v.matrix));let b;a.aoMap?b=a.aoMap:a.lightMap&&(b=a.lightMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),l.uv2Transform.value.copy(b.matrix))}function m(l,a){l.diffuse.value.copy(a.color),l.opacity.value=a.opacity}function p(l,a){l.dashSize.value=a.dashSize,l.totalSize.value=a.dashSize+a.gapSize,l.scale.value=a.scale}function r(l,a,f,v){l.diffuse.value.copy(a.color),l.opacity.value=a.opacity,l.size.value=a.size*f,l.scale.value=v*.5,a.map&&(l.map.value=a.map),a.alphaMap&&(l.alphaMap.value=a.alphaMap),a.alphaTest>0&&(l.alphaTest.value=a.alphaTest);let b;a.map?b=a.map:a.alphaMap&&(b=a.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),l.uvTransform.value.copy(b.matrix))}function h(l,a){l.diffuse.value.copy(a.color),l.opacity.value=a.opacity,l.rotation.value=a.rotation,a.map&&(l.map.value=a.map),a.alphaMap&&(l.alphaMap.value=a.alphaMap),a.alphaTest>0&&(l.alphaTest.value=a.alphaTest);let f;a.map?f=a.map:a.alphaMap&&(f=a.alphaMap),f!==void 0&&(f.matrixAutoUpdate===!0&&f.updateMatrix(),l.uvTransform.value.copy(f.matrix))}function u(l,a){l.specular.value.copy(a.specular),l.shininess.value=Math.max(a.shininess,1e-4)}function d(l,a){a.gradientMap&&(l.gradientMap.value=a.gradientMap)}function c(l,a){l.roughness.value=a.roughness,l.metalness.value=a.metalness,a.roughnessMap&&(l.roughnessMap.value=a.roughnessMap),a.metalnessMap&&(l.metalnessMap.value=a.metalnessMap),e.get(a).envMap&&(l.envMapIntensity.value=a.envMapIntensity)}function i(l,a,f){l.ior.value=a.ior,a.sheen>0&&(l.sheenColor.value.copy(a.sheenColor).multiplyScalar(a.sheen),l.sheenRoughness.value=a.sheenRoughness,a.sheenColorMap&&(l.sheenColorMap.value=a.sheenColorMap),a.sheenRoughnessMap&&(l.sheenRoughnessMap.value=a.sheenRoughnessMap)),a.clearcoat>0&&(l.clearcoat.value=a.clearcoat,l.clearcoatRoughness.value=a.clearcoatRoughness,a.clearcoatMap&&(l.clearcoatMap.value=a.clearcoatMap),a.clearcoatRoughnessMap&&(l.clearcoatRoughnessMap.value=a.clearcoatRoughnessMap),a.clearcoatNormalMap&&(l.clearcoatNormalScale.value.copy(a.clearcoatNormalScale),l.clearcoatNormalMap.value=a.clearcoatNormalMap,a.side===Ir&&l.clearcoatNormalScale.value.negate())),a.iridescence>0&&(l.iridescence.value=a.iridescence,l.iridescenceIOR.value=a.iridescenceIOR,l.iridescenceThicknessMinimum.value=a.iridescenceThicknessRange[0],l.iridescenceThicknessMaximum.value=a.iridescenceThicknessRange[1],a.iridescenceMap&&(l.iridescenceMap.value=a.iridescenceMap),a.iridescenceThicknessMap&&(l.iridescenceThicknessMap.value=a.iridescenceThicknessMap)),a.transmission>0&&(l.transmission.value=a.transmission,l.transmissionSamplerMap.value=f.texture,l.transmissionSamplerSize.value.set(f.width,f.height),a.transmissionMap&&(l.transmissionMap.value=a.transmissionMap),l.thickness.value=a.thickness,a.thicknessMap&&(l.thicknessMap.value=a.thicknessMap),l.attenuationDistance.value=a.attenuationDistance,l.attenuationColor.value.copy(a.attenuationColor)),l.specularIntensity.value=a.specularIntensity,l.specularColor.value.copy(a.specularColor),a.specularIntensityMap&&(l.specularIntensityMap.value=a.specularIntensityMap),a.specularColorMap&&(l.specularColorMap.value=a.specularColorMap)}function n(l,a){a.matcap&&(l.matcap.value=a.matcap)}function o(l,a){l.referencePosition.value.copy(a.referencePosition),l.nearDistance.value=a.nearDistance,l.farDistance.value=a.farDistance}return{refreshFogUniforms:s,refreshMaterialUniforms:t}}function b0(){const S=xs("canvas");return S.style.display="block",S}function Bo(S={}){this.isWebGLRenderer=!0;const e=S.canvas!==void 0?S.canvas:b0(),s=S.context!==void 0?S.context:null,t=S.depth!==void 0?S.depth:!0,g=S.stencil!==void 0?S.stencil:!0,m=S.antialias!==void 0?S.antialias:!1,p=S.premultipliedAlpha!==void 0?S.premultipliedAlpha:!0,r=S.preserveDrawingBuffer!==void 0?S.preserveDrawingBuffer:!1,h=S.powerPreference!==void 0?S.powerPreference:"default",u=S.failIfMajorPerformanceCaveat!==void 0?S.failIfMajorPerformanceCaveat:!1;let d;s!==null?d=s.getContextAttributes().alpha:d=S.alpha!==void 0?S.alpha:!1;let c=null,i=null;const n=[],o=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Nn,this.physicallyCorrectLights=!1,this.toneMapping=sn,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const l=this;let a=!1,f=0,v=0,b=null,_=-1,w=null;const E=new Vt,C=new Vt;let A=null,L=e.width,P=e.height,R=1,N=null,I=null;const O=new Vt(0,0,L,P),U=new Vt(0,0,L,P);let K=!1;const ee=new No;let H=!1,te=!1,Z=null;const ge=new Jt,$=new Qe,se=new De,z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function de(){return b===null?R:1}let re=s;function ie(xe,Fe){for(let We=0;We<xe.length;We++){const Be=xe[We],$e=e.getContext(Be,Fe);if($e!==null)return $e}return null}try{const xe={alpha:!0,depth:t,stencil:g,antialias:m,premultipliedAlpha:p,preserveDrawingBuffer:r,powerPreference:h,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Io}`),e.addEventListener("webglcontextlost",k,!1),e.addEventListener("webglcontextrestored",Q,!1),e.addEventListener("webglcontextcreationerror",V,!1),re===null){const Fe=["webgl2","webgl","experimental-webgl"];if(l.isWebGL1Renderer===!0&&Fe.shift(),re=ie(Fe,xe),re===null)throw ie(Fe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}re.getShaderPrecisionFormat===void 0&&(re.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(xe){throw console.error("THREE.WebGLRenderer: "+xe.message),xe}let j,B,G,ne,Y,J,fe,oe,X,W,pe,Se,Re,Le,ce,ue,Ce,Ie,Ve,Pe,Oe,Ae,Ge;function be(){j=new Dg(re),B=new Eg(re,j,S),j.init(B),Ae=new f0(re,j,B),G=new h0(re,j,B),ne=new Og,Y=new Qy,J=new d0(re,j,G,Y,B,Ae,ne),fe=new Ag(l),oe=new Rg(l),X=new qf(re,B),Ge=new Sg(re,j,X,B),W=new jg(re,X,ne,Ge),pe=new Ug(re,W,X,ne),Ve=new Fg(re,B,J),ue=new Tg(Y),Se=new Ky(l,fe,oe,j,B,Ge,ue),Re=new v0(l,Y),Le=new t0,ce=new a0(j,B),Ie=new wg(l,fe,G,pe,d,p),Ce=new c0(l,pe,B),Pe=new Mg(re,j,ne,B),Oe=new Ig(re,j,ne,B),ne.programs=Se.programs,l.capabilities=B,l.extensions=j,l.properties=Y,l.renderLists=Le,l.shadowMap=Ce,l.state=G,l.info=ne}be();const Xe=new y0(l,re);this.xr=Xe,this.getContext=function(){return re},this.getContextAttributes=function(){return re.getContextAttributes()},this.forceContextLoss=function(){const xe=j.get("WEBGL_lose_context");xe&&xe.loseContext()},this.forceContextRestore=function(){const xe=j.get("WEBGL_lose_context");xe&&xe.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(xe){xe!==void 0&&(R=xe,this.setSize(L,P,!1))},this.getSize=function(xe){return xe.set(L,P)},this.setSize=function(xe,Fe,We){if(Xe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}L=xe,P=Fe,e.width=Math.floor(xe*R),e.height=Math.floor(Fe*R),We!==!1&&(e.style.width=xe+"px",e.style.height=Fe+"px"),this.setViewport(0,0,xe,Fe)},this.getDrawingBufferSize=function(xe){return xe.set(L*R,P*R).floor()},this.setDrawingBufferSize=function(xe,Fe,We){L=xe,P=Fe,R=We,e.width=Math.floor(xe*We),e.height=Math.floor(Fe*We),this.setViewport(0,0,xe,Fe)},this.getCurrentViewport=function(xe){return xe.copy(E)},this.getViewport=function(xe){return xe.copy(O)},this.setViewport=function(xe,Fe,We,Be){xe.isVector4?O.set(xe.x,xe.y,xe.z,xe.w):O.set(xe,Fe,We,Be),G.viewport(E.copy(O).multiplyScalar(R).floor())},this.getScissor=function(xe){return xe.copy(U)},this.setScissor=function(xe,Fe,We,Be){xe.isVector4?U.set(xe.x,xe.y,xe.z,xe.w):U.set(xe,Fe,We,Be),G.scissor(C.copy(U).multiplyScalar(R).floor())},this.getScissorTest=function(){return K},this.setScissorTest=function(xe){G.setScissorTest(K=xe)},this.setOpaqueSort=function(xe){N=xe},this.setTransparentSort=function(xe){I=xe},this.getClearColor=function(xe){return xe.copy(Ie.getClearColor())},this.setClearColor=function(){Ie.setClearColor.apply(Ie,arguments)},this.getClearAlpha=function(){return Ie.getClearAlpha()},this.setClearAlpha=function(){Ie.setClearAlpha.apply(Ie,arguments)},this.clear=function(xe=!0,Fe=!0,We=!0){let Be=0;xe&&(Be|=16384),Fe&&(Be|=256),We&&(Be|=1024),re.clear(Be)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",k,!1),e.removeEventListener("webglcontextrestored",Q,!1),e.removeEventListener("webglcontextcreationerror",V,!1),Le.dispose(),ce.dispose(),Y.dispose(),fe.dispose(),oe.dispose(),pe.dispose(),Ge.dispose(),Se.dispose(),Xe.dispose(),Xe.removeEventListener("sessionstart",we),Xe.removeEventListener("sessionend",Je),Z&&(Z.dispose(),Z=null),nt.stop()};function k(xe){xe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),a=!0}function Q(){console.log("THREE.WebGLRenderer: Context Restored."),a=!1;const xe=ne.autoReset,Fe=Ce.enabled,We=Ce.autoUpdate,Be=Ce.needsUpdate,$e=Ce.type;be(),ne.autoReset=xe,Ce.enabled=Fe,Ce.autoUpdate=We,Ce.needsUpdate=Be,Ce.type=$e}function V(xe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",xe.statusMessage)}function ae(xe){const Fe=xe.target;Fe.removeEventListener("dispose",ae),me(Fe)}function me(xe){Me(xe),Y.remove(xe)}function Me(xe){const Fe=Y.get(xe).programs;Fe!==void 0&&(Fe.forEach(function(We){Se.releaseProgram(We)}),xe.isShaderMaterial&&Se.releaseShaderCache(xe))}this.renderBufferDirect=function(xe,Fe,We,Be,$e,mt){Fe===null&&(Fe=z);const yt=$e.isMesh&&$e.matrixWorld.determinant()<0,vt=Xr(xe,Fe,We,Be,$e);G.setMaterial(Be,yt);let ve=We.index;const Ue=We.attributes.position;if(ve===null){if(Ue===void 0||Ue.count===0)return}else if(ve.count===0)return;let Ze=1;Be.wireframe===!0&&(ve=W.getWireframeAttribute(We),Ze=2),Ge.setup($e,Be,vt,We,ve);let ze,et=Pe;ve!==null&&(ze=X.get(ve),et=Oe,et.setIndex(ze));const qe=ve!==null?ve.count:Ue.count,xt=We.drawRange.start*Ze,St=We.drawRange.count*Ze,wt=mt!==null?mt.start*Ze:0,st=mt!==null?mt.count*Ze:1/0,rt=Math.max(xt,wt),bt=Math.min(qe,xt+St,wt+st)-1,lt=Math.max(0,bt-rt+1);if(lt!==0){if($e.isMesh)Be.wireframe===!0?(G.setLineWidth(Be.wireframeLinewidth*de()),et.setMode(1)):et.setMode(4);else if($e.isLine){let hr=Be.linewidth;hr===void 0&&(hr=1),G.setLineWidth(hr*de()),$e.isLineSegments?et.setMode(1):$e.isLineLoop?et.setMode(2):et.setMode(3)}else $e.isPoints?et.setMode(0):$e.isSprite&&et.setMode(4);if($e.isInstancedMesh)et.renderInstances(rt,lt,$e.count);else if(We.isInstancedBufferGeometry){const hr=Math.min(We.instanceCount,We._maxInstanceCount);et.renderInstances(rt,lt,hr)}else et.render(rt,lt)}},this.compile=function(xe,Fe){i=ce.get(xe),i.init(),o.push(i),xe.traverseVisible(function(We){We.isLight&&We.layers.test(Fe.layers)&&(i.pushLight(We),We.castShadow&&i.pushShadow(We))}),i.setupLights(l.physicallyCorrectLights),xe.traverse(function(We){const Be=We.material;if(Be)if(Array.isArray(Be))for(let $e=0;$e<Be.length;$e++){const mt=Be[$e];cr(mt,xe,We)}else cr(Be,xe,We)}),o.pop(),i=null};let Ee=null;function ke(xe){Ee&&Ee(xe)}function we(){nt.stop()}function Je(){nt.start()}const nt=new wu;nt.setAnimationLoop(ke),typeof self!="undefined"&&nt.setContext(self),this.setAnimationLoop=function(xe){Ee=xe,Xe.setAnimationLoop(xe),xe===null?nt.stop():nt.start()},Xe.addEventListener("sessionstart",we),Xe.addEventListener("sessionend",Je),this.render=function(xe,Fe){if(Fe!==void 0&&Fe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(a===!0)return;xe.autoUpdate===!0&&xe.updateMatrixWorld(),Fe.parent===null&&Fe.updateMatrixWorld(),Xe.enabled===!0&&Xe.isPresenting===!0&&(Xe.cameraAutoUpdate===!0&&Xe.updateCamera(Fe),Fe=Xe.getCamera()),xe.isScene===!0&&xe.onBeforeRender(l,xe,Fe,b),i=ce.get(xe,o.length),i.init(),o.push(i),ge.multiplyMatrices(Fe.projectionMatrix,Fe.matrixWorldInverse),ee.setFromProjectionMatrix(ge),te=this.localClippingEnabled,H=ue.init(this.clippingPlanes,te,Fe),c=Le.get(xe,n.length),c.init(),n.push(c),ut(xe,Fe,0,l.sortObjects),c.finish(),l.sortObjects===!0&&c.sort(N,I),H===!0&&ue.beginShadows();const We=i.state.shadowsArray;if(Ce.render(We,xe,Fe),H===!0&&ue.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ie.render(c,xe),i.setupLights(l.physicallyCorrectLights),Fe.isArrayCamera){const Be=Fe.cameras;for(let $e=0,mt=Be.length;$e<mt;$e++){const yt=Be[$e];gt(c,xe,yt,yt.viewport)}}else gt(c,xe,Fe);b!==null&&(J.updateMultisampleRenderTarget(b),J.updateRenderTargetMipmap(b)),xe.isScene===!0&&xe.onAfterRender(l,xe,Fe),Ge.resetDefaultState(),_=-1,w=null,o.pop(),o.length>0?i=o[o.length-1]:i=null,n.pop(),n.length>0?c=n[n.length-1]:c=null};function ut(xe,Fe,We,Be){if(xe.visible===!1)return;if(xe.layers.test(Fe.layers)){if(xe.isGroup)We=xe.renderOrder;else if(xe.isLOD)xe.autoUpdate===!0&&xe.update(Fe);else if(xe.isLight)i.pushLight(xe),xe.castShadow&&i.pushShadow(xe);else if(xe.isSprite){if(!xe.frustumCulled||ee.intersectsSprite(xe)){Be&&se.setFromMatrixPosition(xe.matrixWorld).applyMatrix4(ge);const yt=pe.update(xe),vt=xe.material;vt.visible&&c.push(xe,yt,vt,We,se.z,null)}}else if((xe.isMesh||xe.isLine||xe.isPoints)&&(xe.isSkinnedMesh&&xe.skeleton.frame!==ne.render.frame&&(xe.skeleton.update(),xe.skeleton.frame=ne.render.frame),!xe.frustumCulled||ee.intersectsObject(xe))){Be&&se.setFromMatrixPosition(xe.matrixWorld).applyMatrix4(ge);const yt=pe.update(xe),vt=xe.material;if(Array.isArray(vt)){const ve=yt.groups;for(let Ue=0,Ze=ve.length;Ue<Ze;Ue++){const ze=ve[Ue],et=vt[ze.materialIndex];et&&et.visible&&c.push(xe,yt,et,We,se.z,ze)}}else vt.visible&&c.push(xe,yt,vt,We,se.z,null)}}const mt=xe.children;for(let yt=0,vt=mt.length;yt<vt;yt++)ut(mt[yt],Fe,We,Be)}function gt(xe,Fe,We,Be){const $e=xe.opaque,mt=xe.transmissive,yt=xe.transparent;i.setupLightsView(We),mt.length>0&&ft($e,Fe,We),Be&&G.viewport(E.copy(Be)),$e.length>0&&dt($e,Fe,We),mt.length>0&&dt(mt,Fe,We),yt.length>0&&dt(yt,Fe,We),G.buffers.depth.setTest(!0),G.buffers.depth.setMask(!0),G.buffers.color.setMask(!0),G.setPolygonOffset(!1)}function ft(xe,Fe,We){const Be=B.isWebGL2;Z===null&&(Z=new vn(1,1,{generateMipmaps:!0,type:j.has("EXT_color_buffer_half_float")?Ii:kn,minFilter:Ts,samples:Be&&m===!0?4:0})),l.getDrawingBufferSize($),Be?Z.setSize($.x,$.y):Z.setSize(Po($.x),Po($.y));const $e=l.getRenderTarget();l.setRenderTarget(Z),l.clear();const mt=l.toneMapping;l.toneMapping=sn,dt(xe,Fe,We),l.toneMapping=mt,J.updateMultisampleRenderTarget(Z),J.updateRenderTargetMipmap(Z),l.setRenderTarget($e)}function dt(xe,Fe,We){const Be=Fe.isScene===!0?Fe.overrideMaterial:null;for(let $e=0,mt=xe.length;$e<mt;$e++){const yt=xe[$e],vt=yt.object,ve=yt.geometry,Ue=Be===null?yt.material:Be,Ze=yt.group;vt.layers.test(We.layers)&&At(vt,Fe,We,ve,Ue,Ze)}}function At(xe,Fe,We,Be,$e,mt){xe.onBeforeRender(l,Fe,We,Be,$e,mt),xe.modelViewMatrix.multiplyMatrices(We.matrixWorldInverse,xe.matrixWorld),xe.normalMatrix.getNormalMatrix(xe.modelViewMatrix),$e.onBeforeRender(l,Fe,We,Be,xe,mt),$e.transparent===!0&&$e.side===hi?($e.side=Ir,$e.needsUpdate=!0,l.renderBufferDirect(We,Fe,Be,$e,xe,mt),$e.side=ji,$e.needsUpdate=!0,l.renderBufferDirect(We,Fe,Be,$e,xe,mt),$e.side=hi):l.renderBufferDirect(We,Fe,Be,$e,xe,mt),xe.onAfterRender(l,Fe,We,Be,$e,mt)}function cr(xe,Fe,We){Fe.isScene!==!0&&(Fe=z);const Be=Y.get(xe),$e=i.state.lights,mt=i.state.shadowsArray,yt=$e.state.version,vt=Se.getParameters(xe,$e.state,mt,Fe,We),ve=Se.getProgramCacheKey(vt);let Ue=Be.programs;Be.environment=xe.isMeshStandardMaterial?Fe.environment:null,Be.fog=Fe.fog,Be.envMap=(xe.isMeshStandardMaterial?oe:fe).get(xe.envMap||Be.environment),Ue===void 0&&(xe.addEventListener("dispose",ae),Ue=new Map,Be.programs=Ue);let Ze=Ue.get(ve);if(Ze!==void 0){if(Be.currentProgram===Ze&&Be.lightsStateVersion===yt)return Qt(xe,vt),Ze}else vt.uniforms=Se.getUniforms(xe),xe.onBuild(We,vt,l),xe.onBeforeCompile(vt,l),Ze=Se.acquireProgram(vt,ve),Ue.set(ve,Ze),Be.uniforms=vt.uniforms;const ze=Be.uniforms;(!xe.isShaderMaterial&&!xe.isRawShaderMaterial||xe.clipping===!0)&&(ze.clippingPlanes=ue.uniform),Qt(xe,vt),Be.needsLights=yr(xe),Be.lightsStateVersion=yt,Be.needsLights&&(ze.ambientLightColor.value=$e.state.ambient,ze.lightProbe.value=$e.state.probe,ze.directionalLights.value=$e.state.directional,ze.directionalLightShadows.value=$e.state.directionalShadow,ze.spotLights.value=$e.state.spot,ze.spotLightShadows.value=$e.state.spotShadow,ze.rectAreaLights.value=$e.state.rectArea,ze.ltc_1.value=$e.state.rectAreaLTC1,ze.ltc_2.value=$e.state.rectAreaLTC2,ze.pointLights.value=$e.state.point,ze.pointLightShadows.value=$e.state.pointShadow,ze.hemisphereLights.value=$e.state.hemi,ze.directionalShadowMap.value=$e.state.directionalShadowMap,ze.directionalShadowMatrix.value=$e.state.directionalShadowMatrix,ze.spotShadowMap.value=$e.state.spotShadowMap,ze.spotShadowMatrix.value=$e.state.spotShadowMatrix,ze.pointShadowMap.value=$e.state.pointShadowMap,ze.pointShadowMatrix.value=$e.state.pointShadowMatrix);const et=Ze.getUniforms(),qe=_s.seqWithValue(et.seq,ze);return Be.currentProgram=Ze,Be.uniformsList=qe,Ze}function Qt(xe,Fe){const We=Y.get(xe);We.outputEncoding=Fe.outputEncoding,We.instancing=Fe.instancing,We.skinning=Fe.skinning,We.morphTargets=Fe.morphTargets,We.morphNormals=Fe.morphNormals,We.morphColors=Fe.morphColors,We.morphTargetsCount=Fe.morphTargetsCount,We.numClippingPlanes=Fe.numClippingPlanes,We.numIntersection=Fe.numClipIntersection,We.vertexAlphas=Fe.vertexAlphas,We.vertexTangents=Fe.vertexTangents,We.toneMapping=Fe.toneMapping}function Xr(xe,Fe,We,Be,$e){Fe.isScene!==!0&&(Fe=z),J.resetTextureUnits();const mt=Fe.fog,yt=Be.isMeshStandardMaterial?Fe.environment:null,vt=b===null?l.outputEncoding:b.isXRRenderTarget===!0?b.texture.encoding:Nn,ve=(Be.isMeshStandardMaterial?oe:fe).get(Be.envMap||yt),Ue=Be.vertexColors===!0&&!!We.attributes.color&&We.attributes.color.itemSize===4,Ze=!!Be.normalMap&&!!We.attributes.tangent,ze=!!We.morphAttributes.position,et=!!We.morphAttributes.normal,qe=!!We.morphAttributes.color,xt=Be.toneMapped?l.toneMapping:sn,St=We.morphAttributes.position||We.morphAttributes.normal||We.morphAttributes.color,wt=St!==void 0?St.length:0,st=Y.get(Be),rt=i.state.lights;if(H===!0&&(te===!0||xe!==w)){const rr=xe===w&&Be.id===_;ue.setState(Be,xe,rr)}let bt=!1;Be.version===st.__version?(st.needsLights&&st.lightsStateVersion!==rt.state.version||st.outputEncoding!==vt||$e.isInstancedMesh&&st.instancing===!1||!$e.isInstancedMesh&&st.instancing===!0||$e.isSkinnedMesh&&st.skinning===!1||!$e.isSkinnedMesh&&st.skinning===!0||st.envMap!==ve||Be.fog===!0&&st.fog!==mt||st.numClippingPlanes!==void 0&&(st.numClippingPlanes!==ue.numPlanes||st.numIntersection!==ue.numIntersection)||st.vertexAlphas!==Ue||st.vertexTangents!==Ze||st.morphTargets!==ze||st.morphNormals!==et||st.morphColors!==qe||st.toneMapping!==xt||B.isWebGL2===!0&&st.morphTargetsCount!==wt)&&(bt=!0):(bt=!0,st.__version=Be.version);let lt=st.currentProgram;bt===!0&&(lt=cr(Be,Fe,$e));let hr=!1,pr=!1,Yr=!1;const qt=lt.getUniforms(),Er=st.uniforms;if(G.useProgram(lt.program)&&(hr=!0,pr=!0,Yr=!0),Be.id!==_&&(_=Be.id,pr=!0),hr||w!==xe){if(qt.setValue(re,"projectionMatrix",xe.projectionMatrix),B.logarithmicDepthBuffer&&qt.setValue(re,"logDepthBufFC",2/(Math.log(xe.far+1)/Math.LN2)),w!==xe&&(w=xe,pr=!0,Yr=!0),Be.isShaderMaterial||Be.isMeshPhongMaterial||Be.isMeshToonMaterial||Be.isMeshStandardMaterial||Be.envMap){const rr=qt.map.cameraPosition;rr!==void 0&&rr.setValue(re,se.setFromMatrixPosition(xe.matrixWorld))}(Be.isMeshPhongMaterial||Be.isMeshToonMaterial||Be.isMeshLambertMaterial||Be.isMeshBasicMaterial||Be.isMeshStandardMaterial||Be.isShaderMaterial)&&qt.setValue(re,"isOrthographic",xe.isOrthographicCamera===!0),(Be.isMeshPhongMaterial||Be.isMeshToonMaterial||Be.isMeshLambertMaterial||Be.isMeshBasicMaterial||Be.isMeshStandardMaterial||Be.isShaderMaterial||Be.isShadowMaterial||$e.isSkinnedMesh)&&qt.setValue(re,"viewMatrix",xe.matrixWorldInverse)}if($e.isSkinnedMesh){qt.setOptional(re,$e,"bindMatrix"),qt.setOptional(re,$e,"bindMatrixInverse");const rr=$e.skeleton;rr&&(B.floatVertexTextures?(rr.boneTexture===null&&rr.computeBoneTexture(),qt.setValue(re,"boneTexture",rr.boneTexture,J),qt.setValue(re,"boneTextureSize",rr.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Nr=We.morphAttributes;return(Nr.position!==void 0||Nr.normal!==void 0||Nr.color!==void 0&&B.isWebGL2===!0)&&Ve.update($e,We,Be,lt),(pr||st.receiveShadow!==$e.receiveShadow)&&(st.receiveShadow=$e.receiveShadow,qt.setValue(re,"receiveShadow",$e.receiveShadow)),pr&&(qt.setValue(re,"toneMappingExposure",l.toneMappingExposure),st.needsLights&&Mr(Er,Yr),mt&&Be.fog===!0&&Re.refreshFogUniforms(Er,mt),Re.refreshMaterialUniforms(Er,Be,R,P,Z),_s.upload(re,st.uniformsList,Er,J)),Be.isShaderMaterial&&Be.uniformsNeedUpdate===!0&&(_s.upload(re,st.uniformsList,Er,J),Be.uniformsNeedUpdate=!1),Be.isSpriteMaterial&&qt.setValue(re,"center",$e.center),qt.setValue(re,"modelViewMatrix",$e.modelViewMatrix),qt.setValue(re,"normalMatrix",$e.normalMatrix),qt.setValue(re,"modelMatrix",$e.matrixWorld),lt}function Mr(xe,Fe){xe.ambientLightColor.needsUpdate=Fe,xe.lightProbe.needsUpdate=Fe,xe.directionalLights.needsUpdate=Fe,xe.directionalLightShadows.needsUpdate=Fe,xe.pointLights.needsUpdate=Fe,xe.pointLightShadows.needsUpdate=Fe,xe.spotLights.needsUpdate=Fe,xe.spotLightShadows.needsUpdate=Fe,xe.rectAreaLights.needsUpdate=Fe,xe.hemisphereLights.needsUpdate=Fe}function yr(xe){return xe.isMeshLambertMaterial||xe.isMeshToonMaterial||xe.isMeshPhongMaterial||xe.isMeshStandardMaterial||xe.isShadowMaterial||xe.isShaderMaterial&&xe.lights===!0}this.getActiveCubeFace=function(){return f},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(xe,Fe,We){Y.get(xe.texture).__webglTexture=Fe,Y.get(xe.depthTexture).__webglTexture=We;const Be=Y.get(xe);Be.__hasExternalTextures=!0,Be.__hasExternalTextures&&(Be.__autoAllocateDepthBuffer=We===void 0,Be.__autoAllocateDepthBuffer||j.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Be.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(xe,Fe){const We=Y.get(xe);We.__webglFramebuffer=Fe,We.__useDefaultFramebuffer=Fe===void 0},this.setRenderTarget=function(xe,Fe=0,We=0){b=xe,f=Fe,v=We;let Be=!0;if(xe){const ve=Y.get(xe);ve.__useDefaultFramebuffer!==void 0?(G.bindFramebuffer(36160,null),Be=!1):ve.__webglFramebuffer===void 0?J.setupRenderTarget(xe):ve.__hasExternalTextures&&J.rebindTextures(xe,Y.get(xe.texture).__webglTexture,Y.get(xe.depthTexture).__webglTexture)}let $e=null,mt=!1,yt=!1;if(xe){const ve=xe.texture;(ve.isData3DTexture||ve.isDataArrayTexture)&&(yt=!0);const Ue=Y.get(xe).__webglFramebuffer;xe.isWebGLCubeRenderTarget?($e=Ue[Fe],mt=!0):B.isWebGL2&&xe.samples>0&&J.useMultisampledRTT(xe)===!1?$e=Y.get(xe).__webglMultisampledFramebuffer:$e=Ue,E.copy(xe.viewport),C.copy(xe.scissor),A=xe.scissorTest}else E.copy(O).multiplyScalar(R).floor(),C.copy(U).multiplyScalar(R).floor(),A=K;if(G.bindFramebuffer(36160,$e)&&B.drawBuffers&&Be&&G.drawBuffers(xe,$e),G.viewport(E),G.scissor(C),G.setScissorTest(A),mt){const ve=Y.get(xe.texture);re.framebufferTexture2D(36160,36064,34069+Fe,ve.__webglTexture,We)}else if(yt){const ve=Y.get(xe.texture),Ue=Fe||0;re.framebufferTextureLayer(36160,36064,ve.__webglTexture,We||0,Ue)}_=-1},this.readRenderTargetPixels=function(xe,Fe,We,Be,$e,mt,yt){if(!(xe&&xe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let vt=Y.get(xe).__webglFramebuffer;if(xe.isWebGLCubeRenderTarget&&yt!==void 0&&(vt=vt[yt]),vt){G.bindFramebuffer(36160,vt);try{const ve=xe.texture,Ue=ve.format,Ze=ve.type;if(Ue!==jr&&Ae.convert(Ue)!==re.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const ze=Ze===Ii&&(j.has("EXT_color_buffer_half_float")||B.isWebGL2&&j.has("EXT_color_buffer_float"));if(Ze!==kn&&Ae.convert(Ze)!==re.getParameter(35738)&&!(Ze===Rn&&(B.isWebGL2||j.has("OES_texture_float")||j.has("WEBGL_color_buffer_float")))&&!ze){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Fe>=0&&Fe<=xe.width-Be&&We>=0&&We<=xe.height-$e&&re.readPixels(Fe,We,Be,$e,Ae.convert(Ue),Ae.convert(Ze),mt)}finally{const ve=b!==null?Y.get(b).__webglFramebuffer:null;G.bindFramebuffer(36160,ve)}}},this.copyFramebufferToTexture=function(xe,Fe,We=0){const Be=Math.pow(2,-We),$e=Math.floor(Fe.image.width*Be),mt=Math.floor(Fe.image.height*Be);J.setTexture2D(Fe,0),re.copyTexSubImage2D(3553,We,0,0,xe.x,xe.y,$e,mt),G.unbindTexture()},this.copyTextureToTexture=function(xe,Fe,We,Be=0){const $e=Fe.image.width,mt=Fe.image.height,yt=Ae.convert(We.format),vt=Ae.convert(We.type);J.setTexture2D(We,0),re.pixelStorei(37440,We.flipY),re.pixelStorei(37441,We.premultiplyAlpha),re.pixelStorei(3317,We.unpackAlignment),Fe.isDataTexture?re.texSubImage2D(3553,Be,xe.x,xe.y,$e,mt,yt,vt,Fe.image.data):Fe.isCompressedTexture?re.compressedTexSubImage2D(3553,Be,xe.x,xe.y,Fe.mipmaps[0].width,Fe.mipmaps[0].height,yt,Fe.mipmaps[0].data):re.texSubImage2D(3553,Be,xe.x,xe.y,yt,vt,Fe.image),Be===0&&We.generateMipmaps&&re.generateMipmap(3553),G.unbindTexture()},this.copyTextureToTexture3D=function(xe,Fe,We,Be,$e=0){if(l.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const mt=xe.max.x-xe.min.x+1,yt=xe.max.y-xe.min.y+1,vt=xe.max.z-xe.min.z+1,ve=Ae.convert(Be.format),Ue=Ae.convert(Be.type);let Ze;if(Be.isData3DTexture)J.setTexture3D(Be,0),Ze=32879;else if(Be.isDataArrayTexture)J.setTexture2DArray(Be,0),Ze=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}re.pixelStorei(37440,Be.flipY),re.pixelStorei(37441,Be.premultiplyAlpha),re.pixelStorei(3317,Be.unpackAlignment);const ze=re.getParameter(3314),et=re.getParameter(32878),qe=re.getParameter(3316),xt=re.getParameter(3315),St=re.getParameter(32877),wt=We.isCompressedTexture?We.mipmaps[0]:We.image;re.pixelStorei(3314,wt.width),re.pixelStorei(32878,wt.height),re.pixelStorei(3316,xe.min.x),re.pixelStorei(3315,xe.min.y),re.pixelStorei(32877,xe.min.z),We.isDataTexture||We.isData3DTexture?re.texSubImage3D(Ze,$e,Fe.x,Fe.y,Fe.z,mt,yt,vt,ve,Ue,wt.data):We.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),re.compressedTexSubImage3D(Ze,$e,Fe.x,Fe.y,Fe.z,mt,yt,vt,ve,wt.data)):re.texSubImage3D(Ze,$e,Fe.x,Fe.y,Fe.z,mt,yt,vt,ve,Ue,wt),re.pixelStorei(3314,ze),re.pixelStorei(32878,et),re.pixelStorei(3316,qe),re.pixelStorei(3315,xt),re.pixelStorei(32877,St),$e===0&&Be.generateMipmaps&&re.generateMipmap(Ze),G.unbindTexture()},this.initTexture=function(xe){J.setTexture2D(xe,0),G.unbindTexture()},this.resetState=function(){f=0,v=0,b=null,G.reset(),Ge.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class _0 extends Bo{}_0.prototype.isWebGL1Renderer=!0;class Go extends Sr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,s){return super.copy(e,s),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const s=super.toJSON(e);return this.fog!==null&&(s.object.fog=this.fog.toJSON()),s}}class x0 extends ir{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new _t(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class Pu extends ir{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new _t(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}class w0 extends ir{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new _t(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class qr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,s){const t=this.getUtoTmapping(e);return this.getPoint(t,s)}getPoints(e=5){const s=[];for(let t=0;t<=e;t++)s.push(this.getPoint(t/e));return s}getSpacedPoints(e=5){const s=[];for(let t=0;t<=e;t++)s.push(this.getPointAt(t/e));return s}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const s=[];let t,g=this.getPoint(0),m=0;s.push(0);for(let p=1;p<=e;p++)t=this.getPoint(p/e),m+=t.distanceTo(g),s.push(m),g=t;return this.cacheArcLengths=s,s}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,s){const t=this.getLengths();let g=0;const m=t.length;let p;s?p=s:p=e*t[m-1];let r=0,h=m-1,u;for(;r<=h;)if(g=Math.floor(r+(h-r)/2),u=t[g]-p,u<0)r=g+1;else if(u>0)h=g-1;else{h=g;break}if(g=h,t[g]===p)return g/(m-1);const d=t[g],i=t[g+1]-d,n=(p-d)/i;return(g+n)/(m-1)}getTangent(e,s){let g=e-1e-4,m=e+1e-4;g<0&&(g=0),m>1&&(m=1);const p=this.getPoint(g),r=this.getPoint(m),h=s||(p.isVector2?new Qe:new De);return h.copy(r).sub(p).normalize(),h}getTangentAt(e,s){const t=this.getUtoTmapping(e);return this.getTangent(t,s)}computeFrenetFrames(e,s){const t=new De,g=[],m=[],p=[],r=new De,h=new Jt;for(let n=0;n<=e;n++){const o=n/e;g[n]=this.getTangentAt(o,new De)}m[0]=new De,p[0]=new De;let u=Number.MAX_VALUE;const d=Math.abs(g[0].x),c=Math.abs(g[0].y),i=Math.abs(g[0].z);d<=u&&(u=d,t.set(1,0,0)),c<=u&&(u=c,t.set(0,1,0)),i<=u&&t.set(0,0,1),r.crossVectors(g[0],t).normalize(),m[0].crossVectors(g[0],r),p[0].crossVectors(g[0],m[0]);for(let n=1;n<=e;n++){if(m[n]=m[n-1].clone(),p[n]=p[n-1].clone(),r.crossVectors(g[n-1],g[n]),r.length()>Number.EPSILON){r.normalize();const o=Math.acos(or(g[n-1].dot(g[n]),-1,1));m[n].applyMatrix4(h.makeRotationAxis(r,o))}p[n].crossVectors(g[n],m[n])}if(s===!0){let n=Math.acos(or(m[0].dot(m[e]),-1,1));n/=e,g[0].dot(r.crossVectors(m[0],m[e]))>0&&(n=-n);for(let o=1;o<=e;o++)m[o].applyMatrix4(h.makeRotationAxis(g[o],n*o)),p[o].crossVectors(g[o],m[o])}return{tangents:g,normals:m,binormals:p}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class zo extends qr{constructor(e=0,s=0,t=1,g=1,m=0,p=Math.PI*2,r=!1,h=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=s,this.xRadius=t,this.yRadius=g,this.aStartAngle=m,this.aEndAngle=p,this.aClockwise=r,this.aRotation=h}getPoint(e,s){const t=s||new Qe,g=Math.PI*2;let m=this.aEndAngle-this.aStartAngle;const p=Math.abs(m)<Number.EPSILON;for(;m<0;)m+=g;for(;m>g;)m-=g;m<Number.EPSILON&&(p?m=0:m=g),this.aClockwise===!0&&!p&&(m===g?m=-g:m=m-g);const r=this.aStartAngle+e*m;let h=this.aX+this.xRadius*Math.cos(r),u=this.aY+this.yRadius*Math.sin(r);if(this.aRotation!==0){const d=Math.cos(this.aRotation),c=Math.sin(this.aRotation),i=h-this.aX,n=u-this.aY;h=i*d-n*c+this.aX,u=i*c+n*d+this.aY}return t.set(h,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class S0 extends zo{constructor(e,s,t,g,m,p){super(e,s,t,t,g,m,p),this.isArcCurve=!0,this.type="ArcCurve"}}function Vo(){let S=0,e=0,s=0,t=0;function g(m,p,r,h){S=m,e=r,s=-3*m+3*p-2*r-h,t=2*m-2*p+r+h}return{initCatmullRom:function(m,p,r,h,u){g(p,r,u*(r-m),u*(h-p))},initNonuniformCatmullRom:function(m,p,r,h,u,d,c){let i=(p-m)/u-(r-m)/(u+d)+(r-p)/d,n=(r-p)/d-(h-p)/(d+c)+(h-r)/c;i*=d,n*=d,g(p,r,i,n)},calc:function(m){const p=m*m,r=p*m;return S+e*m+s*p+t*r}}}const gs=new De,_o=new Vo,xo=new Vo,wo=new Vo;class M0 extends qr{constructor(e=[],s=!1,t="centripetal",g=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=s,this.curveType=t,this.tension=g}getPoint(e,s=new De){const t=s,g=this.points,m=g.length,p=(m-(this.closed?0:1))*e;let r=Math.floor(p),h=p-r;this.closed?r+=r>0?0:(Math.floor(Math.abs(r)/m)+1)*m:h===0&&r===m-1&&(r=m-2,h=1);let u,d;this.closed||r>0?u=g[(r-1)%m]:(gs.subVectors(g[0],g[1]).add(g[0]),u=gs);const c=g[r%m],i=g[(r+1)%m];if(this.closed||r+2<m?d=g[(r+2)%m]:(gs.subVectors(g[m-1],g[m-2]).add(g[m-1]),d=gs),this.curveType==="centripetal"||this.curveType==="chordal"){const n=this.curveType==="chordal"?.5:.25;let o=Math.pow(u.distanceToSquared(c),n),l=Math.pow(c.distanceToSquared(i),n),a=Math.pow(i.distanceToSquared(d),n);l<1e-4&&(l=1),o<1e-4&&(o=l),a<1e-4&&(a=l),_o.initNonuniformCatmullRom(u.x,c.x,i.x,d.x,o,l,a),xo.initNonuniformCatmullRom(u.y,c.y,i.y,d.y,o,l,a),wo.initNonuniformCatmullRom(u.z,c.z,i.z,d.z,o,l,a)}else this.curveType==="catmullrom"&&(_o.initCatmullRom(u.x,c.x,i.x,d.x,this.tension),xo.initCatmullRom(u.y,c.y,i.y,d.y,this.tension),wo.initCatmullRom(u.z,c.z,i.z,d.z,this.tension));return t.set(_o.calc(h),xo.calc(h),wo.calc(h)),t}copy(e){super.copy(e),this.points=[];for(let s=0,t=e.points.length;s<t;s++){const g=e.points[s];this.points.push(g.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let s=0,t=this.points.length;s<t;s++){const g=this.points[s];e.points.push(g.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let s=0,t=e.points.length;s<t;s++){const g=e.points[s];this.points.push(new De().fromArray(g))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Jl(S,e,s,t,g){const m=(t-e)*.5,p=(g-s)*.5,r=S*S,h=S*r;return(2*s-2*t+m+p)*h+(-3*s+3*t-2*m-p)*r+m*S+s}function E0(S,e){const s=1-S;return s*s*e}function T0(S,e){return 2*(1-S)*S*e}function A0(S,e){return S*S*e}function Pi(S,e,s,t){return E0(S,e)+T0(S,s)+A0(S,t)}function C0(S,e){const s=1-S;return s*s*s*e}function L0(S,e){const s=1-S;return 3*s*s*S*e}function P0(S,e){return 3*(1-S)*S*S*e}function R0(S,e){return S*S*S*e}function Ri(S,e,s,t,g){return C0(S,e)+L0(S,s)+P0(S,t)+R0(S,g)}class Ru extends qr{constructor(e=new Qe,s=new Qe,t=new Qe,g=new Qe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=s,this.v2=t,this.v3=g}getPoint(e,s=new Qe){const t=s,g=this.v0,m=this.v1,p=this.v2,r=this.v3;return t.set(Ri(e,g.x,m.x,p.x,r.x),Ri(e,g.y,m.y,p.y,r.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class D0 extends qr{constructor(e=new De,s=new De,t=new De,g=new De){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=s,this.v2=t,this.v3=g}getPoint(e,s=new De){const t=s,g=this.v0,m=this.v1,p=this.v2,r=this.v3;return t.set(Ri(e,g.x,m.x,p.x,r.x),Ri(e,g.y,m.y,p.y,r.y),Ri(e,g.z,m.z,p.z,r.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Ho extends qr{constructor(e=new Qe,s=new Qe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=s}getPoint(e,s=new Qe){const t=s;return e===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,s){return this.getPoint(e,s)}getTangent(e,s){const t=s||new Qe;return t.copy(this.v2).sub(this.v1).normalize(),t}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class j0 extends qr{constructor(e=new De,s=new De){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=s}getPoint(e,s=new De){const t=s;return e===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,s){return this.getPoint(e,s)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Du extends qr{constructor(e=new Qe,s=new Qe,t=new Qe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=s,this.v2=t}getPoint(e,s=new Qe){const t=s,g=this.v0,m=this.v1,p=this.v2;return t.set(Pi(e,g.x,m.x,p.x),Pi(e,g.y,m.y,p.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class I0 extends qr{constructor(e=new De,s=new De,t=new De){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=s,this.v2=t}getPoint(e,s=new De){const t=s,g=this.v0,m=this.v1,p=this.v2;return t.set(Pi(e,g.x,m.x,p.x),Pi(e,g.y,m.y,p.y),Pi(e,g.z,m.z,p.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ju extends qr{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,s=new Qe){const t=s,g=this.points,m=(g.length-1)*e,p=Math.floor(m),r=m-p,h=g[p===0?p:p-1],u=g[p],d=g[p>g.length-2?g.length-1:p+1],c=g[p>g.length-3?g.length-1:p+2];return t.set(Jl(r,h.x,u.x,d.x,c.x),Jl(r,h.y,u.y,d.y,c.y)),t}copy(e){super.copy(e),this.points=[];for(let s=0,t=e.points.length;s<t;s++){const g=e.points[s];this.points.push(g.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let s=0,t=this.points.length;s<t;s++){const g=this.points[s];e.points.push(g.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let s=0,t=e.points.length;s<t;s++){const g=e.points[s];this.points.push(new Qe().fromArray(g))}return this}}var Iu=Object.freeze({__proto__:null,ArcCurve:S0,CatmullRomCurve3:M0,CubicBezierCurve:Ru,CubicBezierCurve3:D0,EllipseCurve:zo,LineCurve:Ho,LineCurve3:j0,QuadraticBezierCurve:Du,QuadraticBezierCurve3:I0,SplineCurve:ju});class O0 extends qr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),s=this.curves[this.curves.length-1].getPoint(1);e.equals(s)||this.curves.push(new Ho(s,e))}getPoint(e,s){const t=e*this.getLength(),g=this.getCurveLengths();let m=0;for(;m<g.length;){if(g[m]>=t){const p=g[m]-t,r=this.curves[m],h=r.getLength(),u=h===0?0:1-p/h;return r.getPointAt(u,s)}m++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let s=0;for(let t=0,g=this.curves.length;t<g;t++)s+=this.curves[t].getLength(),e.push(s);return this.cacheLengths=e,e}getSpacedPoints(e=40){const s=[];for(let t=0;t<=e;t++)s.push(this.getPoint(t/e));return this.autoClose&&s.push(s[0]),s}getPoints(e=12){const s=[];let t;for(let g=0,m=this.curves;g<m.length;g++){const p=m[g],r=p.isEllipseCurve?e*2:p.isLineCurve||p.isLineCurve3?1:p.isSplineCurve?e*p.points.length:e,h=p.getPoints(r);for(let u=0;u<h.length;u++){const d=h[u];t&&t.equals(d)||(s.push(d),t=d)}}return this.autoClose&&s.length>1&&!s[s.length-1].equals(s[0])&&s.push(s[0]),s}copy(e){super.copy(e),this.curves=[];for(let s=0,t=e.curves.length;s<t;s++){const g=e.curves[s];this.curves.push(g.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let s=0,t=this.curves.length;s<t;s++){const g=this.curves[s];e.curves.push(g.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let s=0,t=e.curves.length;s<t;s++){const g=e.curves[s];this.curves.push(new Iu[g.type]().fromJSON(g))}return this}}class ci extends O0{constructor(e){super(),this.type="Path",this.currentPoint=new Qe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let s=1,t=e.length;s<t;s++)this.lineTo(e[s].x,e[s].y);return this}moveTo(e,s){return this.currentPoint.set(e,s),this}lineTo(e,s){const t=new Ho(this.currentPoint.clone(),new Qe(e,s));return this.curves.push(t),this.currentPoint.set(e,s),this}quadraticCurveTo(e,s,t,g){const m=new Du(this.currentPoint.clone(),new Qe(e,s),new Qe(t,g));return this.curves.push(m),this.currentPoint.set(t,g),this}bezierCurveTo(e,s,t,g,m,p){const r=new Ru(this.currentPoint.clone(),new Qe(e,s),new Qe(t,g),new Qe(m,p));return this.curves.push(r),this.currentPoint.set(m,p),this}splineThru(e){const s=[this.currentPoint.clone()].concat(e),t=new ju(s);return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this}arc(e,s,t,g,m,p){const r=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(e+r,s+h,t,g,m,p),this}absarc(e,s,t,g,m,p){return this.absellipse(e,s,t,t,g,m,p),this}ellipse(e,s,t,g,m,p,r,h){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+u,s+d,t,g,m,p,r,h),this}absellipse(e,s,t,g,m,p,r,h){const u=new zo(e,s,t,g,m,p,r,h);if(this.curves.length>0){const c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);const d=u.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}new De;new De;new De;new Hr;class Di extends ci{constructor(e){super(e),this.uuid=vi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const s=[];for(let t=0,g=this.holes.length;t<g;t++)s[t]=this.holes[t].getPoints(e);return s}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let s=0,t=e.holes.length;s<t;s++){const g=e.holes[s];this.holes.push(g.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let s=0,t=this.holes.length;s<t;s++){const g=this.holes[s];e.holes.push(g.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let s=0,t=e.holes.length;s<t;s++){const g=e.holes[s];this.holes.push(new ci().fromJSON(g))}return this}}const k0={triangulate:function(S,e,s=2){const t=e&&e.length,g=t?e[0]*s:S.length;let m=Ou(S,0,g,s,!0);const p=[];if(!m||m.next===m.prev)return p;let r,h,u,d,c,i,n;if(t&&(m=G0(S,e,m,s)),S.length>80*s){r=u=S[0],h=d=S[1];for(let o=s;o<g;o+=s)c=S[o],i=S[o+1],c<r&&(r=c),i<h&&(h=i),c>u&&(u=c),i>d&&(d=i);n=Math.max(u-r,d-h),n=n!==0?1/n:0}return Oi(m,p,s,r,h,n),p}};function Ou(S,e,s,t,g){let m,p;if(g===K0(S,e,s,t)>0)for(m=e;m<s;m+=t)p=$l(m,S[m],S[m+1],p);else for(m=s-t;m>=e;m-=t)p=$l(m,S[m],S[m+1],p);return p&&Cs(p,p.next)&&(Ni(p),p=p.next),p}function bn(S,e){if(!S)return S;e||(e=S);let s=S,t;do if(t=!1,!s.steiner&&(Cs(s,s.next)||Ht(s.prev,s,s.next)===0)){if(Ni(s),s=e=s.prev,s===s.next)break;t=!0}else s=s.next;while(t||s!==e);return e}function Oi(S,e,s,t,g,m,p){if(!S)return;!p&&m&&q0(S,t,g,m);let r=S,h,u;for(;S.prev!==S.next;){if(h=S.prev,u=S.next,m?F0(S,t,g,m):N0(S)){e.push(h.i/s),e.push(S.i/s),e.push(u.i/s),Ni(S),S=u.next,r=u.next;continue}if(S=u,S===r){p?p===1?(S=U0(bn(S),e,s),Oi(S,e,s,t,g,m,2)):p===2&&B0(S,e,s,t,g,m):Oi(bn(S),e,s,t,g,m,1);break}}}function N0(S){const e=S.prev,s=S,t=S.next;if(Ht(e,s,t)>=0)return!1;let g=S.next.next;for(;g!==S.prev;){if(ai(e.x,e.y,s.x,s.y,t.x,t.y,g.x,g.y)&&Ht(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function F0(S,e,s,t){const g=S.prev,m=S,p=S.next;if(Ht(g,m,p)>=0)return!1;const r=g.x<m.x?g.x<p.x?g.x:p.x:m.x<p.x?m.x:p.x,h=g.y<m.y?g.y<p.y?g.y:p.y:m.y<p.y?m.y:p.y,u=g.x>m.x?g.x>p.x?g.x:p.x:m.x>p.x?m.x:p.x,d=g.y>m.y?g.y>p.y?g.y:p.y:m.y>p.y?m.y:p.y,c=Do(r,h,e,s,t),i=Do(u,d,e,s,t);let n=S.prevZ,o=S.nextZ;for(;n&&n.z>=c&&o&&o.z<=i;){if(n!==S.prev&&n!==S.next&&ai(g.x,g.y,m.x,m.y,p.x,p.y,n.x,n.y)&&Ht(n.prev,n,n.next)>=0||(n=n.prevZ,o!==S.prev&&o!==S.next&&ai(g.x,g.y,m.x,m.y,p.x,p.y,o.x,o.y)&&Ht(o.prev,o,o.next)>=0))return!1;o=o.nextZ}for(;n&&n.z>=c;){if(n!==S.prev&&n!==S.next&&ai(g.x,g.y,m.x,m.y,p.x,p.y,n.x,n.y)&&Ht(n.prev,n,n.next)>=0)return!1;n=n.prevZ}for(;o&&o.z<=i;){if(o!==S.prev&&o!==S.next&&ai(g.x,g.y,m.x,m.y,p.x,p.y,o.x,o.y)&&Ht(o.prev,o,o.next)>=0)return!1;o=o.nextZ}return!0}function U0(S,e,s){let t=S;do{const g=t.prev,m=t.next.next;!Cs(g,m)&&ku(g,t,t.next,m)&&ki(g,m)&&ki(m,g)&&(e.push(g.i/s),e.push(t.i/s),e.push(m.i/s),Ni(t),Ni(t.next),t=S=m),t=t.next}while(t!==S);return bn(t)}function B0(S,e,s,t,g,m){let p=S;do{let r=p.next.next;for(;r!==p.prev;){if(p.i!==r.i&&Z0(p,r)){let h=Nu(p,r);p=bn(p,p.next),h=bn(h,h.next),Oi(p,e,s,t,g,m),Oi(h,e,s,t,g,m);return}r=r.next}p=p.next}while(p!==S)}function G0(S,e,s,t){const g=[];let m,p,r,h,u;for(m=0,p=e.length;m<p;m++)r=e[m]*t,h=m<p-1?e[m+1]*t:S.length,u=Ou(S,r,h,t,!1),u===u.next&&(u.steiner=!0),g.push(Y0(u));for(g.sort(z0),m=0;m<g.length;m++)V0(g[m],s),s=bn(s,s.next);return s}function z0(S,e){return S.x-e.x}function V0(S,e){if(e=H0(S,e),e){const s=Nu(e,S);bn(e,e.next),bn(s,s.next)}}function H0(S,e){let s=e;const t=S.x,g=S.y;let m=-1/0,p;do{if(g<=s.y&&g>=s.next.y&&s.next.y!==s.y){const i=s.x+(g-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(i<=t&&i>m){if(m=i,i===t){if(g===s.y)return s;if(g===s.next.y)return s.next}p=s.x<s.next.x?s:s.next}}s=s.next}while(s!==e);if(!p)return null;if(t===m)return p;const r=p,h=p.x,u=p.y;let d=1/0,c;s=p;do t>=s.x&&s.x>=h&&t!==s.x&&ai(g<u?t:m,g,h,u,g<u?m:t,g,s.x,s.y)&&(c=Math.abs(g-s.y)/(t-s.x),ki(s,S)&&(c<d||c===d&&(s.x>p.x||s.x===p.x&&W0(p,s)))&&(p=s,d=c)),s=s.next;while(s!==r);return p}function W0(S,e){return Ht(S.prev,S,e.prev)<0&&Ht(e.next,S,S.next)<0}function q0(S,e,s,t){let g=S;do g.z===null&&(g.z=Do(g.x,g.y,e,s,t)),g.prevZ=g.prev,g.nextZ=g.next,g=g.next;while(g!==S);g.prevZ.nextZ=null,g.prevZ=null,X0(g)}function X0(S){let e,s,t,g,m,p,r,h,u=1;do{for(s=S,S=null,m=null,p=0;s;){for(p++,t=s,r=0,e=0;e<u&&(r++,t=t.nextZ,!!t);e++);for(h=u;r>0||h>0&&t;)r!==0&&(h===0||!t||s.z<=t.z)?(g=s,s=s.nextZ,r--):(g=t,t=t.nextZ,h--),m?m.nextZ=g:S=g,g.prevZ=m,m=g;s=t}m.nextZ=null,u*=2}while(p>1);return S}function Do(S,e,s,t,g){return S=32767*(S-s)*g,e=32767*(e-t)*g,S=(S|S<<8)&16711935,S=(S|S<<4)&252645135,S=(S|S<<2)&858993459,S=(S|S<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,S|e<<1}function Y0(S){let e=S,s=S;do(e.x<s.x||e.x===s.x&&e.y<s.y)&&(s=e),e=e.next;while(e!==S);return s}function ai(S,e,s,t,g,m,p,r){return(g-p)*(e-r)-(S-p)*(m-r)>=0&&(S-p)*(t-r)-(s-p)*(e-r)>=0&&(s-p)*(m-r)-(g-p)*(t-r)>=0}function Z0(S,e){return S.next.i!==e.i&&S.prev.i!==e.i&&!J0(S,e)&&(ki(S,e)&&ki(e,S)&&$0(S,e)&&(Ht(S.prev,S,e.prev)||Ht(S,e.prev,e))||Cs(S,e)&&Ht(S.prev,S,S.next)>0&&Ht(e.prev,e,e.next)>0)}function Ht(S,e,s){return(e.y-S.y)*(s.x-e.x)-(e.x-S.x)*(s.y-e.y)}function Cs(S,e){return S.x===e.x&&S.y===e.y}function ku(S,e,s,t){const g=vs(Ht(S,e,s)),m=vs(Ht(S,e,t)),p=vs(Ht(s,t,S)),r=vs(Ht(s,t,e));return!!(g!==m&&p!==r||g===0&&ys(S,s,e)||m===0&&ys(S,t,e)||p===0&&ys(s,S,t)||r===0&&ys(s,e,t))}function ys(S,e,s){return e.x<=Math.max(S.x,s.x)&&e.x>=Math.min(S.x,s.x)&&e.y<=Math.max(S.y,s.y)&&e.y>=Math.min(S.y,s.y)}function vs(S){return S>0?1:S<0?-1:0}function J0(S,e){let s=S;do{if(s.i!==S.i&&s.next.i!==S.i&&s.i!==e.i&&s.next.i!==e.i&&ku(s,s.next,S,e))return!0;s=s.next}while(s!==S);return!1}function ki(S,e){return Ht(S.prev,S,S.next)<0?Ht(S,e,S.next)>=0&&Ht(S,S.prev,e)>=0:Ht(S,e,S.prev)<0||Ht(S,S.next,e)<0}function $0(S,e){let s=S,t=!1;const g=(S.x+e.x)/2,m=(S.y+e.y)/2;do s.y>m!=s.next.y>m&&s.next.y!==s.y&&g<(s.next.x-s.x)*(m-s.y)/(s.next.y-s.y)+s.x&&(t=!t),s=s.next;while(s!==S);return t}function Nu(S,e){const s=new jo(S.i,S.x,S.y),t=new jo(e.i,e.x,e.y),g=S.next,m=e.prev;return S.next=e,e.prev=S,s.next=g,g.prev=s,t.next=s,s.prev=t,m.next=t,t.prev=m,t}function $l(S,e,s,t){const g=new jo(S,e,s);return t?(g.next=t.next,g.prev=t,t.next.prev=g,t.next=g):(g.prev=g,g.next=g),g}function Ni(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function jo(S,e,s){this.i=S,this.x=e,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function K0(S,e,s,t){let g=0;for(let m=e,p=s-t;m<s;m+=t)g+=(S[p]-S[m])*(S[m+1]+S[p+1]),p=m;return g}class On{static area(e){const s=e.length;let t=0;for(let g=s-1,m=0;m<s;g=m++)t+=e[g].x*e[m].y-e[m].x*e[g].y;return t*.5}static isClockWise(e){return On.area(e)<0}static triangulateShape(e,s){const t=[],g=[],m=[];Kl(e),Ql(t,e);let p=e.length;s.forEach(Kl);for(let h=0;h<s.length;h++)g.push(p),p+=s[h].length,Ql(t,s[h]);const r=k0.triangulate(t,g);for(let h=0;h<r.length;h+=3)m.push(r.slice(h,h+3));return m}}function Kl(S){const e=S.length;e>2&&S[e-1].equals(S[0])&&S.pop()}function Ql(S,e){for(let s=0;s<e.length;s++)S.push(e[s].x),S.push(e[s].y)}class Wo extends kr{constructor(e=new Di([new Qe(.5,.5),new Qe(-.5,.5),new Qe(-.5,-.5),new Qe(.5,-.5)]),s={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:s},e=Array.isArray(e)?e:[e];const t=this,g=[],m=[];for(let r=0,h=e.length;r<h;r++){const u=e[r];p(u)}this.setAttribute("position",new tr(g,3)),this.setAttribute("uv",new tr(m,2)),this.computeVertexNormals();function p(r){const h=[],u=s.curveSegments!==void 0?s.curveSegments:12,d=s.steps!==void 0?s.steps:1;let c=s.depth!==void 0?s.depth:1,i=s.bevelEnabled!==void 0?s.bevelEnabled:!0,n=s.bevelThickness!==void 0?s.bevelThickness:.2,o=s.bevelSize!==void 0?s.bevelSize:n-.1,l=s.bevelOffset!==void 0?s.bevelOffset:0,a=s.bevelSegments!==void 0?s.bevelSegments:3;const f=s.extrudePath,v=s.UVGenerator!==void 0?s.UVGenerator:Q0;s.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),c=s.amount);let b,_=!1,w,E,C,A;f&&(b=f.getSpacedPoints(d),_=!0,i=!1,w=f.computeFrenetFrames(d,!1),E=new De,C=new De,A=new De),i||(a=0,n=0,o=0,l=0);const L=r.extractPoints(u);let P=L.shape;const R=L.holes;if(!On.isClockWise(P)){P=P.reverse();for(let Y=0,J=R.length;Y<J;Y++){const fe=R[Y];On.isClockWise(fe)&&(R[Y]=fe.reverse())}}const I=On.triangulateShape(P,R),O=P;for(let Y=0,J=R.length;Y<J;Y++){const fe=R[Y];P=P.concat(fe)}function U(Y,J,fe){return J||console.error("THREE.ExtrudeGeometry: vec does not exist"),J.clone().multiplyScalar(fe).add(Y)}const K=P.length,ee=I.length;function H(Y,J,fe){let oe,X,W;const pe=Y.x-J.x,Se=Y.y-J.y,Re=fe.x-Y.x,Le=fe.y-Y.y,ce=pe*pe+Se*Se,ue=pe*Le-Se*Re;if(Math.abs(ue)>Number.EPSILON){const Ce=Math.sqrt(ce),Ie=Math.sqrt(Re*Re+Le*Le),Ve=J.x-Se/Ce,Pe=J.y+pe/Ce,Oe=fe.x-Le/Ie,Ae=fe.y+Re/Ie,Ge=((Oe-Ve)*Le-(Ae-Pe)*Re)/(pe*Le-Se*Re);oe=Ve+pe*Ge-Y.x,X=Pe+Se*Ge-Y.y;const be=oe*oe+X*X;if(be<=2)return new Qe(oe,X);W=Math.sqrt(be/2)}else{let Ce=!1;pe>Number.EPSILON?Re>Number.EPSILON&&(Ce=!0):pe<-Number.EPSILON?Re<-Number.EPSILON&&(Ce=!0):Math.sign(Se)===Math.sign(Le)&&(Ce=!0),Ce?(oe=-Se,X=pe,W=Math.sqrt(ce)):(oe=pe,X=Se,W=Math.sqrt(ce/2))}return new Qe(oe/W,X/W)}const te=[];for(let Y=0,J=O.length,fe=J-1,oe=Y+1;Y<J;Y++,fe++,oe++)fe===J&&(fe=0),oe===J&&(oe=0),te[Y]=H(O[Y],O[fe],O[oe]);const Z=[];let ge,$=te.concat();for(let Y=0,J=R.length;Y<J;Y++){const fe=R[Y];ge=[];for(let oe=0,X=fe.length,W=X-1,pe=oe+1;oe<X;oe++,W++,pe++)W===X&&(W=0),pe===X&&(pe=0),ge[oe]=H(fe[oe],fe[W],fe[pe]);Z.push(ge),$=$.concat(ge)}for(let Y=0;Y<a;Y++){const J=Y/a,fe=n*Math.cos(J*Math.PI/2),oe=o*Math.sin(J*Math.PI/2)+l;for(let X=0,W=O.length;X<W;X++){const pe=U(O[X],te[X],oe);ie(pe.x,pe.y,-fe)}for(let X=0,W=R.length;X<W;X++){const pe=R[X];ge=Z[X];for(let Se=0,Re=pe.length;Se<Re;Se++){const Le=U(pe[Se],ge[Se],oe);ie(Le.x,Le.y,-fe)}}}const se=o+l;for(let Y=0;Y<K;Y++){const J=i?U(P[Y],$[Y],se):P[Y];_?(C.copy(w.normals[0]).multiplyScalar(J.x),E.copy(w.binormals[0]).multiplyScalar(J.y),A.copy(b[0]).add(C).add(E),ie(A.x,A.y,A.z)):ie(J.x,J.y,0)}for(let Y=1;Y<=d;Y++)for(let J=0;J<K;J++){const fe=i?U(P[J],$[J],se):P[J];_?(C.copy(w.normals[Y]).multiplyScalar(fe.x),E.copy(w.binormals[Y]).multiplyScalar(fe.y),A.copy(b[Y]).add(C).add(E),ie(A.x,A.y,A.z)):ie(fe.x,fe.y,c/d*Y)}for(let Y=a-1;Y>=0;Y--){const J=Y/a,fe=n*Math.cos(J*Math.PI/2),oe=o*Math.sin(J*Math.PI/2)+l;for(let X=0,W=O.length;X<W;X++){const pe=U(O[X],te[X],oe);ie(pe.x,pe.y,c+fe)}for(let X=0,W=R.length;X<W;X++){const pe=R[X];ge=Z[X];for(let Se=0,Re=pe.length;Se<Re;Se++){const Le=U(pe[Se],ge[Se],oe);_?ie(Le.x,Le.y+b[d-1].y,b[d-1].x+fe):ie(Le.x,Le.y,c+fe)}}}z(),de();function z(){const Y=g.length/3;if(i){let J=0,fe=K*J;for(let oe=0;oe<ee;oe++){const X=I[oe];j(X[2]+fe,X[1]+fe,X[0]+fe)}J=d+a*2,fe=K*J;for(let oe=0;oe<ee;oe++){const X=I[oe];j(X[0]+fe,X[1]+fe,X[2]+fe)}}else{for(let J=0;J<ee;J++){const fe=I[J];j(fe[2],fe[1],fe[0])}for(let J=0;J<ee;J++){const fe=I[J];j(fe[0]+K*d,fe[1]+K*d,fe[2]+K*d)}}t.addGroup(Y,g.length/3-Y,0)}function de(){const Y=g.length/3;let J=0;re(O,J),J+=O.length;for(let fe=0,oe=R.length;fe<oe;fe++){const X=R[fe];re(X,J),J+=X.length}t.addGroup(Y,g.length/3-Y,1)}function re(Y,J){let fe=Y.length;for(;--fe>=0;){const oe=fe;let X=fe-1;X<0&&(X=Y.length-1);for(let W=0,pe=d+a*2;W<pe;W++){const Se=K*W,Re=K*(W+1),Le=J+oe+Se,ce=J+X+Se,ue=J+X+Re,Ce=J+oe+Re;B(Le,ce,ue,Ce)}}}function ie(Y,J,fe){h.push(Y),h.push(J),h.push(fe)}function j(Y,J,fe){G(Y),G(J),G(fe);const oe=g.length/3,X=v.generateTopUV(t,g,oe-3,oe-2,oe-1);ne(X[0]),ne(X[1]),ne(X[2])}function B(Y,J,fe,oe){G(Y),G(J),G(oe),G(J),G(fe),G(oe);const X=g.length/3,W=v.generateSideWallUV(t,g,X-6,X-3,X-2,X-1);ne(W[0]),ne(W[1]),ne(W[3]),ne(W[1]),ne(W[2]),ne(W[3])}function G(Y){g.push(h[Y*3+0]),g.push(h[Y*3+1]),g.push(h[Y*3+2])}function ne(Y){m.push(Y.x),m.push(Y.y)}}}toJSON(){const e=super.toJSON(),s=this.parameters.shapes,t=this.parameters.options;return ev(s,t,e)}static fromJSON(e,s){const t=[];for(let m=0,p=e.shapes.length;m<p;m++){const r=s[e.shapes[m]];t.push(r)}const g=e.options.extrudePath;return g!==void 0&&(e.options.extrudePath=new Iu[g.type]().fromJSON(g)),new Wo(t,e.options)}}const Q0={generateTopUV:function(S,e,s,t,g){const m=e[s*3],p=e[s*3+1],r=e[t*3],h=e[t*3+1],u=e[g*3],d=e[g*3+1];return[new Qe(m,p),new Qe(r,h),new Qe(u,d)]},generateSideWallUV:function(S,e,s,t,g,m){const p=e[s*3],r=e[s*3+1],h=e[s*3+2],u=e[t*3],d=e[t*3+1],c=e[t*3+2],i=e[g*3],n=e[g*3+1],o=e[g*3+2],l=e[m*3],a=e[m*3+1],f=e[m*3+2];return Math.abs(r-d)<Math.abs(p-u)?[new Qe(p,1-h),new Qe(u,1-c),new Qe(i,1-o),new Qe(l,1-f)]:[new Qe(r,1-h),new Qe(d,1-c),new Qe(n,1-o),new Qe(a,1-f)]}};function ev(S,e,s){if(s.shapes=[],Array.isArray(S))for(let t=0,g=S.length;t<g;t++){const m=S[t];s.shapes.push(m.uuid)}else s.shapes.push(S.uuid);return s.options=Object.assign({},e),e.extrudePath!==void 0&&(s.options.extrudePath=e.extrudePath.toJSON()),s}class qo extends kr{constructor(e=1,s=32,t=16,g=0,m=Math.PI*2,p=0,r=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:s,heightSegments:t,phiStart:g,phiLength:m,thetaStart:p,thetaLength:r},s=Math.max(3,Math.floor(s)),t=Math.max(2,Math.floor(t));const h=Math.min(p+r,Math.PI);let u=0;const d=[],c=new De,i=new De,n=[],o=[],l=[],a=[];for(let f=0;f<=t;f++){const v=[],b=f/t;let _=0;f==0&&p==0?_=.5/s:f==t&&h==Math.PI&&(_=-.5/s);for(let w=0;w<=s;w++){const E=w/s;c.x=-e*Math.cos(g+E*m)*Math.sin(p+b*r),c.y=e*Math.cos(p+b*r),c.z=e*Math.sin(g+E*m)*Math.sin(p+b*r),o.push(c.x,c.y,c.z),i.copy(c).normalize(),l.push(i.x,i.y,i.z),a.push(E+_,1-b),v.push(u++)}d.push(v)}for(let f=0;f<t;f++)for(let v=0;v<s;v++){const b=d[f][v+1],_=d[f][v],w=d[f+1][v],E=d[f+1][v+1];(f!==0||p>0)&&n.push(b,_,E),(f!==t-1||h<Math.PI)&&n.push(_,w,E)}this.setIndex(n),this.setAttribute("position",new tr(o,3)),this.setAttribute("normal",new tr(l,3)),this.setAttribute("uv",new tr(a,2))}static fromJSON(e){return new qo(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Xo extends kr{constructor(e=1,s=.4,t=8,g=6,m=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:s,radialSegments:t,tubularSegments:g,arc:m},t=Math.floor(t),g=Math.floor(g);const p=[],r=[],h=[],u=[],d=new De,c=new De,i=new De;for(let n=0;n<=t;n++)for(let o=0;o<=g;o++){const l=o/g*m,a=n/t*Math.PI*2;c.x=(e+s*Math.cos(a))*Math.cos(l),c.y=(e+s*Math.cos(a))*Math.sin(l),c.z=s*Math.sin(a),r.push(c.x,c.y,c.z),d.x=e*Math.cos(l),d.y=e*Math.sin(l),i.subVectors(c,d).normalize(),h.push(i.x,i.y,i.z),u.push(o/g),u.push(n/t)}for(let n=1;n<=t;n++)for(let o=1;o<=g;o++){const l=(g+1)*n+o-1,a=(g+1)*(n-1)+o-1,f=(g+1)*(n-1)+o,v=(g+1)*n+o;p.push(l,a,v),p.push(a,f,v)}this.setIndex(p),this.setAttribute("position",new tr(r,3)),this.setAttribute("normal",new tr(h,3)),this.setAttribute("uv",new tr(u,2))}static fromJSON(e){return new Xo(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class tv extends ir{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new _t(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class rv extends on{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Fu extends ir{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new _t(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gi,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nv extends Fu{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Qe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return or(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(s){this.ior=(1+.4*s)/(1-.4*s)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new _t(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new _t(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new _t(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class iv extends ir{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new _t(16777215),this.specular=new _t(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gi,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ms,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ws extends ir{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new _t(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gi,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class sv extends ir{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gi,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class ov extends ir{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new _t(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ms,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class av extends ir{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new _t(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gi,this.normalScale=new Qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class lv extends Pu{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}const uv={ShadowMaterial:tv,SpriteMaterial:x0,RawShaderMaterial:rv,ShaderMaterial:on,PointsMaterial:w0,MeshPhysicalMaterial:nv,MeshStandardMaterial:Fu,MeshPhongMaterial:iv,MeshToonMaterial:ws,MeshNormalMaterial:sv,MeshLambertMaterial:ov,MeshDepthMaterial:Cu,MeshDistanceMaterial:Lu,MeshBasicMaterial:ko,MeshMatcapMaterial:av,LineDashedMaterial:lv,LineBasicMaterial:Pu,Material:ir};ir.fromType=function(S){return new uv[S]};const eu={enabled:!1,files:{},add:function(S,e){this.enabled!==!1&&(this.files[S]=e)},get:function(S){if(this.enabled!==!1)return this.files[S]},remove:function(S){delete this.files[S]},clear:function(){this.files={}}};class cv{constructor(e,s,t){const g=this;let m=!1,p=0,r=0,h;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=s,this.onError=t,this.itemStart=function(d){r++,m===!1&&g.onStart!==void 0&&g.onStart(d,p,r),m=!0},this.itemEnd=function(d){p++,g.onProgress!==void 0&&g.onProgress(d,p,r),p===r&&(m=!1,g.onLoad!==void 0&&g.onLoad())},this.itemError=function(d){g.onError!==void 0&&g.onError(d)},this.resolveURL=function(d){return h?h(d):d},this.setURLModifier=function(d){return h=d,this},this.addHandler=function(d,c){return u.push(d,c),this},this.removeHandler=function(d){const c=u.indexOf(d);return c!==-1&&u.splice(c,2),this},this.getHandler=function(d){for(let c=0,i=u.length;c<i;c+=2){const n=u[c],o=u[c+1];if(n.global&&(n.lastIndex=0),n.test(d))return o}return null}}}const hv=new cv;class Uu{constructor(e){this.manager=e!==void 0?e:hv,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,s){const t=this;return new Promise(function(g,m){t.load(e,g,s,m)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const rn={};class dv extends Uu{constructor(e){super(e)}load(e,s,t,g){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const m=eu.get(e);if(m!==void 0)return this.manager.itemStart(e),setTimeout(()=>{s&&s(m),this.manager.itemEnd(e)},0),m;if(rn[e]!==void 0){rn[e].push({onLoad:s,onProgress:t,onError:g});return}rn[e]=[],rn[e].push({onLoad:s,onProgress:t,onError:g});const p=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),r=this.mimeType,h=this.responseType;fetch(p).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||u.body===void 0||u.body.getReader===void 0)return u;const d=rn[e],c=u.body.getReader(),i=u.headers.get("Content-Length"),n=i?parseInt(i):0,o=n!==0;let l=0;const a=new ReadableStream({start(f){v();function v(){c.read().then(({done:b,value:_})=>{if(b)f.close();else{l+=_.byteLength;const w=new ProgressEvent("progress",{lengthComputable:o,loaded:l,total:n});for(let E=0,C=d.length;E<C;E++){const A=d[E];A.onProgress&&A.onProgress(w)}f.enqueue(_),v()}})}}});return new Response(a)}else throw Error(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`)}).then(u=>{switch(h){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(d=>new DOMParser().parseFromString(d,r));case"json":return u.json();default:if(r===void 0)return u.text();{const c=/charset="?([^;"\s]*)"?/i.exec(r),i=c&&c[1]?c[1].toLowerCase():void 0,n=new TextDecoder(i);return u.arrayBuffer().then(o=>n.decode(o))}}}).then(u=>{eu.add(e,u);const d=rn[e];delete rn[e];for(let c=0,i=d.length;c<i;c++){const n=d[c];n.onLoad&&n.onLoad(u)}}).catch(u=>{const d=rn[e];if(d===void 0)throw this.manager.itemError(e),u;delete rn[e];for(let c=0,i=d.length;c<i;c++){const n=d[c];n.onError&&n.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class fv extends Sr{constructor(e,s=1){super(),this.isLight=!0,this.type="Light",this.color=new _t(e),this.intensity=s}dispose(){}copy(e,s){return super.copy(e,s),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const s=super.toJSON(e);return s.object.color=this.color.getHex(),s.object.intensity=this.intensity,this.groundColor!==void 0&&(s.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(s.object.distance=this.distance),this.angle!==void 0&&(s.object.angle=this.angle),this.decay!==void 0&&(s.object.decay=this.decay),this.penumbra!==void 0&&(s.object.penumbra=this.penumbra),this.shadow!==void 0&&(s.object.shadow=this.shadow.toJSON()),s}}const tu=new Jt,ru=new De,nu=new De;class pv{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Qe(512,512),this.map=null,this.mapPass=null,this.matrix=new Jt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new No,this._frameExtents=new Qe(1,1),this._viewportCount=1,this._viewports=[new Vt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const s=this.camera,t=this.matrix;ru.setFromMatrixPosition(e.matrixWorld),s.position.copy(ru),nu.setFromMatrixPosition(e.target.matrixWorld),s.lookAt(nu),s.updateMatrixWorld(),tu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(tu),t.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),t.multiply(s.projectionMatrix),t.multiply(s.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}const iu=new Jt,Ti=new De,So=new De;class mv extends pv{constructor(){super(new fr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Qe(4,2),this._viewportCount=6,this._viewports=[new Vt(2,1,1,1),new Vt(0,1,1,1),new Vt(3,1,1,1),new Vt(1,1,1,1),new Vt(3,0,1,1),new Vt(1,0,1,1)],this._cubeDirections=[new De(1,0,0),new De(-1,0,0),new De(0,0,1),new De(0,0,-1),new De(0,1,0),new De(0,-1,0)],this._cubeUps=[new De(0,1,0),new De(0,1,0),new De(0,1,0),new De(0,1,0),new De(0,0,1),new De(0,0,-1)]}updateMatrices(e,s=0){const t=this.camera,g=this.matrix,m=e.distance||t.far;m!==t.far&&(t.far=m,t.updateProjectionMatrix()),Ti.setFromMatrixPosition(e.matrixWorld),t.position.copy(Ti),So.copy(t.position),So.add(this._cubeDirections[s]),t.up.copy(this._cubeUps[s]),t.lookAt(So),t.updateMatrixWorld(),g.makeTranslation(-Ti.x,-Ti.y,-Ti.z),iu.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(iu)}}class Bu extends fv{constructor(e,s,t=0,g=1){super(e,s),this.isPointLight=!0,this.type="PointLight",this.distance=t,this.decay=g,this.shadow=new mv}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,s){return super.copy(e,s),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}const Gu="\\[\\]\\.:\\/",Yo="[^"+Gu+"]",gv="[^"+Gu.replace("\\.","")+"]";/((?:WC+[\/:])*)/.source.replace("WC",Yo);/(WCOD+)?/.source.replace("WCOD",gv);/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Yo);/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Yo);const su=new Qe;class yv{constructor(e=new Qe(1/0,1/0),s=new Qe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=s}set(e,s){return this.min.copy(e),this.max.copy(s),this}setFromPoints(e){this.makeEmpty();for(let s=0,t=e.length;s<t;s++)this.expandByPoint(e[s]);return this}setFromCenterAndSize(e,s){const t=su.copy(s).multiplyScalar(.5);return this.min.copy(e).sub(t),this.max.copy(e).add(t),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,s){return s.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,s){return s.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return su.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}class Tn{constructor(){this.type="ShapePath",this.color=new _t,this.subPaths=[],this.currentPath=null}moveTo(e,s){return this.currentPath=new ci,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,s),this}lineTo(e,s){return this.currentPath.lineTo(e,s),this}quadraticCurveTo(e,s,t,g){return this.currentPath.quadraticCurveTo(e,s,t,g),this}bezierCurveTo(e,s,t,g,m,p){return this.currentPath.bezierCurveTo(e,s,t,g,m,p),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,s){function t(v){const b=[];for(let _=0,w=v.length;_<w;_++){const E=v[_],C=new Di;C.curves=E.curves,b.push(C)}return b}function g(v,b){const _=b.length;let w=!1;for(let E=_-1,C=0;C<_;E=C++){let A=b[E],L=b[C],P=L.x-A.x,R=L.y-A.y;if(Math.abs(R)>Number.EPSILON){if(R<0&&(A=b[C],P=-P,L=b[E],R=-R),v.y<A.y||v.y>L.y)continue;if(v.y===A.y){if(v.x===A.x)return!0}else{const N=R*(v.x-A.x)-P*(v.y-A.y);if(N===0)return!0;if(N<0)continue;w=!w}}else{if(v.y!==A.y)continue;if(L.x<=v.x&&v.x<=A.x||A.x<=v.x&&v.x<=L.x)return!0}}return w}const m=On.isClockWise,p=this.subPaths;if(p.length===0)return[];if(s===!0)return t(p);let r,h,u;const d=[];if(p.length===1)return h=p[0],u=new Di,u.curves=h.curves,d.push(u),d;let c=!m(p[0].getPoints());c=e?!c:c;const i=[],n=[];let o=[],l=0,a;n[l]=void 0,o[l]=[];for(let v=0,b=p.length;v<b;v++)h=p[v],a=h.getPoints(),r=m(a),r=e?!r:r,r?(!c&&n[l]&&l++,n[l]={s:new Di,p:a},n[l].s.curves=h.curves,c&&l++,o[l]=[]):o[l].push({h,p:a[0]});if(!n[0])return t(p);if(n.length>1){let v=!1,b=0;for(let _=0,w=n.length;_<w;_++)i[_]=[];for(let _=0,w=n.length;_<w;_++){const E=o[_];for(let C=0;C<E.length;C++){const A=E[C];let L=!0;for(let P=0;P<n.length;P++)g(A.p,n[P].p)&&(_!==P&&b++,L?(L=!1,i[P].push(A)):v=!0);L&&i[_].push(A)}}b>0&&v===!1&&(o=i)}let f;for(let v=0,b=n.length;v<b;v++){u=n[v].s,d.push(u),f=o[v];for(let _=0,w=f.length;_<w;_++)u.holes.push(f[_].h)}return d}}const Gr=new Uint32Array(512),zr=new Uint32Array(512);for(let S=0;S<256;++S){const e=S-127;e<-27?(Gr[S]=0,Gr[S|256]=32768,zr[S]=24,zr[S|256]=24):e<-14?(Gr[S]=1024>>-e-14,Gr[S|256]=1024>>-e-14|32768,zr[S]=-e-1,zr[S|256]=-e-1):e<=15?(Gr[S]=e+15<<10,Gr[S|256]=e+15<<10|32768,zr[S]=13,zr[S|256]=13):e<128?(Gr[S]=31744,Gr[S|256]=64512,zr[S]=24,zr[S|256]=24):(Gr[S]=31744,Gr[S|256]=64512,zr[S]=13,zr[S|256]=13)}const zu=new Uint32Array(2048),zi=new Uint32Array(64),vv=new Uint32Array(64);for(let S=1;S<1024;++S){let e=S<<13,s=0;for(;(e&8388608)===0;)e<<=1,s-=8388608;e&=-8388609,s+=947912704,zu[S]=e|s}for(let S=1024;S<2048;++S)zu[S]=939524096+(S-1024<<13);for(let S=1;S<31;++S)zi[S]=S<<23;zi[31]=1199570944;zi[32]=2147483648;for(let S=33;S<63;++S)zi[S]=2147483648+(S-32<<23);zi[63]=3347054592;for(let S=1;S<64;++S)S!==32&&(vv[S]=1024);typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Io}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Io);class Vu{constructor(e,s,t){this.mount=g=>{this.clear=this.content(g)},this.remove=g=>{window.location.reload()},this.title=e,this.url=s,this.content=t,new Go}}class _r{constructor(e,s){this.toMove=[],this.groupCounter=1,this.dripCounter=0,this.speed=.015,this.speedIncrease=0,this.dripsPerSec=1,this.groupIncrease=0,this.startGroupingAt=0,this.frame=0,this.addVerticeToMelt=u=>{const d=Math.floor(Math.random()*this.yPoints.length);for(let c=0;c<Math.floor(u);c++)this.toMove.push(this.yPoints.splice(d,1))},this.move=()=>{this.frame++,this.speed+=this.speedIncrease,this.dripCounter+=this.dripsPerSec,this.dripCounter>=60&&(this.addVerticeToMelt(this.groupCounter),this.frame/60>=this.startGroupingAt&&(this.groupCounter+=this.groupIncrease),this.dripCounter=0),this.toMove.forEach(u=>{this.obj.geometry.attributes.position.array[u]-=this.speed}),this.obj.geometry.attributes.position.needsUpdate=!0},this.obj=e;const t=Array.from(Array(this.obj.geometry.attributes.position.array.length).keys());this.yPoints=t.filter(u=>u%3===1);const{speed:g,speedIncrease:m,dripsPerSec:p,groupIncrease:r,startGroupingAt:h}=s;this.speed=g,this.speedIncrease=m,this.dripsPerSec=p,this.groupIncrease=r,this.startGroupingAt=h}}var bv=new Vu("Confidence :)","confidence",S=>{let e=[];const s={speed:.2,speedIncrease:.005,dripsPerSec:5,groupIncrease:.8,startGroupingAt:3},t=new Go;t.background=new _t(16777215);const g=new fr(75,1,.1,1e3),m=new Bo;m.setSize(Kt,Kt),console.log("ASMON",S),S.appendChild(m.domElement);const p=new qo(22,22,22),r=new ws({color:"black"}),h=new wr(p,r),u=new wr(p,r),d=new Xo(120,18,36,30,-Math.PI),c=new ws({color:"black",flatShading:!0}),i=new wr(d,c);t.add(i),t.add(h),t.add(u),t.add(i),h.translateX(50),u.translateX(-50),h.translateY(80),u.translateY(80),i.translateY(20);const n=new Bu(16711680,2,210);n.position.set(0,40,50),t.add(n),g.position.z=220,e.push(new _r(h,s)),e.push(new _r(u,s));let o=0;const l=()=>{requestAnimationFrame(l),o++,o>=300&&e.push(new _r(i,s)),e.forEach(a=>{a.move()}),h.rotation.y+=.005,u.rotation.y+=.005,m.render(t,g)};l()});class Ss extends Uu{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,s,t,g){const m=this,p=new dv(m.manager);p.setPath(m.path),p.setRequestHeader(m.requestHeader),p.setWithCredentials(m.withCredentials),p.load(e,function(r){try{s(m.parse(r))}catch(h){g?g(h):console.error(h),m.manager.itemError(e)}},t,g)}parse(e){const s=this;function t($,se){if($.nodeType!==1)return;const z=_($);let de=!1,re=null;switch($.nodeName){case"svg":break;case"style":m($);break;case"g":se=o($,se);break;case"path":se=o($,se),$.hasAttribute("d")&&(re=g($));break;case"rect":se=o($,se),re=h($);break;case"polygon":se=o($,se),re=u($);break;case"polyline":se=o($,se),re=d($);break;case"circle":se=o($,se),re=c($);break;case"ellipse":se=o($,se),re=i($);break;case"line":se=o($,se),re=n($);break;case"defs":de=!0;break;case"use":se=o($,se);const B=($.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),G=$.viewportElement.getElementById(B);G?t(G,se):console.warn("SVGLoader: 'use node' references non-existent node id: "+B);break}re&&(se.fill!==void 0&&se.fill!=="none"&&re.color.setStyle(se.fill),E(re,te),P.push(re),re.userData={node:$,style:se});const ie=$.childNodes;for(let j=0;j<ie.length;j++){const B=ie[j];de&&B.nodeName!=="style"&&B.nodeName!=="defs"||t(B,se)}z&&(N.pop(),N.length>0?te.copy(N[N.length-1]):te.identity())}function g($){const se=new Tn,z=new Qe,de=new Qe,re=new Qe;let ie=!0,j=!1;const G=$.getAttribute("d").match(/[a-df-z][^a-df-z]*/ig);for(let ne=0,Y=G.length;ne<Y;ne++){const J=G[ne],fe=J.charAt(0),oe=J.slice(1).trim();ie===!0&&(j=!0,ie=!1);let X;switch(fe){case"M":X=a(oe);for(let W=0,pe=X.length;W<pe;W+=2)z.x=X[W+0],z.y=X[W+1],de.x=z.x,de.y=z.y,W===0?se.moveTo(z.x,z.y):se.lineTo(z.x,z.y),W===0&&re.copy(z);break;case"H":X=a(oe);for(let W=0,pe=X.length;W<pe;W++)z.x=X[W],de.x=z.x,de.y=z.y,se.lineTo(z.x,z.y),W===0&&j===!0&&re.copy(z);break;case"V":X=a(oe);for(let W=0,pe=X.length;W<pe;W++)z.y=X[W],de.x=z.x,de.y=z.y,se.lineTo(z.x,z.y),W===0&&j===!0&&re.copy(z);break;case"L":X=a(oe);for(let W=0,pe=X.length;W<pe;W+=2)z.x=X[W+0],z.y=X[W+1],de.x=z.x,de.y=z.y,se.lineTo(z.x,z.y),W===0&&j===!0&&re.copy(z);break;case"C":X=a(oe);for(let W=0,pe=X.length;W<pe;W+=6)se.bezierCurveTo(X[W+0],X[W+1],X[W+2],X[W+3],X[W+4],X[W+5]),de.x=X[W+2],de.y=X[W+3],z.x=X[W+4],z.y=X[W+5],W===0&&j===!0&&re.copy(z);break;case"S":X=a(oe);for(let W=0,pe=X.length;W<pe;W+=4)se.bezierCurveTo(l(z.x,de.x),l(z.y,de.y),X[W+0],X[W+1],X[W+2],X[W+3]),de.x=X[W+0],de.y=X[W+1],z.x=X[W+2],z.y=X[W+3],W===0&&j===!0&&re.copy(z);break;case"Q":X=a(oe);for(let W=0,pe=X.length;W<pe;W+=4)se.quadraticCurveTo(X[W+0],X[W+1],X[W+2],X[W+3]),de.x=X[W+0],de.y=X[W+1],z.x=X[W+2],z.y=X[W+3],W===0&&j===!0&&re.copy(z);break;case"T":X=a(oe);for(let W=0,pe=X.length;W<pe;W+=2){const Se=l(z.x,de.x),Re=l(z.y,de.y);se.quadraticCurveTo(Se,Re,X[W+0],X[W+1]),de.x=Se,de.y=Re,z.x=X[W+0],z.y=X[W+1],W===0&&j===!0&&re.copy(z)}break;case"A":X=a(oe,[3,4],7);for(let W=0,pe=X.length;W<pe;W+=7){if(X[W+5]==z.x&&X[W+6]==z.y)continue;const Se=z.clone();z.x=X[W+5],z.y=X[W+6],de.x=z.x,de.y=z.y,p(se,X[W],X[W+1],X[W+2],X[W+3],X[W+4],Se,z),W===0&&j===!0&&re.copy(z)}break;case"m":X=a(oe);for(let W=0,pe=X.length;W<pe;W+=2)z.x+=X[W+0],z.y+=X[W+1],de.x=z.x,de.y=z.y,W===0?se.moveTo(z.x,z.y):se.lineTo(z.x,z.y),W===0&&re.copy(z);break;case"h":X=a(oe);for(let W=0,pe=X.length;W<pe;W++)z.x+=X[W],de.x=z.x,de.y=z.y,se.lineTo(z.x,z.y),W===0&&j===!0&&re.copy(z);break;case"v":X=a(oe);for(let W=0,pe=X.length;W<pe;W++)z.y+=X[W],de.x=z.x,de.y=z.y,se.lineTo(z.x,z.y),W===0&&j===!0&&re.copy(z);break;case"l":X=a(oe);for(let W=0,pe=X.length;W<pe;W+=2)z.x+=X[W+0],z.y+=X[W+1],de.x=z.x,de.y=z.y,se.lineTo(z.x,z.y),W===0&&j===!0&&re.copy(z);break;case"c":X=a(oe);for(let W=0,pe=X.length;W<pe;W+=6)se.bezierCurveTo(z.x+X[W+0],z.y+X[W+1],z.x+X[W+2],z.y+X[W+3],z.x+X[W+4],z.y+X[W+5]),de.x=z.x+X[W+2],de.y=z.y+X[W+3],z.x+=X[W+4],z.y+=X[W+5],W===0&&j===!0&&re.copy(z);break;case"s":X=a(oe);for(let W=0,pe=X.length;W<pe;W+=4)se.bezierCurveTo(l(z.x,de.x),l(z.y,de.y),z.x+X[W+0],z.y+X[W+1],z.x+X[W+2],z.y+X[W+3]),de.x=z.x+X[W+0],de.y=z.y+X[W+1],z.x+=X[W+2],z.y+=X[W+3],W===0&&j===!0&&re.copy(z);break;case"q":X=a(oe);for(let W=0,pe=X.length;W<pe;W+=4)se.quadraticCurveTo(z.x+X[W+0],z.y+X[W+1],z.x+X[W+2],z.y+X[W+3]),de.x=z.x+X[W+0],de.y=z.y+X[W+1],z.x+=X[W+2],z.y+=X[W+3],W===0&&j===!0&&re.copy(z);break;case"t":X=a(oe);for(let W=0,pe=X.length;W<pe;W+=2){const Se=l(z.x,de.x),Re=l(z.y,de.y);se.quadraticCurveTo(Se,Re,z.x+X[W+0],z.y+X[W+1]),de.x=Se,de.y=Re,z.x=z.x+X[W+0],z.y=z.y+X[W+1],W===0&&j===!0&&re.copy(z)}break;case"a":X=a(oe,[3,4],7);for(let W=0,pe=X.length;W<pe;W+=7){if(X[W+5]==0&&X[W+6]==0)continue;const Se=z.clone();z.x+=X[W+5],z.y+=X[W+6],de.x=z.x,de.y=z.y,p(se,X[W],X[W+1],X[W+2],X[W+3],X[W+4],Se,z),W===0&&j===!0&&re.copy(z)}break;case"Z":case"z":se.currentPath.autoClose=!0,se.currentPath.curves.length>0&&(z.copy(re),se.currentPath.currentPoint.copy(z),ie=!0);break;default:console.warn(J)}j=!1}return se}function m($){if(!(!$.sheet||!$.sheet.cssRules||!$.sheet.cssRules.length))for(let se=0;se<$.sheet.cssRules.length;se++){const z=$.sheet.cssRules[se];if(z.type!==1)continue;const de=z.selectorText.split(/,/gm).filter(Boolean).map(re=>re.trim());for(let re=0;re<de.length;re++){const ie=Object.fromEntries(Object.entries(z.style).filter(([,j])=>j!==""));R[de[re]]=Object.assign(R[de[re]]||{},ie)}}}function p($,se,z,de,re,ie,j,B){if(se==0||z==0){$.lineTo(B.x,B.y);return}de=de*Math.PI/180,se=Math.abs(se),z=Math.abs(z);const G=(j.x-B.x)/2,ne=(j.y-B.y)/2,Y=Math.cos(de)*G+Math.sin(de)*ne,J=-Math.sin(de)*G+Math.cos(de)*ne;let fe=se*se,oe=z*z;const X=Y*Y,W=J*J,pe=X/fe+W/oe;if(pe>1){const Oe=Math.sqrt(pe);se=Oe*se,z=Oe*z,fe=se*se,oe=z*z}const Se=fe*W+oe*X,Re=(fe*oe-Se)/Se;let Le=Math.sqrt(Math.max(0,Re));re===ie&&(Le=-Le);const ce=Le*se*J/z,ue=-Le*z*Y/se,Ce=Math.cos(de)*ce-Math.sin(de)*ue+(j.x+B.x)/2,Ie=Math.sin(de)*ce+Math.cos(de)*ue+(j.y+B.y)/2,Ve=r(1,0,(Y-ce)/se,(J-ue)/z),Pe=r((Y-ce)/se,(J-ue)/z,(-Y-ce)/se,(-J-ue)/z)%(Math.PI*2);$.currentPath.absellipse(Ce,Ie,se,z,Ve,Ve+Pe,ie===0,de)}function r($,se,z,de){const re=$*z+se*de,ie=Math.sqrt($*$+se*se)*Math.sqrt(z*z+de*de);let j=Math.acos(Math.max(-1,Math.min(1,re/ie)));return $*de-se*z<0&&(j=-j),j}function h($){const se=b($.getAttribute("x")||0),z=b($.getAttribute("y")||0),de=b($.getAttribute("rx")||$.getAttribute("ry")||0),re=b($.getAttribute("ry")||$.getAttribute("rx")||0),ie=b($.getAttribute("width")),j=b($.getAttribute("height")),B=1-.551915024494,G=new Tn;return G.moveTo(se+de,z),G.lineTo(se+ie-de,z),(de!==0||re!==0)&&G.bezierCurveTo(se+ie-de*B,z,se+ie,z+re*B,se+ie,z+re),G.lineTo(se+ie,z+j-re),(de!==0||re!==0)&&G.bezierCurveTo(se+ie,z+j-re*B,se+ie-de*B,z+j,se+ie-de,z+j),G.lineTo(se+de,z+j),(de!==0||re!==0)&&G.bezierCurveTo(se+de*B,z+j,se,z+j-re*B,se,z+j-re),G.lineTo(se,z+re),(de!==0||re!==0)&&G.bezierCurveTo(se,z+re*B,se+de*B,z,se+de,z),G}function u($){function se(ie,j,B){const G=b(j),ne=b(B);re===0?de.moveTo(G,ne):de.lineTo(G,ne),re++}const z=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,de=new Tn;let re=0;return $.getAttribute("points").replace(z,se),de.currentPath.autoClose=!0,de}function d($){function se(ie,j,B){const G=b(j),ne=b(B);re===0?de.moveTo(G,ne):de.lineTo(G,ne),re++}const z=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,de=new Tn;let re=0;return $.getAttribute("points").replace(z,se),de.currentPath.autoClose=!1,de}function c($){const se=b($.getAttribute("cx")||0),z=b($.getAttribute("cy")||0),de=b($.getAttribute("r")||0),re=new ci;re.absarc(se,z,de,0,Math.PI*2);const ie=new Tn;return ie.subPaths.push(re),ie}function i($){const se=b($.getAttribute("cx")||0),z=b($.getAttribute("cy")||0),de=b($.getAttribute("rx")||0),re=b($.getAttribute("ry")||0),ie=new ci;ie.absellipse(se,z,de,re,0,Math.PI*2);const j=new Tn;return j.subPaths.push(ie),j}function n($){const se=b($.getAttribute("x1")||0),z=b($.getAttribute("y1")||0),de=b($.getAttribute("x2")||0),re=b($.getAttribute("y2")||0),ie=new Tn;return ie.moveTo(se,z),ie.lineTo(de,re),ie.currentPath.autoClose=!1,ie}function o($,se){se=Object.assign({},se);let z={};if($.hasAttribute("class")){const j=$.getAttribute("class").split(/\s/).filter(Boolean).map(B=>B.trim());for(let B=0;B<j.length;B++)z=Object.assign(z,R["."+j[B]])}$.hasAttribute("id")&&(z=Object.assign(z,R["#"+$.getAttribute("id")]));function de(j,B,G){G===void 0&&(G=function(Y){return Y.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),Y}),$.hasAttribute(j)&&(se[B]=G($.getAttribute(j))),z[j]&&(se[B]=G(z[j])),$.style&&$.style[j]!==""&&(se[B]=G($.style[j]))}function re(j){return Math.max(0,Math.min(1,b(j)))}function ie(j){return Math.max(0,b(j))}return de("fill","fill"),de("fill-opacity","fillOpacity",re),de("fill-rule","fillRule"),de("opacity","opacity",re),de("stroke","stroke"),de("stroke-opacity","strokeOpacity",re),de("stroke-width","strokeWidth",ie),de("stroke-linejoin","strokeLineJoin"),de("stroke-linecap","strokeLineCap"),de("stroke-miterlimit","strokeMiterLimit",ie),de("visibility","visibility"),se}function l($,se){return $-(se-$)}function a($,se,z){if(typeof $!="string")throw new TypeError("Invalid input: "+typeof $);const de={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},re=0,ie=1,j=2,B=3;let G=re,ne=!0,Y="",J="";const fe=[];function oe(Se,Re,Le){const ce=new SyntaxError('Unexpected character "'+Se+'" at index '+Re+".");throw ce.partial=Le,ce}function X(){Y!==""&&(J===""?fe.push(Number(Y)):fe.push(Number(Y)*Math.pow(10,Number(J)))),Y="",J=""}let W;const pe=$.length;for(let Se=0;Se<pe;Se++){if(W=$[Se],Array.isArray(se)&&se.includes(fe.length%z)&&de.FLAGS.test(W)){G=ie,Y=W,X();continue}if(G===re){if(de.WHITESPACE.test(W))continue;if(de.DIGIT.test(W)||de.SIGN.test(W)){G=ie,Y=W;continue}if(de.POINT.test(W)){G=j,Y=W;continue}de.COMMA.test(W)&&(ne&&oe(W,Se,fe),ne=!0)}if(G===ie){if(de.DIGIT.test(W)){Y+=W;continue}if(de.POINT.test(W)){Y+=W,G=j;continue}if(de.EXP.test(W)){G=B;continue}de.SIGN.test(W)&&Y.length===1&&de.SIGN.test(Y[0])&&oe(W,Se,fe)}if(G===j){if(de.DIGIT.test(W)){Y+=W;continue}if(de.EXP.test(W)){G=B;continue}de.POINT.test(W)&&Y[Y.length-1]==="."&&oe(W,Se,fe)}if(G===B){if(de.DIGIT.test(W)){J+=W;continue}if(de.SIGN.test(W)){if(J===""){J+=W;continue}J.length===1&&de.SIGN.test(J)&&oe(W,Se,fe)}}de.WHITESPACE.test(W)?(X(),G=re,ne=!1):de.COMMA.test(W)?(X(),G=re,ne=!0):de.SIGN.test(W)?(X(),G=ie,Y=W):de.POINT.test(W)?(X(),G=j,Y=W):oe(W,Se,fe)}return X(),fe}const f=["mm","cm","in","pt","pc","px"],v={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function b($){let se="px";if(typeof $=="string"||$ instanceof String)for(let de=0,re=f.length;de<re;de++){const ie=f[de];if($.endsWith(ie)){se=ie,$=$.substring(0,$.length-ie.length);break}}let z;return se==="px"&&s.defaultUnit!=="px"?z=v.in[s.defaultUnit]/s.defaultDPI:(z=v[se][s.defaultUnit],z<0&&(z=v[se].in*s.defaultDPI)),z*parseFloat($)}function _($){if(!($.hasAttribute("transform")||$.nodeName==="use"&&($.hasAttribute("x")||$.hasAttribute("y"))))return null;const se=w($);return N.length>0&&se.premultiply(N[N.length-1]),te.copy(se),N.push(se),se}function w($){const se=new ar,z=I;if($.nodeName==="use"&&($.hasAttribute("x")||$.hasAttribute("y"))){const de=b($.getAttribute("x")),re=b($.getAttribute("y"));se.translate(de,re)}if($.hasAttribute("transform")){const de=$.getAttribute("transform").split(")");for(let re=de.length-1;re>=0;re--){const ie=de[re].trim();if(ie==="")continue;const j=ie.indexOf("("),B=ie.length;if(j>0&&j<B){const G=ie.slice(0,j),ne=a(ie.slice(j+1));switch(z.identity(),G){case"translate":if(ne.length>=1){const Y=ne[0];let J=Y;ne.length>=2&&(J=ne[1]),z.translate(Y,J)}break;case"rotate":if(ne.length>=1){let Y=0,J=0,fe=0;Y=-ne[0]*Math.PI/180,ne.length>=3&&(J=ne[1],fe=ne[2]),O.identity().translate(-J,-fe),U.identity().rotate(Y),K.multiplyMatrices(U,O),O.identity().translate(J,fe),z.multiplyMatrices(O,K)}break;case"scale":if(ne.length>=1){const Y=ne[0];let J=Y;ne.length>=2&&(J=ne[1]),z.scale(Y,J)}break;case"skewX":ne.length===1&&z.set(1,Math.tan(ne[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":ne.length===1&&z.set(1,0,0,Math.tan(ne[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":ne.length===6&&z.set(ne[0],ne[2],ne[4],ne[1],ne[3],ne[5],0,0,1);break}}se.premultiply(z)}}return se}function E($,se){function z(ie){H.set(ie.x,ie.y,1).applyMatrix3(se),ie.set(H.x,H.y)}const de=C(se),re=$.subPaths;for(let ie=0,j=re.length;ie<j;ie++){const G=re[ie].curves;for(let ne=0;ne<G.length;ne++){const Y=G[ne];Y.isLineCurve?(z(Y.v1),z(Y.v2)):Y.isCubicBezierCurve?(z(Y.v0),z(Y.v1),z(Y.v2),z(Y.v3)):Y.isQuadraticBezierCurve?(z(Y.v0),z(Y.v1),z(Y.v2)):Y.isEllipseCurve&&(de&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),ee.set(Y.aX,Y.aY),z(ee),Y.aX=ee.x,Y.aY=ee.y,Y.xRadius*=A(se),Y.yRadius*=L(se))}}}function C($){return $.elements[1]!==0||$.elements[3]!==0}function A($){const se=$.elements;return Math.sqrt(se[0]*se[0]+se[1]*se[1])}function L($){const se=$.elements;return Math.sqrt(se[3]*se[3]+se[4]*se[4])}const P=[],R={},N=[],I=new ar,O=new ar,U=new ar,K=new ar,ee=new Qe,H=new De,te=new ar,Z=new DOMParser().parseFromString(e,"image/svg+xml");return t(Z.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:P,xml:Z.documentElement}}static createShapes(e){const t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},g={loc:t.ORIGIN,t:0};function m(a,f,v,b){const _=a.x,w=f.x,E=v.x,C=b.x,A=a.y,L=f.y,P=v.y,R=b.y,N=(C-E)*(A-P)-(R-P)*(_-E),I=(w-_)*(A-P)-(L-A)*(_-E),O=(R-P)*(w-_)-(C-E)*(L-A),U=N/O,K=I/O;if(O===0&&N!==0||U<=0||U>=1||K<0||K>1)return null;if(N===0&&O===0){for(let ee=0;ee<2;ee++)if(p(ee===0?v:b,a,f),g.loc==t.ORIGIN){const H=ee===0?v:b;return{x:H.x,y:H.y,t:g.t}}else if(g.loc==t.BETWEEN){const H=+(_+g.t*(w-_)).toPrecision(10),te=+(A+g.t*(L-A)).toPrecision(10);return{x:H,y:te,t:g.t}}return null}else{for(let te=0;te<2;te++)if(p(te===0?v:b,a,f),g.loc==t.ORIGIN){const Z=te===0?v:b;return{x:Z.x,y:Z.y,t:g.t}}const ee=+(_+U*(w-_)).toPrecision(10),H=+(A+U*(L-A)).toPrecision(10);return{x:ee,y:H,t:U}}}function p(a,f,v){const b=v.x-f.x,_=v.y-f.y,w=a.x-f.x,E=a.y-f.y,C=b*E-w*_;if(a.x===f.x&&a.y===f.y){g.loc=t.ORIGIN,g.t=0;return}if(a.x===v.x&&a.y===v.y){g.loc=t.DESTINATION,g.t=1;return}if(C<-Number.EPSILON){g.loc=t.LEFT;return}if(C>Number.EPSILON){g.loc=t.RIGHT;return}if(b*w<0||_*E<0){g.loc=t.BEHIND;return}if(Math.sqrt(b*b+_*_)<Math.sqrt(w*w+E*E)){g.loc=t.BEYOND;return}let A;b!==0?A=w/b:A=E/_,g.loc=t.BETWEEN,g.t=A}function r(a,f){const v=[],b=[];for(let _=1;_<a.length;_++){const w=a[_-1],E=a[_];for(let C=1;C<f.length;C++){const A=f[C-1],L=f[C],P=m(w,E,A,L);P!==null&&v.find(R=>R.t<=P.t+Number.EPSILON&&R.t>=P.t-Number.EPSILON)===void 0&&(v.push(P),b.push(new Qe(P.x,P.y)))}}return b}function h(a,f,v){const b=new Qe;f.getCenter(b);const _=[];return v.forEach(w=>{w.boundingBox.containsPoint(b)&&r(a,w.points).forEach(C=>{_.push({identifier:w.identifier,isCW:w.isCW,point:C})})}),_.sort((w,E)=>w.point.x-E.point.x),_}function u(a,f,v,b,_){(_==null||_==="")&&(_="nonzero");const w=new Qe;a.boundingBox.getCenter(w);const E=[new Qe(v,w.y),new Qe(b,w.y)],C=h(E,a.boundingBox,f);C.sort((I,O)=>I.point.x-O.point.x);const A=[],L=[];C.forEach(I=>{I.identifier===a.identifier?A.push(I):L.push(I)});const P=A[0].point.x,R=[];let N=0;for(;N<L.length&&L[N].point.x<P;)R.length>0&&R[R.length-1]===L[N].identifier?R.pop():R.push(L[N].identifier),N++;if(R.push(a.identifier),_==="evenodd"){const I=R.length%2===0,O=R[R.length-2];return{identifier:a.identifier,isHole:I,for:O}}else if(_==="nonzero"){let I=!0,O=null,U=null;for(let K=0;K<R.length;K++){const ee=R[K];I?(U=f[ee].isCW,I=!1,O=ee):U!==f[ee].isCW&&(U=f[ee].isCW,I=!0)}return{identifier:a.identifier,isHole:I,for:O}}else console.warn('fill-rule: "'+_+'" is currently not implemented.')}let d=0,c=999999999,i=-999999999,n=e.subPaths.map(a=>{const f=a.getPoints();let v=-999999999,b=999999999,_=-999999999,w=999999999;for(let E=0;E<f.length;E++){const C=f[E];C.y>v&&(v=C.y),C.y<b&&(b=C.y),C.x>_&&(_=C.x),C.x<w&&(w=C.x)}return i<=_&&(i=_+1),c>=w&&(c=w-1),{curves:a.curves,points:f,isCW:On.isClockWise(f),identifier:d++,boundingBox:new yv(new Qe(w,b),new Qe(_,v))}});n=n.filter(a=>a.points.length>1);const o=n.map(a=>u(a,n,c,i,e.userData.style.fillRule)),l=[];return n.forEach(a=>{if(!o[a.identifier].isHole){const v=new Di;v.curves=a.curves,o.filter(_=>_.isHole&&_.for===a.identifier).forEach(_=>{const w=n[_.identifier],E=new ci;E.curves=w.curves,v.holes.push(E)}),l.push(v)}}),l}static getStrokeStyle(e,s,t,g,m){return e=e!==void 0?e:1,s=s!==void 0?s:"#000",t=t!==void 0?t:"miter",g=g!==void 0?g:"butt",m=m!==void 0?m:4,{strokeColor:s,strokeWidth:e,strokeLineJoin:t,strokeLineCap:g,strokeMiterLimit:m}}static pointsToStroke(e,s,t,g){const m=[],p=[],r=[];if(Ss.pointsToStrokeWithBuffers(e,s,t,g,m,p,r)===0)return null;const h=new kr;return h.setAttribute("position",new tr(m,3)),h.setAttribute("normal",new tr(p,3)),h.setAttribute("uv",new tr(r,2)),h}static pointsToStrokeWithBuffers(e,s,t,g,m,p,r,h){const u=new Qe,d=new Qe,c=new Qe,i=new Qe,n=new Qe,o=new Qe,l=new Qe,a=new Qe,f=new Qe,v=new Qe,b=new Qe,_=new Qe,w=new Qe,E=new Qe,C=new Qe,A=new Qe,L=new Qe;t=t!==void 0?t:12,g=g!==void 0?g:.001,h=h!==void 0?h:0,e=J(e);const P=e.length;if(P<2)return 0;const R=e[0].equals(e[P-1]);let N,I=e[0],O;const U=s.strokeWidth/2,K=1/(P-1);let ee=0,H,te,Z,ge,$=!1,se=0,z=h*3,de=h*2;re(e[0],e[1],u).multiplyScalar(U),a.copy(e[0]).sub(u),f.copy(e[0]).add(u),v.copy(a),b.copy(f);for(let fe=1;fe<P;fe++){N=e[fe],fe===P-1?R?O=e[1]:O=void 0:O=e[fe+1];const oe=u;if(re(I,N,oe),c.copy(oe).multiplyScalar(U),_.copy(N).sub(c),w.copy(N).add(c),H=ee+K,te=!1,O!==void 0){re(N,O,d),c.copy(d).multiplyScalar(U),E.copy(N).sub(c),C.copy(N).add(c),Z=!0,c.subVectors(O,I),oe.dot(c)<0&&(Z=!1),fe===1&&($=Z),c.subVectors(O,N),c.normalize();const X=Math.abs(oe.dot(c));if(X!==0){const W=U/X;c.multiplyScalar(-W),i.subVectors(N,I),n.copy(i).setLength(W).add(c),A.copy(n).negate();const pe=n.length(),Se=i.length();i.divideScalar(Se),o.subVectors(O,N);const Re=o.length();switch(o.divideScalar(Re),i.dot(A)<Se&&o.dot(A)<Re&&(te=!0),L.copy(n).add(N),A.add(N),ge=!1,te?Z?(C.copy(A),w.copy(A)):(E.copy(A),_.copy(A)):B(),s.strokeLineJoin){case"bevel":G(Z,te,H);break;case"round":ne(Z,te),Z?j(N,_,E,H,0):j(N,C,w,H,1);break;case"miter":case"miter-clip":default:const Le=U*s.strokeMiterLimit/pe;if(Le<1)if(s.strokeLineJoin!=="miter-clip"){G(Z,te,H);break}else ne(Z,te),Z?(o.subVectors(L,_).multiplyScalar(Le).add(_),l.subVectors(L,E).multiplyScalar(Le).add(E),ie(_,H,0),ie(o,H,0),ie(N,H,.5),ie(N,H,.5),ie(o,H,0),ie(l,H,0),ie(N,H,.5),ie(l,H,0),ie(E,H,0)):(o.subVectors(L,w).multiplyScalar(Le).add(w),l.subVectors(L,C).multiplyScalar(Le).add(C),ie(w,H,1),ie(o,H,1),ie(N,H,.5),ie(N,H,.5),ie(o,H,1),ie(l,H,1),ie(N,H,.5),ie(l,H,1),ie(C,H,1));else te?(Z?(ie(f,ee,1),ie(a,ee,0),ie(L,H,0),ie(f,ee,1),ie(L,H,0),ie(A,H,1)):(ie(f,ee,1),ie(a,ee,0),ie(L,H,1),ie(a,ee,0),ie(A,H,0),ie(L,H,1)),Z?E.copy(L):C.copy(L)):Z?(ie(_,H,0),ie(L,H,0),ie(N,H,.5),ie(N,H,.5),ie(L,H,0),ie(E,H,0)):(ie(w,H,1),ie(L,H,1),ie(N,H,.5),ie(N,H,.5),ie(L,H,1),ie(C,H,1)),ge=!0;break}}else B()}else B();!R&&fe===P-1&&Y(e[0],v,b,Z,!0,ee),ee=H,I=N,a.copy(E),f.copy(C)}if(!R)Y(N,_,w,Z,!1,H);else if(te&&m){let fe=L,oe=A;$!==Z&&(fe=A,oe=L),Z?(ge||$)&&(oe.toArray(m,0*3),oe.toArray(m,3*3),ge&&fe.toArray(m,1*3)):(ge||!$)&&(oe.toArray(m,1*3),oe.toArray(m,3*3),ge&&fe.toArray(m,0*3))}return se;function re(fe,oe,X){return X.subVectors(oe,fe),X.set(-X.y,X.x).normalize()}function ie(fe,oe,X){m&&(m[z]=fe.x,m[z+1]=fe.y,m[z+2]=0,p&&(p[z]=0,p[z+1]=0,p[z+2]=1),z+=3,r&&(r[de]=oe,r[de+1]=X,de+=2)),se+=3}function j(fe,oe,X,W,pe){u.copy(oe).sub(fe).normalize(),d.copy(X).sub(fe).normalize();let Se=Math.PI;const Re=u.dot(d);Math.abs(Re)<1&&(Se=Math.abs(Math.acos(Re))),Se/=t,c.copy(oe);for(let Le=0,ce=t-1;Le<ce;Le++)i.copy(c).rotateAround(fe,Se),ie(c,W,pe),ie(i,W,pe),ie(fe,W,.5),c.copy(i);ie(i,W,pe),ie(X,W,pe),ie(fe,W,.5)}function B(){ie(f,ee,1),ie(a,ee,0),ie(_,H,0),ie(f,ee,1),ie(_,H,1),ie(w,H,0)}function G(fe,oe,X){oe?fe?(ie(f,ee,1),ie(a,ee,0),ie(_,H,0),ie(f,ee,1),ie(_,H,0),ie(A,H,1),ie(_,X,0),ie(E,X,0),ie(A,X,.5)):(ie(f,ee,1),ie(a,ee,0),ie(w,H,1),ie(a,ee,0),ie(A,H,0),ie(w,H,1),ie(w,X,1),ie(C,X,0),ie(A,X,.5)):fe?(ie(_,X,0),ie(E,X,0),ie(N,X,.5)):(ie(w,X,1),ie(C,X,0),ie(N,X,.5))}function ne(fe,oe){oe&&(fe?(ie(f,ee,1),ie(a,ee,0),ie(_,H,0),ie(f,ee,1),ie(_,H,0),ie(A,H,1),ie(_,ee,0),ie(N,H,.5),ie(A,H,1),ie(N,H,.5),ie(E,ee,0),ie(A,H,1)):(ie(f,ee,1),ie(a,ee,0),ie(w,H,1),ie(a,ee,0),ie(A,H,0),ie(w,H,1),ie(w,ee,1),ie(A,H,0),ie(N,H,.5),ie(N,H,.5),ie(A,H,0),ie(C,ee,1)))}function Y(fe,oe,X,W,pe,Se){switch(s.strokeLineCap){case"round":pe?j(fe,X,oe,Se,.5):j(fe,oe,X,Se,.5);break;case"square":if(pe)u.subVectors(oe,fe),d.set(u.y,-u.x),c.addVectors(u,d).add(fe),i.subVectors(d,u).add(fe),W?(c.toArray(m,1*3),i.toArray(m,0*3),i.toArray(m,3*3)):(c.toArray(m,1*3),c.toArray(m,3*3),i.toArray(m,0*3));else{u.subVectors(X,fe),d.set(u.y,-u.x),c.addVectors(u,d).add(fe),i.subVectors(d,u).add(fe);const Re=m.length;W?(c.toArray(m,Re-1*3),i.toArray(m,Re-2*3),i.toArray(m,Re-4*3)):(c.toArray(m,Re-2*3),i.toArray(m,Re-1*3),i.toArray(m,Re-4*3))}break}}function J(fe){let oe=!1;for(let W=1,pe=fe.length-1;W<pe;W++)if(fe[W].distanceTo(fe[W+1])<g){oe=!0;break}if(!oe)return fe;const X=[];X.push(fe[0]);for(let W=1,pe=fe.length-1;W<pe;W++)fe[W].distanceTo(fe[W+1])>=g&&X.push(fe[W]);return X.push(fe[fe.length-1]),X}}}var _v=new Vu("Fragment","fragment",S=>{let e=[];const s={speed:.1,speedIncrease:.08,dripsPerSec:10,groupIncrease:2,startGroupingAt:8},t=new Go;t.background=new _t(16777215);const g=new fr(75,1,.1,1e3),m=new Bo({antialias:!0});m.setSize(Kt,Kt),S.appendChild(m.domElement);const p=new Ss,r=new Li;p.load("/p5-showcase/images/fragment.svg",function(i){const n=i.paths;for(let o=0;o<n.length;o++){const l=n[o],a=new ws({color:"black",depthWrite:!1,wireframe:!0}),f=Ss.createShapes(l);for(let v=0;v<f.length;v++){const b=f[v],_={steps:1,depth:60,bevelEnabled:!0,bevelThickness:10,bevelSize:1,bevelOffset:0,bevelSegments:1},w=new Wo(b,_),E=new wr(w,a);r.add(E)}}r.translateX(-480),r.translateY(250),r.rotateX(Math.PI),t.add(r),e.push(new _r(r.children[5],s)),e.push(new _r(r.children[6],s)),e.push(new _r(r.children[7],s)),e.push(new _r(r.children[8],s))},function(i){console.log(i.loaded/i.total*100+"% loaded")},function(i){console.log("An error happened",i)});const h=new Bu(16711680,2,210);h.position.set(0,40,50),t.add(h),g.position.z=820;let u=!1;const d=()=>{setTimeout(()=>{e.push(new _r(r.children[0],s)),e.push(new _r(r.children[1],s)),e.push(new _r(r.children[2],s)),e.push(new _r(r.children[3],s)),e.push(new _r(r.children[4],s))},3500),u=!0},c=()=>{requestAnimationFrame(c),u||d(),e.forEach(i=>{i.move()}),m.render(t,g)};c()});const xv=[xd,wd,Sd,Md,Ed,Td,Ad,bv,_v];var wv=S=>xv.find(e=>e.url===S);export{wv as default,xv as pieces};
